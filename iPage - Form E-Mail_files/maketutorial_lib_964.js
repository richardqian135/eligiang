/*!
 * WalkMe
 * http://www.walkme.com/
 *
 * Copyright 2012, WalkMe LTD
 */
function ClassMakeTutorial(){function e(e,t,n,r,i,o,a,s,c,d,f,p){function g(){N=o.addScript,h(),(!s||s.isSelfHosted)&&(Y=!1)}function h(){window.wmPlaySnippet?(M=window.wmPlaySnippet,z=!0,H=!0):window.wmPreviewSnippet?(M=window.wmPreviewSnippet,$=!0,H=!0):window.wmSnippet&&(M=window.wmSnippet,H=!0)}function m(t){var n=e.Logger.timer("init data files and widget");F=0;var r=!($||z);if(void 0!=window.wm_walkmeLibLoaded)_walkMe=_makeTutorial=e,window._walkmeInternals.continueLoad=function(){v(t)},wm_walkmeLibLoaded(e);else{if(!H)return;window.document.dontLoadTriangle&&r?(window._walkmeInternals.blocked=!0,window._walkmeInternals.continueLoad=function(){v(t)}):v(t)}n.stop()}function v(t){var n=a.getSettingsFile();n&&(e.setPetaServerName(n.PetaServer),e.setCdnServer(n.CdnServerName),n.IsInEditor&&e.setIsInEditor(!0),e.setUserGuid(n.UserGuids&&n.UserGuids[0]),O=n.PlayerServer,r.init(),z?n.data&&(e.setSurveysForRecorder("[]"),e.setSiteConfig(n.data.siteConfig),e.setTutorialsForEditor(n.data.tutorials,n.UserGuids[0]),setTimeout(function(){e.dataFinishedLoading(!0,!0)},1)):y(n,function(e){b(n,e)}))}function y(t,r){var i=f.Data;if(null==i||void 0==i.Permutations)r();else{var o=i.DefaultPermutation,a=i.Permutations;n.setPermutations(a,o);var s=w(i.ActivationRules);n.initGetPermutation(s,function(t){var o=n.getPermutationById(t);return 0===o.LoadWalkMe?(Za("WalkMe ABTesting - WalkMe Loading canceled. Stopping execution"),void e.removeWalkMe("AbTesting - LoadWalkMe is false")):(e.appendWalkMeConfigData(i),void r(t))})}}function w(e){for(var t=0;t<e.length;t++){var n=e[t],r=i.evaluate(n.Settings.conditionTree);if(r===!0){var o=n.PermutationIds[0];return o}}return null}function b(e,t){for(var n=e.DataFiles,r=0;r<n.length;r++)if(n[r].metaData)return void S(e,n[r]);T(e.DataFiles,e.WidgetFile,t)}function S(e,t){function n(t,n,r){var i=[];t=M.fixAutoDetectPaths(t);for(var o=0;o<e.DataFiles.length;o++)1==e.DataFiles[o].metaData?i=i.concat(t.DataFiles):i.push(e.DataFiles[o]);T(i,e.WidgetFile)}d.loadTextFile(t.url,"fixedCallback",n,void 0,!1)}function T(e,t,n){B=l(u(e)),I(t),C(e,n)}function I(e){if(s&&s.localWidgetUrl)return void(L=s.localWidgetUrl);if(window.localStorage){var t=localStorage.getItem(j);if(t)return void(L=t)}L=e}function C(e,t){U=c.fixLanguageUrlInDataFiles(l(u(e)),W),void 0!==t&&t>-1&&(U=E(U,t)),c.setLanguages(U),A()}function E(e,t){for(var n=0;n<e.length;n++)e[n].url=k(e[n],t);return e}function k(e,t){var n=e.url,r=".js";return n.substring(0,n.length-r.length)+"_"+t+r}function _(e){fi("dataFileStartLoad"),N(e)}function x(e){fi("widgetStartLoad"),p.async("WidgetLoad",[e],function(){N(e)})}function A(){try{var t=U[F].url;V=void 0!=U[F].isHidden?U[F].isHidden:!1,_(t)}catch(n){e.Logger.error("faild to load data file: "+n)}}function P(){e.dataFinishedLoading()&&(W?(W=!1,G&&G(!0)):x(L))}function D(e){var t={};t=a.getSettingsFile();var n;o.isLocalStorageEnabled()&&(n=window.localStorage.getItem(R)),n&&(t.PostLibJsFile=n),t.PostLibJsFile&&""!=t.PostLibJsFile?(window.walkme_post_lib_loaded=function(){e()},fi("postLibStartLoad"),N(t.PostLibJsFile)):e()}this.LocalSVNRevision="$Rev$";var N,L,O,M,R="wm-postlibjs",j="wm-customWidgetUrl",F=null,B=[],U=[],G=null,V=!1,W=!1,Q=!1,H=!1,$=!1,z=!1,Y=!0;this.isNextDataPackageIsHidden=function(){return V},this.getPlayerServer=function(){return O},this.changeLanguage=function(t,r){e.stopTutorial(void 0,!0);var i=c.changeLanguage(t,B);if(i){e.releaseLaunchers(void 0,void 0,!0),e.releaseShoutOuts(),e.releaseShoutOutBars(),G=r,F=0,W=!0,Q=!0;var o=n.getPermutation();C(B,o)}else r(i)},this.isNewLanguage=function(){return Q},this.startInitializer=function(e){D(function(){m(e)})},this.dataFileLoadedWrapper=function(){if(fi("dataFileEndLoad"),V=!1,F++,Q=!1,F==U.length){var e=Us.get("CustomVariableAuditor");_walkmeInternals.bind("SfVarsExposed",e.handleSfVars),Mf("sfVars")?Kl.extractSalesForceVars(P):P()}else A()},g.apply(null,arguments)}function t(){Wl=(new Date).getTime()}function n(){var e=this;e.STEP_STATUS={SupposedToShow:0,Shown:1,Performed:2,SkippedNotFound:3,SkippedByCondition:4,MovedBack:5,Exited:6,FakeFound:7,SkippedByTutorialCondition:8,SkippedStartedFromBiggerStep:9,NonValidActionStep:10,SkippedByActionStep:11},e.STEP_ACTION={Redirect:"redirect",PlayStep:"playStep",WaitForCondition:"waitForCond",Branch:"branchWt",StopWt:"stopWt",Delay:"delay",Refresh:"refresh",OpenPlayerMenu:"openPlayerMenu",SetWalkMeData:"setWalkMeData",PassOwnership:"passOwnership"},e.STEP_TYPE={Normal:0,Popup:1,Action:2},e.SOURCES={production:0,preview:1,play:2,test:3,success:32},e.TIME_PERIODS={OneHourSeconds:3600,DaySeconds:86400},e.STORAGE_KEYS={lastGetDataTime:"wm-lgt"},e.STORAGE_TYPE={Cookie:"cookie",CrossDomain:"crossdomain",JStorage:"jstorage",HiddenIframe:"hiddeniframestorage",CrossDomainLocalStorage:"crossdomain_ls",CrossDomainCookies:"crossdomain_ck",Extension:"extension",ProxyIframe:"proxy"},e.PLATFORM={Web:1,iOS:2},e.STEP_PLAY_INITIATOR_ENUM={NONE:0,WIDGET:1,API:2,LAUNCHER:3,TASK:4,BRANCHING:5,AUTOSTART:6,PERMALINK:7,BBCODE:8,CHAT_AGENT:9,SHOUTOUT:10,WALKTHRU:11,STEP:12,ATTENTION_GRABBER:13},e.AUDIT_TYPE={OPEN_TICKET:100},e.PLAY_MODE={Widget:0,LightBox:1,NewTab:2,SameTab:3},e.MOBILE_COMMANDS={VIEW:{append:1e3,show:1001,hide:1002,remove:1003},ACTION:{rateApp:2e3,playVideo:2001,browseToPage:2001,openSettings:2002,libAction:2003},GET_DATA:{storageVar:3e3,systemInfo:3001,permissions:3002}},e.MOBILE_COMMAND_NAME="message",e.EVENT_SENDER_EVENT_TYPES={Close:"close",Open:"open",Play:"play",PlayFailed:"playFailed",Click:"click",Search:"search",Complete:"complete",GoalReached:"goalReach",Performance:"performanceIssue",Submitted:"submitted",Loaded:"loaded",Visible:"visible",Draw:"draw"},e.EVENT_SENDER_ACTION_NAMES={Play:"play",Open:"open"},e.EVENT_SENDER_STEP_ACTION_NAMES={Redirect:0,PlayStep:1,WaitForCondition:2,Branch:3,StopWt:4,Delay:5,Refresh:6,OpenPlayerMenu:7,SetWalkMeData:8,PassOwnership:9},e.EVENT_SENDER_ACTION_ENTITY_TYPES={Menu:"menu",Walkthru:"wt",Shuttle:"shuttle",Survey:"survey",ShoutOut:"shoutout",Resource:"resource",Content:"resource",None:"none"},e.EVENT_SENDER_IOS_ACTION_TYPES={None:"none",RateApp:"rateApp",OpenSettings:"openSettings",BrowseToPage:"browseToPage",PlayVideo:"playVideo"},e.EVENT_SENDER_EVENT_APPS={None:"none",Player:"player",Walkthru:"wt",Step:"step",ShoutOut:"shoutout",ShoutOutBar:"shoutoutBar",Shuttle:"shuttle",Survey:"survey",Question:"question",Content:"resource",Launcher:"launcher",Task:"task",FindElement:"findElement",WidgetSearch:"widgetSearch",Ticket:"openTicket",Walkme:"walkme",AbTesting:"abTesting"},e.EVENT_SENDER_AB_TESTING_DRAW_REASONS={Draw:0,ActivationRule:1},e.EVENT_SENDER_CANCEL_REASONS={Xclick:"X Clicked"},e.DEPLOYABLE_TYPE={Tutorial:0,Task:1,Launcher:2,LabelGroup:3,Survey:4,AbExperiment:5,Category:6,Content:7,Collection:8,Shuttle:9,Tag:10,ShoutOut:14,ShoutOutBar:15,ConditionBlock:17,BusinessSolutions:19},e.SAFESTART_ACTION={ErrorShown:0,PopupShown:1,AutoRedirect:2,StayClicked:3,RedirectClicked:4,FailOnUrl:5},e.FEATURES={DisableWidgetOpenFullUrl:"disableWidgetOpenFullUrl",EventSenderDontSendPageUrl:"dontSendPageUrl",EventSenderDontSendPageTitle:"dontSendPageTitle",StickyCustomVars:"stickyCustomVars",DisableEventCollection:"disableEventCollection"},e.EVENTS={PlayerClicked:"wmPlayerClicked",ApiWasCalled:"wmApiCalled",LauncherClicked:"wmLauncherClicked",AutoStartActivated:"wmAutoStartActivated",PermalinkClicked:"wmPermalinkClicked",WidgetOpening:"wmWidgetOpening",GoalReached:"GoalCompleted",AbExperimentLinkedGoalReached:"wmLinkedGoalReached"},e.WINDOW_CUSTOM_DATA_TYPE={Cookie:0,Var:1},e.VALUE_CALCULATOR_TYPE={Cookie:"cookie",Variable:"var",JQuery:"jquery"},e.DEFAULT_REACTION_TIME=500,e.FLOW_STEP_TYPE={UI:"UI",Action:"Action"},e.FLOW_ACTION_TYPE={Branch:"Branch",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",Redirect:"Redirect",Refresh:"Refresh",SetData:"SetData",Split:"Split",Stop:"Stop",WaitForCondition:"WaitForCondition"},e.FLOW_UIELEMENT_TYPE={Element:"Element",Popup:"Popup"},e.FLOW_TRIGGER_TYPE={Click:"Click",Hover:"Hover",Button:"Button",Text:"Text",Delay:"Delay",Refresh:"Refresh"},e.FLOW_TRIGGER_WORKSPACE=".flow",e.ELEMENT_STICKY_TYPE={ONCE:0,SOFT:1,STRONG:2},e.CONDITION_SHOW_STICKY_TYPE={ONCE:0,CONTINUE:1},e.VISIBILITY_STATE={VISIBLE:0,HIDDEN:1}}function r(e){var t=this,n={platform:e.PLATFORM.Web};t.get=function(e){return window._walkmeConfig&&window._walkmeConfig[e]?window._walkmeConfig[e]:n[e]}}function i(e,t){function n(){r=t.get("platform")}this.LocalSVNRevision="$Rev: 5648 $";var r,i=this;i.register=function(e,t){e==r&&t()},n.apply(null,arguments)}function o(){function e(e){u=e,u.__wmoop__=o,o.Virtual=new s(o),o.Prop=new a(o)}function t(){for(var e in h){if(!c.IsVirtual(e))throw"Cannot override non-virtual method ["+e+"]. of class : "+c;c.DoOverride(e,h[e])}}function n(){var e={},t={},t=c.GetOriginalFunctions();for(var n in t){var r=t[n];e[n]=r}return e}function r(){var e=c.GetPublics();for(var t in e){var n=e[t];o.Public(t,n)}}function i(e,t,n){function r(){return g[e](arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19])}return n?(g[e]=t,r):t}var o=this;o.LocalSVNRevision="$Rev$";var u,l=null,c=null,d={},f={},p={},g={},h={},m={};o.Extends=function(e,i,a,s,u,d,f){l=new e(i,a,s,u,d,f),c=l.__wmoop__,r(),t();var p=n();o._base=p},o.Override=function(e,t){return h[e]=t,t},o.DoOverride=function(e,t){g[e]=t},o.IsVirtual=function(e){return void 0!==g[e]},o.GetOriginalFunctions=function(){return p},o.Public=function(e,t,n){var r=i(e,t,n);return p[e]=t,u[e]=r,d[e]=r,r},o.Protected=function(e,t,n){var r=i(e,t,n);return p[e]=t,f[e]=r,r},o.GetProperties=function(){return m},o.GetPublics=function(){return d},o.GetProtecteds=function(){return f},e.apply(null,arguments)}function a(){function e(e){n=e}function t(e,t){function r(t){return void 0===t?n.GetProperties()[e]:void(n.GetProperties()[e]=t)}return n.GetProperties()[e]=t,r}var n,r=this;r.Public=function(e,r){var i=t(e,r);return n.Public(e,i),i},r.Protected=function(e,r){var i=t(e,r);return n.Protected(e,i),i},r.Private=function(e,n){var r=t(e,n);return r},e.apply(null,arguments)}function s(){function e(e){n=e}function t(e){function t(){throw"["+e+"] is pure virtual and must be overriden"}return t}var n;this.Public=function(e,r){return r=r?r:t(e),n.Public(e,r,!0)},this.Protected=function(e,r){return r=r?r:t(e),n.Protected(e,r,!0)},e.apply(null,arguments)}function u(e){if(null!==e&&c(e,function(e){try{e.toJSON&&(e.toJSON=null)}catch(t){}}),"object"==typeof JSON&&JSON.stringify&&d(JSON.stringify))return JSON.stringify(e);if(null===e)return"null";var t=typeof e;if("undefined"===t)return void 0;if("number"===t||"boolean"===t)return""+e;if("string"===t)return T(e);if("object"===t){if("function"==typeof e.toJSON)return u(e.toJSON());if(e.constructor===Date){var n=e.getUTCMonth()+1,r=e.getUTCDate(),i=e.getUTCFullYear(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds(),l=e.getUTCMilliseconds();return 10>n&&(n="0"+n),10>r&&(r="0"+r),10>o&&(o="0"+o),10>a&&(a="0"+a),10>s&&(s="0"+s),100>l&&(l="0"+l),10>l&&(l="0"+l),'"'+i+"-"+n+"-"+r+"T"+o+":"+a+":"+s+"."+l+'Z"'}if(e.constructor===Array){for(var f=[],p=0;p<e.length;p++)f.push(u(e[p])||"null");return"["+f.join(",")+"]"}var g,h,m=[];for(var v in e){if(t=typeof v,"number"===t)g='"'+v+'"';else{if("string"!==t)continue;g=T(v)}t=typeof e[v],"function"!==t&&"undefined"!==t&&(h=u(e[v]),m.push(g+":"+h))}return"{"+m.join(",")+"}"}}function l(e){if("object"==typeof JSON&&JSON.parse&&d(JSON.parse))return JSON.parse(e);var t=e.toString().replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(t))return _makeTutorialEv.Ev("("+e+")");throw new SyntaxError("Error parsing JSON, source is not valid.")}function c(e,t){if(void 0!=e&&"object"==typeof e)for(var n in e)if(Object.hasOwnProperty.call(e,n)){var r=e[n];null!==r&&void 0!==r&&c(r,t)}null!==e&&void 0!==e&&t(e)}function d(e){return e.toString().indexOf("[native code]")>-1}function f(e){return l(u(e))}function p(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t])}return e}function g(e,t,n){var r,i,o,a,s,u=e,l=u.length,c=l>>>0;if("function"!=typeof t)throw new TypeError;if(0===c&&void 0===n)throw new TypeError;if(r=0,void 0!==n)i=n;else{for(o=!1;!o&&c>r;)a=r.toString(),o=u.hasOwnProperty(a),o&&(i=u[a]),r+=1;if(!o)throw new TypeError}for(;c>r;)a=r.toString(),o=u.hasOwnProperty(a),o&&(s=u[a],i=t.call(void 0,i,s,r,u)),r+=1;return i}function h(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}function m(e){return!isNaN(e)}function v(){var e=new Date,t=60*e.getTimezoneOffset()*1e3;return e.getTime()-t}function y(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function w(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function b(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function S(e,t){for(var n=e.length-1;n>=0;n--){for(var r=!1,i=t.length-1;i>=0&&!r;i--)t[i]==e[n]&&(r=!0);r||t.push(e[n])}return t}function T(e){return e.match(Ou)?'"'+e.replace(Ou,function(e){var t=Mu[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'}function I(e,t,n){function r(){v=new h(e)}function i(e){return e.debug=function(t,n,r){return e("debug",t,n,r)},e.info=function(t,n,r){return e("info",t,n,r)},e.warn=function(t,n,r){return e("warn",t,n,r)},e.error=function(t,n,r){return e("error",t,n,r)},e}function o(){for(var e=E.length-1;e>=0;e--)d(E[e]);E.length=0}function a(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()+"] "}function s(e,t,n){var r=!0;return e?r=-1!=mtjQuery.inArray(n,e):t&&(r=-1==mtjQuery.inArray(n,t)),r}function c(e,t){try{if(rs())return!0;if(Mf("disableAuditErrorLog"))return!0;if(T++,T>5)return;var r={code:t,isInEditor:n.getIsInEditor(),SVNRevision:n.SVNRevision,LibVersion:n.LibVersion};m.sendServerLog.error(e,r)}catch(i){}}function d(e){if(window.console)console.log(e);else try{var t=g(),n=new Date,r=f(e);t.find("#walkme-console-messages").prepend('<li style="padding: 2px 5px; border-bottom: 1px solid #afafaf"><span style="float: left; color: #afafaf; margin-right: 5px;">'+p(n.getHours())+":"+p(n.getMinutes())+":"+p(n.getSeconds())+" </span>"+r.substring(1,r.length-1)+"</li>")}catch(i){}}function f(e){return e instanceof wmjQuery?"-jQuery object: selector - "+e.selector+", value - "+e.val()+", domElement - "+u(e[0]):u(e)}function p(e){return 10>e?"0"+e:e}function g(){var e=mtjQuery("#walkme-console-box");if(0===e.length){var t=Is();e=mtjQuery('<div id="walkme-console-box"></div>');var n=mtjQuery('<div style="display: none;">Walkme Console: [ </div>'),r=mtjQuery('<button type="button" title="Toggle the walkme debug console">Walkme Console</button>'),i=mtjQuery('<ul id="walkme-console-messages"></ul>'),o=mtjQuery('<a href="#">clear</a>');n.append(o),n.append(" ]"),n.append(i),e.append(n),e.append(r),t.append(e),r.click(function(){n.slideToggle("fast",function(){var e=mtjQuery(this).is(":visible")?"Close Console":"Walkme Console";r.text(e)})}),o.click(function(){i.empty()}),n.css({margin:"15px 60px 5px 15px",padding:"5px",border:"1px solid red","background-color":"#FFC",color:"#000"}),r.css({border:"1px solid red","background-color":"#FFFFCC","margin-left":"15px",width:"120px"}),e.css({position:"fixed","z-index":sc,"font-family":"Arial",bottom:"10px",left:"10px",width:"100%","text-align":"left"}),i.css({"background-color":"white",border:"1px solid black",height:"260px","list-style-type":"none",padding:"0","overflow-y":"auto",margin:"5px 0 0"})}return e}function h(){function e(e){a=e,o=l(a.getCookie(y))}function t(){o||(o={})}function n(e,t){return o?o[e]:t}function r(e){return lp(e)?"string"==typeof e?(e=e.replace(/\s/g,""),e.split(",")):e.length>0?e:void 0:[]}function i(){a.setCookie(y,u(o),b)}var o,a,s=this,c=1;s.enable=function(e){return t(),o.l=e||c,i(),s},s.disable=function(){return o&&(o.l=0,i()),s},s.reset=function(){return o={l:c},i(),s},s.level=function d(d){return void 0===d?n("l",null):(t(),o.l=d,i(),s)},s.track=function(e){if(void 0===e)return n("f",[]);t();var a=r(e);return delete o.u,o.f=o.f?S(a,o.f):a,i(),s},s.untrack=function(e){if(void 0===e)return n("u",[]);t();var a=r(e);return delete o.f,o.u=o.u?S(a,o.u):a,i(),s},s.timer=function(e){return t(),e?o.m=1:o.m&&delete o.m,i(),s},e.apply(null,arguments)}var m=this;m.LocalSVNRevision="$Rev$";var v,y="walkmeCustomerLogs",w={debug:4,info:3,warn:2,error:1},b=86400,T=0,I=!0;m.ready=function(){var e="DI";Bs.logger=m.wrapCustomerLog(e)},m.wrapCustomerLog=function(e){return function(t,n,r){m.customerLog(t,n,r||e)}},m.customerLog=function(n,r,i){if(!t.isQuirksMode()||!(n instanceof mtjQuery||n&&n.nodeType)){r=Hi(r,1);var o=l(e.getCookie(y));if(o){var c=parseInt(o.l),f=o.f,p=o.u;if(c>=r&&s(f,p,i))try{d(o.m?a()+u(n):n)}catch(g){}}}},m.sendServerLog=i(function(e,t,n,r){Us.get("EventCollectorLogger").log(e,t,n),m.customerLog(t,w[e],r)}),m.wrapServerLog=function(e){return i(function(t,n,r,i){m.sendServerLog(t,n,r,i||e)})};var C=0,E=[];m.timer=function(t){C++;var n=(new Date).getTime();return{stop:function(){var r=l(e.getCookie(y));if(r&&r.m){var i=(new Date).getTime(),s=i-n,u=Array(C).join("->	"),c=a()+u+t+": "+s+"ms";1==C?(d(c),o()):E.push(c),C--}}}},m.enableCustomerLogs=function(e){return v.enable(e)},m.error=function(e,t){try{var n,r=arguments.callee.caller,i=r?r.name:"N/A";if(e&&e.message){var o=t?t+"\n":"";n=o+"File : "+e.fileName+"\n - Function : "+i+"\n - Line : "+e.lineNumber+"\n - Msg : "+e.message}else n="Function : "+i+"\n - "+t;e&&e.stack&&(n+="\n - Stack: "+e.stack),I&&c(n,1),Al&&!window.wmNoAlert&&alert("Dev mode alert: "+n),Za("Error: "+n)}catch(a){}},m.getAPI=function(){return v},r.apply(null,arguments)}function C(e,t,n,r,i,o){function a(){}function s(){throw new Error("WalkMeInfo not initialized properly")}var u=this;u.getUserGuid=function(){s()},u.getEndUserGuid=function(){s()},u.getPermutationId=function(){s()},u.getLanguage=function(){s()},u.getSource=function(){s()},u.getCustomVars=function(){s()},u.init=function(){u.getUserGuid=o,u.getEndUserGuid=e.getEndUserGuid,u.getPermutationId=t.getCurrentPermutation,u.getLanguage=n.getCurrentLanguage,u.getEnvironmentId=r,u.getCustomVars=i},a.apply(this,arguments)}function E(e,t,n){function r(){window._walkmeInternals=window._walkmeInternals||{},window._walkmeInternals.walkmeLoadLog=[],l={start:{run:function(t){i("st"),Me=Us.get("CommonUtils"),je=Us.get("UiUtils"),e.profilerAPI=Us.get("ProfilerAPI");var n=Us.get("SettingsFile").getSettingsFile();e.setAuditSource(n.Environment),e.setUserGuid(n.UserGuids&&n.UserGuids[0]),Us.get("RecorderServerManager").set(n.PlayerServer),Us.get("EventServerBaseUrl").set(n.EventServer),Us.get("FramesetsUtils").waitForFramesHeadsAndBodies(t)},next:"pageReady"},pageReady:{run:function(t){i("pr"),e.setCdnServer(Us.get("SettingsFile").getCdnServerName()||""),d.libCtorTimer=e.Logger.timer("lib constructor"),t()},next:"loadStorage"},loadStorage:{run:function(t){i("ls");var n=Us.get("ClientStorageManager");if(n){if(n.init(t,e)===!1)return a("storageManagerInitFailed"),!1;try{window.walkme_lib_in_dev&&Es()}catch(r){}d.libCtorTimer.stop()}},next:"loadWalkmeConfig"},loadWalkmeConfig:{run:function(e){i("lwc"),t.init(function(){if(null!=t.Data){var n=t.Data.EndUserSettings,r=Us.get("EndUsersManager");r.setEndUserSettings(n)}e()})},next:"loadServerStorage"},loadServerStorage:{run:function(t){i("lss");var r=Us.get("StorageManagerFactory").bySettingsFile(!0);r===Us.get("ClientStorageManager")&&(r.removeData(n.STORAGE_KEYS.lastGetDataTime,e.getUserGuid()),Us.register("ServerStorageManager").asInstance(r)),r.init(t,t)},next:"afterStorageLoaded"},afterStorageLoaded:{run:function(t){i("asl"),Us.get("loadClasses");var n=Us.get("ServerStorageManager"),r="wm-lang",o="wm-ABPer";n.convertOldCookieStorage(r),n.convertOldCookieStorage(o),-1==document.cookie.indexOf("walkmeDontInitLib")&&setTimeout(function(){e.Init()},0)}}},c="start"}function i(e){window._walkmeInternals.walkmeLoadLog.push(e)}function o(){}function a(t){e.removeWalkMe(t),e.initFailed=!0}function s(e,t){e&&(e.run?e.run(function(){u(e,t)}):u(e,t))}function u(e,t){if(e){var n=l[e.next];c=e.next,n?s(n,t):t&&t()}}this.LocalSVNRevision="$Rev$";var l,c,d=this;Us.register("loadClasses").asFunction(o).dependencies("CookiesManager,Logger,FramesetsUtils,SettingsFile,JQueryElementFinder,ConditionFunctions,ConditionTreeEvaluator,BBCodeParser,ResourceManager,ServerStorageManager,EndUsersManager,DataSender,EventSender,AbPermutationManager,LibInitializer,WmAjax,SiteConfigManager,EndUserLoggerManager,UiDataProvider,AnalyticsManager,ClickAuditManager,RecorderServerManager,EventServerBaseUrl,ServerDataSenderManager,AuditStepsManager,GoalsManager,WalkMeGoalsManager,DebuggerManager,WmInternals,PlayManager,FeaturesManager,StickinessManager,TimerManager,CommonEvents,LanguageManager,AuditWtsManager,SalesForceManager,PopupNotificationsService,LoggerManager,TriggersManager,ShoutOutActionDataProvider,LauncherActionDataProvider,AuditTasksManager"),d.start=function(e){s(l[c],e)},d.get=function(e){return Us.get(e)},r.apply(null,arguments)}function k(){function e(e){n=t()||window.wmPreviewSnippet||window.wmSnippet}function t(){if(window.wmPlaySnippetData){var e=l(window.wmPlaySnippetData);return window.wmPlaySnippet={getSettingsFile:function(){return e}},window.wmPlaySnippet}return null}this.LocalSVNRevision="$Rev$";var n,r=this;r.getSettingsFile=function(){return n?n.getSettingsFile()||{}:{}},r.getCdnServerName=function(){return r.getSettingsFile().CdnServerName||window.mt_cdn_server_name},r.getStorageType=function(){return r.getSettingsFile().Storage},r.getAllUserGuids=function(){return r.getSettingsFile().UserGuids},r.getPublishDate=function(){return r.getSettingsFile().PublishDate},r.getUrl=function(){return window._walkmeInternals&&window._walkmeInternals.settingsUrl},e.apply(null,arguments)}function _(e,t){function n(){L=wmjQuery.expr.filters.mt_hidden,r(),m()}function r(){O=[function(e){return{x:e.offset().left+e.outerWidth()/2,y:e.offset().top+1}},function(e){return{x:e.offset().left+e.outerWidth()/2,y:e.offset().top+e.outerHeight()-1}},function(e){return{x:e.offset().left+1,y:e.offset().top+e.outerHeight()/2}},function(e){return{x:e.offset().left+e.outerWidth()-1,y:e.offset().top+e.outerHeight()/2}},function(e){return{x:e.offset().left+1,y:e.offset().top+1}},function(e){return{x:e.offset().left+1,y:e.offset().top+e.outerHeight()-1}},function(e){return{x:e.offset().left+e.outerWidth()-1,y:e.offset().top+1}},function(e){return{x:e.offset().left+e.outerWidth()-1,y:e.offset().top+e.outerHeight()-1}}]}function i(e){return e.parentWindow||e.defaultView}function o(t){var n=0,r=0,i=mtjQuery(t),o=i.offset();if(n=o.top,r=o.left,Mf("iframepadding")&&i.is("iframe")&&(r+=parseFloat(i.css("padding-left")),n+=parseFloat(i.css("padding-top"))),t.ownerDocument){var s=a(e.getCommonUtils().getBody(t.ownerDocument)),u=a(t.ownerDocument.documentElement);n-=s.top==u.top?s.top:s.top+u.top,r-=s.left==u.left?s.left:s.left+u.left}var l={left:r,top:n};return l}function a(e){return e?{top:e.scrollTop||0,left:e.scrollLeft||0}:{top:0,left:0}}function s(e){var t=0,n=0;do"FRAME"==Ns(e)?(t+=mtjQuery(e).offset().top,n+=mtjQuery(e).offset().left):(t+=e.offsetTop||0,n+=e.offsetLeft||0),e=e.offsetParent;while(e);var r={left:n,top:t};return r}function u(e,t){var n={};return e.left>t.right||t.left>e.right?null:e.bottom<t.top||t.bottom<e.top?null:(n.left=Math.max(e.left,t.left),n.right=Math.min(e.right,t.right),n.top=Math.max(e.top,t.top),n.bottom=Math.min(e.bottom,t.bottom),n.height=n.bottom-n.top,n.width=n.right-n.left,n)}function l(e,t){var n=t.left,r=t.top;e.left+=n,e.right+=n,e.top+=r,e.bottom+=r}function c(e,t){var n=tp(t);e.left+=n.Left,e.right+=n.Left,e.top+=n.Top,e.bottom+=n.Top}function d(e){var t=sp(e);return t.height=t.height(),t.width=t.width(),t.top=t.top(),t.left=t.left(),t}function f(e,t,n){t.top=n.top,t.left=n.left;var r=e.outerWidth(),i=e.outerHeight();if(e.length>1){var o=N.getMultipleElementsRect(e);r=o.right-o.left,i=o.bottom-o.top}t.height=i,t.width=r,t.bottom=t.top+t.height,t.right=t.left+t.width}function g(t,n,r,i){N.removeScrollAndResizeEvents(i);var o=h(i);mtjQuery(t).bind(o,function(){n.stop(!1,!0),e.centerElementInPage(n,!0,r)})}function h(e){return e=e?e:"walkme",p("scroll.{0}, resize.{0}",e)}function m(){v("wm_hdn_st",function(e){var t=wmjQuery(e);return t.is(":mt_hidden")||!M&&!T(t)}),v("wm_vsb_st",function(e){return!wmjQuery.expr.filters.wm_hdn_st(e)}),v("wm_interact_any_point",function(e){return C(e,R.ANY_POINT)}),v("wm_interact_all_points",function(e){return C(e,R.ALL_POINTS)})}function v(e,t){wmjQuery.expr.filters[e]=t}function y(e){if(w(e))return!0;var t=!1;return e.parents().each(function(){return w(wmjQuery(this))?(t=!0,!1):void 0}),t}function w(e){if(0==e.css("opacity"))return!0;var t=e[0].filters;return t&&t.alpha&&0===t.alpha.opacity}function b(e){var t=wmjQuery.expr.filters.mt_hidden;wmjQuery.expr.filters.mt_hidden=function(n){return t(n)||e(wmjQuery(n))}}function S(e){b(e);var t=wmjQuery.expr.filters.wm_vsb_st,n=wmjQuery.expr.filters.wm_interact_any_point,r=wmjQuery.expr.filters.wm_interact_all_points;wmjQuery.expr.filters.wm_vsb_st=function(n){return t(n)&&!e(wmjQuery(n))},wmjQuery.expr.filters.wm_interact_any_point=function(t){return n(t)&&!e(wmjQuery(t))},wmjQuery.expr.filters.wm_interact_all_points=function(t){return r(t)&&!e(wmjQuery(t))}}function T(e){for(var t=e.parents().add(e),n=t.length-1;n>0;n--)if(I(wmjQuery(t[n]),wmjQuery(t[n-1])))return!1;return!0}function I(e,t){if("absolute"==e.css("position"))return!1;if("hidden"!=t.css("overflow"))return!1;var n=ri(t,"border-top"),r=ri(t,"padding-top"),i=t.offset().top,o=n+r+i,a=t.height(),s=o+a,u=t.offset().left,l=u+t.width();if(o==s)return!0;var c=ri(e,"border-top"),d=ri(e,"padding-top"),f=e.offset().top,p=c+d+f,g=e.height(),h=p+g,m=e.offset().left,v=m+e.width(),y=o>h,w=p>s,b=u>v,S=m>l;return y||w||b||S}function C(e,t){var n=e.ownerDocument,r=wmjQuery(e),i=r.parents("html"),o=r.parents("body"),a=o.scrollTop()||i.scrollTop(),s=o.scrollLeft()||i.scrollLeft(),u={element:r,html:i,topScroll:a,leftScroll:s,workingDocument:n};return t==R.ALL_POINTS?E(u):k(u)}function E(e){for(var t=O.length-1;t>=0;t--)if(!_(O[t],e))return!1;return!0}function k(e){for(var t=O.length-1;t>=0;t--)if(_(O[t],e))return!0;return!1}function _(e,t){var n=t.element,r=e(n),i=r.x-t.leftScroll,o=r.y-t.topScroll,a=t.workingDocument.elementFromPoint(i,o);return a==n[0]||wmjQuery.contains(n[0],a)}function x(e,t){var n;return n=N.findFirstSelfOrChildByType(e.children("tr"),t),n&&n.exist()?n:(n=N.findFirstSelfOrChildByType(e.children("thead").children("tr"),t),n&&n.exist()?n:(n=N.findFirstSelfOrChildByType(e.children("tbody").children("tr"),t),n&&n.exist()?n:(n=N.findFirstSelfOrChildByType(e.children("tfoot").children("tr"),t),n&&n.exist()?n:void 0)))}function A(e){var t=!0;return e.parentsUntil("html").each(function(e,n){"relative"!=mtjQuery(n).css("position")&&(t=!1)}),t}function P(e,t){var n=parseInt(Ss(t,"leftOffset",0)),r=parseInt(Ss(t,"topOffset",0));return e.top=e.top+r,e.left=e.left+n,e.right=e.right+n,e.bottom=e.bottom+r,e}function D(e,t){return"BODY"==e.tagName&&"relative"==t.position&&"auto"==e.style.marginLeft&&"auto"==e.style.marginRight&&0==N.tryParsingStyleValue(t.marginLeft)?!0:void 0}var N=this;N.LocalSVNRevision="$Rev$";var L,O,M,R={ALL_POINTS:0,ANY_POINT:1},j={0:"mt_visible",1:"wm_vsb_st",2:"wm_interact_any_point",3:"wm_interact_all_points"};N.getVisibleFilter=function(e){return":"+j[(e.Settings||e).filter||0]},this.getPosRelativeToWindow=function(t,n,r){var a,u,l,c,d=0,f=0;for(n=n||top,r&&!window.opera&&t&&t.tagName&&"input"==t.tagName.toLowerCase()&&(d+=t.scrollLeft,f+=t.scrollTop);t;){if(u=t.ownerDocument,l=i(u),r&&l==n){var p=e.getCommonUtils().getBody(u);d+=u.documentElement.scrollLeft||p.scrollLeft,f+=u.documentElement.scrollTop||p.scrollTop}if(c=!l||l==n,a=r?o(t):s(t),d+=a.left,f+=a.top,c)break;t=l.frameElement}var g={left:d,top:f};return g},this.getRectRelativeToWindow=function(e,t,n){var r,o,a,s=!1,d={left:0,top:0};for(a=e.length>1?N.getMultipleElementsRect(e):t.getBoundingClientRect(),n=n||top;!s;){r=t.ownerDocument,o=i(r);var f=r.documentElement.getBoundingClientRect();if(a=u(a,f),!a)return a;s=!o||o==n,s||(d=o.frameElement.getBoundingClientRect(),l(a,d),t=o.frameElement)}return c(a,r),a},this.getDrawingArea=function(e,t){var n=new Object;if(Xa(e))n=d(t?mtjQuery("body"):e);else{var r=mtjQuery(document);n.top=0,n.left=0,n.height=r.height(),n.width=r.width()}return n},this.isElementScrolledOut=function(e,t,n){var r=Ts(t),i=e.offset().top,o=e.offset().left,a=e.outerHeight(),s=e.outerWidth(),u=parseInt(n);return u==rc.Bottom&&(i+=a),u==rc.Right&&(o+=s),r.scrollTop()>i||t.height()+r.scrollTop()<i?!0:r.scrollLeft()>o||t.width()+r.scrollLeft()<o?!0:!1},N.getCenterPositionByBounds=function(e){var t=e.left+e.width/2,n=e.top+e.height/2;return{left:t,top:n}},N.getEmbedInElementPosition=function(e,t){var n={},r=parseInt(Ss(t,"leftOffset",0)),i=parseInt(Ss(t,"topOffset",0));return f(e,n,{top:i,left:r}),n},this.getElementBounds=function(e,t,n,r){var i={},o=e[0];if(t){var a;a=e.length>1?N.getMultipleElementsRect(e):o.getBoundingClientRect();var s=np(e),u=ep(o,s,n);i=$a(a,u)}else{var l=N.getPosRelativeToWindow(o,n,!0);f(e,i,l)}return i=P(i,r)},N.getMultipleElementsRect=function(e){for(var t,n,r,i,o,a=0;a<e.length;a++)o=e[a].getBoundingClientRect(),(void 0===t||o.left<t)&&(t=o.left),(void 0===n||o.top<n)&&(n=o.top),(void 0===i||o.bottom>i)&&(i=o.bottom),(void 0===r||o.right>r)&&(r=o.right);return{top:n,left:t,right:r,bottom:i}},N.isElementVisible=function(e,t){var n=!0;try{e[0].tagName}catch(r){n=!1}if(n){t=t||0;var i=":"+j[t];wmjQuery(e).is(i)||(n=!1)}return n},N.registerResizeAndScrollEvents=function(t){var n=t.element,r=t.offset,i=t.eventNameSuffix,o=e.shouldHandlePageAsFramesets()?e.getBiggestFrame().contentWindow:window;g(o,n,r,i)},N.getWindowSize=function(){var t=wmjQuery(e.shouldHandlePageAsFramesets()?e.getBiggestFrame().contentWindow:window),n={height:t.height(),width:t.width()};return n},N.removeScrollAndResizeEvents=function(t){var n=window;if(e.shouldHandlePageAsFramesets()){var r=e.getBiggestFrame();null!=r&&(n=r.contentWindow)}var i=h(t);mtjQuery(n).unbind(i)},N.centerElementInParent=function(e,t){var n=t.outerHeight()/2-e.outerHeight()/2,r=t.outerWidth()/2-e.outerWidth()/2;e.css("top",n+"px"),e.css("left",r+"px")},N.extendVisibilityFilters=function(){M=!1,wmjQuery.expr.filters.mt_hidden=L;wmjQuery.expr.filters.mt_hidden;if(Mf("strongMtVisible")&&(M=!0,b(function(e){return!T(e)})),Mf("nonVisibleIframe")){var e=function(e){var t=e.data("iframe");return!(!t||!t.is(":mt_hidden"))};b(e),S(e)}Mf("visibleOpacity")&&(b(y),S(y))},N.findNearestSelfOrParentByType=function(e,t){var n=e[0];if(n){for(var r=[],i=0;i<t.length;i++)r.push(t[i].toLowerCase());for(var o=(e.context,n.tagName.toLowerCase());"body"!=o&&"frameset"!=o&&"head"!=o;){if(wmjQuery.inArray(o,r)>-1)return wmjQuery(n);n=n.parentNode,o=n.tagName.toLowerCase()}}},N.findFirstSelfOrChildByType=function(e,t){if(e.exist()){var n=t.join(", ");if(e.is(n))return e.first();var r=e.children(n).first();return r.exist()?r:e.is("table")?x(e,t):void 0}},N.getColumn=function(e){var t=[],n=N.findNearestSelfOrParentByType(e,["table"]);if(n){var r,i=["td","th"];if(r=e.is(i)?e:e.is("table")||e.is("tr")?N.findFirstSelfOrChildByType(e,i):N.findNearestSelfOrParentByType(e,i)){var o,a,s=null,u=r.index(),l=wmjQuery([]);wmjQuery.merge(l,n.children("tr")),wmjQuery.merge(l,n.children("thead, tbody, tfoot").children("tr"));for(var c=0;c<l.length;c++)o=l[c].cells[u],o&&(null==s&&(s=o.colSpan),o.colSpan<s&&(t.length=0,
s=o.colSpan),o.colSpan==s&&(a=wmjQuery(o),a.height()&&a.width()&&t.push(o)));return wmjQuery(t,n)}}},this.getBodyInheritedMargin=function(){var t={top:0,left:0};if(!e.isFeatureActive("calcInheritedMargin"))return t;var n=!1,r=mtjQuery("body").find("div").filter(function(){if(n)return!1;var e=mtjQuery(this);if("relative"!=e.css("position"))return!1;var t=null,r=null,i=parseInt(e.css("margin-top")),o=0!=i&&parseInt((r=e.position()).top)==-1*parseInt((t=e.offset()).top),a=!1;if(!o){var s=parseInt(e.css("margin-left"));a=0!=s&&parseInt(null!=r?r.left:e.position().left)==-1*parseInt(null!=t?t.left:e.offset().left)}return n=(o||a)&&A(e)}).eq(0);return r.length>0&&(t={top:parseInt(r.css("margin-top")),left:parseInt(r.css("margin-left"))}),t},N.fixFirefoxAutoMarginBug=function(e,n,r,i){if(D(n,r)){e.top+=N.tryParsingStyleValue(r.marginTop);var o=t.getStyle(n.parentElement,i);e.left+=(N.tryParsingStyleValue(o.width)-N.tryParsingStyleValue(r.width))/2}},N.tryParsingStyleValue=function(e){return"string"==typeof e&&(e=e.replace("px","")),isNaN(e)?0:parseInt(e)},n.apply(null,arguments)}function x(){function e(e){t=Us.get("DataValueEncoder"),n=Us.get("DataNameEncoder")}this.LocalSVNRevision="$Rev$";var t,n,r=this;this.setCookie=function(e,r,i,o){try{"string"!=typeof r&&(r=r.toString()),r=t.encode(r);var a="";o&&o.length>0&&(a="; domain="+o);var s="";if(0!=i){var u=new Date;u.setTime(u.getTime()+1e3*i),s="; expires="+u.toUTCString()}var l=r+s+"; path=/"+a;document.cookie=n.encode(e)+"="+l}catch(c){this.logger.error(c)}},this.getCookie=function(e){var r,i,o,a=n.encode(e),s=!1,u=document.cookie.split(";");for(r=0;r<u.length;r++){if(i=u[r].substr(0,u[r].indexOf("=")),o=u[r].substr(u[r].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==a)return t.decode(o);i==e&&(s=t.decode(o))}return s},this.getCurrentDomain=function(){var e=r.getCookie(_l);if(e)return e;var t=window.location.hostname,n="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$";if(new RegExp(n).test(t))return r.setCookie(_l,t,fc,t),t;if(-1==t.indexOf("."))return null;for(var i=t.split("."),o="",a=i.length-1;a>=0;a--)if(""!=o&&(o="."+o),o=i[a]+o,r.setCookie(_l,o,fc,o),r.getCookie(_l)==o)return o;r.setCookie("wm-test","wm-test",fc);var s=r.getCookie("wm-test");if("wm-test"!=s)try{console.log("WalkMe requires the browser to accept cookies - please enable cookies in your browser.")}catch(u){}else this.logger.error(new Error("Cannot get domain from: "+t));return void 0},e.apply(null,arguments)}function A(e,t,n){function r(t){var n=e.getStorageType();return n?n[t]:void 0}function i(){if(!a){var e=n.location;a=e.origin,a||(a=e.protocol+"//"+e.hostname,e.port&&(a+=":"+e.port))}return a}function o(e){var t=0===e.indexOf("/");return t}var a,s=this,u="hi",l="sc",c="wm-cdhi-o",d=23;s.getOrigin=function(){if(t.isLocalStorageEnabled()){var e=n.localStorage.getItem(c);if(e)return e}var a=r(u);return a?a:o(Wc)?i()+Wc:Wc},s.getHiddenIframePath=function(e){var t=e?".compress":"";return s.getOrigin()+p("/player/resources/CD/CDhiddenIframe{1}_v{0}.html",d,t)},s.getSaveCookiePath=function(){var e=r(l);return e||s.getOrigin()+"/player/resources/CD/saveCookie.html"}}function P(){function e(e,n,s,u){function l(){r(),t(u)}i=s,o=n,a=e.createIframe("about:blank","walkme-proxy-iframe",!1,l)}function t(e){n();var t='<!DOCTYPE html><html><head><script>window.send = function(msg, audience) { window.targetWindow.postMessage(msg, audience); };if (window.addEventListener) { window.addEventListener("message", function(event){ messageHandler(event); }, false); }else if (window.attachEvent) { window.attachEvent("onmessage", function(event){ messageHandler(event); }); }</script></head></html>';s.document.open("text/html","replace"),s.document.write(t),s.document.close(),r(),e&&e()}function n(){a.addEventListener?a.addEventListener("load",r,!1):a.attachEvent&&a.attachEvent("onload",r,!1)}function r(){s=a.contentWindow||a.window,s.targetWindow=o,s.messageHandler=i}var i,o,a,s,u=this;u.postMessage=function(e,t){t=t||"*",a.contentWindow.send(e,t)},e.apply(null,arguments)}function D(e,t,n){function r(){i=new it}this.LocalSVNRevision="$Rev$";var i,o=this,a="#!@DeL@!#";o.saveData=function(t,n,r,a){void 0==o.currentDomain&&(o.currentDomain=e.getCurrentDomain()),e.setCookie(t,n,r,o.currentDomain),i.saveData(t,n,r,a)},o.getData=function(t,n){var r=i.getData(t,n);return void 0===r&&(r=e.getCookie(t),r===a||r===!1)?void 0:r},o.removeData=function(e,t){i.removeData(e,t);var n=o.getData(e);void 0!==n&&o.saveData(e,a,-1)},o.removeAllData=function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++)if(0===wmjQuery.trim(e[t]).toLowerCase().indexOf("wm-")){var n=wmjQuery.trim(e[t].split("=")[0]);document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}},o.getInternalKeys=function(e,t){for(var n=document.cookie.split(";"),r={},i=0;i<n.length;i++)if(0===wmjQuery.trim(n[i]).toLowerCase().indexOf(t)){var o=wmjQuery.trim(n[i].split("=")[0]);o!==_l&&(r[o]=this.getData(o))}return r},o.refreshGetData=function(e,t){for(var n=0;n<e.length;n++)i.clear(e[n]);t&&t()},r.apply(null,arguments)}function N(e,t){function n(){}function r(e){return i()+e}function i(){return(new Date).getTime()}var o=this,a=5,s=300;o.LocalSVNRevision="$Rev$",o.init=function(n){return window.walkmeExt?void n():0==a?void t.customerLog("Extension storage is not available, walkme can not load",3):(a--,void e.libSetTimeout(function(){o.init(n)},s))},o.saveData=function(e,t,n,i){var o={val:t,exp:r(1e3*n)};walkmeExt.SaveData(e,u(o),i)},o.getData=function(e,t){var n=walkmeExt.GetData(e,t);if(n){var r=l(n);return r.val}},o.removeData=function(e,t){walkmeExt.removeData(e,t)},o.removeAllData=function(e){walkmeExt.RemoveAllData(e)},o.getAll=function(e){return walkmeExt.GetAll(e)},n.apply(null,arguments)}function L(){function e(){n=Us.get("CookiesStorageManager")}function t(e){var t={},n=i.length;return wmjQuery.safeEach(e,function(e,o){e.indexOf(i)>-1&&(e=e.substr(n),t[e]=r.getData(e))}),t}this.LocalSVNRevision="$Rev$";var n,r=this,i="wm-SELS-";this.saveData=function(e,t,r,o){n.saveData(i+e,t,r,o)},this.getData=function(e,t){return n.getData(i+e,t)},this.removeData=function(e,t){n.removeData(i+e,t)},this.getInternalKeys=function(e,r){var i=n.getInternalKeys(e,r),o=t(i);return o},e.apply(null,arguments)}function O(){function e(e){try{o=e.isLocalStorageEnabled(),t()}catch(n){}}function t(){if(s.isEnabled()){i=window.localStorage;var e=l(i.getItem("wm-storage"));if(e){var t=e.__jstorage_meta||{},n=t.TTL||{};for(var o in e)if(e.hasOwnProperty(o)){var a=e[o],u=n[o],c=r();u>c&&s.saveData(o,a,(u-c)/1e3)}i.removeItem("wm-storage")}}}function n(e){return r()+e}function r(){return(new Date).getTime()}this.LocalSVNRevision="$Rev$";var i,o,a=new L,s=this,c="walkMe_";this.init=function(e){return s.isEnabled()?void e():!1},this.saveData=function(e,t,r){if(r=Hi(r,0),s.removeData(e),0==r)a.saveData(e,t,r);else{var o={val:t,exp:n(1e3*r)};i.setItem(c+e,u(o))}},this.getData=function(e){var t=a.getData(e);if(void 0===t){var n=i.getItem(c+e);if(n){var o=l(n);if(!(o.exp<r()))return o.val;s.removeData(e)}}return t},this.removeData=function(e){a.removeData(e),i.removeItem(c+e)},this.removeAllData=function(){Object.keys(localStorage).forEach(function(e){0===e.indexOf(c)&&localStorage.removeItem(e)})},this.getInternalKeys=function(e,t){function n(e,n,r){e=e.substr(r),e.toLowerCase().indexOf(t)>-1&&(n[e]=s.getData(e))}for(var r=a.getInternalKeys(e,t),o=r,u=c.length,l=0;l<i.length;l++){var d=i.key(l);n(d,o,u)}return o},this.isEnabled=function(){return o},e.apply(null,arguments)}function M(e,t,n,r,i,o,a){function s(){m=e.getAllUserGuids,v=n.isFeatureEnabled,y=e.setAuditStepCookieSeconds}function u(){var e=t.getStorageType();return e&&1==e[k]}function l(e){if(!e)return e;if("string"==typeof e)return e;var t=e[E];return t[i.browser.string]||t[i.browser.name]||t["*"]}function c(e){return void 0===e[_]?I:!!e[_]}function d(e,n,r,i,o,a){var s,u=m(),l=u[0],d=t.getStorageType();return s=n||r?f(u,n,l,o,c(d),a):e?h(l):i?g(l):p(l)}function f(e,t,n,i,s,u){if(!w){y(86400);var l=new rt(o,e,t,i,s,u);w=new ot(a.STORAGE_TYPE.HiddenIframe,l,n,r,o)}return w}function p(e){if(!S){var t=Us.get("CookiesStorageManager");S=new ot(a.STORAGE_TYPE.Cookie,t,e,r,o)}return S}function g(e){if(!T){var t=Us.get("ExtensionStorageManager");T=new ot(a.STORAGE_TYPE.Extension,t,e,r,o)}return T}function h(e){if(!b){var t=Us.get("WalkMejStorageManager");b=new ot(a.STORAGE_TYPE.JStorage,t,e,r,o)}return b}this.LocalSVNRevision="$Rev$";var m,v,y,w,b,S,T,I=!0,C=this,E="st",k="ss",_="cm";C.bySettingsFile=function(e){var n=Me.getWindowCookie("wm-stt"),r=n?C.byType(n):C.byType(t.getStorageType());return e&&u()&&Us.get("EndUsersManager").isRealEndUserType()&&(r=Us.get("ServerStorageManager")),r},C.byType=function(e){var t,n,r=l(e),i=!1,o=!1,s=!1,u=!1;switch(r){case a.STORAGE_TYPE.JStorage:i=!0;break;case a.STORAGE_TYPE.CrossDomainCookies:n=gu.Cookies,o=!0;break;case a.STORAGE_TYPE.CrossDomainLocalStorage:n=gu.LocalStorage;case a.STORAGE_TYPE.CrossDomain:o=!0;break;case a.STORAGE_TYPE.HiddenIframe:s=!0;break;case a.STORAGE_TYPE.Extension:u=!0;break;case a.STORAGE_TYPE.ProxyIframe:o=!0,t=!0;break;case a.STORAGE_TYPE.Cookie:}return d(i,o,s,u,n,t)},C.byFeature=function(){var e=v("jstorage"),t=v("crossdomain"),n=v("hiddeniframestorage"),r=v("cd_localStorage")?gu.LocalStorage:null;return d(e,t,n,r)},s.apply(null,arguments)}function R(){function e(e,t,n,r){o=e,i=t,a=n,s=Us.get("MalformedStorageDataPetaSender"),u=Us.get("DataMinifier"),l=r}function t(e,t){for(var n=[],r=Math.ceil(e.length/t),i=0;r>i;i++){var o=t>e.length?e.length:t,a=e.slice(0,o);e=e.substring(o),n.push(a)}return n}function n(e){a(e,"Storage data is malformed, discarding it."),p.removeData();try{s.audit(!!e)}catch(t){}}function r(){return o.getFromStorage(f)}this.LocalSVNRevision="$Rev$";var i,o,a,s,u,l,c=2800,d="wm-dt",f="wm-ne",p=this;p.saveData=function(e){var n=u.minifyData(e);if(p.removeData(),void 0!==n){for(var r=t(n,c),a=0;a<r.length;a++){var s=r[a];o.saveToStorage(d+a,s,i)}o.saveToStorage(f,r.length,i)}},p.getData=function(){var e,t=r();if(void 0!=t){e="";for(var i=0;t>i;i++){var a=o.getFromStorage(d+i);e+=a}}var s,l;if(e)try{s=u.deminifyData(e),s=s?s:void 0}catch(c){l=c}return(l||t>0&&!s)&&n(l),s},p.removeData=function(){var e=r();if(o.saveToStorage(f,0,i),void 0!=e)for(var t=0;e>t;t++)o.saveToStorage(d+t,null,i)},e.apply(null,arguments)}function j(){var e=5,t=[],n=[];this.set=function(r,i){t.push(r),n.push(i),t.length>e&&(t.shift(),n.shift())},this.getValue=function(e){for(var r=0;r<t.length;r++)if(t[r]==e)return n[r]},this.getKey=function(e){for(var r=0;r<n.length;r++)if(n[r]==e)return t[r]}}function F(){function e(e){return encodeURIComponent(e)==e?!1:!0}var t=String.fromCharCode(8482),n=Us.create("StringCache");this.encode=function(r){if(!e(r))return r;var i=t+this.compressor.compressToEncodedURIComponent(r);return n.set(i,r),i},this.decode=function(e){var r=e[0]==t;if(!r)return e;var i=n.getValue(e);if(void 0!==i)return i;var o=this.compressor.decompressFromEncodedURIComponent(e.substring(1));return n.set(e,o),o}}function B(){this.encode=function(e){return encodeURIComponent(e)},this.decode=function(e){return decodeURIComponent(e)}}function U(){function e(e){for(var t in n)if(n.hasOwnProperty(t)&&e>=n[t].from&&e<=n[t].to)return!0;return!1}var t={},n=[{from:33,to:33},{from:35,to:36},{from:38,to:43},{from:45,to:58},{from:60,to:91},{from:93,to:126}];this.encode=function(n){for(var r,i="",o=0,a=0;a<n.length;a++){var s=n.charCodeAt(a);if(!e(s)){r=n.charAt(a);var u=n.substring(o,a);t[r]||(t[r]=encodeURIComponent(r)),i+=u+t[r],o=a+1}}return i+=n.substring(o)},this.decode=function(e){try{return decodeURIComponent(e)}catch(t){return e}}}function G(){this.encode=function(e){return e.replace(/,/g,"%2C").replace(/"/g,"%00").replace(/'/g,"%01").replace(/;/g,"%3B")},this.decode=function(e){return e.replace(/%2C/g,",").replace(/%00/g,'"').replace(/%01/g,"'").replace(/%3B/g,";")}}function V(e){function t(){var t=e.getStorageType();return t&&void 0!==t[n]?i[t[n]]:i[r]}var n="et",r=0,i={0:U,1:B,2:F,3:G},o="compressor=Compressor,logger=Logger";this.registerEncoders=function(){Us.has("DataValueEncoder")||Us.register("DataValueEncoder").asCtor(t()).dependencies(o).injectToProperty(),Us.has("DataNameEncoder")||Us.register("DataNameEncoder").asCtor(B).dependencies(o).injectToProperty()}}function W(e,t,n,r,i,o,a){function s(){}this.LocalSVNRevision="$Rev$";var u=this;u.audit=function(s){if(rs()||!Vc)return!0;var u=Vc+"/Analytics/StorageMalformed",l={permutationId:r.getCurrentPermutation(),endUserGuid:t.getEndUserGuid(),datetime:i.getDateAtUTC(),source:o.get(),browser:a.browser.string,os:a.os.name,domain:window.location.host,userGuid:e.getUserGuid(),fromException:s};n.execute({url:u,data:l})},s.apply(null,arguments)}function Q(e,t,n,r,i,o,a){function s(){}this.LocalSVNRevision="$Rev$";var u=this;u.audit=function(s){if(rs()||!Vc)return!0;var u=Vc+"/Analytics/GoalCompleted",l={permutationId:r.getCurrentPermutation(),endUserGuid:t.getEndUserGuid(),datetime:i.getDateAtUTC(),source:o.get(),browser:a.browser.string,os:a.os.name,domain:window.location.host,userGuid:e.getUserGuid(),playGuid:s.identifier,goalType:s.GoalType,url:as(),goalId:s.Id};n.execute({url:u,data:l})},s.apply(null,arguments)}function H(){function e(e,t){var n=void 0!==c[l+e];n||t(e)}function t(e){d(e)}function n(e){f(e)}function r(e,n,r,i,o){i=i||window;var a=this;a.timeoutsDict=r;var s=function(){a.clear(),e.apply(i,o||arguments)};this.id=setTimeout(s,n),a.timeoutsDict[this.id]=a,c[l+this.id]=this.id,this.pause=function(){this.cleared||(delete a.timeoutsDict[this.id],t.call(window,this.id))},this.resume=function(){this.cleared||(this.id=setTimeout(s,10),a.timeoutsDict[this.id]=a)}}function i(e,t,n,r,i){this.timeoutsDict=n,r=r||window;var o=function(){e.apply(r,i||arguments)};this.id=setInterval(o,t),n[this.id]=this,c[l+this.id]=this.id}function o(e,t){for(var n in e)if(e.hasOwnProperty(n))try{t(e[n])}catch(r){}}this.LocalSVNRevision="$Rev$";var a=this,s={libTimeouts:{},playTimeouts:{}},u=[],l="wm-",c={},d=window.clearTimeout,f=window.clearInterval;a.playSetTimeout=function(e,t){return new r(e,t,s.playTimeouts)},a.libSetTimeout=function(e,t){return new r(e,t,s.libTimeouts)},a.playSetInterval=function(e,t){return new i(e,t,s.playTimeouts)},a.resumeTimeoutsArray=function(e){var t=s[e];if(t){for(var n=0;n<u.length;n++)u[n].resume();u.length=0}},a.releaseAllTimeouts=function(){a.releaseTimeoutsArray("libTimeouts"),a.pauseTimeoutsArray("playTimeouts")},a.pauseAllTimeouts=function(){for(var e in s)a.pauseTimeoutsArray(e)},a.resumeAllTimeouts=function(){for(var e in s)a.resumeTimeoutsArray(e)},a.releaseTimeoutsArray=function(e){var t=s[e];t&&o(t,function(e){e.clear()})},a.pauseTimeoutsArray=function(e){var t=s[e];t&&o(t,function(e){u.push(e),e.pause()})},a.stopTimeoutsArray=function(e){var t=Us.get("CrossDomainManager");t&&t.enabled()?a.pauseTimeoutsArray(e):a.releaseTimeoutsArray(e)},a.clearGlobalTimeouts=function(){for(var e in c)e&&e.indexOf&&0===e.indexOf(l)&&t(c[e])},a.overrideTimeouts=function(){var r=Us.get("FeaturesManager");r.isFeatureEnabled("overridetimeouts")&&(window.clearTimeout=function(n){e(n,t)},window.clearInterval=function(t){e(t,n)})},r.prototype.id=null,r.prototype.cleared=!1,r.prototype.clear=function(){this.cleared||(t.call(window,this.id),this.cleared=!0,delete this.timeoutsDict[this.id],delete c[l+this.id])},i.prototype.id=null,i.prototype.cleared=!1,i.prototype.clear=function(){t(this.id),this.cleared=!0,delete c[l+this.id],delete this.timeoutsDict[this.id]}}function $(){function e(e,n,r){t=Us.get("CJson")}var t,n=this;n.minifyData=function(e){return e&&0!=e.length?t.stringify(e):void 0},n.deminifyData=function(e){return e?t.parse(e):void 0},e.apply(null,arguments)}function z(){function e(e,n,r){t=n}this.LocalSVNRevision="$Rev: 5600 $";var t,n=this;n.minifyData=function(e){return e&&0!=e.length?t.toJSON(e):void 0},n.deminifyData=function(e){return e?t.secureEvalJSON(e):void 0},e.apply(null,arguments)}function Y(e,t,n){function r(){i=Us.create("StringCache")}var i,o=this;o.minifyData=function(n,r){if(n&&0!=n.length){var o=t.toJSON(n),a=e.compressToEncodedURIComponent(o);return i.set(o,a),a}},o.deminifyData=function(r){if(r)try{var o=i.getKey(r);return void 0===o&&(o=e.decompressFromEncodedURIComponent(r),i.set(o,r)),t.secureEvalJSON(o)}catch(a){n.error(a,"error deminifying data: "+r)}},r.apply(null,arguments)}function q(){function e(e){i=e.serverDataSenderManager,s=e.actionUrl,a=e.beforeSendingManipulationFunc,u=e.technicalSuccessHandler,l=e.sendingThreshold,c=e.dataType,d=e.dateSenderLogFeature,g=e.requestParamsFunc,m=e.logError,f=e.logger.wrapCustomerLog(d),v=e.dataIdFieldName||"iN",b=e.successCallback,S=e.failCallback,I=e.shouldTruncateData,T=e.storageEnabled!==!1?!0:!1,T&&(w=e.defaultDataStorageLifeSeconds,y=new at(e.stateManager,e.twoLettersDataType),o=new R(y,w,m,e.recursiveMinification),E=C.data())}function t(){var e=0;return T&&(e=y.getFromStorage(k,0),y.saveToStorage(k,e+1,w)),e}function n(){o.saveData(E)}function r(){E=o.getData()}this.LocalSVNRevision="$Rev$";var i,o,a,s,u,l,c,d,f,g,h,m,v,y,w,b,S,T,I,C=this,E=[],k="wm-nx",_=10;C.isStorageEnabled=function(){return T},C.sendData=function(e){function r(){if(h)return void f("Not accepting anymore data",3);if(E=C.data(),i.isServerSick())if(I===!1&&E.length<_)o();else{var e=p("TypedDataSender - Server is sick, ignoring new data of type {0} for now",c);f(e,3)}else o(),i.sendData()}function o(){T||(E.length=0),a&&a(E,e),e[v]=t(),E.push(e),T&&n()}if("object"!=typeof e){var s=p("TypedDataSender - got object with value {0} of type {1} instead of object ({2}).",e,typeof e,c);return void f(s,1)}T?y.refreshGetData(null,r):r()},C.persistData=function(){T&&(n(),E&&0!=E.length||y.removeFromStorage(k))},C.data=function(){return T&&r(),E=E?E:[]},C.actionUrl=function(){return s},C.sendingThreshold=function(){return l},C.dataType=function(){return c},C.truncateData=function(){T&&(E=C.data(),E.splice(1,E.length-1),C.persistData())},C.clearAndStopSavingData=function(){h=!0,E.length=0,T&&o.removeData()},C.technicalSuccessHandler=function(){return u},C.successCallback=function(){return b},C.failCallback=function(){return S},C.requestParamsFunc=function(){return g},C.getDataIdFieldName=function(){return v},C.shouldTruncateData=function(){return I},e.apply(null,arguments)}function K(e,t,n,r,i,o,a,s){function l(){B=r.defaultDataStorageLifeSeconds,U=r.dateSenderLogFeature,V=r.maxSickAttemps||X,Q=r.sendDataAjaxTimeout||Z,W=r.checkDataToSendInterval||J,$=r.attemptsWaitTime||ee,G=t.wrapCustomerLog(U)}function c(){var e=d();return e?e:(G("serverDataSenderManager - no data to send. marking it healthy",3),void C())}function d(){for(var e=g(),t=e.length-1;t>=0;t--){var n=e[t],r=n.data();if(r.length>0)return{dataSender:n,data:r}}}function g(){return y(re)}function h(){var e=d(),t=e&&e.data;t||C()}function m(){i.removeData(z),i.removeData(Y),i.removeData(K)}function v(){return R?(G("There's already a pending request to server",3),!0):!1}function w(){var e=c();if(e&&!v()){var t=e.dataSender,n=e.data;G(p("Got {0} {1}s to send, starting now",n.length,t.dataType()),3),E(n,t)}}function b(){if(j)return void G("Already waiting for server's health",5);null!=F&&(F.clear(),F=null),j=!0;var e=i.getData(Y);if(e=e?++e:1,e>V){var t=p("Server wasn't healthy for more than {0} attempts, restarting sick mode",e);G(t,0),i.removeData(K),i.removeData(Y),j=!1,b()}else{var n=S(e),r=p("Sick attempts: {0}, time before next retry: {1} second(s)",e,n/1e3);G(r,3),H=s.libSetTimeout(function(){i.refreshGetData(null,function(){i.removeData(K),i.saveData(Y,e,B),j=!1,w()})},n)}}function S(e){var t=i.getData(K);if(!t){var n=T(e);t=(new Date).getTime()+n,i.saveData(K,t,B)}var r=t-(new Date).getTime();return r}function T(e){return $[e]}function I(){i.getData(z);C(),R=!1,w()}function C(){i.removeData(z),i.removeData(Y),i.removeData(K),j=!1}function E(e,t){if(0==n.get().length)return void G(p("RecorderServerName is {0}, can't send data of type {1}",n.get(),t.dataType()),2);if(0==e.length)return void G("dataArray's length is 0, no data to send",3);null!=F&&(F.clear(),F=null),R=!0;var r=t.sendingThreshold(),i=f(e);i.length>r&&(i=i.splice(0,r));var s=t.requestParamsFunc()(i),u=o.execute({url:n.get()+t.actionUrl(),dataType:"jsonp",data:s,timeout:Q});a.isFeatureEnabled("bypassAuditServer")?_(i,u,t):x(i,u,t);var l=p("Sent {0} data of type {1} to server at {2}",i.length,t.dataType(),(new Date).toString());G(l,3)}function k(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r],o=i[t];o&&o>n&&(n=o)}return n}function _(e,t,n){t.error(function(t,r,i){if(200==t.status&&"parsererror"==r)P(e,n);else{var o=p("Server technical (AJAX) error (2) jqXHR:{0}, textStatus:{1}, errorThrown:{2}",u(t),r,i);G(o,3),O(i,n)}}),t.success(function(e){var t="Got success while in bypass player server mode";G(t,3),_makeTutorial.Logger.error(null,t)})}function x(e,t,n){t.success(function(t){G("Sending data ajax success",3),A(t,e,n)}),t.error(function(t,r,i){200==t.status&&"parsererror"==r?L(e,n,i):O(i,n)})}function A(e,t,n){if(n.technicalSuccessHandler&&n.technicalSuccessHandler())n.technicalSuccessHandler()(e,function(){var r=e.Data||e;L(t,n,r)},function(){O(e.Data||e,n)},function(){var r=e.Data||e;P(t,n,r)},t);else switch(e.WMResultCode){case te.Success:P(t,n,e.Data);break;case te.LogicalError:G(n.dataType()+" : Logical error sending data. "+e.Data,3),L(t,n,e.Data);break;case te.TechnicalError:G(n.dataType()+" : Technical error sending data",3),O(e.Data||e,n);break;default:G(n.dataType()+" : No error code received - treated as technical error",3),O(e.Data||e,n)}}function P(e,t,n){if(G("The technical success was also logical success",3),D(e,t),I(),t.successCallback){var r=t.successCallback();r&&r(n)}}function D(e,t){N(e,t)}function N(e,t){for(var n=t.getDataIdFieldName(),r=k(e,n),i=t.data(),o=i.length-1;o>=0;o--){var a=i[o];a[n]<=r&&i.splice(o,1)}t.persistData()}function L(e,t,n){if(G(p("Logical error happened, discarding {0} {1}",e.length,t.dataType()),3),N(e,t),I(),R=!1,w(),t&&t.failCallback){var r=t.failCallback();r&&r(n)}}function O(e,t){if(i.saveData(z,1,B),G("Truncating data due to sick server",3),M(),R=!1,t&&t.failCallback){var n=t.failCallback();n&&n(e)}b()}function M(){for(var e=g(),t=e.length-1;t>=0;t--){var n=e[t];n.shouldTruncateData()&&n.truncateData()}}this.LocalSVNRevision="$Rev$";var R,j,F,B,U,G,V,W,Q,H,$,z="wm-sk",Y="wm-sat",K="wm-sst",X=2,J=3*Tf,Z=60*Tf,ee={1:If,2:4*If},te={Success:0,LogicalError:1,TechnicalError:2},ne=this,re={};ne.register=function(n,r){if(re[n])return re[n];var o=new q({beforeSendingManipulationFunc:r.beforeSendingManipulationFunc,actionUrl:r.actionUrl,technicalSuccessHandler:r.technicalSuccessHandler,successCallback:r.successCallback,failCallback:r.failCallback,dataType:r.dataType,twoLettersDataType:n,serverDataSenderManager:ne,sendingThreshold:r.sendingThreshold,stateManager:i,storageEnabled:r.storageEnabled!==!1?!0:!1,dateSenderLogFeature:U,requestParamsFunc:r.requestParamsFunc,dataIdFieldName:r.dataIdFieldName,defaultDataStorageLifeSeconds:void 0!=r.dataStorageLifetimeSeconds?r.dataStorageLifetimeSeconds:B,logError:e.Logger.error,logger:t,recursiveMinification:r.recursiveMinification,shouldTruncateData:r.shouldTruncateData===!1?!1:!0});return re[n]=o,o},ne.start=function(e){ne.sendData()},ne.stop=function(e){m(),ne.removeAllData(),null!=F&&(F.clear(),F=null),null!=H&&(H.clear(),F=null)},ne.sendData=function(){var e=c();if(e&&!v()){var t=e.dataSender,n=e.data;if(ne.isServerSick())return G("Waiting for server's health in sendData",3),void b();if(n.length>=t.sendingThreshold())G(p("sendData - Got {0} {1}s to send, starting now",n.length,t.dataType()),3),null!=F&&(F.clear(),F=null),E(n,t);else if(null==F||F.cleared){var r=p("Got {0} {1}s to send, waiting {2}",n.length,t.dataType(),W);G(r,3),F=s.libSetTimeout(function(){F=null,i.refreshGetData(null,function(){var e=c();if(e&&!v()){var t=e.dataSender,n=e.data;E(n,t)}})},W)}else G("sendData - timeout already exists",5)}},ne.isServerSick=function(){return h(),i.getData(z)||!1},ne.removeAllData=function(){for(var e=g(),t=e.length-1;t>=0;t--)e[t].clearAndStopSavingData()},l.apply(null,arguments)}function X(e){function t(e){var t={Type:e},n=sa();return n&&(t.WalkthruId=n.TutorialId,t.StepIndex=Yd),t}function n(){return window._walkmeInternals?window._walkmeInternals:{}}this.LocalSVNRevision="$Rev$";var r=this;r.sendApiEvent=function(n,i){r.sendEditorEvent(n,i);try{var o=t(n);i&&(o.ExtraData=i),window.walkme_event&&walkme_event(o)}catch(a){e.error(a)}},r.sendInternalEvent=function(t,r,i){try{if(!window.wmjQuery)return;var o=n();wmjQuery(o).trigger(t,[r,i]),wmjQuery(o).trigger("AllEvents",[t,r,i])}catch(a){e.error(a)}},r.sendAutomationEvent=function(n,r){try{var i=t(n);if(r){if(!window.wmjQuery)return;wmjQuery.extend(i,r)}window.walkme_automation_event&&walkme_automation_event(i)}catch(o){e.error(o)}},r.oldSendApiEvent=function(n,r){try{var i=t(n);r&&(i.ExtraData=r),window.mt_event&&mt_event(i)}catch(o){e.error(o)}},r.sendEditorEvent=function(n,r){try{var i=t(n);r&&(i.ExtraData=r),window.walkme_editor_event&&walkme_editor_event(i)}catch(o){e.error(o)}}}function J(e){function t(){}function n(e){e.dataType="json"}this.LocalSVNRevision="$Rev$";var r,i,o=this,a=e;o.setFeatures=function(e,t){r=e,i=t},o.execute=function(e){e.dataType=e.dataType?e.dataType:"jsonp","jsonp"===e.dataType&&(r||i&&ns())&&n(e);var t=wmjQuery.ajax(e);return a.sendAutomationEvent("ajaxSent",e),t},o.loadTextFile=function(e,t,n,r,i){r=r||function(e,t,n){},mtjQuery.ajax(e,{cache:!!i,dataType:"jsonp",jsonpCallback:t,success:n,error:r})},t.apply(null,arguments)}function Z(e,t,n){this.logError=function(r){if(rs()||!Vc)return!0;var i=Vc+"/Analytics/ErrorReport";r.tid=(new Date).getTime(),r.hostInfo={url:t.getUrl(),browser:t.browser,os:t.os,screen:t.getWinSize(),mobile:t.isMobile()},r.wmInfo={uId:n.getUserGuid(),euId:n.getEndUserGuid(),permId:n.getPermutationId(),language:n.getLanguage(),cVars:n.getCustomVars(),env:n.getEnvironmentId()},e.execute({url:i,data:r})}}function ee(e,t){function n(n){return e.getData(n)==t.getEndUserGuid()}function r(n,r){e.saveData(n,t.getEndUserGuid(),r)}var i=this;i.wasActionPerformed=n,i.logActionPerformed=r,i.ACTION_NAMES={walkmeVisibleReported:"wm-wmv"}}function te(e,t,n,r){function i(){}function o(e,t){a()&&r.postEvent(e,t)}function a(){return n.isEnabled()}var s=this;s.isEnabled=a,s.postEvent=o,s.getEventAppByDeployable=t.convert,s.isReportingEnabled=a,s.EVENT_TYPES=e.EVENT_SENDER_EVENT_TYPES,s.ACTION_NAMES=e.EVENT_SENDER_ACTION_NAMES,s.ACTION_ENTITY_TYPES=e.EVENT_SENDER_ACTION_ENTITY_TYPES,s.EVENT_APPS=e.EVENT_SENDER_EVENT_APPS,s.CANCEL_REASONS=e.EVENT_SENDER_CANCEL_REASONS,i.apply(this,arguments)}function ne(e){function t(t){return t in r?r[t]:e.EVENT_SENDER_EVENT_APPS.None}var n=this;n.convert=t;var r={};r[e.DEPLOYABLE_TYPE.Task]=e.EVENT_SENDER_EVENT_APPS.Task,r[e.DEPLOYABLE_TYPE.Tutorial]=e.EVENT_SENDER_EVENT_APPS.Walkthru,r[e.DEPLOYABLE_TYPE.Shuttle]=e.EVENT_SENDER_EVENT_APPS.Shuttle,r[e.DEPLOYABLE_TYPE.Launcher]=e.EVENT_SENDER_EVENT_APPS.Launcher,r[e.DEPLOYABLE_TYPE.Content]=e.EVENT_SENDER_EVENT_APPS.Content,r[e.DEPLOYABLE_TYPE.ShoutOut]=e.EVENT_SENDER_EVENT_APPS.ShoutOut,r[e.DEPLOYABLE_TYPE.ShoutOutBar]=e.EVENT_SENDER_EVENT_APPS.ShoutOutBar,r[e.DEPLOYABLE_TYPE.Survey]=e.EVENT_SENDER_EVENT_APPS.Survey,r[e.DEPLOYABLE_TYPE.AbExperiment]=e.EVENT_SENDER_EVENT_APPS.AbTesting,r[e.AUDIT_TYPE.OPEN_TICKET]=e.EVENT_SENDER_EVENT_APPS.Ticket}function re(e,t,n,r,i){function o(){}function a(){var o={ip:"127.0.0.1",browser:e.browser,os:e.os,screen:r.isMobileNative()?e.getScreenSize():e.getWinSize(),mobile:e.isMobile()};return r.isMobileNative()&&(o.browser.version=i.getSdkVersion()),!t.isReady()||t.isFeatureEnabled(n.FEATURES.DisableWidgetOpenFullUrl)||t.isFeatureEnabled(n.FEATURES.EventSenderDontSendPageUrl)?(o.url="",o.urlWithoutQueryString=""):(o.url=e.getUrl(),o.urlWithoutQueryString=e.getUrlWithoutQueryString()),t.isReady()&&!t.isFeatureEnabled(n.FEATURES.EventSenderDontSendPageTitle)?o.pageTitle=e.getPageTitle():o.pageTitle="",o}var s=this;s.getEnvironmentData=a,o.apply(this,arguments)}function ie(e,t,n,r){function i(){}function o(i){try{if(i&&(i.isPreviewMode||i.isPlayMode||i.isInRecorder))return;if(t.wasActionPerformed(s))return;e.postEvent(e.EVENT_TYPES.Visible,{type:e.EVENT_APPS.Walkme}),t.logActionPerformed(s,n.TIME_PERIODS.DaySeconds)}catch(o){r.error(o)}}var a=this;a.report=o;var s=t.ACTION_NAMES.walkmeVisibleReported;i.apply(null,arguments)}function oe(e,t,n){function r(e){s=e.postEventAction}function i(){return{url:t.getUrl(),browser:t.browser,os:t.os,screen:t.getWinSize(),mobile:t.isMobile()}}function o(){return{uId:n.getUserGuid(),euId:n.getEndUserGuid(),permId:n.getPermutationId(),language:n.getLanguage(),cVars:n.getCustomVars(),env:n.getEnvironmentId()}}var a,s,l=this;l.setBaseUrl=function(e){a=e},l.isReady=function(){return!(!a||!s)},l.logError=function(e,t){if(l.isReady()){var n;try{n=o()}catch(r){}var c=wmjQuery.extend({time:(new Date).getTime(),level:"error",app:"player",message:e},i(),n,t||{});wmjQuery.ajax({url:a+s,data:u(c),contentType:"text/plain",dataType:"json",type:"POST"})}},r.apply(l,arguments)}function ae(e,t){function n(e){return e in a?a[e]:(t.error(null,"There is no step action with the given name: "+e),"")}var r=this;r.get=n;var i=e.STEP_ACTION,o=e.EVENT_SENDER_STEP_ACTION_NAMES,a={};a[i.Redirect]=o.Redirect,a[i.PlayStep]=o.PlayStep,a[i.WaitForCondition]=o.WaitForCondition,a[i.Branch]=o.Branch,a[i.StopWt]=o.StopWt,a[i.Delay]=o.Delay,a[i.Refresh]=o.Refresh,a[i.OpenPlayerMenu]=o.OpenPlayerMenu,a[i.SetWalkMeData]=o.SetWalkMeData,a[i.PassOwnership]=o.PassOwnership}function se(e,t,n,r,i,o){function a(){var o=s(e.get());t&&t.setBaseUrl(o),n.setBaseUrl(o),n.enable(),r.setBaseUrl(o),r.enable(),i.init()}function s(e){var t=u(),n=o.location.protocol,r=/^http[^s]/i,i=r.test(n),a=new RegExp("^(//|"+n+")","i"),s=a.test(e);return i&&!s&&t?e.replace(/^https:/,"http:"):e}function u(){return void 0!==(new XMLHttpRequest).withCredentials?!1:"undefined"!=typeof window.XDomainRequest?!0:!1}var l=this;l.init=a}function ue(e){function t(){e.sleep(),e.disable()}var n=this;n.disable=t}function le(e,t,n){function r(){}function i(){o(e.EVENTS.GoalReached),o(e.EVENTS.AbExperimentLinkedGoalReached)}function o(e){t.bind(e,function(e,t){n.postEvent(t)})}var a=this;a.init=i,r.apply(this,arguments)}function ce(e,t,n,r,i,o){function a(){}function s(a){try{var s=a.goal,u=i.getDeployablesManager(s.GoalType),l=u.getById(s.RelatedObjectId),c=o.getGoalsFromDeployable(l);return e.postEvent(n.EVENT_SENDER_EVENT_TYPES.GoalReached,{type:r.convert(s.GoalType),oId:s.Id,oName:s.Name,pId:a.identifier?a.identifier:-1,total:c.length,owId:l.Id,owName:l.Name,main:s.IsMainGoal,interactionGuid:a.interactionGuid})}catch(d){return t.error(d),!0}}var u=this;u.postEvent=s,a.apply(null,arguments)}function de(e,t){function n(){return e.isFeatureEnabled()&&t.isEnabled()}var r=this;r.isEnabled=n}function fe(e,t,n,r,i){function o(){}function a(e,t){return d("debug",e,t)}function s(e,t){return d("info",e,t)}function l(e,t){return d("warn",e,t)}function c(e,t){return d("error",e,t)}function d(n,r,i){if(p())try{var o=u(f(n,r,i));e.send(o)}catch(a){throw t&&t.logError(u(a.message)),a}}function f(e,t,n){var o=r.getEnvironmentData(),a=i.getWalkMeData();return n&&"object"!=typeof n&&(n=null),wmjQuery.extend({time:(new Date).getTime(),app:"player",level:e,message:t},o,a,n||{})}function p(){return n.isFeatureEnabled()}var g=this;g.log=d,g.log.debug=a,g.log.info=s,g.log.warn=l,g.log.error=c,g.isLoggingEnabled=p,o.apply(this,arguments)}function pe(e,t,n,r){function i(n,r){try{var i=u(o(n,r));e.send(i)}catch(a){throw t&&t.logError(u(a.message)),a}}function o(e,t){var i=a(e);return"[object Function]"===Object.prototype.toString.call(t)?i.data=t():i.data=t,i.env=n.getEnvironmentData(),i.wm=r.getWalkMeData(),i}function a(e){return{time:(new Date).getTime(),
sId:s(),pgId:l(),type:e}}function s(){return"-1"}function l(){return"-1"}var c=this;c.postEvent=i}function ge(e,t,n,r){function i(){return{uId:e.getUserGuid(),euId:e.getEndUserGuid(),permId:e.getPermutationId(),language:e.getLanguage(),cVars:e.getCustomVars(),env:e.getEnvironmentId(),interactionGuid:t.getCurrentInteractionGuid(),platform:n.get("platform"),userVars:r.getUserVars()}}var o=this;o.getWalkMeData=i}function he(e){function t(){var t={name:e.getPropertyValue("name"),role:e.getPropertyValue("role"),type:e.getPropertyValue("type"),status:e.getPropertyValue("status"),info:e.getPropertyValue("info")};return t}var n=this;n.getUserVars=t}function me(e,t,n){function r(){return n.isReady()&&!n.isFeatureEnabled(e.FEATURES.DisableEventCollection)&&!t.isIE(7)}var i=this;i.isFeatureEnabled=r}function ve(){function e(e){if(e){var t={};return n(t,e.objectId,"id"),n(t,e.type,"type"),n(t,e.sType,"sType"),t}}function t(t){return{pInit:e(t)}}function n(e,t,n){void 0!==t&&null!==t&&(e[n]=t)}var r=this;r.map=e,r.mapForExtend=t}function ye(e,t,n,r){function i(){u=[],a(e.EVENTS.PlayerClicked),a(e.EVENTS.LauncherClicked),a(e.EVENTS.AutoStartActivated),a(e.EVENTS.PermalinkClicked),a(e.EVENTS.ApiWasCalled,n),a(e.EVENTS.WidgetOpening,r)}function o(){return u}function a(e,n){var r=t.get(n);u.push({eventName:e,callback:r.initiateInteraction})}var s=this;s.get=o;var u;i.apply(this,arguments)}function we(e,t){function n(){u=t.wrapCustomerLog(l)}function r(){return s?s:null}function i(e){s=e}function o(){s=e.generateGuid();var t="New interaction guid was created : "+s;u(t,3)}var a=this;a.getCurrentInteractionGuid=r,a.setCurrentInteractionGuid=i,a.beginNewInteraction=o;var s,u,l="interaction";n.apply(this,arguments)}function be(e,t){function n(){}function r(){for(var e=t.get(),n=0;n<e.length;n++){var r=e[n];i(r)}}function i(t){e.bind(t.eventName,function(e,n){t.callback(n)})}var o=this;o.init=r,n.apply(this,arguments)}function Se(e){function t(e){return new n(e)}function n(t){function n(n){n=r(n),(!t||t.shouldInitiateNewInteraction(n))&&e.beginNewInteraction()}function r(e){var t=i(e);return t&&(e.actualInitiatorType=t),e}function i(e){return e&&e.initiator&&void 0!=e.initiator.type?e.initiator.type:void 0}var o=this;o.initiateInteraction=n}var r=this;r.get=t}function Te(e,t){function n(e){o=e.initiatorsThatBeginNewInteraction}function r(t){var n=void 0==t.actualInitiatorType||-1!=e(t.actualInitiatorType,o);return n}var i=this;i.shouldInitiateNewInteraction=r;var o;n.apply(this,[t])}function Ie(){function e(){return!rs()}var t=this;t.isEnabled=e}function Ce(){var e=this;e.getEventSender=function(){return Us.get("EventSender")}}function Ee(e,t,n,r,i,o){function a(){b=void 0==e.checkInterval?m:e.checkInterval,f=t.wrapCustomerLog(Hs)}function s(e,t,n){I[e.Id]={relatedObjectId:e.RelatedObjectId,goalType:e.GoalType,evaluator:n,goalCompletedFunc:t.goalCompletedFunc,identifier:t.identifier,interactionGuid:t.interactionGuid}}function u(e,t){var o=S[e.Id];if(o){if(e.IsLinkedGoal){var a=p("Skipping goal watch - Goal is already watched : {0}, type: {1}",e.Name,e.GoalType);return f(a,3),null}w.removeGoalWatch(e.Id)}var u=i.getTrackData(e);u.RelatedObjectId=e.RelatedObjectId;var l={evaluationPollingIntervalMs:b,jqueryPollingIntervalMs:v,elementPollingIntervalMs:v,featureName:Hs,elementName:"Goal: "+e.Name,trackEvent:Yr(e.GoalType)+" - Goals - Completion Condition",trackData:u},d=Us.create("ConditionChecker",l);S[e.Id]=e,T++,s(e,t,d);var m=t.identifier,y=m?p(", PlayGuid of : {0}",m):"",a=p("Start watching Goal : {0}, type: {1} {2}",e.Name,e.GoalType,y);return f(a,3),d.onValueChanged(function(t){t&&c(e)}),d.onPreEvaluation(function(t,n){n||(E?E=!1:0===C&&(g=0,f("============================ CHECKING GOALS ==============================================================",2)),e.goalStart=(new Date).getTime()),x.sendAutomationEvent("CheckingGoal",{GoalId:e.Id,GoalName:e.Name});var r=n?" (async)":"",i=p("Goal: {0} - Checking Goal , id : {1}, type: {2}, RelatedObjectId: {3}{4}",e.Name,e.Id,e.GoalType,e.RelatedObjectId,r);f(i,3)}),d.onEvaluated(function(t,i){var o=(new Date).getTime(),s=o-e.goalStart,u=i?" (async)":"";a=p("Goal: {0} - checking finished, id : {1}, took {2} ms{3}",e.Name,e.Id,s,u),f(a,4),x.sendInternalEvent("GoalConditionEvaluated",{goal:e},{playGUID:m}),i||(C++,g+=s,C>=T&&(f("Done checking "+C+" Goals. took: "+g+" ms",2),f("============================ DONE CHECKING GOALS =========================================================",2),C=0),g>h&&(f("Goals tracking time until now is "+g+" ms. It broke the time limit of "+h+" ms. Stopped tracking current goals."),r.getData(k)||(a=p("Goals tracking broke limit and was stopped - user id: {0}, end user id: {1}, time: {2}, browser: {3}, url: {4}",bd,_makeTutorial.getEndUserId(),g,n.browser.string,window.location.href),_makeTutorial.Logger.error({},a),r.saveData(k,!0,_)),w.removeAllGoalsWatch()))}),e}function l(e){return I[e].evaluator}function c(e){f('Goal "'+e.Name+'" Reached! ',1);var n=e.Id,r=I[n],i=w.createGoalCompletedParams(e,r);try{r.goalCompletedFunc&&r.goalCompletedFunc(i)}catch(a){t.error(a,"completing goal callback threw an exception.")}w.removeGoalWatch(e.Id),x.sendInternalEvent(o.EVENTS.GoalReached,d(r,e)),x.sendApiEvent(o.EVENTS.GoalReached,{GoalId:e.Id,GoalName:e.Name}),x.sendAutomationEvent(o.EVENTS.GoalReached,{GoalId:e.Id,GoalName:e.Name})}function d(e,t){return{goal:t,identifier:e.identifier,interactionGuid:e.interactionGuid}}this.LocalSVNRevision="$Rev$";var f,g,h=500,m=5e3,v=500,y="Conditions",w=this,b=null,S={},T=0,I={},C=0,E=!1,k="wm-gb",_=86400,x=Us.get("CommonEvents");this.addGoalsWatch=function(e,t){for(var n=e.length-1;n>=0;n--)for(var r=e[n],i=e.length-1;i>n;i--){var o=e[i];r.Id==o.Id&&e.splice(i,1)}for(var a=[],n=0;n<e.length;n++){var s=u(e[n],t);s&&a.push(s)}for(var n=0;n<a.length;n++){var c=a[n],d=l(c.Id);d.evaluateAsync(c.Settings[y]),d.isPollingEvaluationNeeded()||--T}},this.cleanResources=function(){for(var e in S){var t=l(e);t.cleanResources()}},this.removeGoalWatch=function(e){if(f(e,5,"goalProblem"),f(S[e],5,"goalProblem"),S[e]){var t=l(e);t.isPollingEvaluationNeeded()&&(--C,--T,0==C&&T>0&&(E=!0)),t&&t.cleanResources(),delete S[e],delete I[e]}},this.removeAllGoalsWatch=function(){w.cleanResources(),S={},I={},T=0,C=0},this.completeGoalById=function(e){var t=S[e];return t?void c(t):void f("Could not complete goal with id "+e+" - it was already completed or does not exist.",3)},w.createGoalCompletedParams=function(e,t){var n={Id:e.Id,GoalType:t.goalType,RelatedObjectId:t.relatedObjectId,Name:e.Name,identifier:t.identifier,interactionGuid:t.interactionGuid};return n},w.getGoalsCountFromDictionary=function(){var e=w.getCheckedGoals(),t=0;for(var n in e)void 0!=S[n]&&void 0!=S[n].Id&&void 0!=S[n].Settings&&t++;return t},a.apply(null,arguments),w.getCheckedGoals=function(){return S},w.getGoalsCompletionParams=function(){return I}}function ke(e,t,n,r,i,o,a,s,u,l,c,d){function f(){W=o.wrapCustomerLog(Hs),Q=i.register("go",{actionUrl:"/Statistics/AddCompletedGoal",technicalSuccessHandler:C,defaultDataStorageLifeSeconds:H,prefixForStorage:"go",sendingThreshold:1,dataType:"deployable goal",requestParamsFunc:function(e){var t=e[0],n=t.GoalType==Fl.AbExperiment;return{goalId:t.Id,playGuid:t.identifier,permutationId:r.getPermutationId(),endUserGuid:r.getEndUserGuid(),source:r.getEnvironmentId(),localTime:v(),url:as(),isAbTesting:n}}})}function g(e){J.push(e)}function h(){X=!0}function m(e,n){var r=k(e);if(r.length>0){var i=r[0].GoalType,o=D(e,n);_(e,i,n,o);var a=y(o);t.addGoalsWatch(r,a);var s=Yr(i),u=p("Started watching {0} : {1}",s,e.Name);W(u,2)}}function y(e){var t=e[Y],n=(e[q],e[K]),r={identifier:t,interactionGuid:n,goalCompletedFunc:te};return r}function w(e){B(e)}function b(e){var t=T(!0);W("Restoring watched Goals... "+t+" Walk-Thrus are watched.",2),e&&s.libSetTimeout(S,ee)}function S(){var e=T(!1);e&&W("New watched deploybles... "+e+" more items are now watched.",2),s.libSetTimeout(S,ee)}function T(e){var t=0;return mtjQuery.each(c.DEPLOYABLE_TYPE,function(n,r){var i=j(r);for(var o in i)if(void 0!=i[o]&&void 0!=i[o][z]){var a=i[o];(e||I(r,a))&&(O(a,r),t++)}}),t}function I(e,t){if(!Z[e])return!0;var n=t[z];return Z[e][n]!=t[Y]?!0:!1}function C(e,t,n,r){"true"==e?r(parseInt(e)):"error"==e?(W("Completed goal - Internal Error",3),n()):(W("Completed goal - Unknown Error",3),t())}function E(e,t){if(void 0!=e&&t){var n=j(e);if(n){var r=n[t];if(r){var i=r[Y],o=r[q];return{playGuid:i,finishedGoals:o}}}}}function k(e){var t=e.Goals;return t||(t=[]),t.slice()}function _(e,t,n,r){var i=P(e);A(t,P(e),r),x(t,i,n)}function x(e,t,n){Z[e]=Z[e]||{},Z[e][t]=n}function A(t,n,r){var i=U(t);e.addToDictionary(i,n,r,H)}function P(e){return e.Id?e.Id:e.TutorialId}function D(e,t){var n={};return n[z]=P(e),n[Y]=t,n[q]=[],n[K]=l.getCurrentInteractionGuid(),n}function N(e,t){var r=n.getDeployablesManager(t),i=r.getById(e);return i?k(i):[]}function L(e,t){for(var n,r=0;r<e.length;r++)if(e[r].Id==t){n=e[r];break}return n}function O(e,n){var r=e[z],i=N(r,n);if(i.length>0){var o=e[Y],a=e[q];G(i,a),x(n,r,o);var s=y(e);t.addGoalsWatch(i,s)}}function M(e){return d.isEnabled()?(W("Sending completed Goal info to server ("+e.Name+", "+e.identifier+")",3),Q.sendData({Id:e.Id,GoalType:e.GoalType,identifier:e.identifier}),!0):!0}function R(e){var t=j(e.GoalType),n=t[e.RelatedObjectId];if(n&&e.identifier==n[Y]){n[q].push(e.Id);var r=n[q].length,i=N(e.RelatedObjectId,e.GoalType).length;i==r?F(e.GoalType,e.RelatedObjectId):A(e.GoalType,e.RelatedObjectId,n)}for(var o=0;o<J.length;o++)J[o](e)}function j(t){var n=U(t),r=e.getData(n,{});return r}function F(t,n){var r=U(t);e.removeFromDictionary(r,n,H)}function B(t){var n=U(t);e.removeData(n)}function U(e){var t=p("{0}-{1}",$,e);if(X){var n=r.getEndUserGuid();n&&(t+="-"+n)}return t}function G(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var o=e[i].Id;if(o==r){e.splice(i,1);break}}}var V=this;V.LocalSVNRevision="$Rev$",V.onGoalCompleted=g,V.enableMultiUserStorage=h,V.startWatchingDeployable=m,V.stopWatchingDeployables=w,V.init=b,V.getCompletedGoals=E,V.getDeployableGoalsByIdAndType=N,V.getWatchedDeployablesOfType=j,V.getGoalsFromDeployable=k,V.getGoalById=L;var W,Q,H=3600,$="wm-wtchd",z="tID",Y="plgd",q="fnsh",K="igd",X=!1,J=[],Z={},ee=2e3,te=function(e){var t=r.getEnvironmentId();if(t!=c.SOURCES.preview)try{a.audit(e)}catch(n){}t!=c.SOURCES.preview&&M(e),R(e)};f.apply(null,arguments)}function _e(){function e(e){h=e.lib,c=e.drawableType,d=e.drawableId,f=e.defaultSettings,p=e.cssKeysValues,y(e.element),S(e.settings),l=h.Logger.wrapCustomerLog(Zs)}function t(e){return k()+"-"+c+"-"+e+"-"+d}function n(){var e=E(),t="walkme-custom-"+e+" walkme-to-remove ";if(p)for(var n=0;n<p.length;n++)t+=" walkme-custom-"+e+"-"+p[n].name+"-"+p[n].id;return t}function r(e,t){var n=_(e,t),r=Ss(e,T());return!t&&r&&(i(n,r),n.color=r.color||n.color),n}function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(m(t[n])?e[n]=parseFloat(t[n]):e[n]=t[n])}function a(){for(var e=0;4>e;e++)b().push(u(e))}function s(e){if(e)try{e.remove()}catch(t){l("[highlighter] error removing div",3)}}function u(e){var n=I(t(e));return n.addClass(g),n.addClass("walkme-custom-"+E()+"-position-"+e),n}this.LocalSVNRevision="$Rev$";var l,c,d,f,p,g,h,v=new o(this),y=v.Prop.Protected("element",null),w=v.Prop.Protected("settings",null),b=v.Prop.Protected("highlighterDivs",[]),S=v.Prop.Protected("balloonSettings",{}),T=v.Prop.Protected("balloonSettingsKey"),I=(v.Virtual.Public("shouldShow"),v.Virtual.Protected("createDiv")),C=v.Virtual.Protected("applyStyle"),E=v.Virtual.Protected("getInstanceName"),k=v.Virtual.Protected("getClassName"),_=v.Virtual.Protected("getSettings",function(e){return{left:0,top:0,width:0,height:0}});v.Protected("init",function(e){w(r(e,f)),g=n()});v.Virtual.Public("highlight",function(){try{x(),a(),C(b())}catch(e){h.Logger.error(e)}});var x=v.Virtual.Public("unhighlightElement",function(){for(var e=0;e<b().length;e++)s(b()[e]);b().length=0});e.apply(null,arguments)}function xe(){function e(e){m.Extends(_e,e),u=e.element,g=e.lib,l=m._base.settings,c=e.monitor,p=t(u),h=g.Logger.wrapCustomerLog(Zs),m._base.balloonSettingsKey(v),m._base.init(e.settings)}function t(e){var t=e.parents("body");return 0==t.length&&(t=e.parents("frameset").first()),Mf("jsp")&&(t=Cs(e,t)),t}function n(e,t,n,r,i,o,a){var s=e[t];if(s)return ip(s,l().zindex),s.css("top",n+"px").css("left",r+"px").css("width",i+"px").css("height",o+"px").css("background-color",l().color),a&&s.css("font-size",l().thickness+"px"),s}function r(e){for(var t=0;t<b.length;t++){var n=b[t];n.monitor(e.pageX,e.pageY)}}function i(e){try{var t=np(e);t&&mtjQuery(t).unbind("mousemove",r)}catch(n){}}function a(e){for(var t=-1,n=0;n<b.length;n++)if(b[n].getHash()==e.getHash()){t=n;break}t>=0&&b.splice(t,1),0==b.length&&i(e.getElement())}function s(){function e(e){n=e.element,r=up(),i=!0}function t(e,t,n){return e>=t&&n>=e}var n,r,i,o=this;this.monitor=function(e,r){try{n[0].tagName}catch(i){return void h("HighlighterRect.monitor: element destroyed.")}var o=2,a=f.y-o,s=f.x-o,u=f.h+2*o,l=f.w+2*o,c=t(e,s,s+l)&&t(r,a,a+u);this.setVisibilty(!c)},this.show=function(){o.setVisibilty(!0)},this.hide=function(){o.setVisibilty(!1)},this.setVisibilty=function(e){if(i!=e){for(var t=e?"block":"none",n=0;n<d.length;n++)d[n].css("display",t);i=e}},this.getHash=function(){return r},this.getElement=function(){return n},e.apply(null,arguments)}this.LocalSVNRevision="$Rev$";var u,l,c,u,d,f,p,g,h,m=new o(this),v="stepHlObj",y="2147483630",w="#55aaff",b=[],S=[];m.Override("shouldShow",function(){var e=Ss(Pc.get().Settings,"hlType","none");return"rect"==Ss(m._base.balloonSettings(),"hlType",e)}),m.Override("getSettings",function(e,t){var n=m._base.getSettings();return t?(n.color=w,n.thickness=1):(n.color=Pc.get().BalloonSettings.HighlighterColor||w,n.thickness=Pc.get().BalloonSettings.HighlighterThickness||1),n.zindex=Ss(e,"z-index",y),n}),m.Override("highlight",function(e){m._base.highlight(e);var t=new s({element:u});if(S.push(t),c){var n=np(u);mtjQuery(n).unbind("mousemove",r),mtjQuery(n).bind("mousemove",r),b.push(t)}}),m.Override("applyStyle",function(e){var t,r=u[0];t=u.length>1?g.getPositionHelper().getMultipleElementsRect(u):r.getBoundingClientRect();var i=np(u),o=ep(r,i,window),a=l().thickness,s=t.left+o.left+l().left-l().width/2-a,c=t.top+o.top+l().top-l().height/2-a,h=s,m=c;Mf("jsp")&&p.hasClass("jspPane")&&(s-=p.offset().left,c-=p.offset().top);var v=t.right-t.left+l().width+a,y=t.bottom-t.top+l().height+a,w=n(e,0,c,s,v+a,a,!0),b=n(e,1,c,s+v,a,y+a,!1),S=n(e,2,c+y,s,v+a,a,!0),T=n(e,3,c,s,a,y+a,!1);d=[w,b,S,T],f={x:h,y:m,w:v+a,h:y+a}}),m.Override("unhighlightElement",function(){try{if(S)for(var e=0;e<S.length;e++)a(S[e]);S.length=0,m._base.unhighlightElement()}catch(t){}}),m.Override("createDiv",function(e){var t=mtjQuery(p[0].ownerDocument.createElement("div"));return t[0].id=e,p.append(t),t}),m.Override("getInstanceName",function(){return"highlighter"}),m.Override("getClassName",function(){return"highlightDiv"}),e.apply(null,arguments)}function Ae(){function e(e){u.Extends(_e,e),a=u._base.settings,i=e.element,r=e.lib,s=r.Logger.wrapCustomerLog(Zs),u._base.balloonSettingsKey(l),u._base.init(e.settings)}function t(){var e=mtjQuery(document),t=document.documentElement.clientWidth,n=e.height();return{height:n,width:t}}function n(e,t,n,r,i){e&&(ip(e,a().zindex),e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("background-color",a().color).css("opacity",a().opacity))}this.LocalSVNRevision="$Rev$";var r,i,a,s,u=new o(this),l="stepIoObj",c="2147483629",d="#000000";u.Override("shouldShow",function(){var e=Ss(Pc.get().Settings,"ioEnabled","0");return"1"==Ss(u._base.balloonSettings(),"ioEnabled",e)&&!r.getHostData().isQuirksMode(i[0])}),u.Override("getSettings",function(e){var t=u._base.getSettings();return t.color=d,t.opacity=.5,t.zindex=Ss(e,"z-index",c),t}),u.Override("applyStyle",function(e){var o,s=t(),u=i[0],l={top:0,left:0},c=np(i);if(i.data("iframe")){var d=_.getRectRelativeToWindow(i,u,window);if(!d)return;o=d}else o=i.length>1?r.getPositionHelper().getMultipleElementsRect(i):u.getBoundingClientRect(),l=ep(u,c,window);var f=Fa(),p=o.left+l.left+a().left-a().width/2,g=o.top+l.top+a().top-a().height/2,h=o.right-o.left+a().width,m=o.bottom-o.top+a().height;n(e[0],0-f.top,0,s.width-.5,g+f.top),n(e[1],g,p+h,Math.floor(s.width-h-(o.left+a().left-a().width/2)),m),n(e[2],g+m,0,s.width-.5,s.height-(g+m)),n(e[3],g,0,o.left+a().left-a().width/2-.5,m)}),u.Override("createDiv",function(e){var t=wmjQuery("<div id="+e+" />");return mtjQuery(document).find("body").append(t),t}),u.Override("getInstanceName",function(){return"insideouter"}),u.Override("getClassName",function(){return"insideoutDiv"}),e.apply(null,arguments)}function Pe(){function e(e,t){m();var n=e?e:me;W=i(n.InitCSS),Q=i(n.Properties),H=i(n.Options),x(n.MetaData),Z=t}function t(){return!0}function n(e,t){e.removeAttr("id").find("div").removeAttr("id"),e.fadeOut(se,function(){za(e,t)})}function r(e,t){za(e,t)}function i(e){return mtjQuery.extend({},e)}function o(e){return{filter:e.css("filter")}}function a(){K&&ne?y(T):re.push(I)}function s(){q&&(A(),y(P))}function u(){if(d()){var e=D(te,l());V.postAnimation(function(){N(e)})}}function l(){return Y?F:ee?j:void 0}function c(){Mf("dontPrepForScrl")||te.css({display:"block",visibility:"hidden",filter:""})}function d(){return Y||ee}function f(e){for(var t=0;t<re.length;t++)"function"==typeof re[t]&&re[t].apply(null,arguments);re.length=0}function p(){var e=H.duration*ae;setTimeout(w,e)}function g(){mtjQuery(te).css({display:he,visibility:""}).css(ie)}function h(){te&&te.css(ie)}function m(){oe=mtjQuery({})}function v(){oe.clearQueue(ue)}function y(e){oe.queue(ue,e)}function w(){oe.dequeue(ue)}function b(){var e={},t={};E()?(e.size="height",e.osize="width"):(e.size="width",e.osize="height"),!Y&&Q.size&&(X==rc.Top&&"height"==e.size||X==rc.Left&&"width"==e.size)&&(ee=!0),t.marginTop=X==rc.Bottom?-1:1,t.marginLeft=X==rc.Right?-1:1,e.margin="margin"+ge[X],Q=S(Q,e,t),W=S(W,e,t)}function S(e,t,n){if(e){var r={};for(var i in e)if(e.hasOwnProperty(i)){var o=lp(t[i])?t[i]:i;if(r[o]=e[i],lp(n[o])){var a=r[o].toString().replace("px","");r[o]=n[o]*a+"px"}}return r}}function T(){C(ne),setTimeout(function(){w()},ce)}function I(){mtjQuery(ne).each(function(){this.show()}),w()}function C(e){var t,n,r=E(),i=r?"marginTop":"marginLeft",o=k(),a=o?1:-1,s=e.length-1;X==rc.Top&&(t="border-top-width",n="borderTopWidth"),X==rc.Bottom&&(t="border-bottom-width",n="borderBottomWidth"),X==rc.Right&&(t="border-right-width",n="borderRightWidth"),X==rc.Left&&(t="border-left-width",n="borderLeftWidth"),mtjQuery(e).each(function(e,r){this.css("visibility","hidden").css("display","block");var u=(parseInt(this.css(t),10)+2)*a,l=this.css(t),c=this[0].style.zIndex,d={};d[n]=l,d.opacity=1,o&&(d[i]=1);var f={};f.duration=ce,f.complete=function(e,t){return function(){e.css(i,""),e.css("zIndex",t)}}(this,c),e==s&&this.css("zIndex",c-1),this.css("visibility",""),o&&this.css(i,u),this.css(t,"0px"),this.animate(d,f)})}function E(){return X==rc.Bottom||X==rc.Top?!0:!1}function k(){return X==rc.Bottom||X==rc.Right?!0:!1}function _(e){!X&&W.margin&&(W.margin=0),mtjQuery(e).css({display:"none",visibility:""}).css(ie).css(W)}function x(e){e&&(Y=Hi(e.center,!1),q=Hi(e.hwa,!1),K=Hi(e.are,!1),ae=Hi(e.delay,1))}function A(){te.children(":visible").addClass("walkme-balloon-hidden-content").css("display","none")}function P(){te.children(".walkme-balloon-hidden-content").removeClass("walkme-balloon-hidden-content").fadeIn(250,function(){mtjQuery(this).css("direction",mtjQuery(this).css("direction"))})}function D(e,t){var n={position:"absolute",top:e.css("top"),left:e.css("left"),height:e.height(),width:e.width(),zIndex:e[0].style.zIndex},r=mtjQuery("<div />").css(n);return e.css({top:0,left:0}).wrap(r),t(r,e),n}function N(e){ee&&(te.css("bottom",""),te.css("right","")),te.unwrap().css(e)}function L(){te.bind("click.wm_animation",function(){if(!J&&(J=!0,M(te,de,le),ne))for(var e=0;e<ne.length;e++)M(ne[e],de,le)}),O(te)}function O(e){e.find("button,a,.walkme-custom-balloon-close-button").bind("click.wm_animation",function(e){e.stopPropagation()})}function M(e,t,n){if(0>=t)return e.css(n,""),void(J=!1);var r=[];r[n]=R(t),e.animate(r,pe,function(){M(e,t-1,n)})}function R(e){var t=e%2*2-1,n=e*fe;return n*t}function j(e,t){var n=parseInt(t.css("border-top-width"),10)+parseInt(t.css("border-bottom-width"),10),r=parseInt(t.css("border-left-width"),10)+parseInt(t.css("border-right-width"),10);t.css("top",""),t.css("left",""),t.css("bottom","-"+n+"px"),t.css("right","-"+r+"px")}function F(e,t){B(e,t),H.step=function(){B(e,t)}}function B(e,t){var n=e.height()/2-t.height()/2,r=e.width()/2-t.width()/2;t.css("top",n),t.css("left",r)}function U(){return!$&&t()&&z?!0:!1}function G(){return Z?!0:!1}this.LocalSVNRevision="$Rev$";var V=this,W=null,Q=null,H=null,$=!1,z=!0,Y=!1,q=!1,K=!1,X=null,J=!1,Z=!1,ee=!1,te=null,ne=null,re=[],ie=null,oe=null,ae=1,se=150,ue="animations",le="marginLeft",ce=250,de=10,fe=.3,pe=50,ge={0:"Top",1:"Left",2:"Top",3:"Left"},he="inline",me={InitCSS:{display:he},Properties:{},Options:{}};this.disableAnimation=function(){z=!1},this.setPosition=function(e){X=e,b()},this.postAnimation=function(e){e&&re.push(e)},this.prepare=function(e,t){te=e,ne=t,ie=o(te),v(),c(),U()?(a(),s(),u(),V.postAnimation(h),H.complete=f):V.postAnimation(I),G()&&V.postAnimation(L)},this.animate=function(e){return te?(this.postAnimation(e),void(U()?($=!0,_(te),te.animate(Q,H),p()):(g(),f()))):void(e&&e())},this.destroy=function(e){var t=te;if(ne)for(var i=0;i<ne.length;i++)try{t=t.add(ne[i])}catch(o){}try{U()?n(t,e):r(t,e)}catch(o){e&&e()}},e.apply(null,arguments)}function De(e,t,n){function r(){var t=e.getDataFileExtraData();o=t&&t.dataVersion||0}this.LocalSVNRevision="$Rev$";var i,o,a=this,s="wm-ldv";a.hasNewDeployables=function(){if(i)return i;var e=t.getData(s)||o;return i=o>e},a.saveDataVersion=function(){e.getServerStorageManager().saveData(s,o,Su)},r.apply(null,arguments)}function Ne(e){var t;if(e.agData)t=e.agData.ClassType;else{var n=e.config.Settings.AG;n&&(t=n.type)}t=t||0;var r={0:"ImageAttentionGrabber",1:"OldSwooshAttentionGrabber",2:"SwooshAttentionGrabber",3:"MenuOverviewAttentionGrabber",4:"TickerAttentionGrabber",5:"CustomTextAttentionGrabber",6:"CustomImageAttentionGrabber","3.sub":"MenuOverviewSubAttentionGrabber"},i=r[t];return Us.create(i,e)}function Le(){function e(){}this.LocalSVNRevision="$Rev: 6016 $";var t=this;t.getBody=function(e){return e.body},e.apply(null,arguments)}function Oe(){function e(){}this.LocalSVNRevision="$Rev: 6016 $";var t=this;t.getBody=function(e){return wmjQuery("body",e)[0]},e.apply(null,arguments)}function Me(e,t,n,r,i,o,a,s){function c(e,t,n,r,i,o){b=i,S=o,T=Us.get("CommonEvents")}function d(e){return e&&"string"==typeof e&&e.replace?e.replace(/,|\$|\u20AC|\u20AA|¥|¢|£/g,""):e}function f(e){var t=e&&18==e.code,n=e&&e.message&&e.message.indexOf("denied")>=0;return t||n}function g(e,t){if(e==t)return{frameIndex:0};for(var n=0,r=0;r<e.frames.length;r++){n++;var i=e.frames[r],o=g(i,t);if(void 0!==o.frameIndex)return o.frameIndex+=n,o;n+=o.totalFrames}return{totalFrames:n}}function h(){return window.editorAPI&&editorAPI.isImpersonated&&editorAPI.isImpersonated()}function v(e,t){var n=t.match(/(.*)\[(\d+)\]/),r=n[1],i=Number(n[2]);if(y(r))o=v(e,r);else var o=e[r];return o&&wmjQuery.isArray(o)?o[i]:void 0}function y(e){var t=/\[[\d]+\]/;return t.test(e)}this.LocalSVNRevision="$Rev$";var w,b,S,T,I=this;I.settingsFieldValid=a.settingsFieldValid,I.isSettingsValueExists=a.isSettingsValueExists,I.getSettingsValue=a.getSettingsValue,I.isNumber=function(e){return!isNaN(e)},I.formatString=function(){return p.apply(null,arguments)},I.isMobileNative=function(){return s.get("platform")==r.PLATFORM.iOS},I.getJQueryElementFinder=function(){return _d},I.sendMenuEvent=function(e,t,n){try{var r={Type:e};t&&(r.WalkthruId=t),n&&window.mtjQuery.extend(r,n),walkme_player_event(r)}catch(i){}},I.sendEvent=function(e,t){T.sendApiEvent(e,t)},I.isIe7or8=function(){return t.isIE(8,"lte")},I.libSetTimeout=e.libSetTimeout,I.toJSON=function(e){return u(e)},I.secureEvalJSON=function(e){return l(e)},I.elementLastKeeper=Us.get("ElementLastKeeper"),I.attentionGrabberFactory={create:function(e){return Us.get("AttentionGrabberManager").create(e)}},I.attentionGrabberClass=function(e){return Us.get("AttentionGrabberManager").getImageAG(e)},I.isValidMailTo=function(e){return e&&0==e.indexOf("mailto:")},I.isValidUrl=function(e){return e&&0!=e.indexOf("http")&&0!=e.indexOf("/")?!1:!0},I.setDefault=function(e,t,n){void 0===e[t]&&(e[t]=n)},I.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},I.isUiObjectActivatable=function(e){return"category"!=e.type()&&"tab"!=e.type()},I.isTrue=function(e,t,n){var r=Ss(e,t,n);return I.isValueTrue(r)},I.isValueTrue=function(e){return e&&(1==e||"True"==e||"1"==e)},I.isLike=function(e,t){t=t.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp("[.]","g"),"\\."),t=t.replace(new RegExp("[*]","g"),".*"),e=e.toString().toLowerCase(),t=t.toLowerCase();try{return e.match(t)[0]==e}catch(n){return!1}},I.isBigger=function(e,t){return e=d(e),t=d(t),e=parseFloat(e),t=parseFloat(t),m(e)&&m(t)?e>t:!1},I.isSmaller=function(e,t){return e=d(e),t=d(t),e=parseFloat(e),t=parseFloat(t),m(e)&&m(t)?t>e:!1},I.addTabIndex=function(e,t){Mf("accessibility")&&(t=Hi(t,0),e.attr("tabIndex",t),e.keyup(function(t){13!=t.keyCode||t.shiftKey||e.click(),t.stopPropagation()}))},I.isGradientUsingFilter=function(e){var t=wmjQuery("<div style='"+e+"' />"),n=-1==t.css("background-image").indexOf("gradient");return n},I.handleCrossDomainError=function(e){if(!f(e))throw e},I.encloseCall=function(e){var t=function(){var t=arguments;return function(){return e.apply(null,t)}},n=Yo(arguments,0),r=t.apply(null,n);return r},I.registerEventHandler=function(e,t){return window.attachEvent?window.attachEvent("on"+e,t):window.addEventListener&&window.addEventListener(e,t,!1),function(){I.unregisterEventHandler(e,t)}},I.unregisterEventHandler=function(e,t){window.detachEvent?window.detachEvent("on"+e,t):window.removeEventListener&&window.removeEventListener(e,t,!1)},I.setBodyUtils=function(e){b=e},I.getBody=function(e){return b.getBody(e)},I.postMessageToAllFramesChain=function(e,t){var n=0;if(e)try{e.postMessage(t,"*"),n++,e!=e.parent&&(n+=I.postMessageToAllFramesChain(e.parent,t))}catch(r){Za("Error in postMessage to frames chain "+r,4)}return n},I.postMessageToFrameAndDescendants=function(e,t){function n(e,t){r(e,t);for(var i=e.frames,o=0;o<i.length;o++){var a=i[o];n(a,t)}}function r(e,t){try{e!=window&&e.postMessage(t,"*")}catch(n){}}n(e,t)},I.getFrameIndex=function(e){var t=g(top,e||window).frameIndex;return t},I.doForFramesChain=function(e,t){if(e){try{t(e)}catch(n){}e!=e.parent&&I.doForFramesChain(e.parent,t)}},I.addScript=function(e,t,n){if(e){var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.async=!0,i.src=e,i.id="mt_script",t&&(i.onload=t,i.onreadystatechange=t),n&&(i.onerror=n),r.appendChild(i)}},I.checkElementText=function(e){return e.is("input")||e.is("textarea")?e.val():e.is("select")?e.find("option:selected").text():e.text()},I.getDateAtUTC=function(){var e=new Date;return e.getTime()},I.nl2br=function(e){return e?e.replace(/\n/g,"<br/>"):""},I.getTimer=function(e){function t(){var t=new Date;return function(n){var r=new Date,i=r-t;return e("Measurer - "+n+" ("+i+" ms)"),t=r,i}}return new t},I.defaultValue=function(e,t){return"undefined"!=typeof e&&null!=e?e:t},I.isLocalStorageEnabled=function(){if(void 0!==w)return w;try{if(!window.localStorage)return w=!1,!1}catch(e){return w=!1,!1}try{window.localStorage.getItem("wm-test")}catch(t){return w=!1,!1}return w=!0,!0},I.createElementInDocument=function(e,t){var n=t.createElement("div");return wmjQuery(n).html(e).children()},I.createIframe=function(e,t,n,r){function i(e){o.removeEventListener?o.removeEventListener("load",i):o.detachEvent&&o.detachEvent("onload",i),r&&r(e)}var o=document.createElement("iframe");o.id=t,o.className="walkme-to-remove",n||(o.style.cssText="display:none;");var a=Is(null,!0)[0];return a.appendChild(o),o.addEventListener?o.addEventListener("load",i,!1):o.attachEvent&&o.attachEvent("onload",i,!1),o.src=e,o},I.getTrackData=function(e){return{Id:e.Id,Name:e.Name}},I.getStepTrackData=function(e,t){var n={Id:e.Id,Name:e.StepTitle||e.StepText};return t&&(n.TutorialId=t.Id,n.TutorialName=t.Name),n},I.shouldTrackFinder=function(){var e=n&&n.get()===r.SOURCES.success,t=Us.get("ClientStorageManager"),i=t.getData(lu);return void 0!=i||h()||e},I.getWindowData=function(e,t){var n=void 0;if(t)switch(e){case xu.Cookie:n=I.getWindowCookie(t),n||(n=void 0);break;case xu.Var:n=I.getWindowVar(t)}return n},I.getWindowCookie=function(e){return S.getCookie(e)},I.getInputGenerator=function(e){return Us.get("InputGenerator")},I.getWindowVar=function(e){for(var t=window,n=e.split("."),r=0;r<n.length;r++){if(!t)return void 0;t=y(n[r])?v(t,n[r]):t[n[r]]}return t},c.apply(null,arguments)}function Re(){function e(e,t,n){return r.settingsFieldValid(e)&&r.isSettingsValueExists(e,t)?e[t]:n}function t(e,t){return r.settingsFieldValid(e)&&t in e?!0:!1}function n(e){return e&&0!=e.length?!0:!1}var r=this;r.getSettingsValue=e,r.isSettingsValueExists=t,r.settingsFieldValid=n}function je(){function e(e){o=e}this.LocalSVNRevision="$Rev$";var t,n="walkme-ie-",r="walkme-ie-bm-",i=this,o=null,a=!1;i.canDisplayOverlay=function s(){var s=!(o.getHostData().isQuirksMode()||o.shouldHandlePageAsFramesets());return s},this.removeOverlay=function(e){t&&t.exist()&&(e?t.fadeOut(DUR,function(){wmjQuery(this).remove()}):t.remove(),t=null)},i.displayOverlay=function(e,n,r){void 0==r&&(r="walkme-popup-background");var o=Is();return o.append(p('<div id="{0}" class="mt-to-destroy"></div>',r)),t=mtjQuery("#"+r,o),t.css({opacity:"0.7",display:"none",position:"fixed",height:"100%",width:"100%",top:"0",left:"0",background:"#000000","z-index":e-1}),i.addBrowserSpecificClasses(t),n?t.fadeIn("slow"):t.css("display",""),t},i.getStyle=function(e,t){try{return t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle}catch(n){return null}},i.getAnimationDimentionSize=function(e,t){var n;return n="top"==t||"bottom"==t?"height":"width",e.css(n)},i.addBrowserSpecificClasses=function(e){if(o.getHostData().isMobile()&&e.addClass("walkme-mobile-device"),o.getHostData().isIE()){var t=document.documentMode||Number(wmjQuery.browser.version),i=window.mtjQuery.browser.version.slice(0,window.mtjQuery.browser.version.indexOf(".")),a=n+t,s=r+i;e.addClass(a),e.addClass(s)}},i.addWalkmeClasses=function(e){e.addClass("walkme-to-destroy");var t="walkme-override walkme-css-reset";e.addClass(t);var n=e.find("*");n.addClass(t)},i.addBrowserClass=function(e){var t=o.getHostData().browser.name.replace(/ /g,"").toLowerCase();e.addClass("walkme-"+t)},i.setLangAttribute=function(e){var t=o.getCurrentLanguage();t&&e.attr("lang",t)},i.bindFocusAndBlur=function(e,t){e.focus(function(){e.val()==t&&e.val("")}),e.blur(function(){""==e.val()&&e.val(t)})},i.fixFlash=function(){function e(){n().append("<param name='wmode' value='transparent'>").wrap("<div></div>").unwrap(),mtjQuery("embed[wmode!='opaque'][wmode!='transparent']").attr("wmode","transparent").wrap("<div></div>").unwrap()}function t(){var e=n();mtjQuery("param[name='wmode']",e).remove(),e.append("<param name='wmode' value='transparent'>");var t=mtjQuery("embed[wmode!='opaque'][wmode!='transparent']");t.attr("wmode","transparent"),r(t),r(e)}function n(){return mtjQuery("object:has('param[name='wmode'][value!='transparent'][value!='opaque']')")}function r(e){for(var t=0;t<e.length;t++){var n=e[t].parentNode,r=e[t].outerHTML;e[t].insertAdjacentHTML("beforeBegin",r),n.removeChild(e[t])}}if(!a&&Mf("flashTransparent")){var i=o.getBrowser();-1!=i.indexOf("Firefox")?e():-1!=i.indexOf("IE")&&t(),
a=!0}},i.hexToRgba=function(e,t){var n=e.replace("#",""),r=parseInt(n,16),i=r>>16&255,o=r>>8&255,a=255&r;return"("+i+","+o+","+a+","+t+")"},i.closestNonStatic=function(e){for(var t=e.parent();t&&t.exist();){if(!t[0].style)return Is(e);if("static"!=t.css("position"))return t;t=t.parent()}},e.apply(null,arguments)}function Fe(){function e(e){return ce=Us.get("TimerManager"),pe=Us.get("BalloonEmbedder"),de=Us.get("Consts"),fe=Us.get("EventsTrigger"),z=de.STEP_TYPE.Normal,ne=e.positionHelper,ve=e.element,e.parentElement&&(ve=e.parentElement,ye=e.element),re=e.forceEmbedBalloonInIframe,ue=e.dontShowIoBalloon,Ve=e.isFirstStep,$=e.isViewStep,te=e.siteConfig,ee=Ss(te.Settings,"displayTO")||Ze,e.fixedSize&&(Fe=e.fixedSize.width,Be=e.fixedSize.height),Re=e.stepSettings,e.text&&(Ce=e.text.title,ke=e.text.subText,Ee=Me.nl2br(e.text.content)),Y=e.end,e.buttons&&(be=e.buttons.next,Se=e.buttons.done,Te=e.buttons.back,Ie=e.buttons.submit),Ne=e.htmlContent,_e=e.innerHtml,De=e.outterHtml,H=e.position,e.data&&(Ue=e.data.stepId,Ge=e.data.tutorialId,z=e.data.type),n(e.isCaptureBalloon,$),Oe=e.configuration,Rs.FixConfiguration(Oe),se=e.logger,le=se.wrapCustomerLog(zs),fs(ve),q=e.drawer,ve?(we=!ve.data("iframe")||re?!0:Rs.shouldHandlePageAsFramesets(),e.isCaptureBalloon&&o(),tt=e.isNotSignToButtonsEvents,void i(Oe)):void(we=!0)}function t(e){le(e,5,zs)}function n(e,t){var n={lib:_makeTutorial,element:ve,settings:Re,drawableType:"balloon",drawableId:Ue,monitor:!t&&!e,defaultSettings:e,cssKeysValues:[{id:Ue,name:"step"},{id:Ge,name:"walkthru"}]};ie=new xe(n),ye&&(n.element=ye,n.drawableType=nt,oe=new xe(n)),ae=new Ae(n)}function r(){var e=Ne?Ne.html():Rs.parseBBCode(Ee),t={title:Rs.parseBBCode(Ce),content:e,customHtml:{inner:_e,outter:De},stepIndexText:ke},n={balloonData:t,userGuid:bd,nextButton:be,doneButton:Se,backButton:Te,configuration:Oe,content:Ee,title:Ce,subtext:ke,settings:Re,end:Y,stepType:z,submitButton:Ie,contentDiv:Ne};return n}function i(e){var t=e.AnimateFirst&&!Ve||Le||$,n=e.Vibrate&&!Le;Ke=new Pe(e.Animation,n),t&&Ke.disableAnimation()}function o(){Le=!0,we=!1,Le&&Ke&&Ke.disableAnimation()}function a(e,t,n,i){var o={},a=pe.getContainer(Re,e,we,o);J=q.generateBalloonDiv(a,Le,Ge,Ue,z,r()),pe.handleEmbedding(Re,J,o),tt||xa(J,{objectId:Ue,type:de.STEP_PLAY_INITIATOR_ENUM.STEP}),we&&J.data("iframe",e.data("iframe"));var s=q.fixSize(J,e,we,n,i);if(z&&z==de.STEP_TYPE.Popup)me.showPopupBalloon(J);else{var u=lp(Oe.BalloonRadius)?Oe.BalloonRadius:15;me.showNormalBalloon(J,s,t,a,u)}return J}function s(e,t,n,r,i){if(e.positionType==rc.Right||e.positionType==rc.Left){var o;if(o=Le||Re.lv&&Re.lv>0?mtjQuery(np(i)).height():mtjQuery(np(ve)).height(),t.height+e.top>o){var a=q.arrowHeight()+1,s=n.top+n.height/2,u=s-t.height/2,l=s-t.height+a+r/2;l=Math.max(0,l);var c=s-a-r/2,d=o-t.height-1,f=Math.min(d,c);e.top=u,e.top=Math.min(f,e.top),e.top=Math.max(e.top,l),e.top=Math.max(0,e.top)}}return e}function u(){K&&(K.clear(),K=null)}function l(){for(var e=0;e<We.length;e++)try{We[e]()}catch(t){}We.length=0}function c(e){if(e)try{e.unbind(),mtjQuery("*",e).unbind()}catch(t){}}function d(e,t){return z!=de.STEP_TYPE.Popup&&t!=Je.None&&"fixed"!=e.css("position")?!0:!1}function f(e,n,r,i){var o=Mf("noScrlAnm")?Je.Normal:Je.Animated,s=Ss(Re,Xe,o);e=e&&d(ve,s);var u=!1;e&&(u=p(ve));var l=a(ve,H,r,i);Wd("BalloonCreated",{Element:l}),et.balloonDrawTime=ge("Done drawing balloon"),he=Me.getTimer(t);var c=function(){et.balloonShowTime=he("Done showing balloon"),n&&n(et,l)};!u&&e?m(ve,null,function(){var e=function(){S(ve,h(Re))};Le||!L(e)?Ke.animate(c):c()},Re,H,s):Ke.animate(c),q.manipulationsForInlineCss(l)}function p(e){var t=Jr();if(!t)return!1;var n=e.parents("div"),r=pp(n,function(e){var e=t(e);return lp(e.data)&&lp(e.data("jsp"))?e:void 0});return r?(t(r).data("jsp").scrollToElement(e,!0,!1),!0):!1}function g(e,t,n,r,i){return 0==n||2==n?e+t+r>i:e>i}function h(e){var t=Ss(e,"endScroll",-1);return t>=0?{distance:parseInt(t,10),unit:Ss(e,"scrollUnit","%"),force:Ss(e,"forceScroll",0)}:void 0}function m(e,t,n,r,i,o){try{var a,s=o==Je.Animated&&!e.data("iframe")&&1!=Ss(r,"scrollOld","0"),u=!1,l=h(r);if(s){a=I(e,i,l);try{C(a,e,l,i,n)&&(u=!0)}catch(c){}}u&&o!=Je.Normal||(a=e,b(a,e,i,l,n))}catch(c){se.error(c)}}function v(e,t){return"px"==t.unit?t.distance:sp(e).height()*t.distance/100}function y(e,t){if(t&&t.force){var n=v(e,t);return{top:n,bottom:0}}return wc}function w(e,t,n){return Xa(e,t)&&B(e,n)}function b(e,t,n,r,i){var o=y(e,r);w(e,o,n)||T(e,r,!0,null!=t.data("iframe")),i&&i()}function S(e,t){var n=y(e,t);if(!Xa(J,n)){var r=e.offset().top>J.offset().top;T(J,t,r)}}function T(e,t,n,r){if(t&&!r)window.scrollTo(0,e.offset().top-v(e,t));else{var i,o,a,s,u,l,c=Mf("dontScrollTopWindow");c&&(u="hidden"===wmjQuery("html").css("overflow"),l="hidden"===wmjQuery("body").css("overflow"),(u||l)&&(i=wmjQuery("html"),o=wmjQuery("body"),a=i.scrollTop(),s=o.scrollTop())),Le&&Re.complexHtml&&"table"==Re.complexHtml.type||e[0].scrollIntoView(n),c&&(u||l)&&(i.scrollTop(a),o.scrollTop(s))}}function I(e,t,n){var r,i=Z[0],o=e,a=sp(e),s=y(e,n),u=e.offset().top<J.offset().top||e.offset().top+e.height()<J.offset().top+J.height(),l=a.top()-0+a.height()-0;!n||1!=t&&3!=t?u?(r=l-s.bottom<=e.offset().top+e.height()+J.height()+i.height()?"down":"up",o="down"==r?J:e):(r=a.top()+s.top>=e.offset().top-J.height()-i.height()?"up":"down",o="down"==r?e:J):o=e.outerHeight()>J.height()?e:J;var c=g(e.height(),J.height(),t,i.height(),a.height()-0);return c&&(o=J),o}function C(e,t,n,r,i){function o(o){var a={duration:"slow",rootElement:o,elementToFindScrollableFor:t,complete:function(){i&&i()},heightLimit:!Mf("noHgtLmt")};if(n){var s=J.height();a.endScroll={scrollOptions:n,balloonHeight:k(t,r,s),totalDrawnHeight:E(t,r,s)}}return e.scrollintoview(a)}return ql.isQuirksMode(ve[0])?!1:o("html")?!0:w(t,y(t,n),r)?!1:o("body")}function E(e,t,n){var r=e.outerHeight(),i=sp(e).height()-0;return g(r,n,t,q.arrowHeight(),i)?n:0==t||2==t?r+n+q.arrowHeight()+1-parseInt(Ss(Re,"topOffset",0)):Math.max(r,n)}function k(e,t,n){var r=e.height(),i=parseInt(Ss(Re,"topOffset",0));return 0==t?n+q.arrowHeight()+1-i:2==t?r+n+q.arrowHeight()+1-i:n>r?n-i:(r-n)/2+n-i}function x(){switch(qd){case Dl.WAITING_FOR_ELEMENT_EVENT:case Dl.WAITING_FOR_NEXT_BUTTON_CLICK:case Dl.WAITING_FOR_PAGE_CHANGE:return!0;default:return!1}}function A(){P()?(le("Sticky - keep looking for element.",5),Rs.releaseBalloons(),qd=Dl.WAITING_FOR_STICKY_ELEMENT,Rs.executeCurrentStep()):D()?(ef=!1,le("Skippable - continue to next step."),Rs.executeTutorialNextStep()):qd!=Dl.WAITING_FOR_PAGE_CHANGE&&(le("Stopping walk-thru."),Rs.releaseBalloons(),qd=Dl.PAUSED,Wd("WalkthruAborted"),Wd("WalkthruStopped"),Hd("TutorialStopped"))}function P(){return Ss(sa().Steps[Yd].Settings,"sticky",0)}function D(){return sa().Steps[Yd].IsSkippable}function N(){return z==de.STEP_TYPE.Popup}function L(e){var t={top:0,left:0},n=!1,r=!1;if(we){var i=ve.offset();t.top=Math.floor(i.top),t.left=Math.floor(i.left)}else{var o=ne.getPosRelativeToWindow(ve[0],window,!0);t.top=o.top,t.left=o.left,R()&&(n=!0)}Ka(ve,t),B(ve,H)||(n=!0);var a=ve.height(),s=ve.width();He=null;var u=j(t.top,t.left,a,s);return u&&fe.sync("ShouldChangeBalloonPosition",null,!0)?(r=!0,Mf("moveByIntervals")?O(t,e):(le("Element position changed, destroying it",5,zs),F(t.top,t.left,a,s),He=ne.getElementBounds(ve,we,window,Re),me.destroy(!0,function(){le("Finished destorying balloon",5,zs),n||X||(le("Redrawing balloon",5,zs),me.Show(!1,function(){He=null,e&&e()}))}))):e&&e(),r}function O(e,t){function n(){if(10>r){r++;var i=ve.height(),o=ve.width(),a=parseFloat(qe)-parseFloat(o),s=parseFloat(Ye)-parseFloat(i);F(e.top,e.left,i,o),M(J,a,s);for(var u=0;u<Z.length;u++)M(Z[u],a,s);N()||!Le&&!ie.shouldShow(ve,Re)||(ie.highlight(),oe&&oe.highlight()),!ue&&ae.shouldShow(ve,Re)&&ae.highlight(),ce.playSetTimeout(n,30)}else t&&t()}var r=0;n()}function M(e,t,n){var r=parseFloat(e.css("left")),i=parseFloat(e.css("top")),o=r-t+"px",a=i-n+"px";e.css("left",o),e.css("top",a)}function R(){var e=ve.data("iframe");return e&&ne.isElementScrolledOut(ve,e,H)}function j(e,t,n,r){return null!=$e&&null!=ze&&null!=Ye&&null!=qe&&($e!=e||ze!=t||Ye!=n||qe!=r)}function F(e,t,n,r){$e=e,ze=t,Ye=n,qe=r}function B(e,t){if(Mf("disableIEVRTP"))return!0;var n=V(e);if(n)return!0;var r=U(e,t),i=e.parents("div"),o=!1,a=!1,s=!fp(i,function(e){var e=mtjQuery(e);if(!Mf("disableAbsRTP")&&"absolute"==e.css("position"))return o=!0,!0;if(!Mf("disableFixRTP")&&"fixed"==e.css("position"))return a=!0,!0;var t=e.css("overflow"),n=G(t),i=W(r,e);return n&&i});return o||a||s}function U(e,t){var n=e.offset(),r=e.height(),i=e.width(),o={top:n.top,left:n.left};switch(t){case 0:o.left+=i/2;break;case 1:o.top+=r/2,o.left+=i;break;case 2:o.top+=r,o.left+=i/2;break;case 3:o.top+=r/2;break;default:se.error(new Error("Unknown balloon position"))}return o}function G(e){return"auto"==e||"scroll"==e||"hidden"==e}function V(e){var t=e.css("position");return"absolute"==t||"fixed"==t}function W(e,t){var n=t.offset();return Q(e.top,n.top,t.outerHeight())||Q(e.left,n.left,t.outerWidth())}function Q(e,t,n){var r=t+n;return t>e||e>r}this.LocalSVNRevision="$Rev$";var H,$,z,Y,q,K,X,J,Z,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,de,fe,pe,ge,he,me=this,ve=null,ye=null,we=!0,be=!1,Se=!1,Te=!1,Ie=!1,Ce="",Ee="",ke="",_e="",De="",Ne="",Le=!1,Oe="",Re="",Fe=0,Be=0,Ue=0,Ge=0,Ve=!1,We=[],Qe=[],He=null,$e=null,ze=null,Ye=null,qe=null,Ke=null,Xe="scroll",Je={Animated:0,Normal:1,None:2},Ze=800,et={},tt=!1,nt="trigger";this.onDestroy=function(e){We.push(e)},this.setReleaseEvents=function(e){Qe=e},this.releaseEvents=function(e){for(var t,n=0;n<Qe.length;n++)try{Qe[n](e)&&(t=!0)}catch(r){}return t},this.SetTimeoutOn=function(){N()||K||(K=ce.playSetTimeout(function(){me.elementDisplayTimeoutFunction()},200))},this.getArrowHeight=function(){return q.arrowHeight()},this.AddSubmitButton=function(){Ie=!0},this.showNormalBalloon=function(e,t,n,r,i){var o=q.arrowHeight()+1;n=lp(n)?n:dc;var a=ne.getDrawingArea(ve,!we),u=He||ne.getElementBounds(ve,we,window,Re),l=q.decideWhereToPop(u,t,n,o,a);pe.fixPosition(l,Re,r),Ke.setPosition(l.positionType);var c=Ss(Re,"z-index","2147483630");q.addPositionClass(e,l),Z=q.drawArrows(ve,Ue,l,t,u,r),l=s(l,t,u,i,r);var d=Oe.BalloonBorderWidth,f=q.hasBorder()?1:0;e.css("top",l.top-f*d+"px"),e.css("left",l.left-f*d+"px");var p=ql.isQuirksMode(ve[0]);l.positionType==rc.Top&&e.css("top",l.top-2*f*d+1+"px"),l.positionType==rc.Bottom&&e.css("top",l.top-1+"px"),l.positionType==rc.Left&&(e.css("left",l.left-2*f*d+1+"px"),p&&e.css("left",l.left-2*f*d+"px")),l.positionType==rc.Right&&e.css("left",l.left-1+"px"),e.css("width",t.width+"px"),p&&e.css("width",t.width+2*f*d+"px"),e.css("height",t.height+"px"),rp(e,c);for(var g=0;g<Z.length;g++)rp(Z[g],c);p&&q.fixQuirksMode(e),q.fixArrows({balloonDiv:e,arrowsDivs:Z,result:l,isInCaptureMode:Le,isQuirksMode:p});var h=1==Ss(Re,"isInvisible",0);if(h){e.hide();for(var g=0;g<Z.length;g++)Z[g].hide()}else Ke.prepare(e,Z)},this.showPopupBalloon=function(e){var t=Ss(Re,"z-index",sc);e.css({"z-index":t,"min-width":q.minPopupWidth()+"px"});var n=parseInt(Ss(Re,"leftOffset",0)),r=parseInt(Ss(Re,"topOffset",0)),i={top:r,left:n};Rs.centerElementInPage(e,!1,i);var o=je.canDisplayOverlay(),a=1==Ss(Re,"fadeBackground",1)||1==Ss(Re,"fadeBackground",!0)||"True"==Ss(Re,"fadeBackground","True");o&&a&&je.displayOverlay(t,!0);var s=ql.isQuirksMode(ve[0]);s&&q.fixQuirksMode(e),Ke.prepare(e),Ke.postAnimation(function(){_.registerResizeAndScrollEvents({element:e,offset:i})})},this.getBalloonDiv=function(){return J},this.getElement=function(){return ve},this.getBalloonHTML=function(){return q.generateHtml(r())},this.Show=function(e,n){ge=Me.getTimer(t);var r=we?hs(ve):wmjQuery("head"),i=function(){try{N()||!Le&&!ie.shouldShow(ve,Re)||(ie.highlight(),oe&&oe.highlight());var t=we?ve:mtjQuery("body"),r=sp(t),i=Fe>0?Fe:0,o=Be>0?Be:0;if(r.width()<=200?(0==H||2==H||void 0==H)&&(i=r.width()-ve.position().left-20,120>i&&(i=120)):!Mf("noHgtLmt")&&r.height()<=200&&(0==H||2==H||void 0==H)&&(H=1),!He){if(we){var a=ve.offset();$e=Math.floor(a.top),ze=Math.floor(a.left)}else{var s=ne.getPosRelativeToWindow(ve[0],window,!0);$e=s.top,ze=s.left}Ye=ve.height(),qe=ve.width()}!ue&&ae.shouldShow(ve,Re)&&ae.highlight(),f(e,n,i,o)}catch(u){se.error(u)}};Le?i():q.loadResources(r,i)},this.destroy=function(e,t){e||(X=!0,u(),l()),c(J),Ke.disableAnimation(),Ke.destroy(function(){try{ie.unhighlightElement(ve,"balloon"),oe&&oe.unhighlightElement(ye,nt),ae.unhighlightElement(ve,"balloon")}catch(e){se.error(e,"error removing highlighting elements for balloon")}t&&t()})},this.elementDisplayTimeoutFunction=function(){var e=ne.isElementVisible(ve);e?(L(),K=ce.playSetTimeout(me.elementDisplayTimeoutFunction,ee)):(le("Element not visible anymore.",5,zs),me.destroy(!1,function(){x()&&A()}))},e.apply(null,arguments)}function Be(){function e(e){d(e.lib),f(e.balloonData.title),p(e.balloonData.content),g(e.balloonData.customHtml),h(e.balloonData.stepIndexText),m(e.balloonSettings),v(e.balloonSettings.direction),y(e.userGuid),w(e.stepType),s=e.settings,u=e.end}function t(e,t){var i={};if(i.nextButton=i.doneButton=i.backButton=i.submitButton=!1,i.buttonsArr=[],e)for(var o=Ss(s,"popupStepButtons",[]),a=0;a<o.length;a++){var u=o[a];if(0==u.action){var l=n(!1,t.next,t.done,!1);i.nextButton=l.nextButton,i.doneButton=l.doneButton,l.buttonsArr.length>0&&i.buttonsArr.push(l.buttonsArr[0])}else if(2==u.action){var c=n(t.back,!1,!1,!1);i.backButton=c.backButton,c.buttonsArr.length>0&&i.buttonsArr.push(c.buttonsArr[0])}else i.buttonsArr.push(r(u))}else i=n(t.back,t.next,t.done,t.submit);return i}function n(e,t,n,r){var i={},o=Pc.get();return i.backButton=i.nextButton=i.doneButton=i.submitButton=!1,i.buttonsArr=[],e&&(i.backButton={order:2,weak:!0,classes:I("back","weak"),buttonText:o.BackButtonText},i.buttonsArr.push(i.backButton)),t&&(i.nextButton={order:3,normal:!0,classes:I("next","normal"),buttonText:o.NextButtonText},a()&&(i.nextButton.buttonText=o.DoneButtonText),i.buttonsArr.push(i.nextButton)),n&&(i.doneButton={order:3,normal:!0,classes:I("done","normal"),buttonText:o.DoneButtonText},i.buttonsArr.push(i.doneButton)),r&&(i.submitButton={order:4,normal:!0,classes:I("submit","normal"),buttonText:o.SubmitButtonText},i.buttonsArr.push(i.submitButton)),i}function r(e){var t=e.action||-1,n=e.name||"",r=Pc.get();switch(parseInt(t)){case 1:return{order:4,normal:!0,classes:i("start","normal"),buttonText:r.WelcomeStepButtonStartText};case 3:return{order:1,weak:!0,classes:i("cancel","weak"),buttonText:r.WelcomeStepButtonCancelText};case 4:return{order:4,normal:!0,classes:I("submit","normal"),buttonText:r.SubmitButtonText};case 5:return{order:4,normal:!0,classes:i("redirect","normal"),buttonText:e.name};case 6:return{order:2,weak:!0,classes:i("stay","weak"),buttonText:e.name};case 7:return{order:4,normal:!0,classes:i("ok","normal"),buttonText:e.name}}return{order:2,normal:!0,classes:"walkme-custom-balloon-button walkme-custom-balloon-normal-button",buttonText:n}}function i(e,t){return"walkme-custom-balloon-button walkme-custom-balloon-"+t+"-button walkme-custom-balloon-"+e+"-button walkme-action-"+e}function a(){var e=Ss(s,"isNextToDone","0");return"1"==e}this.LocalSVNRevision="$Rev$";var s,u,l=new o(this),c="display: block; padding: 0; margin: 0;	vertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit; letter-spacing: normal; text-transform: none; outline: invert none medium; width: auto; box-shadow:none; text-shadow:none; border-top: none; border-right: none; border-bottom: none; border-left: none; position: static; top: auto; left: auto; transition: none;",d=l.Prop.Protected("lib"),f=l.Prop.Protected("title"),p=l.Prop.Protected("content"),g=l.Prop.Protected("customHtml"),h=l.Prop.Protected("stepIndexText"),m=l.Prop.Protected("balloonSettings"),v=l.Prop.Protected("direction"),y=l.Prop.Protected("userGuid"),w=(l.Prop.Protected("contentDiv"),l.Prop.Protected("fixedWidth"),l.Prop.Protected("fixedHeight"),l.Prop.Protected("stepType")),b=l.Prop.Protected("buttons"),S=(l.Virtual.Public("generateHtml",function(){var e=S(),t=T(),n=Lu.to_html(e,t);return n}),l.Virtual.Protected("createHtmlTemplate")),T=l.Virtual.Protected("createTemplateData",function(){var e=1==Ss(s,"displayX",!0)||"True"==Ss(s,"displayX","True")||1==Ss(s,"displayX",1),t={data:{title:f(),content:p(),customHtml:g(),stepIndexText:h(),balloonCloseTooltip:Pc.get().BalloonCloseTooltip},font:m().Font,cssReset:c,displayX:e,colors:{mainBg:m().Color,minorBg:m().BalloonColor2,border:m().BorderColor,header:m().HeaderColor,content:m().ContentColor,footerText:m().FooterTextColor,buttonBg:m().ButtonBgColor,buttonBg2:m().ButtonBgColor2,buttonBorder:m().ButtonBorderColor,buttonText:m().ButtonTextColor},radiuses:{balloon:m().BalloonRadius+"px",button:m().BalloonButtonRadius+"px"},direction:{basic:v(),side:"rtl"==v()?"right":"left",oppositeSide:"rtl"==v()?"left":"right"},poweredBy:{showText:"txt"==m().showPoweredByFormat,link:m().showPoweredBy?"http://www.walkme.com/?u="+y():""},buttons:b().buttonsArr,border:{size:m().BalloonBorderWidth+"px"}};return t}),I=(l.Virtual.Public("manipulationsForInlineCss",function(){}),l.Protected("getCustomDivHtml",function(e){return"<div class='walkme-custom-balloon-custom-div-"+e+"' style='display:none;' ></div>"}),l.Virtual.Protected("generateNormalButtonClasses",function(e,t){return i(e,t)}));l.Public("initButtons",function(e){var n={back:e.backButton,next:e.nextButton,done:e.doneButton,submit:e.submitButton};b(t(w()==Au.STEP_TYPE.Popup,n))});e.apply(null,arguments)}function Ue(){function e(e){a.Extends(Be,e),r=a._base,i=e.balloonSettings}function t(e,t,r){return t="direction:"+t+";",n(e,t,r)}function n(e,t,n){if(e.indexOf(gc)>-1&&e.indexOf(hc)>-1&&e.indexOf(mc)>-1&&e.indexOf(vc)>-1){n="float:"+n+";";var r="<span style='"+n+"'>&nbsp;</span>";e="<div class='walkme-custom-balloon-current-step-text' style='"+t+n+"'>"+e,e=e.replace(gc,"</div>"+r+"<div class='walkme-custom-balloon-current-step-number' style='"+n+"'>"),e=e.replace(hc,"</div>"+r+"<div class='walkme-custom-balloon-total-steps-text' style='"+t+n+"'>"),e=e.replace(mc,"</div>"+r+"<div class='walkme-custom-balloon-total-steps-number' style='"+n+"'>"),e=e.replace(vc,"</div>"),e+="<div style='clear:both;'></div>"}return e}this.LocalSVNRevision="$Rev$";var r,i,a=new o(this);a.Override("generateHtml",function(){return r.customHtml()&&r.customHtml().inner||r.generateHtml()}),a.Override("generateNormalButtonClasses",function(e,t){return r.generateNormalButtonClasses(e,t)+" mt-custom-balloon-"+e+"-button CUSTOM-STEP-ID"}),a.Override("createTemplateData",function(){var e=r.createTemplateData();e.outerDiv=r.getCustomDivHtml("outer-div"),e.title=r.getCustomDivHtml("title"),e.content=r.getCustomDivHtml("content"),e.poweredBy.showImage="img"==r.balloonSettings().showPoweredByFormat,e.buttonShadowWidth=r.balloonSettings().ButtonShadowWidth,e.serverName=Wc;var n="rtl"==r.direction()?"right":"left";e.data.stepIndexText=t(r.stepIndexText(),r.direction(),n),e.ie7LayoutFix="overflow: auto;zoom: 1;",e.buttonsExist=r.buttons().buttonsArr.length>0,e.showBottomDiv=!("no"==r.balloonSettings().showPoweredByFormat&&0==r.stepIndexText().length),ka(i,"ButtonBgColor"),ka(i,"ButtonBgColor2");var o=i.ButtonBgColor,a=i.ButtonBgColor2;return o==a?e.BackgroundCSS=" background-color: "+o+"; ":(e.BackgroundCSS="background:-moz-linear-gradient(top, "+o+" , "+a+" ); background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+o+"), color-stop(100%,"+a+")); background:-webkit-linear-gradient(top, "+o+" 0%,"+a+" 100%); background:-o-linear-gradient(top, "+o+" 0%,"+a+" 100%); background:-ms-linear-gradient(top, "+o+" 0%,"+a+" 100%); background:linear-gradient(to bottom, "+o+" 0%,"+a+' 100%); filter:progid:DXImageTransform.Microsoft.gradient( startColorstr="'+o+'", endColorstr="'+a+'",GradientType=0 ); ',Ms()||(e.radiuses.button="0"),Me.isGradientUsingFilter(e.BackgroundCSS)&&(e.BackgroundCSS+="background: url("+Wc+"/player/resources/images/spacer.gif) repeat;")),e}),a.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div mt-custom-balloon-top-div CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";padding-top:5px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 3px; padding-bottom: 1px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 7px;margin:3px 3px 0 3px;direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='min-height: "),r.s(r.f("buttonsExist",e,t,1),e,t,0,388,390,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("30")}),e.pop()),r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("0"),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,460,818,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-close-button walkme-action-close mt-custom-balloon-close-button CUSTOM-STEP-ID walkme-action-close' style='opacity:0.7; font-size: 16px; position: absolute; top: 2px; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 8px; cursor: pointer;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";font-weight:normal;font-family:;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title mt-custom-balloon-title CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";font-weight:bold;margin-top:2px;margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(":14px;font-size:15px;color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";font-family:"),r.b(r.t(r.f("font",e,t,0))),r.b(";'>"),r.b(r.t(r.f("title",e,t,0))),r.b(r.t(r.d("data.title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,1134,1429,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content mt-custom-balloon-content CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(";margin-top: 4px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 6px; font-family:"),n.b(n.v(n.f("font",e,t,0))),n.b(";font-size:14px;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";"),n.b(n.v(n.f("ie7LayoutFix",e,t,0))),n.b("'>"),n.b(n.t(n.f("content",e,t,0))),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div><div class='walkme-custom-balloon-top-div-bottom mt-custom-balloon-top-div-bottom CUSTOM-STEP-ID' style='clear: both;'>"),r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("<div class='walkme-custom-balloon-no-buttons-div' style='height: 10px'></div>"),r.s(r.f("buttonsExist",e,t,1),e,t,0,1699,2702,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-buttons-div mt-custom-balloon-buttons-div CUSTOM-STEP-ID' style='clear:both;padding:5px;text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(";direction:"),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("'>"),n.s(n.f("buttons",e,t,1),e,t,0,1902,2684,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b("' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(";-moz-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; -webkit-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.b(n.v(n.f("BackgroundCSS",e,t,0))),n.b("-moz-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); -webkit-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); border: 1px solid "),n.b(n.v(n.d("colors.buttonBorder",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal; font-family: Arial; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static; overflow: visible;' "),n.b(n.v(n.f("wtIdAttribute",e,t,0))),n.b(">"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</button>")}),e.pop()),n.b("</div>")}),e.pop()),r.b("</div></div>"),r.s(r.f("showBottomDiv",e,t,1),e,t,0,2749,4329,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-separator' style='display: block; margin: 0 10px; height: 1px; opacity: 0.2; filter: alpha(opacity=20); background-color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; line-height: 0px;'>&#160;</div><div class='walkme-custom-balloon-bottom-div' style='position: relative; height: 23px; display: block;'><div class='walkme-custom-balloon-subtext mt-custom-balloon-subtext CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; display:inline-block;font-family: "),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;margin-top:3px;margin-bottom:0px;color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>"),n.b(n.t(n.d("data.stepIndexText",e,t,0))),n.b("</div><div class='walkme-custom-balloon-powered-by-div mt-custom-balloon-powered-by-div CUSTOM-STEP-ID' style='display:inline-block;position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 10px; top: 3px;text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; width:100px; color:"),n.b(n.v(n.d("color.content",e,t,0))),n.b(";text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(" '>"),n.s(n.d("poweredBy.link",e,t,1),e,t,0,3744,3993,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<a class='walkme-custom-balloon-powered-by-link mt-custom-balloon-powered-by-link CUSTOM-STEP-ID' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank' style='text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>")}),e.pop()),n.s(n.d("poweredBy.showText",e,t,1),e,t,0,4035,4048,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("By WalkMe.com")}),e.pop()),n.s(n.d("poweredBy.showImage",e,t,1),e,t,0,4095,4251,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div title='WalkMe.com' style='border: none; background-image: url("),n.b(n.v(n.f("serverName",e,t,0))),n.b("/player/resources/images/by-walkme.png); width: 49px; height: 18px;'></div>")}),e.pop()),n.s(n.d("poweredBy.link",e,t,1),e,t,0,4294,4298,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("</a>")}),e.pop()),n.b("</div></div>")}),e.pop()),r.fl()};return e});e.apply(null,arguments)}function Ge(){function e(e){a.Extends(Be,e),i=a._base}function t(){i.buttons().buttonsArr.sort(function(e,t){return e.order-t.order})}function n(e){var t=function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,906,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 21px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 5px; padding-right: 5px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,690,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 3px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 10px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1028,1546,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1051,1523,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top:6px; margin-bottom:6px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},n=Lu.to_html(t,e);return n}function r(e,t,n){if(e==u.Shadow)switch(t){case 0:return"1px 1px 3px 0px rgba(0, 0, 0, 0.2)";case 1:return"0px 0px 13px 0px rgba(0, 0, 0, 0.2)";case 2:return"0px 0px 13px 5px rgba(0, 0, 0, 0.2)"}else if(e==u.Glow){var r=i.lib().getUiUtils().hexToRgba(n,.6);switch(t){case 0:return"0px 0px 7px 0px rgba"+r;case 1:return"0px 0px 14px 0px rgba"+r;case 2:return"0px 0px 26px 5px rgba"+r}}}this.LocalSVNRevision="$Rev$";var i,a=new o(this),s=8,u={None:0,Shadow:1,Glow:2},l=a.Prop.Public("contentMargin",15);a.Override("manipulationsForInlineCss",function(e){if(!ql.isIE(8,"lte")){var t=i.balloonSettings(),n=new He;n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}}),a.Override("createTemplateData",function(){var e=i.createTemplateData();e.outerDiv=i.getCustomDivHtml("inner-div"),e.title=i.getCustomDivHtml("title"),e.colors.xBtn=i.balloonSettings().XButtonColor,e.colors.stepInfo=i.balloonSettings().StepInfoColor,e.colors.separator=i.balloonSettings().SeparatorColor,e.stepIndexHeight=46,e.top={minHeight:57,textAlign:e.direction.side,title:{paddingTop:12},content:{sideMargin:l(),oppositeSideMargin:l()-2}},e.data.title&&!e.data.content&&(e.top.minHeight=43),e.bottom={},e.bottom.stepIndexMarginTop=10,lp(e.buttons)&&0!=e.buttons.length||(e.stepIndexHeight-=s,e.bottom.stepIndexMarginTop-=s/2),e.stepIndexHeight+="px",e.bottom.poweredByHeight+="px",e.xBtn={marginTop:i.balloonSettings().BalloonBorderWidth+"px",marginHorizental:parseInt(i.balloonSettings().BalloonBorderWidth)+4+"px"};var o=i.balloonSettings().BalloonBorderWidth-4;return 0>o&&(o=0),e.border.side={size:o+"px"},e.shadow=r(i.balloonSettings().ShadowType,i.balloonSettings().ShadowLevel,i.balloonSettings().ShadowColor),
e.isNotIe7=!ql.isIEBrowser(7),t(),e.buttonsHtml=n(e),e}),a.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,304,388,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,776,803,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,1191,1589,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" font-size: 12px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size:14px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,1936,2320,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; line-height: 18px; font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: auto;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; margin-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 10px; float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div><div class='walkme-custom-side-border' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; width: 4px; height: 100%;  top:0px; "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(":0px; border:"),r.b(r.v(r.d("border.side.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": none; border-top: none; border-bottom: none; position: absolute;'></div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3721,3749,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()};return e});e.apply(null,arguments)}function Ve(){function e(e){c(e.lib),g(e.resourceManager),h(e.logger),v(400),b(!0),D(e.balloonSettings)}function t(e){var t=mtjQuery(".walkme-custom-balloon-title",e).text(),n=0,r=0,i=0,o=mtjQuery(".walkme-custom-balloon-content",e);if(o.length>0){for(var a=o.html().replace(/<br*">/g,"< >").split("< >"),s=0;s<a.length;s++){var u=a[s].replace(/(<([^>]+)>)/gi,"").length;u>i&&(i=u)}var l=mtjQuery(".walkme-custom-balloon-content span",e);r=l.length>0?parseInt(l.css("font-size").replace(/px/,"")):parseInt(o.css("font-size").replace(/px/,""))}var c=mtjQuery(".walkme-custom-balloon-title span",e);n=c.length>0?parseInt(c.css("font-size").replace(/px/,"")):parseInt(mtjQuery(".walkme-custom-balloon-title",e).css("font-size").replace(/px/,""));var d=0;d=t.length*n>i*r?t.length*n:i*r;var f=parseFloat(Ss(Pc.get().Settings,"quirksModeFactor",.5));return d*=f}function n(e,t){var n=.5;return e==oc.Start?n=1:e==oc.End&&(n=0),(2==t||3==t)&&(n=1-n),n}function r(e,t,r,i,o,a){var s=new ys(o,a);s.color=i;var u=e.top,l=e.left;t.positionType==rc.Bottom,t.positionType==rc.Right,s.point_direction=t.positionType,s.angle=n(t.positionOffset,s.point_direction);var c=s.Generate(r[0].ownerDocument);return c.css("top",u+"px"),c.css("left",l+"px"),c.css("display","none"),mtjQuery(r.append(c)),c}function i(e,t,n,r){var i,o;if(e.positionType==rc.Top||e.positionType==rc.Bottom){var s=e.left+t.width;i=a(e.left,s,w(),e.positionOffset,n.width,n.left),o=e.positionType==rc.Top?e.top+t.height:e.top-y()}else if(e.positionType==rc.Left||e.positionType==rc.Right){var u=e.top+t.height;o=a(e.top,u,w(),e.positionOffset,n.height,n.top),e.positionType==rc.Left?(i=e.left+t.width,c().getHostData().isQuirksMode(r[0])&&(i-=2)):i=e.left-y()}return{top:o,left:i}}function a(e,t,n,r,i,o){var a;return r==oc.Center?a=(t+e-n)/2:r==oc.Start?a=o+(i-n)/2:r==oc.End?a=o+(i-n)/2:h().error(null),s(a,e,t,n)}function s(e,t,n,r){var i=n-r;return e>i?i:t>e?t:e}function u(e,t){var n=t.balloonData;n.title||e.addClass("walkme-custom-no-title"),n.content||n.customHtml&&(n.customHtml.inner||n.customHtml.outter)||e.addClass("walkme-custom-no-content"),t.nextButton||t.backButton||t.doneButton||t.submitButton||e.addClass("walkme-custom-no-buttons")}this.LocalSVNRevision="$Rev$";var l=new o(this),c=l.Prop.Protected("lib"),d=l.Prop.Protected("balloon"),f=l.Prop.Protected("balloonClass"),p=l.Prop.Protected("balloonSettings"),g=l.Prop.Protected("resourceManager"),h=l.Prop.Protected("logger"),m=l.Prop.Protected("minWidth"),v=l.Prop.Protected("maxWidth"),y=(l.Prop.Public("minPopupWidth"),l.Prop.Public("arrowHeight")),w=l.Prop.Public("arrowBaseWidth"),b=l.Prop.Public("hasBorder"),S=l.Virtual.Protected("addBalloonDiv"),T=l.Virtual.Public("loadResources",function(e,t){t&&t()}),I=l.Virtual.Protected("getArrowsColors"),C=(l.Virtual.Public("fixSize",function(e,t,n,r,i){C(e,t,n,r),E(e,i);var o={width:e.width(),height:e.height()};return o}),l.Virtual.Protected("fixWidth",function(e,n,r,i){var o=0;o=c().getHostData().isQuirksMode(n[0])?t(e):e.width();var a=0;a=!i||0>=i?400:i;var s=190;if(s>o&&(o=s),o>a&&(o=a),e.css("width",o+"px"),!i||0>=i){var u=0;mtjQuery.each(mtjQuery("[width], [style*=width], [style*=WIDTH]",e),function(e,t){mtjQuery(t).width()>u&&(u=mtjQuery(t).width())}),u>o&&k(u,e)}})),E=l.Virtual.Protected("fixHeight",function(e,t){var n=e.height();t&&t>0&&(n=t),e.css("height",n+"px")}),k=l.Virtual.Protected("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t);n.css("width",e+"px"),t.css("width","auto")}),_=l.Public("generateHtml",function(e){var t={lib:c(),balloonSettings:p(),balloonData:e.balloonData,userGuid:e.userGuid,settings:e.settings,end:e.end,stepType:e.stepType,contentDiv:e.contentDiv},n={nextButton:e.nextButton,doneButton:e.doneButton,backButton:e.backButton,submitButton:e.submitButton};return d(new(f())(t)),d().initButtons(n),d().generateHtml()}),x=(l.Public("manipulationsForInlineCss",function(e){return d().manipulationsForInlineCss(e)}),l.Public("generateBalloonDiv",function(e,t,n,r,i,o){var a=S(_(o),e,t);return x(a,n,r,i,o),a}),l.Virtual.Protected("addIdentifiers",function(e,t,n,r,i){e.attr("id","walkme-balloon-"+n),e.addClass("walkme-custom-walkthru-"+t),e.addClass("walkme-custom-step-"+n);var o=r==Au.STEP_TYPE.Popup?"popup":"simple";e.addClass("walkme-custom-"+o+"-step");var a=c().getCurrentLanguage()||"default";e.addClass("walkme-custom-language-"+a),je.addBrowserSpecificClasses(e),u(e,i)})),A=l.Virtual.Protected("addArrowClasses",function(e,t,n,r){e.addClass("walkme-custom-balloon-arrow"),e.addClass("walkme-custom-balloon-arrow-"+n),e.addClass("walkme-custom-balloon-arrow-"+t),e.addClass("walkme-custom-balloon-arrow-"+t+"-"+n),e.addClass("walkme-custom-step-"+r)}),P=(l.Virtual.Public("fixArrows",function(){}),l.Virtual.Public("fixQuirksMode",function(){}),l.Virtual.Protected("finalizeArrowsPosition",function(){})),D=(l.Virtual.Public("drawArrows",function(e,t,n,o,a,s){var u=i(n,o,a,e),l={top:u.top,left:u.left};n.positionType==rc.Top&&(l.top=u.top,u.top=u.top-p().BalloonBorderWidth+1,l.left=u.left-1),n.positionType==rc.Bottom&&(u.top=u.top+p().BalloonBorderWidth-1,l.top=u.top-p().BalloonBorderWidth,l.left=u.left-1),n.positionType==rc.Left&&(c().getHostData().isQuirksMode(e[0])?(u.left=u.left-p().BalloonBorderWidth+1,l.left=u.left+p().BalloonBorderWidth,l.top=u.top-1):(u.left=u.left-p().BalloonBorderWidth+1,l.left=u.left+p().BalloonBorderWidth-1,l.top=u.top-1)),n.positionType==rc.Right&&(u.left=u.left+p().BalloonBorderWidth-1,l.left=u.left-p().BalloonBorderWidth,l.top=u.top-1),P(n.positionType,u,l);var d="",f=null,g=ic[n.positionType],h=I(g);p().BalloonBorderWidth>0&&(f=r(l,n,s,h.outterArrow,y()+1,y()+1),A(f,"outer",g,t)),d=r(u,n,s,h.innerArrow,y(),y()),A(d,"inner",g,t);var m=[d];return f&&m.push(f),m}),l.Protected("getBalloonBasicWidth",function(e,n,r){var i=0;i=c().getHostData().isQuirksMode(n[0])?t(e):e.width();var o=0;return o=r||0>=r?v():r,i<m()&&(i=m()),i>o&&(i=o),i}),l.Public("setConfiguration",function(e){c().FixConfiguration(e),p(e),T()})),N=(l.Public("decideWhereToPopForCaptureBalloon",function(e,t,n,r){try{var i=e[0],o=i.getBoundingClientRect(),a=np(e),s=ep(i,a,window),u={width:n,height:r},l=mtjQuery(document);l.height=l.height(),l.width=l.width(),l.top=0,l.left=0;var c=l,d=$a(o,s),f=y()+1,p=N(d,u,t,f,c,!0);return p}catch(g){Rs.Logger.error(g)}}),l.Public("addPositionClass",function(e,t){var n="walkme-custom-position-"+ic[t.positionType];n+=" walkme-custom-offset-"+ac[t.positionOffset],e.addClass(n)}),l.Public("decideWhereToPop",function(e,t,n,r,i,o){var a,s,u=e.left+e.width/2,l=e.top+e.height/2,c=e.bottom+t.height+r<i.height+i.top,d=e.left-t.width-r>i.left,f=e.right+t.width+r<i.width+i.left,p=e.top-t.height-r>i.top,g=u-t.width/2>i.left,h=u+t.width/2<i.width+i.left,m=l-t.height/2>i.top,v=l+t.height/2<i.height+i.top;if(n==rc.Top||n==rc.Bottom){var w,b;if(g&&h)b=u-t.width/2,s=oc.Center;else if(g){if(!h){var S=i.width+i.left-e.right;b=e.right-t.width+S-1,s=oc.End}}else b=e.left,s=oc.Start;return n==rc.Top?(w=e.top-t.height-r,a=rc.Top):(w=e.bottom+r,a=rc.Bottom),o&&(p&&n==rc.Top||n==rc.Bottom&&!c?(w=e.top-t.height-r,a=rc.Top):(w=e.bottom+r,a=rc.Bottom)),{top:Math.ceil(w),left:Math.ceil(b),positionType:a,positionOffset:s}}if(n==rc.Right||n==rc.Left){var w,b;return v&&m?(w=l-t.height/2,s=oc.Center):v?m||(w=e.top-y()+2,s=oc.Start):(w=e.top-y()+2,s=oc.End),n==rc.Left?(b=e.left-t.width-r,a=rc.Left):(b=e.right+r,a=rc.Right),o&&(d&&n==rc.Left||n==rc.Right&&!f?(b=e.left-t.width-r,a=rc.Left):(b=e.right+r,a=rc.Right)),{top:Math.ceil(w),left:Math.ceil(b),positionType:a,positionOffset:s}}}));e.apply(null,arguments)}function We(){function e(e){r.Extends(Ve,e);var t=e.balloonSettings.minPopupWidth?e.balloonSettings.minPopupWidth:400;n=r._base,n.balloonClass(Ue),n.minWidth(190),n.arrowHeight(13),n.arrowBaseWidth(26),n.minPopupWidth(t)}function t(e,t){var n=function(e,t){return(e+t)/2},r=function(e){return parseInt((""+e).replace("#",""),16)},i=function(e){return(e>>0).toString(16)},o=r(e),a=r(t),s=function(e){return e>>16&255},u=function(e){return e>>8&255},l=function(e){return 255&e},c=i(n(s(o),s(a))),d=i(n(u(o),u(a))),f=i(n(l(o),l(a))),p="#"+(c.length<2?"0"+c:c)+(d.length<2?"0"+d:d)+(f.length<2?"0"+f:f);return p}this.LocalSVNRevision="$Rev$";var n,r=new o(this);r.Override("addBalloonDiv",function(e,t,r){var i=mtjQuery(t[0].ownerDocument.createElement("div"));return i.addClass("walkme-custom-balloon-outer-div"),i.addClass("mt-custom-balloon-outer-div"),i.css("display","none"),i.css("direction","ltr"),Ha(i,n.balloonSettings(),r),n.lib().getUiUtils().setLangAttribute(i),mtjQuery(t.append(i)),i.html(e),i}),r.Override("addIdentifiers",function(e,t,r,i,o){n.addIdentifiers(e,t,r,i,o),wmjQuery("*",e).addClass("walkme-custom-step-"+r)}),r.Override("addArrowClasses",function(e,t,r,i){n.addArrowClasses(e,t,r,i),e.addClass("mt-custom-balloon-arrow-"+t)}),r.Override("getArrowsColors",function(e){var r=n.balloonSettings(),i=""==r.BalloonColor2?"transparent":r.BalloonColor2,o=r.BorderColor;switch(e){case"bottom":i=""==r.Color?"transparent":r.Color;break;case"top":break;case"left":case"right":i="transparent"==r.Color||"transparent"==r.BalloonColor2||"#00000000"==r.Color||"#00000000"==r.BalloonColor2?"transparent":t(r.Color,r.BalloonColor2)}return{innerArrow:i,outterArrow:o}});e.apply(null,arguments)}function Qe(){function e(e){s.Extends(Ve,e);var t=e.balloonSettings.minPopupWidth?e.balloonSettings.minPopupWidth:300;i=s._base,i.balloonClass(Ge),i.minWidth(190),i.minPopupWidth(t),i.arrowHeight(10),i.arrowBaseWidth(18),i.hasBorder(!1),a=i.lib().getCommonUtils()}function t(e,t,r,o,a){e.show();var s=wmjQuery(".walkme-custom-balloon-bottom-div",e),u=s[0]?s[0].offsetHeight:0,l=i.arrowBaseWidth(),c=parseFloat(t[0].css("top")),d=parseFloat(e.css("top")),f=e[0]?e[0].offsetHeight:0,p=c-d,g=f-u;if(e.hide(),l>g-p&&g>p){var h=d-(g-p+1);e.css("top",h+"px"),n(t,o,r.positionType,a)}else p>=g&&n(t,o,r.positionType,a)}function n(e,t,n,r){var o=n==rc.Left&&"ltr"==t||n==rc.Right&&"rtl"==t;if(o||r){var a=n==rc.Left?"left":"right";e[0].css("border-"+a+"-color",i.balloonSettings().BalloonColor2)}for(var s=0;s<e.length;s++)e[s].addClass("walkme-custom-balloon-arrow-footer")}function r(e){e[0].css("border-top-color",i.balloonSettings().Color)}this.LocalSVNRevision="$Rev$";var i,a,s=new o(this);s.Override("addBalloonDiv",function(e,t){var n=a.createElementInDocument(e,t[0].ownerDocument);return Mf("accessibility")&&(focusableElements=n.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),a.addTabIndex(focusableElements),focusableElements.on("focus",function(){wmjQuery(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){wmjQuery(this).css({outline:"none","outline-offset":"0px"})})),i.lib().getUiUtils().setLangAttribute(n),n.css("display","none"),t.append(n),n}),s.Override("loadResources",function(e,t){var n=i.balloonSettings().FontsData;n?i.resourceManager().fonts(n,e,t,t):t&&t()}),s.Override("fixWidth",function(e,t,n,r){i.fixWidth(e,t,n,r),e.css("width",e.width()+1+"px")}),s.Override("getArrowsColors",function(e){var t=i.balloonSettings(),n=t.Color,r=t.BorderColor,o=t.direction;switch(e){case"bottom":n=t.Color;break;case"top":n=t.BalloonColor2;break;case"left":"ltr"==o?n=t.Color:(n=t.ButtonBgColor,r=t.ButtonBgColor);break;case"right":"ltr"==o?(n=t.ButtonBgColor,r=t.ButtonBgColor):n=t.Color}return{innerArrow:n,outterArrow:r}}),s.Override("fixArrows",function(e){var n=e.balloonDiv,o=e.arrowsDivs,a=e.result,s=e.isInCaptureMode,u=e.isQuirksMode,l=i.balloonSettings().direction,c=a.positionType==rc.Left||a.positionType==rc.Right;c?t(n,o,a,l,u):s&&a.positionType==rc.Top&&r(o)}),s.Override("fixQuirksMode",function(e){var t=wmjQuery(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",e);t.hide();var n=wmjQuery(".walkme-custom-powered-by-div",e);if(n.length>0){var r=n.css("margin-bottom"),o=n.css("margin-top");n.css("margin-bottom","0px").css("margin-top","0px"),n.css("padding-bottom",r).css("padding-top",o)}var a,s=wmjQuery(".walkme-custom-balloon-arrow-inner",e.parent()),u=wmjQuery(".walkme-custom-balloon-arrow-outer",e.parent());if(s.hasClass("walkme-custom-balloon-arrow-right"))a="right";else{if(!s.hasClass("walkme-custom-balloon-arrow-left"))return;a="left"}s.css("border-"+a+"-color",i.balloonSettings().Color),u.css("border-"+a+"-color",i.balloonSettings().BorderColor)}),s.Override("finalizeArrowsPosition",function(e,t,n){switch(e){case rc.Top:t.top--;break;case rc.Bottom:t.top++;break;case rc.Left:t.left--;break;case rc.Right:t.left++}}),s.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t),r=mtjQuery(".walkme-custom-balloon-title",t);r.css("width","10px"),n.css("width",e+"px"),t.css("width","auto");var i=t.width();t.css("width",i+"px"),r.css("width","auto")});e.apply(null,arguments)}function He(){function e(){}function t(e,t,n){wmjQuery(e).css(t,n)}this.LocalSVNRevision="$Rev$";var n=this;n.addClickAndHover=function(e){function n(e){d=!0;var n=wmjQuery(".walkme-click-and-hover:active")[0]==e.currentTarget;n?t(e.currentTarget,a,l):t(e.currentTarget,a,u)}function r(e){d=!1,t(e.currentTarget,a,s)}function i(e){t(e.currentTarget,a,l)}function o(e){d?t(e.currentTarget,a,u):t(e.currentTarget,a,s)}var a=e.cssProperty,s=e.regularColor,u=e.hoverColor,l=e.clickColor,c=e.elemSelector,d=!1,f=e.balloonDiv,p=f.find(c);p.mouseenter(n),p.mouseleave(r),p.mouseup(o),p.mousedown(i)},e.apply(null,arguments)}function $e(){function e(e){me=e.element,be=e.settings,Se=e.identifySettings,Te=e.html,Ie=e.lib,ke=e.position,Oe=e.launcherId,Re=e.launcherName,ce=e.userGuid,ye=e.isCapturingMode,je=e.positionHelper,Fe=e.addFunctionality,We=e.cdnServer,ae=e.clickAuditManager,oe=Me.isTrue(be,"animated",!1),he=e.delayBetweenClicks,we=e.useDefaultHighlightSettings,le=new xe({lib:_makeTutorial,element:me,settings:be,drawableType:"launcher",drawableId:Oe,monitor:!ye,defaultSettings:we,cssKeysValues:[{id:Oe,name:"launcher"}]}),Qe=Me.isTrue(be,"embedInParent",!1)&&!ye,t(),ve=me.data("iframe")?Ie.shouldHandlePageAsFramesets()||Qe:!0,fe=Us.get("FontsData"),pe=Us.get("ResourceManager"),de=Us.get("TimerManager")}function t(){var e=Ss(be,"imageObject",$e);if("customText"==e.type)o(e);else{var t=n()+e.data.shape+"-"+e.data.color;r(e,t),ye||i(e,t)}}function n(){return We+"/player/resources/launchers/"}function r(e,t){_e="shape"==e.type?t+".png":l(e.data.url)?e.data.url:n()+e.data.url}function i(e,t){"shape"==e.type?a(e,t):s(e)}function o(e){Ne=e.data.customText,Le=e.data.customClass?e.data.customClass.split(/,| /).join(" "):""}function a(e,t){Me.isValueTrue(e.data.hover)&&(Ae=t+"-hover.png"),Me.isValueTrue(e.data.click)&&(Pe=t+"-click.png")}function s(e){Ae=u(e,"hover"),Ae=Ae?encodeURI(Ae):Ae,Pe=u(e,"click"),Pe=Pe?encodeURI(Pe):Pe}function u(e,t){var r=null;return e.data[t]&&(r=l(e.data[t])?e.data[t]:n()+e.data[t]),r}function l(e){return 0==e.indexOf("http")}function c(e,t){var n=wmjQuery("<img />");n.load(function(){var e={width:this.width,height:this.height};t(e),n.unbind("load")}),n.attr("src",e)}function d(e){var t=wmjQuery(document.createElement("div")).addClass("walkme-custom-launcher-tester").addClass(Le).important({position:"absolute",top:"-9999px",left:"-9999px",visibility:"hidden","line-height":"normal"}).html(Ne).appendTo(wmjQuery("body",document).or("html",document)),n={width:t.width(),height:t.height()};t.remove(),e(n)}function f(){le.shouldShow()&&!ql.isQuirksMode(me[0])&&le.highlight()}function p(e,t){ie.top-=t.top-e.top,ie.left-=t.left-e.left}function g(){if(ue=w(),Qe){var e=y();if(!e)return void g()}Ce=mtjQuery(document.createElement("div"));var t=Ss(be,"tooltip","");t=Np(t,["&",'"',"'",">","<"]),Ce.attr("title",t);var n="walkme-launcher-id-"+Oe;Ce.addClass(n),Ce.css("display","none"),Ie.getUiUtils().setLangAttribute(Ce),ue.append(Ce[0].outerHTML),Ce=ue.find("."+n),Ce.html(Te),Ce.addClass("walkme-custom-launcher-outer-div"),Ce.addClass("walkme-text-launcher"),Ce.addClass(Le),Ie.getUiUtils().addBrowserSpecificClasses(Ce),Fe&&Me.addTabIndex(Ce);var r=q();Y(r),h()}function h(){te=Ce.find(".walkme-launcher-image-div"),Ne?v():m()}function m(){k(_e,De.width,De.height),P(De.width,De.height),te.css("background-repeat","no-repeat"),S()}function v(){te.html(Ne)}function y(){try{Ee=mtjQuery(ue[0].ownerDocument.createElement("div")),Ee.css("position","relative"),Ee.css("float",Z()),Ee.css("display","-moz-inline-stack"),Ee.css("display","inline-block"),Ee.css("zoom","1"),Ee.css("*display","inline"),Ee.addClass("walkme-launcher-container"),Ee.addClass("walkme-launcher-container-id-"+Oe);var e=mtjQuery(ue),t=e.offset();return e.append(Ee),Ee.html("a"),Ee.is(":mt_hidden")&&!He?(Za("Launcher ["+Oe+"] invisible - Fallback to embed in parent",3),Ee.remove(),Ee=void 0,He=!0,!1):(Ee.html(""),p(t,Ee.offset()),ue=Ee,!0)}catch(n){return Ee&&(Ee.remove(),Ee=void 0),He=!0,Za("Error while building launcher embed in container ["+Oe+"]. trying again.  ex:"+n,5),!1}}function w(){var e;return e=Qe?b(me)?me:me.parent():ve?Is(me):Is(null,!0),Mf("jsp")&&!ye&&(e=Cs(me,e)),e}function b(e){if(He)return!1;var t=e.css("overflow");if(t&&V()&&("auto"===t||"scroll"===t||"hidden"===t))return!1;var n=e.prop("tagName");switch(n){case"A":case"INPUT":case"BUTTON":case"IFRAME":return!1;default:return!0}return!0}function S(){Ae&&c(Ae,T),Pe&&c(Pe,I)}function T(e){ne=e,te.hover(function(){E(Ae,ne.width,ne.height,!0)},function(){E(_e,De.width,De.height)})}function I(e){re=e,te.mouseup(function(){var e=C();E(e.url,e.width,e.height)}).mousedown(function(){E(Pe,e.width,e.height)})}function C(){var e,t,n;return Ae?(e=Ae,t=ne.width,n=ne.height):(e=_e,t=De.width,n=De.height),{url:e,width:t,height:n}}function E(e,t,n,r){oe&&te.stop(),k(e),x(t,n),P(t,n,r)}function k(e,t,n){te.css("background-image",'url("'+e+'")'),Ce.css("top",ie.top+"px"),Ce.css("left",ie.left+"px")}function x(e,t){var n=A(e,t);Ce.css("top",ie.top+n.top+"px"),Ce.css("left",ie.left+n.left+"px")}function A(e,t){var n=parseInt(Ss(be,"direction",ze.BottomRight)),r={top:0,left:0};switch(oe&&(n=ze.Right),n){case ze.Top:r.top+=De.height-t,r.left+=De.width/2-e/2;break;case ze.Right:r.top+=De.height/2-t/2;break;case ze.Bottom:r.left+=De.width/2-e/2;break;case ze.Left:r.top+=De.height/2-t/2,r.left+=De.width-e;break;case ze.TopLeft:r.top+=De.height-t,r.left+=De.width-e;break;case ze.TopRight:r.top+=De.height-t;break;case ze.BottomRight:break;case ze.BottomLeft:r.left+=De.width-e;break;case ze.Center:r.top+=De.height/2-t/2,r.left+=De.width/2-e/2}return r}function P(e,t,n){te.css("height",t+"px"),n&&oe?te.animate({width:e+"px"}):te.css("width",e+"px")}function D(){Ce.css("top",ie.top+"px"),Ce.css("left",ie.left+"px");var e=Ss(be,"z-index","2147483627");rp(Ce,e),Ce.css("display","inline")}function N(e,t){Ie.userSawWalkMe(),De=e,Te||(Te="<div class='walkme-launcher-image-div'></div>"),f();var n=Qe?je.getEmbedInElementPosition(me,be):je.getElementBounds(me,ve,window,be);ie=G(n),g(),R(),D(),H();var r={image:_e,hover:Ae,click:Pe};Wd("LauncherIsShown",{launcherId:ee.getId()}),Qd("LauncherIsShown",ee,{imagePaths:r,customText:Ne,name:Re}),t&&t(ue)}function L(){var e=je.getElementBounds(me,ve,window,be);ie=G(e);var t=q();Y(t),R(),D(),f()}function O(){if(!Qe)return!0;if(!me)return!1;for(var e=!0,t=me.data("iframe");t&&e;)e=e&&t&&t.parents("html").length>0,t=t.data("iframe");return e}function M(){return Ce.parents("html").length>0}function R(){Qe?j():Mf("jsp")&&ue.hasClass("jspPane")&&(ie.top=ie.top-ue.offset().top,ie.left=ie.left-ue.offset().left)}function j(){var e=me.offsetParent();if(e.length>0){var t="BODY"==e.prop("tagName");t?F(e):U(e)}}function F(e){"static"!=e.css("position")?U(e):Qe&&!b(me)&&B()}function B(){var e=me.offset(),t=me.parent().offset();ie.top+=e.top-t.top,ie.left+=e.left-t.left}function U(e){if(Qe)return void(b(me)||B());var t=e.offset();ie.top-=t.top,ie.left-=t.left}function G(e){var t=V()?W(e):Q(e);return t}function V(){var e=Ss(be,"context",Ye.Outside);return e==Ye.Outside}function W(e){var t,n,r=qe+1,i=_.getCenterPositionByBounds(e);switch(ke){case ze.Top:n=i.left-De.width/2,t=e.top-De.height-r;break;case ze.Right:t=i.top-De.height/2,n=e.right+r;break;case ze.Bottom:t=e.bottom+r,n=i.left-De.width/2;break;case ze.Left:t=i.top-De.height/2,n=e.left-De.width-r;break;case ze.TopLeft:n=e.left-De.width-r,t=e.top-De.height-r;break;case ze.TopRight:n=e.right+r,t=e.top-De.height-r;break;case ze.BottomRight:n=e.right+r,t=e.bottom+r;break;case ze.BottomLeft:n=e.left-De.width-r,t=e.bottom+r}return{top:t,left:n}}function Q(e){var t,n,r=_.getCenterPositionByBounds(e);switch(ke){case ze.Top:t=e.top,n=r.left-De.width/2;break;case ze.Right:t=r.top-De.height/2,n=e.right-De.width;break;case ze.Bottom:t=e.bottom-De.height,n=r.left-De.width/2;break;case ze.Left:t=r.top-De.height/2,n=e.left;break;case ze.TopLeft:t=e.top,n=e.left;break;case ze.TopRight:t=e.top,n=e.right-De.width;break;case ze.BottomRight:t=e.bottom-De.height,n=e.right-De.width;break;case ze.BottomLeft:t=e.bottom-De.height,n=e.left;break;case ze.Center:t=r.top-De.height/2,n=r.left-De.width/2}return{top:t,left:n}}function H(){var e={launcherId:Oe};Ce.click(function(t){Wd("LauncherClicked",e)}),Fe?(Ce.css("cursor","pointer"),Qe&&Ce.hover(function(e){e.stopPropagation()}),Ce.click(function(e){var t=(new Date).getTime(),n=t-ge;if(null!=ge&&he>=n)return void Za("Launcher ["+Oe+"] click was ignored - it was already activated "+n+" ms ago",3);ge=t,Qe&&e.stopPropagation(),wmjQuery(this).blur();var r=Us.get("Consts");Qd(r.EVENTS.LauncherClicked),_makeTutorial.getLauncherAction(Oe).doAction(),ae.SendClickAudit(Fl.Launcher,Oe)})):Qe&&(Ce.click(function(e){e.stopPropagation()}),Ce.hover(function(e){e.stopPropagation()}))}function $(){var e=q();z(e)&&L(),Y(e)}function z(e){return Ge!=e.top||Ve!=e.left||Be!=e.height||Ue!=e.width}function Y(e){Ge=e.top,Ve=e.left,Be=e.height,Ue=e.width}function q(){var e,t,n=!1;if(ve){var r=me.offset();e=Math.floor(r.top),t=Math.floor(r.left)}else{var i=je.getPosRelativeToWindow(me[0],window,!0);e=i.top,t=i.left;var n=K()}var o=me.height(),a=me.width();return{top:e,left:t,height:o,width:a,elementIsScrolledOut:n}}function K(){var e=me.data("iframe");return e&&je.isElementScrolledOut(me,e,ke)}function X(){var e=Se?Se.filter:void 0,t=je.isElementVisible(me,e);t&&ee.evaluator&&J()&&(t=ee.evaluator.getValue()),t?(Qe||$(),se=de.libSetTimeout(X,800)):(ee.actionInProgress=!0,ee.destroy(function(){ee.actionInProgress=!1}))}function J(){var e=Me.isTrue(be,Ke,!1);return e}function Z(){var e="left";switch(ke){case ze.Right:case ze.TopRight:case ze.BottomRight:e="right"}return e}var ee=this;ee.LocalSVNRevision="$Rev$",ee.evaluator=null;var te,ne,re,ie,oe,ae,se,ue,le,ce,de,fe,pe,ge,he,me=null,ve=!1,ye=!1,we=!1,be=null,Se=null,Te=null,Ie=null,Ce=null,Ee=null,ke=null,_e=null,Ae=null,Pe=null,De=null,Ne=null,Le="",Oe=null,Re=null,je=null,Fe=!1,Be=null,Ue=null,Ge=null,Ve=null,We=null,Qe=!1,He=!1,$e={type:"shape",data:{shape:"round-question-mark",color:"blue"}},ze={Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8},Ye={Outside:0,Inside:1},qe=0,Ke="condHide";this.getId=function(){return Oe},this.show=function(e){function t(){d(function(t){N(t,e)})}if(Ne){var n=ve?hs(me):wmjQuery("head");pe.fonts([fe.get("walkme-opensans")],n,t,t)}else c(_e,function(t){N(t,e)})},this.updateOffset=function(e,t){ie.top+=e,ie.left+=t},this.destroy=function(e){try{se&&se.clear(),za(Ee||Ce,function(){le.unhighlightElement(),e&&e()})}catch(t){e&&e()}},this.isDrawn=function(){try{return M()&&O()}catch(e){return!1}},this.setTimeoutOn=function(e){e=e?e:800,se=de.libSetTimeout(X,e)},ee.recalculateOrDestory=function(){ee.evaluator&&!ee.evaluator.getValue()&&(ee.actionInProgress=!0,ee.destroy(function(){ee.actionInProgress=!1}))},e.apply(null,arguments)}function ze(e,t,n,r,i,o,a,s,u,l,c,d,f){function g(){C=r.wrapCustomerLog(Qs)}function h(e,t){I(e,t)}function m(e,t,r){if(rs()||!Vc)return!0;var o=Vc+"/Analytics/BalloonShown";r=r||{};var a={tutorialId:e.TutorialId,stepId:e.Id,stepIndex:e.StepIndex+1,stepStatus:t,permutationId:n.getPermutationId(),endUserGuid:n.getEndUserGuid(),datetime:u.getDateAtUTC(),playGuid:k._currentPlayGUID,playInitiator:k._currentPlayInitiator?k._currentPlayInitiator.type:0,playInitiatorObj:k._currentPlayInitiator?k._currentPlayInitiator.objectId:-1,source:n.getEnvironmentId(),customFieldsSerialized:u.toJSON(_f),browser:i.browser.string,os:i.os.name,domain:window.location.host,FETime:r.FETime,balloonDrawTime:r.balloonDrawTime,balloonShowTime:r.balloonShowTime,logicTime:r.logicTime};Od.execute({url:o,data:a})}function v(e,t,n,r){return l.postEvent(l.EVENT_TYPES.Play,{type:l.EVENT_APPS.Step,oId:e.Id,oName:e.StepTitle||"",aType:y(e),oType:e.Type,indx:e.StepIndex+1,owId:t.TutorialId,owName:t.Name,total:n,status:r,pId:k._currentPlayGUID})}function y(e){var t=f.getSettingsValue(e.Settings,"action",""),n="";return t&&(n=d.get(t.actionType)),n}function w(t){(void 0==k._currentPlayGUID||0==k._currentPlayGUID.length)&&(k._currentPlayGUID=e.generateNewPlayGuid(t))}function b(e,t){if(e!=a.STEP_STATUS.SkippedByActionStep){var n=e==a.STEP_STATUS.SkippedStartedFromBiggerStep?"NewSkippedStep":"CheckNewStep";Qd(n,t)}}function S(e,t,n,r,i,o){w(e);var a={};return a.tutorialID=e,a.stepId=t,a.stepIndex=n,a.totalSteps=i,a.playGuid=k._currentPlayGUID,a.TicksSince1970=u.getDateAtUTC(),a.StepStatus=r,T(a),Hi(o,!1)&&(a.isFirstStepError=!0),a}function T(e){return k._currentPlayInitiator&&k._currentPlayInitiator.type!=Ll.NONE?(e.playInitiator=k._currentPlayInitiator.type,void(void 0!=k._currentPlayInitiator.objectId&&k._currentPlayInitiator.objectId>-1&&(e.initObjId=k._currentPlayInitiator.objectId))):void(e.playInitiator=Ll.NONE);
}function I(e,t){var n=[];if(e.length<=0)return n;for(var r=0;r<e.length;r++)e[r].stepIndex==t.stepIndex&&e[r].playGuid==t.playGuid&&(n.push(e.splice(r,1)[0]),r--);return n}this.LocalSVNRevision="$Rev$",this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=w;var C,E,k=this;k.init=function(){E=t.register("sa",{beforeSendingManipulationFunc:h,actionUrl:"/Statistics/AddStepsLogs",prefixForStorage:"sa",sendingThreshold:5,dataType:"step audit",dataIdFieldName:"Id",requestParamsFunc:function(e){return{stepActionsSerialized:u.toJSON(e),source:n.getEnvironmentId(),customFieldsSerialized:u.toJSON(_f),browser:i.browser.string,os:i.os.name,domain:window.location.host,permutationId:n.getPermutationId(),endUserGuid:n.getEndUserGuid()}}})},this.safeStartAudit=function(e,t){if(rs())return C("Audit steps manager - Auditing is disabled, doing nothing",3),!0;try{var n={tutorialId:t.TutorialId,tutorialName:t.Name,playGuid:k._currentPlayGUID,playInitiator:k._currentPlayInitiator,status:e};c.send(n)}catch(i){r.error(i)}try{var o=S(t.Id,-1,-1,a.STEP_STATUS.SupposedToShow,t.Steps.length,!1);o.SafeStartAction=e,E.sendData(o)}catch(i){r.error(i)}},this.auditBalloonDrawToPeta=function(e,t,n){try{t!=a.STEP_STATUS.Shown||s.isActionStep(e)||m(e,t,n)}catch(r){}},this.auditStep=function(e,t,n,i){b(n,t);var o=e.Steps.length;if(rs())return C("Audit steps manager - Auditing is disabled, doing nothing",3),!0;if(t.TutorialId<0)return void C(p("Audit steps manager - Step with id {0} has negative tutorial id ({1})",t.Id,t.TutorialId),3);try{var a=S(t.TutorialId,t.Id,t.StepIndex+1,n,o,i);E.sendData(a);try{return v(t,e,o,n)}catch(s){return r.error(s),!0}}catch(s){return r.error(s),s}},k.removeAllStepAuditsLogs=function(){E.clearAndStopSavingData()},g.apply(null,arguments)}function Ye(e,t,n){function r(){}function i(r,i,o,a,s){if(!rs()){var u=r.Steps;t.postEvent(t.EVENT_TYPES.Play,{type:t.getEventAppByDeployable(e.Tutorial),oId:r.TutorialId,oName:r.Name,pId:s||-1,pInit:n.map(i),oRequestedSubObject:u[o].Id,oActualSubObject:u[a].Id})}}var o=this;o.auditWalkthruStart=i,r.apply(null,arguments)}function qe(e){function t(){}function n(t,n,r){rs()||e.postEvent(e.EVENT_TYPES.Play,{type:e.EVENT_APPS.Task,oId:t.Id,oName:t.Name,pId:"-1",pInit:{id:n,type:r}})}var r=this;r.auditTaskPlayed=n,t.apply(null,arguments)}function Ke(e,t,n){function r(){}function i(t){if(a(t)){var r=o(t);e.postEvent(e.EVENT_TYPES.PlayFailed,r)}else n.error("params is not valid for send action in AuditSafeStartManager")}function o(n){return{oId:n.tutorialId,oName:n.tutorialName,pId:n.playGuid,pInit:t.map(n.playInitiator),status:n.status,type:e.ACTION_ENTITY_TYPES.Walkthru}}function a(e){return null==e||null==e.tutorialId||null==e.playGuid||null==e.status?!1:!0}var s=this;s.send=i,r.apply(null,arguments)}function Xe(e,t,n,r,i,o,a){function s(){}function u(e){if(e){var r,a=e.Method,s=e.Parameters;switch(a){case"var":s.VarName&&(r=o.getWindowData(xu.Var,s.VarName),c(r)&&(t.customerLog("endUserGuid - invalid variable name",1,w),r=void 0));break;case"salesforce":r=l();break;case"cookie":s.VarName&&(r=o.getWindowData(xu.Cookie,s.VarName));break;case"jquery":s.VarName&&(r=n.getjQueryElementText(s.VarName));break;case"walkme":case"none":r=f(),r||(r=i(),t.customerLog("endUserGuid wasn't found in storage. was generated and stored in storage "+r,3,w))}return r?d(r):(r=f(),r||(r=i(),t.customerLog("getEndUserGuid: Forced generating new user guid-"+r,3,w),d(r,!0))),r}}function l(){return window.walkme_sf_vars?window.walkme_sf_vars.userId:void 0}function c(e){return e&&e.nodeType}function d(t,n){e.saveData(v,t,Su),n?(h=!0,e.saveData(y,1,Su)):(h=!1,e.removeData(y))}function f(){return h=e.getData(y),e.getData(v)}this.LocalSVNRevision="$Rev$";var p,g,h,m=this,v="wm-ueug",y="wm-fgug",w="endUser";this.setEndUserSettings=function(e){p=e,a.sendInternalEvent("endUserSettingsSet",{endUserSettings:e})},this.getEndUserSettings=function(){return p},this.isRealEndUserType=function(){var e=!1;return p&&m.getEndUserGuid()&&(e=!0),e},m.getEndUserGuid=function(e){if(g&&(!e||!h))return g;var n=u(p);return!n||(g=n,t.customerLog("getEndUserGuid: retrieved endUserGuid-"+n,3,w),e&&h)?(t.customerLog("Could not retrieve endUserGuid",3,w),!1):g},s.apply(null,arguments)}function Je(e,t,n,r,i,o,a,s,l){function c(){T=i.getCurrentPermutation}function d(){return window.walkme_sf_vars?window.walkme_sf_vars.organizationName:void 0}function p(){return window.walkme_sf_vars?window.walkme_sf_vars.organizationId:void 0}function g(){return window.walkme_sf_vars?window.walkme_sf_vars.roleId:void 0}function h(){if(window.walkme_sf_vars){var e=f(window.walkme_sf_vars);return delete e.organizationName,delete e.organizationId,delete e.userId,e}}function m(){return window.walkme_sf_vars&&window.walkme_sf_vars.walkme_error?!0:!1}function v(){return x+n.getEndUserGuid()}function y(){var e=window.walkme_sf_vars,n="walkme_sf_error:"+u(e);t.customerLog(n,1,_)}function w(){return void 0===I&&(I=r.get().EndUserSettings&&r.get().EndUserSettings.logWalkMeVisible),I}function b(t,n){e.saveData(v(),n,60*t)}function S(){return e.getData(v())}this.LocalSVNRevision="$Rev$";var T,I,C,E=this,k=1e4,_="endUser",x="wm-euaf";E.reportEndUser=function(e,i){if(!C){var c=r.get().EndUserSettings?r.get().EndUserSettings.auditFreq:null,f=w();if(f&&!c&&(c=1440),c&&(!f||i)){var v=S();if(v)return void(C=!0);if(0===v)return t.customerLog("Loading WalkMe Failed due to ISV Limitations",1),void(e&&e());if(m())return void y();var I={permutationId:T(),endUserGuid:n.getEndUserGuid(),domain:window.location.host,source:os(),browser:s.browser.string,os:s.os.name,userGuid:o.getUserGuid()};l.isFeatureEnabled("dontReportSF")||(I.organizationName=d(),I.organizationId=p(),I.roleId=g(),I.extraData=h());var E="Logging WalkMe EndUser ("+n.getEndUserGuid()+"). Caused by WalkMe Visible : "+!!i;t.customerLog(E,1,_);var x=u(I);C=!0;Od.execute({dataType:"jsonp",url:a.get()+"/EndUser/AddEndUserData",data:{endUsersDataSerialized:x},timeout:k,success:function(t){"true"==t?b(c,1):"false"==t&&(b(c,0),e&&e())}})}}},c.apply(null,arguments)}function Ze(e,t,n){function r(e,n,r,i){var o=new nl.regular;return t.message(e+"_"+f,{varName:n},r,function(e){i&&i(e,o)}),f++,o}function i(e,t,i){function o(e,t){t.setValue(void 0!==e[a]&&e[a]===i)}var a=d[t.PermissionsForApplicationVar];return r(e+a,a,n.MOBILE_COMMANDS.GET_DATA.permissions,o)}function o(e,t){if(e.toString()===t.toString())return!1;for(var n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length),o=0;i>o;){var a=Number(n[o]),s=Number(r[o]);if(a!=s)return a>s;o++}return n.length>r.length}function a(e,t){return e.toString()===t.toString()?!1:!o(e,t)}function s(e,t,n,r){var i=e[c];void 0===i||null===i?n.setValue(!1):n.setValue(r(i,t))}function u(e,t,i){return r(e.StorageVarName+t,e.StorageVarName,n.MOBILE_COMMANDS.GET_DATA.storageVar,i)}var l=this,c="deviceSystemVersion",d={"Camera Access":"video","Location Services":"location",Contacts:"contacts","Photo Gallery":"photos","Sending Notifications":"notifications"},f=0;l.getFuncList=function(){return _},l.getFuncAssert=function(){return x},l.getAsyncFuncs=function(){return A};var p=function(e){return i("Permission_enabled_",e,!0)},g=function(e){return i("PermissionFor_notEnabled_",e,!1)},h=function(e){function t(t,n){s(t,e.OSVersionInput,n,function(e,t){return e.toString().toLowerCase()==t.toString().toLowerCase()})}return r("OSVersion_is",c,n.MOBILE_COMMANDS.GET_DATA.systemInfo,t)},m=function(e){function t(t,n){s(t,e.OSVersionInput,n,function(e,t){return e.toString().toLowerCase()!=t.toString().toLowerCase()})}return r("OSVersion_isNot",c,n.MOBILE_COMMANDS.GET_DATA.systemInfo,t)},v=function(e){function t(t,n){s(t,e.OSVersionInput,n,function(e,t){return o(e.toString(),t.toString())})}return r("OSVersion_newerThan",c,n.MOBILE_COMMANDS.GET_DATA.systemInfo,t)},y=function(e){function t(t,n){s(t,e.OSVersionInput,n,function(e,t){return a(e.toString(),t.toString())})}return r("OSVersion_olderThan",c,n.MOBILE_COMMANDS.GET_DATA.systemInfo,t)},w=function(e,t,n){function r(t,n){var r=t[e.StorageVarName],i=Np(e.StorageVarInput,["&",'"',"'"]);void 0===r||null===r?n.setValue(!1):n.setValue(r.toString().toLowerCase()==i.toLowerCase())}return u(e,"_equals",r)},b=function(e,t,n){function r(t,n){var r=t[e.StorageVarName],i=Np(e.StorageVarInput,["&",'"',"'"]);void 0===r||null===r?n.setValue(!0):n.setValue(r.toString().toLowerCase()!=i.toLowerCase())}return u(e,"_notEquals",r)},S=function(t,n,r){function i(n,r){var i=n[t.StorageVarName];void 0===i||null===i?r.setValue(!1):r.setValue(e.isBigger(i,t.StorageVarInput))}return u(t,"_bigger",i)},T=function(t,n,r){function i(n,r){var i=n[t.StorageVarName];void 0===i||null===i?r.setValue(!1):r.setValue(e.isSmaller(i,t.StorageVarInput))}return u(t,"_smaller",i)},I=function(t,n,r){function i(n,r){var i=n[t.StorageVarName],o=Np(t.StorageVarInput,["&",'"',"'"]);void 0===i||null===i?r.setValue(!1):r.setValue(e.isLike(i.toString(),o))}return u(t,"_like",i)},C=function(t,n,r){function i(n,r){var i=n[t.StorageVarName],o=Np(t.StorageVarInput,["&",'"',"'"]);void 0===i||null===i?r.setValue(!0):r.setValue(!e.isLike(i.toString(),o))}return u(t,"_notLike",i)},E=function(e,t,n){function r(t,n){var r=t[e.StorageVarName];void 0!==r&&null!==r?n.setValue(!0):n.setValue(!1)}return u(e,"_exists",r)},k=function(e,t,n){function r(t,n){var r=t[e.StorageVarName];void 0!==r&&null!==r?n.setValue(!1):n.setValue(!0)}return u(e,"_notExists",r)},_={StorageVarEquals:w,StorageVarNotEquals:b,StorageVarBigger:S,StorageVarSmaller:T,StorageVarLike:I,StorageVarNotLike:C,StorageVarExists:E,StorageVarNotExists:k,OSVersionIs:h,OSVersionIsNot:m,OSVersionNewerThan:v,OSVersionOlderThan:y,PermissionEnabled:p,PermissionNotEnabled:g},x=[];x.StorageVarExists=!1,x.StorageVarNotExists=!1,x.StorageVarEquals=!1,x.StorageVarNotEquals=!1,x.StorageVarLike=!1,x.StorageVarNotLike=!1,x.StorageVarBigger=!1,x.StorageVarSmaller=!1,x.OSVersionIs=!1,x.OSVersionIsNot=!1,x.OSVersionNewerThan=!1,x.OSVersionOlderThan=!1,x.PermissionEnabled=!1,x.PermissionNotEnabled=!1;var A=["StorageVarExists","StorageVarNotExists","StorageVarEquals","StorageVarNotEquals","StorageVarLike","StorageVarNotLike","StorageVarBigger","StorageVarSmaller","OSVersionIs","OSVersionIsNot","OSVersionNewerThan","OSVersionOlderThan","PermissionEnabled","PermissionNotEnabled"]}function et(){var e=this,t=Us.get("screen");e.getFuncList=function(){return a},e.getFuncAssert=function(){return s},e.getAsyncFuncs=function(){return u};var n=function(e){return t.width>e.WidthInput?!0:!1},r=function(e){return t.width<e.WidthInput?!0:!1},i=function(e){return t.height>e.HeightInput?!0:!1},o=function(e){return t.height<e.HeightInput?!0:!1},a={widthMoreThan:n,widthLessThan:r,heightMoreThan:i,heightLessThan:o},s=[],u=[]}function tt(){function e(e,t,n){return t==e.WindowSizeInput?!1:t>e.WindowSizeInput===n}var t=this,n=Us.get("win");t.getFuncList=function(){return o},t.getFuncAssert=function(){return a},t.getAsyncFuncs=function(){return s};var r=function(t){switch(t.SizeParameter){case"Width":return e(t,n.innerWidth,!0);case"Height":return e(t,n.innerHeight,!0)}},i=function(t){switch(t.SizeParameter){case"Width":return e(t,n.innerWidth,!1);case"Height":return e(t,n.innerHeight,!1)}},o={WindowSizeMoreThan:r,WindowSizeLessThan:i},a=[],s=[]}function nt(){function e(e,t,n){for(var r=Array(),i=n,o=e.indexOf(t);o>-1;){if("("!=e.charAt(o+t.length))throw"Ilegal function definition in expression";for(var a=o+t.length+1,s=Array(),u=a;(")"!=e.charAt(u)||0!=s.length)&&u<e.length;){if("'"==e.charAt(u)||'"'==e.charAt(u))if(0==s.length)s.push(e.charAt(u));else{var l=s.pop();l!=e.charAt(u)&&(s.push(l),s.push(e.charAt(u)))}u++}if(")"!=e.charAt(u))throw"Ilegal function definition in expression";r[i]=e.substring(o,u+1),e=e.substring(0,o)+"["+i+"]"+e.substr(u+1),i++,o=e.indexOf(t)}return[r,e]}function t(e){if(void 0==e||e.length<=0)throw"Ilegal function definition";for(var t=e.substr(0,e.indexOf("(")),n=e.substring(e.indexOf("(")+1,e.length-1).split(","),r=0;r<n.length;r++)n[r]=n[r].replace(/^\s+|\s+$/g,""),("'"==n[r].charAt(0)&&"'"==n[r].charAt(n[r].length-1)||'"'==n[r].charAt(0)&&'"'==n[r].charAt(n[r].length-1))&&(n[r]=n[r].substring(1,n[r].length-1));return function(){return a.supportedFunctions[t].apply(this,n)}}function n(e,t){return void 0==t&&(t=1),mtjQuery(e).length>=t}function r(e,t){return mtjQuery(e).text()==t}function i(e){return Xf(e)}function o(e){e=parseInt(e);for(var t=0;t<xf.length;t++){var n=qf(xf[t]);if(n&&n.StepIndex==e)return!0}return!1}this.LocalSVNRevision="$Rev$";var a=this;this.supportedFunctions={isExistJQ:n,isTextValueJQ:r,isLocationMatch:i,isStepPlayed:o};var s=new rl;this.setExpression=function(n){if(void 0==n||n.length<=0)throw"Ilegal Expression";var r=0;for(var i in this.supportedFunctions)if(this.supportedFunctions.hasOwnProperty(i)){var o=e(n,i,r);n=o[1];for(var a=r;a<o[0].length;a++){var u=t(o[0][a]);s.setFunction(u,r++)}}s.setExpression(n)},this.evaluate=function(){if(void 0!=s)return s.evaluate();throw"Evaluator is undefined"}}function rt(){function e(){return Us.get("TimerManager")}function t(e,t,r,i,o,a){q=Us.get("StorageResourceManager"),Z=t,K=new it,ie=Us.get("CookiesStorageManager"),ne=new L,X=[],H=n(r,i),$=e.isLocalStorageEnabled(),z=a,Za("Storage mode: "+H+", ["+(i?"from db/feature":"auto detected")+"], compressed: "+o,3),J._origin=q.getOrigin(),J._path=q.getHiddenIframePath(o),J._saveCookiePath=q.getSaveCookiePath()}function n(e,t){return e&&"Safari"==ql.browser.name?gu.Cookies:t?t:e&&ql.isIEBrowser(10,"gte")?gu.IndexedDB:gu.LocalStorage}function r(e){for(var t=0;t<ue.length;t++)ue[t].push(e)}function i(e,t){S(e,t),K.removeData(e,t),r(e)}function o(e,t){ne.removeData(e,t)}function a(e,t){var n=J.getData(e,t)||{};return n&&"string"==typeof n&&(n=l(n)||{}),n}function s(e,t,n,r){var i={requestType:"add",userGuid:r,key:e,keyValues:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}};C(i)}function c(e,t,n,r){var i={requestType:"remove",userGuid:r,key:e,keysToRemove:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}};C(i)}function d(e,t){C(f(e,t))}function f(e,t){var n=p();return e.actionId=n,le[n]=t,e}function p(){return ce+=1,ce>1e3&&(ce=1),ce}function g(e){if(e&&le[e.actionId]){var t=le[e.actionId];delete le[e.actionId],t(e.value)}}function h(e){z?Y=Us.create("HiddenIframeProxy",[J._iframe.contentWindow,G,e]):(Y=J._iframe.contentWindow,e())}function m(){return window.postMessage&&$}function v(){var e=document.getElementById(oe);return e}function y(e,t){var n=document.createElement("iframe");n.id=oe,n.className="walkme-to-remove",n.style.cssText="display:none;";var r=Is(null,!0)[0];return r.appendChild(n),window.addEventListener?(n.addEventListener("load",t,!1),window.addEventListener("message",function(e){G(e)},!1)):n.attachEvent&&(n.attachEvent("onload",t,!1),window.attachEvent("onmessage",function(e){G(e)})),n.src=J._path,n}function w(e,t,n,r){return{requestType:"set",userGuid:r,key:e,saveObj:{value:t,saveTime:(new Date).getTime(),expireSeconds:n}}}function b(e,t,n,r){var i=w(e,t,n,r);C(i)}function S(e,t){C({requestType:"delete",userGuid:t,key:e})}function T(e){var t=ue.shift();if(e)for(var n in e){var r=e[n];if(r&&r.length&&r.length>0&&void 0!=r[0].saveObj)for(var i=0;i<r.length;i++){var o=r[i].key;if(-1==wmjQuery.inArray(o,t)){var a=r[i].saveObj,s=I(a);s>0?K.saveData(o,a.value,s/1e3,n):J.removeData(o,n)}}}}function I(e){var t=(new Date).getTime(),n=e.saveTime+1e3*e.expireSeconds-t;return n}function C(e){J._iframeReady&&J.isInitialized()&&te!==!1&&E(e)}function E(e){Y.postMessage(u(e),"*")}function k(e){ue.push([]);var t={requestType:"getAllMultiple",usersToLoad:e};C(t)}function _(){var e={requestType:"checkCanSave",saveMode:H,userGuids:Z};C(e)}function x(){mtjQuery.browser.msie&&window.opener?(A(),e().libSetTimeout(D,3e3)):D()}function A(){J._iframeReady||(P(),e().libSetTimeout(A,100))}function P(){E({requestType:"get",key:ae,userGuids:Z,saveMode:H})}function D(){J._iframeReady||(J._iframeReady=!0,N(),_())}function N(){j(),ee=e().libSetTimeout(O,se)}function O(){Za("storage failed loading, removing walkme",3),j(),te=!1,E({requestType:"terminate"}),_makeTutorial.removeWalkMe("storageFailedLoading")}function M(){window.open(J._saveCookiePath,"_blank"),fe=!0,window.focus(),mtjQuery(document).unbind("click.wmpopup"),R()}function R(t){t=t||0,t>10?O():te!==!0&&(t++,_(),e().libSetTimeout(function(){R(t)},200))}function j(){ee&&(ee.clear(),ee=null)}function F(t){j(),t.canSave||fe?t.canSave&&(clearTimeout(de),U(),N(),k(Z)):"cookies"==H?(void 0===de&&B(),de=e().libSetTimeout(_,500)):O()}function B(){var e=parseInt(ie.getData(pe)||0);3>e?(e++,ie.saveData(pe,e.toString(),ge),mtjQuery(document).bind("click.wmpopup",M)):O()}function U(){mtjQuery(document).unbind("click.wmpopup")}function G(e){if(J._origin.toLowerCase().indexOf(e.origin)>-1){var t=l(e.data);if("checkCanSave"==t.key)F(t);else if("getAllMultiple"==t.key){if(te=!0,j(),T(t.allValues),ie.removeData(pe),ie.removeData(_l),re){var n=re;re=null,n()}Q()}else void 0!==t.actionId?g(t):"get"==t.key&&(I(t.saveObj)>0?V(t.dataKey,t.saveObj.value):J.removeData(t.dataKey,userGuid))}}function V(e,t){e==ae&&t&&D()}function W(e){e&&X.push(e)}function Q(){if(X.length>0){var e=X.shift();e&&e()}}this.LocalSVNRevision="$Rev$";var H,$,z,Y,q,K=null,X=null,J=this;J._iframe=null,J._iframeReady=!1;var Z,ee,te,ne,re=function(){},ie=null,oe="walkme-hidden-iframe",ae="wm-sync",se=15e3,ue=[];J.refreshGetData=function(e,t){W(t),te===!0?k(e):Q()},J.saveData=function(e,t,n,a){n>0?(o(e,a),b(e,t,n,a),K.saveData(e,t,n,a),r(e)):(i(e,a),ne.saveData(e,t,n))},J.getData=function(e,t){var n=K.getData(e,t);return void 0===n&&(n=ne.getData(e,t)),n},J.removeData=function(e,t){i(e,t),o(e,t)},J.increment=function(e,t,n,r,i){d({requestType:"increment",userGuid:r,key:e,ttl:n,lastValue:t},i)},J.setSyncFlag=function(e){var t=w(ae,1,10,e);E(t)},J.addToDictionary=function(e,t,n,r,i){var o=a(e,i);if(o[t]=n,o=u(o),r>0){var l={};l[t]=n,s(e,l,r,i),K.saveData(e,o,r,i)}else ne.saveData(e,o,r)},J.removeFromDictionary=function(e,t,n,r){var i=a(e,r);if(delete i[t],i=u(i),n>0){var o=[t];c(e,o,n,r),K.saveData(e,i,n,r)}else ne.saveData(e,i,n)},J.getInternalKeys=function(e,t){var n=ne.getInternalKeys(e,t),r=K.getInternalKeys(e,t);return wmjQuery.extend(n,r)},this.sessionSetData=function(e,t,n){var r={requestType:"setSession",userGuid:n,key:e,value:t};C(r)};var le={};this.sessionGetData=function(e,t,n,r){d({requestType:"getSession",userGuid:n,key:e,defaultValue:t},r)};var ce=0;this.init=function(e){return J._iframeReady=!1,re=e,m()?(J._iframe=v(Z),void(J._iframe?h(x):J._iframe=y(Z,function(){h(x)}))):(Za("Cannot run cross-domain Walk-Thrus on this browser. Removing WalkMe."),!1)},this.removeAllData=function(e){var t=K.getStorageInternal(),n=t[e];if(n)for(var r in n)J.removeData(r,e)};var de,fe=!1,pe="wm-popup",ge=31536e4;J.isInitialized=function(){return J._iframe&&J._iframe.contentWindow},t.apply(null,arguments)}function it(){function e(){r={}}function t(e){return void 0===r[e]&&(r[e]={}),r[e]}this.LocalSVNRevision="$Rev$";var n=this,r=null;this.saveData=function(e,n,r,i){var o={};o.value=n,o.saveTime=(new Date).getTime(),o.expiresSeconds=r;var a=t(i);a[e]=o},this.getData=function(e,r){var i=t(r),o=i[e];if(o){var a=(new Date).getTime(),s=o.saveTime+1e3*o.expiresSeconds-a;if(0==o.expiresSeconds||s>0)return o.value;n.removeData(e,r)}return void 0},this.removeData=function(e,n){var r=t(n);delete r[e]},this.clear=function(e){r[e]={}},this.getStorageInternal=function(){return r},this.getInternalKeys=function(e,r){var i={},o=t(e);return wmjQuery.safeEach(o,function(t,o){0===wmjQuery.trim(t).toLowerCase().indexOf(r)&&(i[t]=n.getData(t,e))}),i},e.apply(null,arguments)}function ot(){function e(e,t,n,r,u){i=e,s.dataManager=t,c=n,o=r,a=u}function t(){return s.dataManager.isInitialized?s.dataManager.isInitialized():d}function n(e){return a.defaultValue(e,c)}function r(e){wmjQuery.safeEach(e,function(t,n){void 0!==n&&""!==n&&(n=l(n)),e[t]=n})}this.LocalSVNRevision="$Rev$",this.ONE_HOUR_SECONDS=3600;var i,o,a,s=this,c=null,d=!1;this.getStorageType=function(){return i},this.init=function(e){return e=e||function(){},t()?void e():(d=!0,s.dataManager.init?s.dataManager.init(e):void e())},this.refreshGetData=function(e,t){e=e&&e.length>0?e:[n()],s.dataManager.refreshGetData?s.dataManager.refreshGetData(e,t):t&&t()},this.saveData=function(e,t,r,i){if(e=mtjQuery.trim(e),i=n(i),void 0===t)return void s.removeData(e,i);if(void 0==r){var a="storageManager: trying to save key in storage manager without expiration, key: "+e+", value: "+t+", userGUID: "+i;o.customerLog(a,3)}s.dataManager.saveData(e,u(t),r,i)},this.getData=function(e,t,r){e=mtjQuery.trim(e),r=n(r);var i=s.dataManager.getData(e,r);return void 0===i||""===i?t:l(i)},this.addToDictionary=function(e,t,r,i,o){if(e=mtjQuery.trim(e),o=n(o),s.dataManager.addToDictionary)s.dataManager.addToDictionary(e,t,r,i,o);else{var a=s.getData(e,o);(null===a||"object"!=typeof a)&&(a={}),a[t]=r,s.saveData(e,a,i,o)}},this.removeFromDictionary=function(e,t,r,i){if(e=mtjQuery.trim(e),i=n(i),s.dataManager.removeFromDictionary)s.dataManager.removeFromDictionary(e,t,r,i);else{var o=s.getData(e,i);o&&void 0!==o[t]&&(delete o[t],s.saveData(e,o,r,i))}},this.removeData=function(e,t){e=mtjQuery.trim(e),t=n(t),s.dataManager.removeData(e,t)},this.addToQueue=function(e,t,r,i,o){e=mtjQuery.trim(e),o=n(o);var a=s.getData(e,[],o);a||(a=[]),a.push(t),a.splice(0,a.length-r),s.saveData(e,a,i,o)},s.convertOldCookieStorage=function(e){var t=Us.get("CookiesManager"),n=t.getCookie(e),r='"#!@DeL@!#"';if(n&&n!=r&&0!==n.indexOf('"')){s.saveData(e,n,Su);var i=Vl.getStorageType();i&&i!=STORAGE_TYPE.Cookie&&t.setCookie(e,r,-1)}},s.increment=function(e,t,r,i,o){if(e=mtjQuery.trim(e),i=n(i),s.dataManager.increment)s.dataManager.increment(e,t,r,i,o);else{var a=s.getData(e,0,i);t!==a&&(a++,s.saveData(e,a,r,i)),o&&o(a)}},s.getInternalKeys=function(e,t){t&&""!==t||(t="wm-");var i=s.dataManager.getInternalKeys(n(e),t);return r(i),i},this.removeAllData=function(e){s.dataManager.removeAllData(n(e))},s.sessionSetData=function(e,t,n){e=mtjQuery.trim(e),s.dataManager.sessionSetData?s.dataManager.sessionSetData(e,t,n):window.sessionStorage[n+e]=t},s.sessionGetData=function(e,t,n,r){e=mtjQuery.trim(e),s.dataManager.sessionGetData?s.dataManager.sessionGetData(e,t,n,r):r&&r(window.sessionStorage[n+e]||t)},s.setSyncFlag=function(e){s.dataManager.setSyncFlag&&s.dataManager.setSyncFlag(e)},s.isEnabled=function(){return s.dataManager.isEnabled()},e.apply(null,arguments)}function at(){function e(e,t){n=t,r=e}var t=this;t.LocalSVNRevision="$Rev$";var n,r;t.saveToStorage=function(e,t,i){r.saveData(e+n,t,i)},t.getFromStorage=function(e,t){return r.getData(e+n,t)},t.removeFromStorage=function(e){return r.removeData(e+n)},t.refreshGetData=function(e,t){return r.refreshGetData(e,t)},e.apply(null,arguments)}function st(e,t,n,r){function i(){l=e,c=t,d=n,f=r}function o(e,t,n){m[e]||(m[e]={success:[],fail:[]}),t&&m[e].success.push(t),n&&m[e].fail.push(n)}function a(e,t){for(var n=t?m[e].success:m[e].fail,r=[].splice.call(arguments,2,arguments.length-2),i=0;i<n.length;i++)try{h.apply(this,[n[i]].concat(r))}catch(o){}m[e]=void 0}function s(e){return!!m[e]}this.LocalSVNRevision="$Rev$";var u,l,c,d,f,p=this,g=Us.get("TimerManager"),h=function(e){if(e){var t=arguments;g.libSetTimeout(function(){e.apply(this,Array.prototype.slice.call(t,1))},0)}},m={};this.loadServerData=function(e,t,n,r,i,u){var l=s(n);o(n,r,i),l||Od.execute({url:e,data:t,traditional:u,success:function(e,t,r){e.ErrorMessage?a(n,!1,e.ErrorMessage):(p.updateLocalData(n,e),a(n,!0,e))},error:function(e,t,r){a(n,!1,t)}})},this.retrieveData=function(e,t,n,r,i,o){if(void 0!==u)return void(r&&r(u));var a=l.getData(n,null);if(a){var t=f?f(a):a;r&&r(t)}else p.loadServerData(e,t,n,r,i,o)},this.retrieveLocalData=function(e){if(void 0!==u)return u;var t=l.getData(e,null);return f&&t?f(t):t},this.updateLocalData=function(e,t){u=t;var n=d&&t?d(t):t;l.saveData(e,n,c)},this.updateRemoteData=function(e,t,n,r){Od.execute({url:e,data:t,success:function(e,t,i){e.ErrorMessage?h(r,e.ErrorMessage):h(n)},error:function(e,t,n){h(r,t)}})},i.apply(null,arguments)}function ut(e,t,n,r,i,o,a,s){function l(){m=e,v=new st(t,C,d,f),y=r,S=n}function c(e,t){return{userGuid:i.getUserGuid(),endUserId:e,taskGoalsIds:u(t),source:i.getEnvironmentId()}}function d(e){var t=[];return mtjQuery.each(e,function(e,n){if(n.TaskId){var r=mtjQuery.extend(!0,{},n);p(r,"TaskId","t"),p(r,"IsCompleted","c"),p(r,"CompletedGoals","g"),t.push(r)}}),t}function f(e){var t={};return mtjQuery.each(e,function(e,n){if(n.t){var r=mtjQuery.extend(!0,{},n);p(r,"t","TaskId"),p(r,"c","IsCompleted"),p(r,"g","CompletedGoals"),t[r.TaskId]=r}}),t}function p(e,t,n){e.hasOwnProperty(t)&&(e[n]=e[t],delete e[t])}function g(e,t){var n=0;for(var r in e){var i=e[r];e.hasOwnProperty(r)&&i.IsCompleted&&t[i.TaskId]&&n++}return n}function h(e,t){if(e&&0!==e.length)for(var n=e.length-1;n>=0;n--)e[n].taskId==t.taskId&&e[n].goalId==t.goalId&&e[n].permutationId==t.permutationId&&e[n].source==t.source&&e[n].endUserGuid==t.endUserGuid&&e.splice(n,1)}this.LocalSVNRevision="$Rev$";var m,v,y,b,S,T=this,I=1948,C=3600,E="/ToDoList/UserCompletedTasksByIdsAndGoalsIds",k="/ToDoList/UpdateUserTasksCompleted";T.init=function(){b=S.register("tg",{beforeSendingManipulationFunc:h,actionUrl:k,prefixForStorage:"tg",sendingThreshold:1,dataType:"task goal",dataIdFieldName:"Id",requestParamsFunc:function(e){return{userCompletedTasksSerialized:u(e),userGuid:i.getUserGuid()}}})},T.getEndUserUniqueDataKey=function(e){return o?"wm-ct-prv-"+i.getUserGuid()+"-"+e:"wm_ct_"+i.getUserGuid()+"_"+e},this.asyncRetrieveCompletedTasks=function(e,t,n,r){var i=c(e,t);wmjQuery.param(i).length>I&&(i.taskGoalsIds=null),v.retrieveData(m+E,i,T.getEndUserUniqueDataKey(e),n,r,!0)},this.syncRetrieveCompletedTasks=function(e,t){var n=v.retrieveLocalData(T.getEndUserUniqueDataKey(e));return n?n:(v.loadServerData(m+E,c(e,t),T.getEndUserUniqueDataKey(e),null,null,!0),null)},this.updateTaskCompleted=function(e,t,n,r,o,u){var l=T.getEndUserUniqueDataKey(e);v.updateLocalData(l,r);var c=w(o).length;if(u){var d={endUserId:e,taskId:t?t.Id:-1,goalId:n?n.Id:-1,tasksCount:c,permutationId:i.getPermutationId(),endUserGuid:i.getEndUserGuid(),source:i.getEnvironmentId()};b.sendData(d);try{if(a.isReportingEnabled()&&t&&t!=={}){var f=s.getDeployablesManager(t.RelatedDeployableType),p=f.getById(t.RelatedDeployableId),h=g(r,o),m=h/c,S=Number(m.toFixed(2)),I=f.name();a.postEvent(a.EVENT_TYPES.Complete,{type:a.EVENT_APPS.Task,oId:t.Id,oName:t.Name,pId:"-1",total:o?c:-1,owId:p.Id,owName:p.Name,owType:a.ACTION_ENTITY_TYPES[I]||I,ratio:S})}}catch(C){y(C)}}},this.tempClearUserCompletedTasks=function(e){v.updateLocalData(T.getEndUserUniqueDataKey(e),{})},this.clearTaskAndGoalCompletionLocally=function(e,t,n){var r=T.getEndUserUniqueDataKey(e),i=v.retrieveLocalData(r);wmjQuery.each(i,function(e,r){r.TaskId==t&&(r.IsCompleted=0);for(var i=r.CompletedGoals.length-1;i>=0;i--){var o=r.CompletedGoals[i];o==n&&r.CompletedGoals.splice(i,1)}}),v.updateLocalData(r,i)},l.apply(null,arguments)}function lt(){function e(e){o=e.serverAddress,s=e.lib.getUserGuid(),u=e.lib.Logger.error,l=e.getPermutationId,c=e.getEndUserGuid,d=e.getAuditSource,f=o+"/AbTesting/UserCompletedGoals",a=new st(e.storageManager,p)}function t(e){return"wm_abg_"+s+"_"+e}function n(e,t){return{userGuid:s,endUserId:e,source:d(),permutationId:l(),goalsToCheck:t}}function r(e){var t={};return t[g]=l(),t[h]=e,t}function i(e){var n=a.retrieveLocalData(t(e));return n&&l()==n[g]?n:null}this.LocalSVNRevision="$Rev$";var o,a,s,u,l,c,d,f,p=86400,g="p",h="g";this.asyncRetrieveCompletedGoals=function(e,i,o,s){var u=function(n){var i=t(e),s=r(n);a.updateLocalData(i,s),o&&o(n)},l=n(e,i);a.loadServerData(f,l,t(e),u,s,!0)},this.syncRetrieveCompletedGoals=function(e){var t=i(e);return t?t[h]:null},this.updateGoalCompleted=function(e,n){var o=t(e),s=i(e)||r([]);s[h].push(n),a.updateLocalData(o,s)},this.tempClearUserCompletedGoals=function(e){a.updateLocalData(t(e),{})},e.apply(null,arguments)}function ct(){function e(e){i=e.goalsManager,o=e.todoListManager,n=_makeTutorial.Logger.wrapCustomerLog(Xs),r=Us.get("GoalsCompletedPetaSender")}function t(e){return e.GoalsNotCompleted?e.GoalsNotCompleted:[]}this.LocalSVNRevision="$Rev$";var n,r,i=null,o=null,a=this,s=function(e){r.audit(e),o.updateGoalCompleted(e)};this.startWatchingTasks=function(){var e=o.getTasksGoalsNotCompleted();mtjQuery.each(e,function(e,t){t.TaskId&&a.startWatchingTask(t)})},this.startWatchingTask=function(e){var r=t(e);if(r.length>0){var o={goalCompletedFunc:s};i.addGoalsWatch(r,o)}n("Started watching Task : "+e.Name,2)},e.apply(null,arguments)}function dt(e,t,n){function r(){h=e.wrapCustomerLog(qs)}function i(e,t){return void 0===t&&(t=[]),mtjQuery("frame",e).each(function(){try{mtjQuery("frame, frameset",this.contentWindow.document).length>0&&(t=i(this.contentWindow.document,t)),t.push(this)}catch(e){h("Frame is cross-domain, we can't access it",v)}}),t}function o(){for(var e=0;e<b.length;e++){var t=b[e];I.isFrameActive(t)||null!=t&&null!=t.contentWindow&&a(t)}}function a(e){c(e)||(w.push(e),t.isIE(9,"lte")?e.addEventListener?e.addEventListener("load",s,!1):e.attachEvent("onload",s):mtjQuery(e).bind("load.walkme",function(){l(e)}))}function s(e){l(e.currentTarget)}function u(e){t.isIE(9,"lte")?e.removeEventListener?e.removeEventListener("load",s,!1):e.detachEvent("onload",s):mtjQuery(e).unbind("load.walkme")}function l(e){u(e),d(e)}function c(e){for(var t=0;t<w.length;t++)if(w[t]==e)return!0;return!1}function d(e){for(var t=0;t<w.length;t++)w[t]==e&&w.splice(t,1)}function f(){null!=y&&(y.clear(),y=null)}function p(){for(var e=0;e<w.length;e++)mtjQuery(w[e]).unbind("load.walkme");w=[]}function g(e){var t=0;return t=void 0!==e.height&&void 0!==e.width?e.height*e.width:mtjQuery(e).height()*mtjQuery(e).width()}this.LocalSVNRevision="$Rev$";var h,m=7e3,v=5,y=null,w=[],b=void 0,S=null,T=void 0,I=this;this.isFramesetsPage=function(){return void 0===T&&(T=wmjQuery("frameset").length>0),T},this.checkIfAnyFrameIsUnloaded=function(e){n.libSetTimeout(f,e),b=i(),w=[],y=n.playSetInterval(o,5),null!=S&&S.clear(),S=n.libSetTimeout(p,m)},this.isLoadingFrames=function(){return w.length>0},this.isFrameActive=function(e){return null==e?(h("Frame is not active (Frame is null)",v),!1):null==e.contentWindow?(h("Frame is not active (frame.contentWindow is null)",v),!1):null==e.contentWindow.document?(h("Frame is not active (frame.contentWindow.document is null)",v),!1):0==mtjQuery("head",e.contentWindow.document).length?(h('Frame is not active (mtjQuery("head", frame.contentWindow.document).length == 0)',v),!1):0==mtjQuery("body",e.contentWindow.document).length&&0==mtjQuery("frameset",e.contentWindow.document).length?(h('Frame is not active (mtjQuery("body", frame.contentWindow.document).length == 0)',v),!1):!0},this.getAllFramesDocuments=function(){for(var e=[],t=i(),n=0;n<t.length;n++)e.push(t[n].contentWindow.document);return e},I.waitForFramesHeadsAndBodies=function(e){function t(){var i=I.findBiggestFrame(),o=I.isFrameActive(i);return o?(h("Biggest frame is active. waitCount: "+r,5,"FramesetsUtils"),void e()):r>n?void h("Failed waiting for head and body in biggest frame. Stopping execution"+r,1,"FramesetsUtils"):void setTimeout(function(){r++,h("Biggest frame wasn't ready on attempt "+r,5,"FramesetsUtils"),t()},200)}if(!I.isFramesetsPage())return void e();var n=40,r=0;t()},this.findBiggestFrame=function(e,t){e=e?e:document;var n=t?g(t):-1;return mtjQuery("frame",e).each(function(){try{if(mtjQuery("frame, frameset",this.contentWindow.document).length>0){var e=this.contentWindow.document;e&&(t=I.findBiggestFrame(e,t),n=t?g(t):-1)}else{var r=g(this);r>n&&(n=r,t=this)}}catch(i){}}),t},r.apply(null,arguments)}function ft(e,t,n,r,i,o,a){function s(){}function u(e,t,n,r,i){function o(e){var n,r=t.Settings.complexHtml;return n="option"==e.target.tagName.toLowerCase()?e.target:e.target.options[e.target.selectedIndex],
n.value==r.val||n.text==r.txt}var a=void 0;i&&(a=o);var s=["change"],u={change:a};r.push(c(e,t,s,n,y,u))}function l(e){if(null!=e){var t=Gf(e);return r.isActionStep(t)}return!1}function c(e,t,n,r,o,a){function s(e){var t=function(t){(!e||e(t))&&l(t)};return t}qd=Dl.WAITING_FOR_ELEMENT_EVENT;for(var u=function(e,t){i.customerLog("Step event triggered.");var a=-1!==wmjQuery.inArray("click",n);return p(r,o,a,e,t),!0},l=d(u),c=0;c<n.length;c++){var g=a&&a[n[c]],h=s(g);f(e,n[c]+".mt",h)}return function(e){return l(null,e)}}function d(e){function t(t,r){var i;return n||(i=e(t,r),n=!0),i}var n=!1;return t}function f(e,t,n){e.on(t,n),w.push({element:e,eventName:t})}function p(r,i,o,a,s){n.releaseBalloons(),o&&(n.shouldHandlePageAsFramesets()&&t.checkIfAnyFrameIsUnloaded(i),null!=a&&(tf=g(mtjQuery(a.target)))),qd=Dl.RUNNING,ua(),Ca(void 0==s),void 0!=s&&(Yd=s),r&&void 0==s?n.tutorialFinished():e.playSetTimeout(function(){n.executeTutorialNextStep()},i)}function g(e){if(ql.isIE()){var t=!1;if("a"==e[0].nodeName.toLowerCase())t=e;else{var n=e.parents("a");n.length>0&&(t=mtjQuery(n[0]))}if(t&&t.attr("href")&&0==t.attr("href").indexOf("javascript:"))return!0}return!1}function h(e){return"Func"==e.nodeType?"ElementClicked"==e.funcName:"And"==e.nodeType||"Or"==e.nodeType?h(e.leftSon)||h(e.rightSon):!1}function m(e,t,n,r){qd=Dl.WAITING_FOR_ELEMENT_EVENT,Qo(e,t);for(var i=function(r){Za("Clicked the branched walk-thru."),Qo(e,t),Wo(n)},o=d(i),a=d(function(){Qo(e,t)}),s=0;s<t.length;s++)f(e,t[s]+".mt",o);return function(){return a()}}var v=this,y=1e3,w=[];v.handle=function(t,r,s,d,f){var g=Gf(s),v=!1,w=g.LinkedTutorialIds?!0:!1,b=[];if(w){var S=g.LinkedTutorialIds.split(";"),T=Mo(S);T?(i.customerLog("This is a branched step. Branched walk-thru's: "+g.LinkedTutorialIds),b.push(m(t,["click","mousedown"],S,y))):(i.customerLog("Branch walk-thru id, not found: "+g.LinkedTutorialIds),w=!1)}var I=!1,C=!1,E=-1,k=To(),_=null==k;vo(g.End,hu.NEXT_BUTTON)&&(qd=Dl.WAITING_FOR_NEXT_BUTTON_CLICK,_?C=!0:(k.IsSkippable||Ss(k.Settings,"skipNotExists",!1)||Ro(k)!=jl.STICKY_CONDITION&&!jo(k)||Ss(k.Settings,"fake",!1))&&-2==Zi(k.TutorialIndex,k.StepIndex,void 0,void 0,void 0,yu.Normal)?C=!0:I=!0);var x;if(vo(g.End,hu.NOTHING)?_||(v=!0):vo(g.End,hu.HOVER)?(x=["mouseenter"],b.push(c(t,r,x,_,500))):vo(g.End,hu.CLICK)&&!w?(x=["click","mousedown","mouseup"],o.isFeatureEnabled("ipad_touch_as_click")&&x.push("touchstart"),o.isFeatureEnabled("noFocusTrigger")||x.push("focus"),b.push(c(t,r,x,_,y))):vo(g.End,hu.KEY_PRESSED)?(x=["keydown","paste","change"],b.push(c(t,r,x,_,2e3))):vo(g.End,hu.PAGE_CHANGED)?(qd=Dl.WAITING_FOR_PAGE_CHANGE,ef=!0):vo(g.End,hu.DURATION)?g.durationHandler=e.playSetTimeout(function(){Ca(),n.executeTutorialNextStep()},1e3*g.Duration):vo(g.End,hu.SELECT_ANY)?u(t,r,_,b,!1):vo(g.End,hu.SELECT_VALUE)&&u(t,r,_,b,!0),g.Settings.additionalTriggers){Qd("StepAdditionalTriggerCBSet",g);var A={elementName:r.StepTitle||r.StepText,jqueryPollingIntervalMs:500,elementPollingIntervalMs:500,stickySonar:!0,trackEvent:"Step - Additional Trigger",trackData:a.getStepTrackData(r)},P=Us.create("ConditionChecker",A);P.onValueChanged(function(e){if(Qd("StepAdditionalTriggered",g),e){ef=!1,g.durationHandler&&(g.durationHandler.clear(),g.durationHandler=null);var t=h(g.Settings.additionalTriggers);p(_,y,t)}}),P.evaluateAsync(g.Settings.additionalTriggers),Lf.push(P)}if(s>0&&vo(g.End,hu.NEXT_BUTTON)&&!l(f)){if(E=Zi(d,s-1,0,-1,void 0,yu.Normal),E>=0){var D=Gf(E);vo(D.End,hu.NEXT_BUTTON)||(E=-1)}Df=E}return{executeNextStep:v,clearElementEventsFuncs:b,buttons:{nextButton:I,doneButton:C,backButtonStepIndex:E}}},v.releaseAllEventBindings=function(){for(var e=0;e<w.length;e++)try{w[e].element.off(w[e].eventName)}catch(t){}w.length=0},s.apply(null,arguments)}function pt(){this.LocalSVNRevision="$Rev$";var e,t=this;qr=function(n,r){t._question=n,t._questionDiv=mtjQuery("<div></div>"),e=r},t.getQuestionDivFromWindow=function(){var n=mtjQuery("#walkme-survey-balloon-"+e.Id+" .walkme-survey"),r=mtjQuery("#"+t._questionDiv.attr("id"),n);return r},t.setTitle=function(e){var n=mtjQuery("<div></div>");n.addClass("walkme-survey-question-title"),n.css("font-weight","bold"),n.css("font-size","16px"),n.css("margin-bottom","6px"),n.html(e),t._questionDiv.append(n)},t.setSubTitle=function(e){var n=mtjQuery("<div></div>");n.addClass("walkme-survey-question-sub-title"),n.css("margin-bottom","8px"),n.html(e),t._questionDiv.append(n)},t.Generate=function(){return t._questionDiv=mtjQuery("<div></div>"),t._questionDiv.attr("Id","walkme-survey-question-"+t._question.Id),t._questionDiv.addClass("walkme-survey-question"),t.setTitle(t._question.Title),t.setSubTitle(t._question.SubTitle),t._questionDiv},qr.apply(null,arguments)}function gt(){function e(e,n){bt.extend(t,pt,e,n)}this.LocalSVNRevision="$Rev$";var t=this,n=500;t.Generate=function(){t._questionDiv=t._base.Generate();var e=mtjQuery("<div></div>");e.addClass("walkme-survey-question-freetext-answers"),e.attr("id","walkme-survey-question-freetext-answers-"+t._base._question.Id);var r=mtjQuery('<textarea rows="4" cols="20" maxlength="'+n+'"></textarea>');return r.css("resize","none"),r.attr("id","walkme-survey-question-freetext-"+t._base._question.Id),r.addClass("walkme-survey-answer-textarea"),r.css("width","100%"),r.css("max-width","97%"),r.css("border","1px solid #b9b9b9"),e.append(r),t._questionDiv.append(e),t._questionDiv},t.getAnswers=function(){var e={},n=t._base.getQuestionDivFromWindow(),r=mtjQuery(".walkme-survey-answer-textarea",n).val();return""!=r?(e.questionId=t._base._question.Id,e.answerText=r,[e]):[]},t.getType=function(){return mu.FreeText},e.apply(null,arguments)}function ht(){function e(e,n){bt.extend(t,pt,e,n)}this.LocalSVNRevision="$Rev$";var t=this;t.Generate=function(){t._questionDiv=t._base.Generate();var e=mtjQuery("<div></div>");e.addClass("walkme-survey-question-checkbox-answers"),e.attr("id","walkme-survey-question-checkbox-answers-"+t._base._question.Id);for(var n=t._base._question.Answers,r=0;r<n.length;r++){var i=mtjQuery("<div></div>");i.addClass("walkme-survey-question-checkbox-answer"),"rtl"==Pc.get().Direction?i.css("margin","0 0 5px 8px"):i.css("margin","0 8px 5px 0"),i.attr("id","walkme-survey-answer-"+n[r].Id);var o=mtjQuery("<label><label/>");o.attr("for","walkme-survey-answer-checkbox-"+n[r].Id),o.addClass("walkme-survey-answer-text"),o.css("*display","inline"),o.css("display","inline-block"),o.css("zoom","1"),o.css("max-width","91%"),ql.isIE("8")?o.css("vertical-align","top"):o.css("vertical-align","text-top"),o.html(n[r].Title);var a=mtjQuery('<input type="checkbox"/>');a.addClass("walkme-survey-answer-checkbox"),a.css("vertical-align","-3px"),"rtl"==Pc.get().Direction?ql.isIE("7")?(a.css("margin","0px -3px 0px -1px"),a.css("vertical-align","-4px")):ql.isIE("8")?a.css("margin","-1px -3px 0px 3px"):ql.isIE("9")?a.css("margin","0 -4px 0px 2px"):ql.isIE("11")?(a.css("vertical-align","-2px"),a.css("margin","0 0 0 3px")):"Safari"==ql.browser.name?(a.css("margin","0px 1px 0px 5px"),a.css("vertical-align","1px")):a.css("margin","0 0 0 3px"):ql.isIE("7")?(a.css("margin","0px -1px 0px -3px"),a.css("vertical-align","-4px")):ql.isIE("8")?a.css("margin","-1px 3px 0px -3px"):ql.isIE("11")?(a.css("vertical-align","-2px"),a.css("margin","0 3px 0 0")):"Safari"==ql.browser.name?(a.css("margin","0px 5px 0px 1px"),a.css("vertical-align","1px")):a.css("margin","0 3px 0 0"),a.attr("value",n[r].Id),a.attr("id","walkme-survey-answer-checkbox-"+n[r].Id);var s=mtjQuery("<label />");s.addClass("walkme-survey-answer-label-checkbox"),s.addClass("walkme-survey-answer-label-unchecked"),s.attr("for","walkme-survey-answer-checkbox-"+n[r].Id),i.append(s),i.append(a),i.append(o),e.append(i)}return t._questionDiv.append(e),t._questionDiv},t.getAnswers=function(){for(var e=t._base.getQuestionDivFromWindow(),n=mtjQuery("input:checkbox:checked",e),r=[],i=0;i<n.length;i++){var o={};o.answerId=n[i].value,o.questionId=t._base._question.Id,r.push(o)}return r},t.getType=function(){return mu.CheckBox},e.apply(null,arguments)}function mt(){function e(e,n){bt.extend(t,pt,e,n)}this.LocalSVNRevision="$Rev$";var t=this;t.Generate=function(){t._questionDiv=t._base.Generate();var e=mtjQuery("<div></div>");e.attr("id","walkme-survey-question-radiobutton-answers-"+t._base._question.Id),e.addClass("walkme-survey-question-radiobutton-answers");for(var n=t._base._question.Answers,r=0;r<n.length;r++){var i=mtjQuery("<div></div>");i.addClass("walkme-survey-radiobutton-answer"),"rtl"==Pc.get().Direction?i.css("margin","0 0 5px 8px"):i.css("margin","0 8px 5px 0"),i.attr("id","walkme-survey-question-answer-"+n[r].Id);var o=mtjQuery("<div></div>");o.addClass("walkme-survey-answer-text"),o.css("*display","inline"),o.css("display","inline-block"),o.css("max-width","91%"),o.css("zoom","1"),o.attr("id","walkme-survey-answer-text-"+n[r].Id),o.css("vertical-align","text-top");var a=mtjQuery("<label></label>");a.attr("for","walkme-survey-answer-radiobutton-"+n[r].Id),a.addClass("walkme-survey-answer-title"),a.css("display","inline-block"),a.css("max-width","545px"),a.html(n[r].Title);var s=mtjQuery("<label></label>");s.attr("for","walkme-survey-answer-radiobutton-"+n[r].Id),s.addClass("walkme-survey-answer-subtitle"),s.css("display","inline-block"),s.html(n[r].SubTitle),o.append(a),o.append(s);var u=mtjQuery("<div></div>");u.addClass("walkme-survey-answer-radiobutton-div"),u.css("display","inline-block"),u.css("*display","inline"),u.css("zoom","1"),u.attr("id","walkme-survey-answer-radiobutton-div-"+n[r].Id);var l=mtjQuery('<input type="radio" name="walkme-survey-question-group-'+t._base._question.Id+'" />');l.addClass("walkme-survey-answer-radiobutton"),l.css("display","inline-block"),l.css("vertical-align","-3px"),"rtl"==Pc.get().Direction?ql.isIE("8")?l.css("margin","-1px -4px 1px 1px"):ql.isIE("7")?(l.css("margin","0px -3px 0px -1px"),l.css("vertical-align","-3px")):ql.isIE("9")?l.css("margin","0px -5px 0px 0px"):ql.isIE("11")?(l.css("vertical-align","-3px"),l.css("margin","0px 0px 0px 3px")):"Safari"==ql.browser.name?(l.css("margin","0px 1px 0px 5px"),l.css("vertical-align","1px")):l.css("margin","0 0 0 3px"):ql.isIE("8")?(l.css("margin","-1px 0px 1px -3px"),l.css("vertical-align","-3px")):"Safari"==ql.browser.name?(l.css("margin","0px 5px 0px 1px"),l.css("vertical-align","1px")):ql.isIE("7")?(l.css("margin","0px -1px 0px -3px"),l.css("vertical-align","-3px")):ql.isIE("11")?(l.css("vertical-align","-2px"),l.css("margin","0 3px 0 1px")):l.css("margin","0 3px 0 1px"),l.attr("value",n[r].Id),l.attr("id","walkme-survey-answer-radiobutton-"+n[r].Id);var c=mtjQuery("<label />");c.addClass("walkme-survey-answer-label-radiobutton"),c.addClass("walkme-survey-answer-label-unchecked"),u.append(c),u.append(l),i.append(u),i.append(o),e.append(i)}return t._questionDiv.append(e),t._questionDiv},t.getAnswers=function(){var e={},n=t._base.getQuestionDivFromWindow(),r=mtjQuery("input[name=walkme-survey-question-group-"+t._base._question.Id+"]:checked",n).val();return r?(e.answerId=r,e.questionId=t._base._question.Id,[e]):!1},t.getType=function(){return mu.RadioButton},e.apply(null,arguments)}function vt(){this.LocalSVNRevision="$Rev$";var e=this;e.getSurveyQuestion=function(e,t){var n;switch(e.QuestionType){case mu.FreeText:n=new gt(e,t);break;case mu.CheckBox:n=new ht(e,t);break;case mu.RadioButton:n=new mt(e,t)}return n}}function yt(e,t,n,r){function i(){C=[],S=r.surveyJson}function o(){var e=mtjQuery("<div></div>");return e.addClass("walkme-survey"),e}function a(){var e=mtjQuery("<div></div>");return e.addClass("walkme-survey-title"),e.html(S.Name),e.css("margin-bottom","8px"),e.css("font-weight","bold"),e.css("font-size","24px"),e}function s(){var e=mtjQuery("<div></div>");e.addClass("walkme-survey-questions"),e.css("overflow-y","auto"),e.css("overflow-x","hidden");for(var n=0;n<S.Questions.length;n++){var i=t.getSurveyQuestion(S.Questions[n],S);C.push(i),e.append(u(n,"before"));var o=i.Generate();n!=S.Questions.length-1&&o.css("margin-bottom","20px"),e.append(o),e.append(u(n,"after"))}return r.surveyQuestions=C,e}function u(e,t){var n=mtjQuery("<div></div>");return n.addClass("walkme-survey-question-separator-"+t),n.attr("id","walkme-survey-question-separator-"+t+"-"+e),n}function l(){var e=o(),t=a();e.append(t);var n=s();return e.append(n),c(e),e}function c(e){for(var t=0;4>t;t++){var n=mtjQuery("<div></div>");n.addClass("walkme-survey-extra-div-"+t),e.append(n)}}function d(){var e=mtjQuery("<div></div>");return e.append(l()),e}function f(){k.submitSurvey(r,v,p)}function p(){var e=T.find(".walkme-custom-balloon-buttons-wrapper"),t="walkme-survey-validation-errors",n="."+t;e.find(n).remove(),e.prepend("<span style='font-size:11px;color:"+I+"' class='"+t+"'>Please fill in the answers and click submit again</span>")}function g(){k.surveyExited(r,v)}function h(e){var t=mtjQuery("#"+e),n=t.parent();mtjQuery("input:checked",n).removeAttr("checked");var r=mtjQuery(".walkme-survey-answer-radiobutton",t);r.attr("checked","checked"),r.change()}function m(e,t){var n=mtjQuery("#"+e).parent(),r=n.parent(),i=r.parent();t&&mtjQuery(".selected",i).removeClass("selected"),n.addClass("selected"),r.addClass("selected")}function v(){e.releaseBalloons()}function y(t,n){I=n.FooterTextColor,T=t,T.css("min-width","350px"),T.addClass("walkme-survey-id-"+S.Id),mtjQuery(".walkme-action-submit",T).click(f),mtjQuery(".walkme-action-close",T).attr("onclick","").unbind("click"),mtjQuery(".walkme-action-close",T).click(g),b(T);for(var r=0;r<S.Questions.length;r++)w(T,"radiobutton",S.Questions[r].Id),w(T,"checkbox",S.Questions[r].Id);mtjQuery(".walkme-survey-answer-radiobutton",T).change(function(){m(this.id,!0)}),mtjQuery(".walkme-survey-radiobutton-answer",T).click(function(){h(this.id)}),T.addClass("walkme-survey-balloon"),e.getUiUtils().addBrowserClass(T)}function w(e,t,n){var r=e.find("#walkme-survey-question-"+n),i=r.find(".walkme-survey-answer-"+t);i.change(function(){for(var e=0;e<i.length;e++){var n=i[e],r=mtjQuery(n).parent().find(".walkme-survey-answer-label-"+t);r.removeClass("walkme-survey-answer-label-checked"),r.removeClass("walkme-survey-answer-label-unchecked"),i[e].checked?r.addClass("walkme-survey-answer-label-checked"):r.addClass("walkme-survey-answer-label-unchecked")}})}function b(){mtjQuery(".walkme-custom-balloon-close-button",T).attr("title","Close Survey")}var S,T,I,C,E=this,k=e.getDeployablesManager(n.Survey);E.show=function(){var e=d(),t={popupStepButtons:[{id:0,action:4}]};S.Settings&&void 0!==S.Settings.fadeBackground&&(t.fadeBackground=S.Settings.fadeBackground);var n={minPopupWidth:350,Vibrate:!1,surveyId:S.Id};ro({htmlContent:e},600,t,y,void 0,n)},i.apply(null,[r])}function wt(){function e(e){I.Extends(Qn,e),E=Us.get("Lib"),k=Us.get("AbCurrentPermutationProvider"),_=Us.get("RecorderServerManager"),x=Us.get("PermalinkManager"),A=Us.get("LibStates"),L=Us.get("GenerateGuidFunc"),N=Us.get("AuditStepsManager"),O=Us.get("FeaturesManager"),M=Us.get("CommonUtils"),R=Us.get("CommonEvents"),j=Us.get("AuditSourceManager").get(),F=Us.get("HostData"),B=Us.get("EventSender"),U=Us.get("Consts"),G=Us.get("Logger"),V=Us.get("ReportInitiatorMapper"),P=k.getCurrentPermutation(),D=E.getEndUserGuid()}function t(e){return Q=!1,e.answers.length>0?(i("SurveyCompleted",e),a(e.surveyGuid),r(e,"CompletedWithAnswers"),!0):(r(e,"CompletedWithNoAnswers"),!1)}function n(e){Q=!1,i("SurveyExited",e),r(e,"ExitButtonClicked")}function r(e,t){var n={surveyGuid:e.surveyGuid,status:t};e.answers&&e.answers.length>0&&(n.answers=e.answers),R.sendApiEvent("SurveyCompleted",n)}function i(e,t){if(!rs()){t.permutationId=P,t.endUserGuid=D;var n=u(t),r=Od.execute({url:_.get()+"/Survey/"+e,data:{surveyDataSerialized:n},timeout:H});r.success(function(e){}),r.error(function(e,t,n){})}}function a(e){var t="wm-SrvSmt-"+e;tc.saveData(t,1,wu)}function s(e,t){var n={shouldStart:!1,cookiesToSave:[],surveyId:null};if(O.isFeatureEnabled("noSurveys"))return n;var r=M.getSettingsValue(e.Settings,"survey",void 0);if(!r)return Za("No survey defined on walkthru: "+e.Name,3,"survey"),n;if(r.startCondition==t||r.startCondition==_u.Both){n.surveyId=r.surveyId;var i=I._base.deployablesDict()[n.surveyId];if(!i)return Za("Couldn't find survey with id:"+r.surveyId,0,"survey"),n;var o="wm-SrvRep-"+i.Id,a=l(o,i.Settings);a&&a.shouldStart&&(n.cookiesToSave.push(a.store),o="wm-SrvWtRep-"+e.TutorialId+"-"+i.Id,a=l(o,r),n.cookiesToSave.push(a.store),n.shouldStart=a.shouldStart)}return n}function l(e,t){var n=t.repeat||"visit";return Us.get("AutoStartManager").checkRepeatCookie(e,n)}function c(e,t){var n=!0;Q=!0;var r=window.walkmeExternalSurvey;if(r&&e.surveyJson.Settings.isExternal){Za("Starting external survey"),e.playGuid=N._currentPlayGUID,e.source=j;var i=r(e,e.callback);i===!1?n=!1:d(e.surveyJson)}else{Za("Starting regular survey");var o=Us.create("Survey",e);o.show(),d(e.surveyJson)}return m(e,t),n}function d(e){R.sendApiEvent("SurveyPlayed",{surveyId:e.Id})}function f(e){for(var t=[],n=0;n<e.surveyQuestions.length;n++){var r=e.surveyQuestions[n].getAnswers();if(!r)return!1;t=t.concat(r)}return t}function g(e,t){t=t?t:[];var n={};return n.playGuid=e.surveyPlayGUID,n.surveyGuid=e.surveyJson.Guid,n.tutorialId=e.tutorialId,n.source=j,n.customVarsData=M.getWindowData(xu.Var,e.surveyJson.Settings.customVar),n.customCookiesData=M.getWindowData(xu.Cookie,e.surveyJson.Settings.customCookie),n.answers=t,n.fullUrl=F.getUrl(),n}function h(e,t){try{var n=w(e);n.reason=B.CANCEL_REASONS.Xclick,B.postEvent(B.EVENT_TYPES.Close,n)}catch(r){G.error(r,"reportSurveyExited")}}function m(e,t){try{E.userSawWalkMe();var n=mtjQuery.extend(w(e),y(e),V.mapForExtend(t));B.postEvent(B.EVENT_TYPES.Play,n)}catch(r){G.error(r,"reportSurveyStarted")}}function v(e){try{var t=w(e);B.postEvent(B.EVENT_TYPES.Submitted,t);for(var n=0;n<e.surveyQuestions.length;n++)for(var r=e.surveyQuestions[n],i=T(r,e),o=r.getAnswers(),a=0;a<o.length;a++){var s=mtjQuery.extend({},t,i,b(o[a],e.surveyJson),{indx:n+1});B.postEvent(B.EVENT_TYPES.Submitted,s)}}catch(u){G.error(u,"reportSurveySubmitted")}}function y(e){return e.eventSource?{reason:e.eventSource}:{}}function w(e){var t=B.EVENT_APPS.Survey,n={type:t,oId:e.surveyJson.Id,oName:e.surveyJson.Name,pId:e.surveyPlayGUID,total:0};return e.surveyQuestions&&e.surveyQuestions.length&&(n.total=e.surveyQuestions.length),n}function b(e,t){var n={};n.oId=e.questionId;var r=S(t,e.questionId,e.answerId);return n.oName=r.questionText,e.answerId&&(n.aoId=e.answerId,n.aoName=r.answerText),e.answerText&&(n.aoName=e.answerText),n}function S(e,t,n){for(var r={},i=0;i<e.Questions.length;i++)if(e.Questions[i].Id==t){var o=e.Questions[i];if(r.questionText=o.Title,void 0===n)return r;for(var a=0;a<o.Answers.length;a++)if(o.Answers[a].Id==n){var s=o.Answers[a];return r.answerText=s.Title,r}}}function T(e,t){var n={};return n.type=B.EVENT_APPS.Question,n.oType=e.getType(),n.owId=t.surveyJson.Id,n.owName=t.surveyJson.Name,n}var I=new o(this),C=this;C.LocalSVNRevision="$Rev$";var E,k,_,x,A,P,D,N,L,O,M,R,j,F,B,U,G,V,W=!1,Q=!1,H=1e4;this.handleSurveyPlayThroughWalkthru=function(e,t,n,r,i){Za("Checking if need to open survey");var o=s(e,t);if(o.shouldStart){Za("Starting survey");var a={tutorialId:e.Id,stepIndex:n,lastStepIndex:e.Steps.length-1,eventSource:t,callback:r,surveyPlayGUID:N._currentPlayGUID},i=i||{objectId:e.Id,type:U.STEP_PLAY_INITIATOR_ENUM.WALKTHRU},u=C.activateById(o.surveyId,i,a);if(u)for(var l=0;l<o.cookiesToSave.length;l++)o.cookiesToSave[l]()}},this.surveyIsShown=function(){return Q},this.submitSurvey=function(e,t,n){var r=f(e);if(r){var i=g(e,r);e.submitResults(i),Za("Submitting answers"),v(e),t&&t()}else n&&n()},this.surveyExited=function(e,t){Za("Survey exited");var n=g(e);e.submitExit(n),h(e),t&&t()},I.Override("name",function(){return"Survey"}),I.Override("activateById",function(e,r,i){i||(i={});var o=I._base.deployablesDict()[e];if(!o)return Za(p("Survey with id {0} doesn't exist",e),3),!1;i.surveyJson=o,i.submitResults=t,i.submitExit=n,i.drawBalloonFunc=ro,i.surveyPlayGUID=i.surveyPlayGUID||L();var a=c(i,r);return W=a||W,a}),I.Override("autoStartEnabled",function(e){return!(W||x.isStartingWalkthru()||E.getState()!=A.NOT_RUNNING&&E.getState()!=A.PAUSED)}),e.apply(null,arguments)}function bt(){function e(e,t){var n={};for(var r in t){n[r]=t[r];var i="function"==typeof t[r],o="function"==typeof e[r];i&&!o?e[r]=t[r]:i&&o&&t[r].WM_VIRTUAL&&(t[r]=e[r])}return n}this.LocalSVNRevision="$Rev$",this.extend=function(t,n,r,i,o,a){var s=new n(r,i,o,a),u=e(t,s);t._base=u},this.VIRTUAL=function(e){return e.WM_VIRTUAL=!0,e};var t=this.VIRTUAL(function(){throw"Function is pure virtual. must override"});this.WM_PURE_VIRTUAL=function(){return t}}function St(){function e(e,t,n,l){r=e.checkIfExists,i=e.getTutorialByIndex,o=e.isStepPlayable,a=t,s=l,u=n}function t(e){for(var t=i(e),n=t.Steps.length-1;n>0;){var r=t.Steps[n],a=r.Settings.firstInPage;if(a&&o(e,n))return Za("first step for page, step index: "+(n+1)),n;n--}return n}var n=this;n.LocalSVNRevision="$Rev$";var r,i,o,a,s,u;n.findFirstStep=function(e,n,o){if(u.isFeatureEnabled("pageIdentifier")){var a=s.getFirstStep(e,i(e),n);if(a>=0)return a}if(u.isFeatureEnabled("firststep")&&(!n||0==n)){var a=t(e);if(a>0)return a}return n=n?n:0,r(e,n,void 0,void 0,o,yu.Normal)},e.apply(null,arguments)}function Tt(e){function t(){}var n=this;n.LocalSVNRevision="$Rev$",n.isActionStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Action?!0:!1},n.isPopupStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Popup},n.getById=function(e,t){return qf(e,t)},t.apply(null,arguments)}function It(){function e(e){v=Us.get("Logger"),y=Us.get("FeaturesManager"),b=Us.get("TimerManager"),O(R()),d=e.errorHandler,f=e.userGuid,p=e.terminateTutorialFunction,g=e.restoreStateFunc,c=e.resumeAfterUnloadFunc,l=e.getStepFunc,m=e.peekNextCookieStepFunc,N(e.storageManager),L(e.allUserGuids),h=e.topWindow==e.owner,w=v.wrapCustomerLog(Ws)}function t(){P+=1,setTimeout(V,C)}function n(){var e=N().getData(_,!1,f);return e}function r(e){N().saveData(_,e,I,f)}function i(){return u=N().getData(k,!1,f)}function a(e){u=e,N().saveData(k,e,T,f)}var s=new o(this);this.LocalSVNRevision="$Rev$";var u,l,c,d,f,p,g,h,m,v,y,w,b,S=2e3,T=3600,I=2,C=3e3,E=1100,k="wm-cdplay",_="wm-cdstop",x=this,A=!1,P=0,D=s.Prop.Protected("isRunning",!1),N=s.Prop.Protected("storageManager",!1),L=s.Prop.Protected("allUserGuids",{}),O=s.Prop.Public("crossDomainSampleRate",{}),M=s.Protected("terminateTutorial",function(){p()}),R=s.Virtual.Protected("getSampleRate",function(){return 200});s.Public("enabled",function(){return y.isFeatureEnabled("cd_play")||y.isFeatureEnabled("passOwnership")?!0:!1}),s.Virtual.Public("start",function(e){x.enabled()&&(w("starting cross domain listening..."),P+=1,$(P,e))}),s.Virtual.Public("stop",function(){P=0}),s.Virtual.Public("reset",function(){x.enabled()&&(r(!0),ee(),b.libSetTimeout(function(){r(!1)},E))}),s.Virtual.Public("switchOwner",function(e,t){x.enabled()&&(w("switching owner..."),a(e),t&&(W(),x.loseOwnership(),j(),N().setSyncFlag(f)))}),s.Virtual.Public("loseOwnership",function(e,t){x.enabled()&&(w("losing ownership..."+document.location.href),D()&&(e&&(w("reset state: reseting the ownership condition"),ee()),t?G():D(!1)),Qd("loseOwnership"))});var j=s.Virtual.Protected("removeOwner",function(){});s.Virtual.Public("walkthruStarted",function(e,t){return x.enabled()?F(e,t)?(U(),!0):(qd=Dl.WAITING_FOR_OWNERSHIP,zd=e,Yd=t,ua(),M(),B(function(){qd=Dl.NOT_RUNNING,Dd.reset()}),!1):!0});var F=s.Virtual.Protected("canStartPlaying",function(e,t){return x.enabled()?qd==Dl.WAITING_FOR_OWNERSHIP:!0}),B=s.Virtual.Protected("dontStartAsOwner",function(e){M(),e&&e()}),U=s.Virtual.Protected("startAsOwner",function(){}),G=s.Virtual.Protected("resumeCrossDomain",function(){w("savining data to resume after unload",3),a(u),A=!0,u=null,t()}),V=s.Virtual.Protected("actualResume",function(){w("continue listening after "+C+" milliseconds",3),$(P)}),W=s.Virtual.Protected("terminate",function(){w("owner killed, terminating tutorial and losing ownership",3),M(),x.loseOwnership()}),Q=s.Virtual.Protected("gainOwnership",function(){w("gaining ownership with state "+qd+" "+document.location.href,3),D(!0),A?(A=!1,c()):(w("ownership granted to: "+H(),3),g(f)),Qd("gainOwnership")}),H=s.Virtual.Protected("windowIdentifier",function(){return window.location.href}),$=s.Virtual.Protected("listen",function te(e,t){w("listening with runId: "+e,5),N().refreshGetData(L(),function(){if(z(e)){var r=n();D()?r&&W():r||!K()&&!q()?r?w("waiting for other owner to die before gaining ownership...",3):A&&(A=!1):Q(),b.libSetTimeout(function(){te(e)},Y()),t&&t()}})}),z=s.Protected("shouldContinueListening",function(e){return e==P?!0:(w("stop listening...",3),!1)}),Y=s.Protected("calculateDomainListenInterval",function(){return A?S:O()}),q=s.Protected("checkOwnership",function(){try{var e=i();if(e)return J(e.stepId,e.tutorialId);if(Z())return w("no ownership condition, owner by default",5),!0}catch(t){d(t,"Error determining the owner of a cross domain step")}return!1}),K=s.Protected("isOwnerByPeeking",function(){var e=(y.isFeatureEnabled("po_peek")||y.isFeatureEnabled("passOwnership"))&&X(m());return e&&w("[passownership] owner by peeking",5),e}),X=s.Public("isPassOwnershipStep",function(e){return e&&e.Settings&&e.Settings.action?"passOwnership"==e.Settings.action.actionType:!1}),J=s.Public("isOwnerByCondition",function(e,t){var n=l(e,t);return null!==n?_makeTutorial.evaluateConditionTree(n.Settings.action.arguments.condition):void 0}),Z=s.Public("isOwnerByDefault",function(){return h}),ee=s.Protected("resetOwnershipCondition",function(){N().saveData(k,!1,T,f)});e.apply(null,arguments)}function Ct(){function e(e){z=Us.get("TimerManager");var n=Us.get("Logger");$=e.isFeatureEnabled("po_doubleCheck"),D.Extends(It,e),R=D._base,R.crossDomainSampleRate(fe()),N=2*R.crossDomainSampleRate(),L=t()?5e3:800,O=t()?2e4:5e3,M="Chrome"==ql.browser.name?1200:700,B=e.errorHandler,F=e.userGuid,U=R.storageManager,G=R.allUserGuids,V=R.isRunning,Y=n.wrapCustomerLog(Ws),y()}function t(){return de()||ql.isIEBrowser(10,"gte")}function n(e){return function(){pe(e)}}function r(){return R.isOwnerByPeeking()?(le++,le>=se):void(le=0)}function i(){return W?(W--,!0):!1}function a(){R.storageManager().refreshGetData(G(),function(){Q=null;var e=P(),t=C(),n=r();!e||j!=e||t&&!n?!n&&t&&t!=j&&A():(Y("priority is highest, gaining ownership - "+j,4),E(j),R.gainOwnership())})}function s(e){he(function(t){var n=parseInt(t,10)||0;Y("got priority "+n+" from sessionStorage",4),h(n,function(t){0===n||t?(Y((t?"inherited priority from parent":"priority is zero")+", getting a new priority",4),be(null,e,!0)):(j=n,$?c(e):e&&e())})})}function c(e){h(j,function(t){t?be(null,e,!0):e&&e()})}function d(){return ql.isIE()||$}function f(){d()&&p()}function p(){var e=ie+j,t=U().getData(e,void 0,F);t>=1&&U().increment(e,null,q,F),z.libSetTimeout(p,K)}function g(e,t){var n=ie+e;U().increment(n,null,q,F,function(){function e(){i&&U().refreshGetData(G(),function(){if(i){var t=U().getData(n,void 0,F);t>1&&r(!0),z.libSetTimeout(e,oe)}})}function r(e){e=!!e,U().saveData(n,0,q,F),U().removeData(n,F),i=!1,o&&o.clear(),t&&t(e)}var i=!0,o=z.libSetTimeout(r,M);e()})}function h(e,t){return e?void(d()?(Y("checking if priority is inherited using storageManager",4),g(e,t)):(Y("checking if priority is inherited using window.opener",4),m(e,t))):void(t&&t(!1))}function m(e,t){function n(e){Y("is priority inherited: "+e,4),i&&i.clear(),r&&r(),t&&t(e)}if(window.opener){var r,i,o;r=Me.registerEventHandler("message",function(t){try{var r=l(t.data);r.requestType==re&&(r.priority==e?(W=ae,n(!0)):(o--,0==o&&n()))}catch(i){Y("Error in priority inherited message event "+i,4)}}),i=z.libSetTimeout(function(){n(!1)},1e3),o=Me.postMessageToAllFramesChain(window.opener,u({requestType:ne})),0==o&&n(!1)}else t&&t(!1)}function v(){ve()&&(mtjQuery(window).bind("focus",be),mtjQuery(window).bind("mouseenter",be))}function y(){Me.registerEventHandler("message",S)}function w(){ve()&&(mtjQuery(window).unbind("focus",be),mtjQuery(window).unbind("mouseenter",be))}function b(){Me.unregisterEventHandler("message",S)}function S(e){var t;try{switch(t=l(e.data),t.requestType){case ee:ye(t.priority);break;case ne:e.source.postMessage(u({requestType:re,priority:j}),"*")}}catch(n){t&&B(n,"error handling priority message from parent")}}function T(e){j=e,me(j),V()&&(Y("is running during set priority - setting current owner",4),E(j)),Y("updated priority: "+j,4)}function I(e){var t={requestType:ee,priority:e};Y("sending priority to all frames: "+e,4),mtjQuery("iframe").each(function(e,n){n.contentWindow.postMessage(u(t),"*")})}function C(){return U().getData(J,!1,F)}function E(e){return Y("setting owner to: "+document.location.href+"owner id:"+e,4),W=ae,U().saveData(J,e,q,F)}function k(){Y("removing current owner",4),U().saveData(J,null,q,F)}function _(){Y("register in queue with priority "+j,4),U().addToDictionary(Z,j,x(),q,F),(!Q||Q.cleared)&&(Q=z.libSetTimeout(a,N))}function x(){return(new Date).getTime()}function A(){Y("po_tabs - clear priorities queue",4),U().saveData(Z,null,q,F)}function P(){var e=U().getData(Z,!1,F);Y("registered priorities: "+u(e),4);for(var t=0,n=L;!t&&O>n;){for(var r in e)e.hasOwnProperty(r)&&(priority=parseInt(r,10),x()-e[r]<n&&priority>t&&(t=priority));n+=N}return t}var D=new o(this);this.LocalSVNRevision="$Rev$";var N,L,O,M,R,j,F,B,U,G,V,W,Q,H,$,z,Y,q=3600,K=300,X="wm-po-p",J="wm-po-r",Z="wm-po-q",ee="wm-setPriority",te="priority",ne="wm-qp-req",re="wm-qp-res",ie="wm-po-pc",oe=100,ae=1,se=10,ue=this,le=0,ce=!1;D.Virtual.Public("getPriority",function(){return j});var de=D.Protected("isSlowerBrowser",function(){return ql.isIEBrowser(9,"lte")}),fe=D.Override("getSampleRate",function(){var e=R.getSampleRate();return de()&&(e*=2),e});D.Override("start",function(e){s(function(){v(),f(),R.start(e)})}),D.Override("stop",function(){ue.enabled()&&(w(),b(),Y("stop ownership",4),V(!1),R.stop())}),D.Override("reset",function(){ue.enabled()&&(W=0,Y("reset ownership",4),R.resetOwnershipCondition(),k(),V(!1))});D.Override("dontStartAsOwner",function(e){R.dontStartAsOwner(),A(),e&&e()}),D.Override("startAsOwner",function(){V(!0),E(j)});D.Override("resumeCrossDomain",function(){V(!1),ce=!0,R.resumeCrossDomain()}),D.Override("actualResume",function(){ce=!1,R.actualResume()});var pe=D.Override("listen",function(e,t){R.storageManager().refreshGetData(G(),function(){if(R.shouldContinueListening(e)){var o=C();i()||(V()&&j!=o&&R.terminate(),V()||(!o&&R.checkOwnership()||r()?_():j==o&&ge()&&(R.gainOwnership(),be()))),z.libSetTimeout(n(e),R.calculateDomainListenInterval()),t&&t()}})}),ge=D.Virtual.Protected("shouldRegainOwnership",function(){return R.checkOwnership()});D.Override("switchOwner",function(e,t){function n(){R.switchOwner(e,t)}t&&A(),$?be(null,n,$):n()}),D.Override("windowIdentifier",function(){return j+":"+window.location.href}),D.Override("removeOwner",function(e,t){R.removeOwner(),k()});var he=(D.Override("canStartPlaying",function(e,t){if(R.canStartPlaying(e,t))return!0;var n=Sc[e],r=n.Steps[t],i=R.isPassOwnershipStep(r);return!i&&R.isOwnerByDefault()?!0:i&&R.isOwnerByCondition(r.Id,n.Id)?!0:!1}),D.Virtual.Protected("restorePriority",function(e){R.storageManager().sessionGetData(te,0,F,e)})),me=D.Virtual.Protected("storePriority",function(e){U().sessionSetData(te,e,F)}),ve=D.Virtual.Protected("shouldRegisterFocusEvents",function(){return window==top}),ye=D.Virtual.Protected("handleSendPriorityRequest",function(e){Y("frame got new priority from parent window: "+e,4),j=e,I(e)}),we=[],be=D.Virtual.Protected("updatePriority",function(e,t,n){if(t&&we.push(t),!H&&!ce){var r=j;H=!0;var i=n?null:j;U().increment(X,i,q,F,function(e){e!==j&&(Y("updating priority from "+r+" to "+e,4),T(e),Se(e,r));var t=we;we=[],H=!1;for(var n=0;n<t.length;n++)t[n](j)})}}),Se=D.Virtual.Protected("afterUpdatingPriority",function(e){I(e)});e.apply(null,arguments)}function Et(){function e(e){var t=Us.get("Logger");
c.Extends(Ct,e),p=c._base,d=t.wrapCustomerLog(Ws)}function t(){var e=sessionStorage.getItem(g);return d("[po_frames] getting session priorities: "+e,4),e?l(e):void 0}function n(e,t){e&&!r(e)?t&&t(e):p.updatePriority(null,function(e){n(e,t)})}function r(e){return-1!=wmjQuery.inArray(e,a(top))}function i(){try{top.frames;return top}catch(e){return window}}function a(e){var t=[];try{var n=e._makeTutorial.crossDomainManager.getPriority();e!=window&&n&&t.push(parseInt(n,10))}catch(r){}try{for(var i=e.frames,o=0;o<i.length;o++)t=t.concat(a(i[o]))}catch(r){}return t}function s(e){var n=t();if(d("[po_frames] removing priority "+e+" from session",4),n&&e){var r=wmjQuery.inArray(e,n);r>=0&&(n.splice(r,1),sessionStorage.setItem(g,u(n)))}}var c=new o(this);this.LocalSVNRevision="$Rev$";var d,f,p,g="walkme-priorities";c.Override("getPriority",function(){return p.getPriority()||f}),c.Override("restorePriority",function(e){if(d("[po_frames] restoring priority, temp priority is: "+f,4),window==top)p.restorePriority(e);else{var r=t();if(r&&r.length){var o=a(i());r.sort(function(e,t){return e>t?-1:t>e?1:0}),d("[po_frames] used priorities: "+u(r),4);for(var s=0;s<r.length&&!f;s++)-1==wmjQuery.inArray(r[s],o)&&(o.push(r[s]),sessionStorage.setItem(g,u(o)),f=r[s])}n(f,e)}}),c.Override("storePriority",function(e){if(e=parseInt(e,10),window==top)p.storePriority(e);else{var t=l(sessionStorage.getItem(g)||"[]");-1==wmjQuery.inArray(e,t)&&t.push(e),d("[po_frames] storing priority "+e+" in the session",4),sessionStorage.setItem(g,u(t))}}),c.Override("afterUpdatingPriority",function(e,t){s(t)}),c.Override("handleSendPriorityRequest",function(e){}),c.Override("shouldRegisterFocusEvents",function(){return!0}),c.Override("shouldRegainOwnership",function(e,t){return!0}),e.apply(null,arguments)}function kt(e){function t(){}function n(e){for(var t=b(uc),n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function r(){c||(c=!0,Za(p("Started watching stickies with identifiers:{0}",u(w(l))),1,$s),e.libSetTimeout(i,a))}function i(){wmjQuery.each(l,function(e,t){o(t)});var t=h(l);t>0?e.libSetTimeout(i,a):c=!1}function o(e){var t=e.shouldDrawFunction(),n=p("handleStickinessTypes, stickyIdentifier={0}. stickinessType={1}. shouldDraw={2}",e.identifier,e.stickinessType,t);if(Za(n,3,$s),t){var r=e.redrawFunction();r&&e.stickinessType==uc.soft&&(Za(p("Sticky with identifier {0} was drawn and removed from stickies list",e.identifier),3,$s),delete l[e.identifier])}}this.LocalSVNRevision="$Rev$";var a=2e3,s=this,l={},c=!1;s.registerSticky=function(e){return n(e.stickinessType)?(Za(p("registerSticky for sticky with identifier {0}: stickinessType={1}",e.identifier,e.stickinessType),1,$s),l[e.identifier]=e,void r()):void Za(p("Sticky with id={0} has an invalid stickiness type={1}",e.identifier,e.stickinessType),1,$s)},t.apply(null,arguments)}function _t(){function e(e){x=e.lib,A=e.cdnServer,D=e.clickAuditManager,O=x.Logger.wrapCustomerLog(Js)}function t(e){var t=Is(null,!1);n(t,e),x.centerElementInPage(P,!1)}function n(e,t){var n=c(t);P=mtjQuery(n),_.registerResizeAndScrollEvents({element:P,eventNameSuffix:V});var o=l(P);_.centerElementInParent(o,P),o.css("left","0"),d(t),x.getUiUtils().setLangAttribute(P);var a=g();P.append(a),h(t,e),m(),v(e);var u=M.createContentElement(t);u.hide();var f=s(u);P.append(f);var p=function(){i(!0),l(P).remove(),u.show()};u.load(p),"VIDEO"==Ns(u[0])&&u.bind("loadeddata",p),e.append(P);var y=wmjQuery("#"+G);y.click(function(){var e=u.get(0);e.src=e.src,l(P).show(),i(!1),r()}),_.centerElementInParent(y,P),y.css("left","0"),r()}function r(){N=K.libSetTimeout(a,z),L=K.libSetTimeout(o,Y)}function i(e){L&&L.clear(),N&&N.clear();var t=wmjQuery("#"+G),n=wmjQuery("#"+U);e?(t.remove(),n.remove()):(t.css("display","none"),n.css("display","none"))}function o(){wmjQuery("#"+G).css("display","block"),L.clear(),l(P).hide()}function a(){var e=wmjQuery("#"+U);_.centerElementInParent(e,P),e.css("left","0"),e.css("display","block"),N.clear()}function s(e){var t=/iPhone|iPod|iPad/.test(navigator.userAgent);return t?u(e):e}function u(e){var t={width:e.attr("width"),height:e.attr("height"),overflow:"auto","-webkit-overflow-scrolling":"touch"},n=wmjQuery("<div />").css(t);return n.append(e),n}function l(){var e=mtjQuery("#"+B,P);return e}function c(e){var t=M.getDimensionSize("width",e),n=M.getDimensionSize("height",e),r=parseFloat(t)+4,i="<div id='{{lightboxDivId}}' style='float:left; width:{{lightboxWidth}}px; height:{{lightboxHeight}}px; padding: 2px; z-index:{{zIndex}}; background-color:white; box-shadow:4px -4px 19px -1px #494949;'><div id='{{lightboxTopbarDivId}}' style='position: absolute; top: -23px; left: 0px; height: 25px; width: {{topbarWidth}}px; background-color:#646464;'></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v2.gif) no-repeat center;width:100%; height:100px; position:relative; text-align:center; vertical-align: bottom; margin-top: -30px;'><span style='display: inline-block; color: #99d3fe; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>",o=Lu.to_html(i,{lightboxDivId:j,lightboxWidth:t,lightboxHeight:n,zIndex:sc,lightboxTopbarDivId:F,topbarWidth:r,ajaxLoaderDivId:B,waitingDivId:U,reloadDivId:G,cdnServer:A});return o}function d(e){var t=p("walkme-{0}-light-box-{1}",M.getContentTypeName(),e.Id);P.addClass(t),P.addClass("walkme-to-remove"),P.addClass("walkme-to-destroy")}function f(e,t){var n=t?"#404040":"#646464";e.css("backgroundColor",n)}function g(){var e="walkme-light-box-x-button",t=Pc.get().ContentCloseTooltip,n=p("<div id={0} title='{1}' style='position:absolute; height: 17px; width: 17px; right: 5px; top: -19px; cursor: pointer; z-index: 2147483632; vertical-align: top;'><img src='{2}/player/resources/images/blue-x-button.png' style='margin: 4px;' /></div>",e,t,A),r=mtjQuery(n);return r.click(y),r.mouseover(function(){f(r,!0)}),r.mouseout(function(){f(r,!1)}),r}function h(e,t){if(M.needsNewTabButton()){var n="walkme-open-in-new-tab-button",r=p("<div id={0} title='Open in a new tab' style='position:absolute;height:17px; width:17px; right:25px; top:-19px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/open-in-new-tab.png' style='margin: 4px;'></div>",n,A),i=mtjQuery(r);i.click(function(){M.removeContent(t),T(e)}),i.mouseover(function(){f(i,!0)}),i.mouseout(function(){f(i,!1)}),P.append(i)}}function m(){var e=je.canDisplayOverlay();if(e){var t=je.displayOverlay(sc,!1,H);t.click(function(){M.removeContent()})}}function v(e){e.bind($,function(e){27==e.keyCode&&M.removeContent()})}function y(){M.removeContent()}function w(e){var t=mtjQuery("#"+j,e);t.exist()&&(t.find("iframe").attr("src",""),t.remove(),Qd("ContentRemoved",{})),_.removeScrollAndResizeEvents(V)}function b(){mtjQuery("#"+H).remove()}function S(e){e.unbind($)}function T(e){x.getCommonUtils().isValidUrl(e.Url)?(O(p("Opening content in new tab. Url: {0}",e.Url)),window.open(e.Url,"_blank")):O(p("Content url is invalid: {0}",e.Url))}function I(e){throw"activateContentInWidget is unimplemented"}function C(e){return e+"Unit"}function E(e,t){return Ss(e.Settings,t,"px")}function k(e){return settingKey="height"==e?Q:W}this.LocalSVNRevision="$Rev$";var x,A,P,D,N,L,O,M=this,R="ContentPlayMode",j="walkme-content-light-box",F="walkme-content-light-box-top-bar",B="walkme-ajax-loader",U="walkme-ajax-taking-long",G="walkme-ligth-box-reload",V="walkmeLightBox",W="LightboxWidth",Q="LightboxHeight",H="walkme-content-background",$="keyup.walkme",z=8e3,Y=15e3,q=Us.get("Consts").PLAY_MODE,K=Us.get("TimerManager");M.getContentTypeName=bt.WM_PURE_VIRTUAL(),M.createContentElement=bt.WM_PURE_VIRTUAL(),M.needsNewTabButton=bt.WM_PURE_VIRTUAL(),M.defaultLightboxSize=bt.WM_PURE_VIRTUAL(),M.cannotPlayInLightbox=function(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://");return t&&O("Can't play content in lightbox"),t},M.activateContent=function(e,n,r){var i=parseInt(Ss(e.Settings,R,q.NewTab));switch(O(p("Started playing content, play mode is :{0}",i)),D.SendClickAudit(Fl.Content,e.Id,n,r,{contentType:e.Type}),e.Url=Np(e.Url,["&"]),O(p("Content url is :{0}",e.Url)),Qd("ContentUrl",{name:e.Name,url:e.Url}),i){case q.Widget:I(e);break;case q.LightBox:M.cannotPlayInLightbox(e.Url)?(O("Falling back to playing content in a new tab instead"),T(e)):t(e);break;case q.NewTab:T(e)}},M.removeContent=function(e){e||(e=Is(null,!1)),i(!1),w(e),b(),S(e)},M.getLightboxSizeInPixels=function(){return{width:P.css("width").replace("px",""),height:P.css("height").replace("px","")}},M.getDimensionSize=function(e,t){var n=M.defaultLightboxSize(),r=C(e),i=E(t,r),o=k(e),a=Ss(t.Settings,o,n[e]);if("%"==i){var s=_.getWindowSize();a=s[e]*a/100}return a},e.apply(null,arguments)}function xt(){function e(e){bt.extend(l,_t,e),c=e.lib,o=e.vendorName,a=e.videoId,u=e.content,s=c.Logger.wrapCustomerLog(Js)}function t(e){var t=n(e);if("html5video"==o){var r="";r+=i();var s=mtjQuery("<video controls "+r+' src="'+u.Url+'"></video>');return t.indexOf("autoplay")>-1&&s.attr("autoplay",1),s}var l=p("[{0} {1}]{2}[/{3}]",o,t,a,o),d=c.parseBBCode(l),f=mtjQuery(d);return f}function n(e){var t=Ss(e.Settings,d,"");return t=r(t,e),t+=' wmode="opaque"'}function r(e,t){e=e.replace(/&quot;/gi,'"'),e=e.replace(/((width|height)="[^\\"]+)"/gi,"");var n=i();return e+=" "+n}function i(){var e=l.getLightboxSizeInPixels(),t=p('width="{0}" height="{1}"',e.width,e.height);return t}this.LocalSVNRevision="$Rev$";var o,a,s,u,l=this,c=null,d="VideoParameters",f=420,g=315;l.getContentTypeName=function(){return"video"},l.createContentElement=function(e){return t(e)},l.needsNewTabButton=function(){return!1},l.defaultLightboxSize=function(){return{width:f,height:g}},e.apply(null,arguments)}function At(){function e(e){bt.extend(r,_t,e),i=e.lib,n=i.Logger.wrapCustomerLog(Js)}function t(e){if(i.getCommonUtils().isValidUrl(e.Url)){var t=r.getLightboxSizeInPixels(),n='<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}px; height: {{{height}}}px;"></iframe>',o=Lu.to_html(n,{width:t.width,height:t.height,url:encodeURI(e.Url)}),a=mtjQuery(o);return a}}this.LocalSVNRevision="$Rev$";var n,r=this,i=null,o=900,a=500;r.getContentTypeName=function(){return"article"},r.createContentElement=function(e){return t(e)},r.needsNewTabButton=function(){return!0},r.defaultLightboxSize=function(){return{width:o,height:a}},e.apply(null,arguments)}function Pt(e,t,n,r,i,o){function a(){m=n.Logger.wrapCustomerLog(b)}function s(e,t){return T+"-"+e+"-"+t}function u(e){return S+"-"+e}function l(r,a,l,p){if(!r)return void p(-1);var v=t.getEndUserGuid(!0);if(v===!1)return m("WalkMe ABTesting - Cannot retrieve end user. Stopping execution",1),void n.removeWalkMe("AbTesting - Cannot fetch EndUser");var y,w=u(v),b=null!=l,S=g(r,a),T=d(w,S);if(void 0!=T&&!b)return o.setCurrentPermutation(T),m("using permutation from storage: "+T,1),void p(T);if(b){I=!0;var E=c(v,l,T);if(!E)return m("using permutation from activation rule: "+l,1),o.setCurrentPermutation(l),void p(l);m("got permutation from activation rule: "+l,2),y=l}else y=h(r),m("permutation was drawn: "+y,1);m("sending permutation id to server: "+y,2);var k=a?a.PermutationId:void 0;f(v,y,S,k,b,function(t){m("server returned permutation id : "+t,2),m("saving permutation in storage : "+t,3),e.saveData(w,t,C);var n;if(b){m("Activation rule was used.",2);var r=s(v,l);e.saveData(r,1,C),n=y}else n=t;o.setCurrentPermutation(n),m("Final permutation: "+n,1),i.postEvent(b),p(n)})}function c(t,n,r){if(r==n)return!1;var i=s(t,n);return 1!=e.getData(i)}function d(t,n){var r=parseInt(e.getData(t));if(!isNaN(r)){if(wmjQuery.inArray(r,n)>-1)return m("permutation exists in storage: "+r,1),r;m("permutation exists in storage but was out of date: "+r,1)}return void m("no valid permutation exists in storage",2)}function f(e,t,n,i,o,a){r.sendPermutationToServer(e,t,n,i,o,a,p)}function p(){m("WalkMe ABTesting - Error when saving end-user permutation. Removing WalkMe",1),n.removeWalkMe("AbTesting - Cannot fetch EndUser Permutation")}function g(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].PermutationId);return t&&n.push(t.PermutationId),n}function h(e){for(var t=0,n=Math.random(),r=0;r<e.length;r++)if(t+=e[r].Percentage,t>=n)return e[r].PermutationId;return e[e.length-1].PermutationId}this.LocalSVNRevision="$Rev$";var m,v,y,w=this,b="ABTesting",S="wm-ABPer",T="wm-frcd",I=!1,C=31536e4;w.setPermutations=function(e,t){v=e,y=t},w.getPermutations=function(){return v},w.initGetPermutation=function(e,t){l(v,y,e,function(e){o.setCurrentPermutation(e),t(e)})},w.getPermutation=function(){return o.getCurrentPermutation()},w.getPermutationById=function(e){for(var t=0;t<v.length;t++)if(v[t].PermutationId==e)return v[t];return!1},a.apply(null,arguments)}function Dt(){function e(){return r}function t(e){r=e}var n=this;n.setCurrentPermutation=t,n.getCurrentPermutation=e;var r=-1}function Nt(e,t,n){function r(){}this.LocalSVNRevision="$Rev$";var i=this,o=1e4;i.sendPermutationToServer=function(r,i,a,s,l,c,d){var f=t.execute({url:e.get()+"/AbTesting/SaveEndUserPermutation",dataType:"jsonp",data:{endUser:r,walkmeUserGuid:bd,source:os(),permutationId:i,isForcedPermutation:l,availablePermutationsSerialized:u(a),browser:n.browser.string,os:n.os.name,timeout:o,defaultPermutation:s}});f.success(function(e){"error"===e?d():c(e)}),f.error(function(e,t,n){d()})},r.apply(null,arguments)}function Lt(e,t,n){function r(r){try{var o={type:e.EVENT_SENDER_EVENT_APPS.AbTesting,reason:i(r)};t.postEvent(e.EVENT_SENDER_EVENT_TYPES.Draw,o)}catch(a){n.error(a)}}function i(t){var n=t?e.EVENT_SENDER_AB_TESTING_DRAW_REASONS.ActivationRule:e.EVENT_SENDER_AB_TESTING_DRAW_REASONS.Draw;return n}var o=this;o.postEvent=r}function Ot(e){function t(){return e.location.href}function n(){var t=[e.location.protocol,"//",e.location.host,e.location.pathname].join("");return t}function r(){return a.title}function i(){return/android|ipad|android.+mobile|blackberry|iemobile|ip(hone|od)|phone|symbian|windows (ce|phone)/i.test(o||e.navigator.vendor||e.opera)}this.LocalSVNRevision="$Rev$";var o=e.navigator.userAgent,a=e.document,s=function(e){var t=o.substring(e).indexOf(".");return o.substring(e,e+t)},u=function(){var e,t,n,r;if(-1!=(r=o.indexOf("MSIE")))e="IE",t=s(r+5);else if(-1!=o.indexOf("Trident")&&-1!=(r=o.indexOf("rv:")))e="IE",t=s(r+3);else if(-1!=(r=o.indexOf("Edge/")))e="Edge",t=s(r+5);else if(-1!=(r=o.indexOf("Chrome")))e="Chrome",t=o.substring(r+7,o.lastIndexOf(" "));else if(/Firefox\/(\S+)/.test(o))e="Firefox",t=RegExp.$1;else if(r=-1!=o.indexOf("Safari"))e="Safari",/Version\/(\S+)/.test(o)&&(t=RegExp.$1);else if(-1!=(r=o.indexOf("Opera")))if(e="Opera",/Version\/(\S+)/.test(o))t=RegExp.$1;else{var i=Math.max(o.lastIndexOf(" "),o.lastIndexOf("/"));t=o.substring(i+1)}else(n=o.lastIndexOf(" ")+1)<(r=o.lastIndexOf("/"))&&(e=o.substring(n,r),t=o.substring(r+1));return{name:e,version:t,string:e+" "+t,documentMode:a.documentMode}},l=function(e,t,n){switch(e){case"lt":return n>t;case"lte":return n>=t;case"gt":return t>n;case"gte":return t>=n;default:return t==n}},c=function(e,t){var n=u();return"IE"!=n.name?!1:e?l(t,n.version,e):!0},d=function(e,t,n){var r=u();if("IE"!=r.name)return!1;if(!e)return!0;var i=n&&n.ownerDocument||a,o=i.documentMode;return o||("BackCompat"==i.compatMode?o=5:"7"==r.version&&(o=7)),l(t,o,e)},f=function(e,t,n,r){return r?c(e,t)&&d(e,t,n):c(e,t)||d(e,t,n)},p=function(e){return d(5,null,e)},g=[{n:"Android",os:"Android"},{n:"Linux",os:"Linux"},{n:"X11",os:"UNIX"},{n:"iPad",os:"iOS"},{n:"iPod",os:"iOS"},{n:"iPhone",os:"iOS"},{n:"Mac",os:"MacOS"},{n:"Win",os:"Windows"}],h=function(){try{return{height:e.screen.height,width:e.screen.width}}catch(t){}},m=function(){for(var e,t=0;t<g.length;t++){var n=g[t].n;if(-1!=o.indexOf(n)){e=g[t].os;break}}return e||(e="Unknown"),{name:e}},v=function(){try{var t=wmjQuery(e);return{height:t.height(),width:t.width()}}catch(n){return null}};return{browser:u(),getUrl:t,getUrlWithoutQueryString:n,getPageTitle:r,os:m(),isIE:f,isIEDoc:d,isIEBrowser:c,isQuirksMode:p,getWinSize:v,getScreenSize:h,isMobile:i}}function Mt(){function e(e){l=e.deployablesGoalManager,d=e.experiments,u=e.lib,p=e.getEndUserGuid,f=u.Logger.wrapCustomerLog(m),c=new lt({lib:u,serverAddress:e.serverAddress,getPermutationId:e.getPermutationId,getEndUserGuid:e.getEndUserGuid,getAuditSource:e.getAuditSource,storageManager:e.storageManager}),g=u.getConsts()}function t(e,t){c.updateGoalCompleted(e,t.Id)}function n(e){return void 0!=v[e]}function r(e){var t=v[e.Id],n={goal:{Id:e.Id,GoalType:g.DEPLOYABLE_TYPE.AbExperiment,RelatedObjectId:t,Name:e.Name},identifier:e.identifier,interactionGuid:e.interactionGuid};u.getCommonEvents().sendInternalEvent(g.EVENTS.AbExperimentLinkedGoalReached,n)}function i(e,t){for(var n=[],r=[],i=0;i<e.Goals.length;i++){var o=e.Goals[i];mp(o.Id,t)>-1?n.push(o):r.push(o)}e.Goals=r,e.CompletedGoals=n}function o(e){for(var t=0;t<d.length;t++){var n=d[t];i(n,e)}}function a(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.Goals.length;i++){var o=r.Goals[i];t.push(o.Id),1==o.IsLinkedGoal&&(v[o.Id]=r.Id)}}function s(e,t){o(e);for(var n=0;n<d.length;n++){var r=d[n];f("Start watching Experiment goals. ExperimentID : "+r.Id,2),l.startWatchingDeployable(r,void 0)}t&&t()}this.LocalSVNRevision="$Rev$";var u,l,c,d,f,p,g,h=this,m="ABTesting",v={},y=function(e){var i=e.GoalType==g.DEPLOYABLE_TYPE.AbExperiment,o=n(e.Id),a=i||o;if(a){var s=p(),u=c.syncRetrieveCompletedGoals(s),l=-1==mp(e.Id,u);if(l){f("Experiment Goal was completed! Goal ID:"+e.Id+", Goal Name : "+e.Name,1),t(s,e);var d=i;d||r(e)}}},w=!1;this.startWatching=function(e){if(!w){w=!0;var t=[];if(a(d,t),0==t.length)return f("No AbTesting goals were defined"),void(e&&e());l.onGoalCompleted(y);var n=p(),r=c.syncRetrieveCompletedGoals(n);r?(f("Completed goals data exists. Starting goals watch"),Wd("ABTestingGoalsFetched"),s(r,e)):(f("No completed goals data exists locally. Fetching from server"),c.asyncRetrieveCompletedGoals(n,t,function(t){f("Completed goals data recieved. Starting goals watch"),Wd("ABTestingGoalsFetched"),s(t,e)},function(){f("WalkMe ABTesting - Error when fetching end-user goals. Removing WalkMe",1),u.removeWalkMe("AbTesting - Cannot fetch EndUser Goals")}))}},h.isGoalReached=function(e){for(var t=c.syncRetrieveCompletedGoals(p()),n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},e.apply(null,arguments)}function Rt(e,t,n,r,i,o,a){function s(e,t,n){n+="<div style='float: right'>",n+=f("walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID","OK",e),n+="</div>",c("first-step-not-available",n,420,t.Id,p)}function u(t){var n={popupStepButtons:[{id:0,name:"OK",action:7}]},r=wmjQuery("<div></div>");r.append(t);var i=!0;ro({htmlContent:r},446,n,function(t){mtjQuery(".walkme-action-ok",t).click(function(){e.releaseBalloons()})},i)}function l(e,t,n,r){var i="",o=e?"14px":"15px",a="http://support.walkme.com/customer/portal/articles/1451025-error-handling";return i+="<h1 id='walkme-first-step-not-available-title' class='walkme-custom-first-step-not-available-text mt-custom-first-step-not-available-text CUSTOM-TUTORIAL-ID' style='CSS-RESET font-family: "+t.Font+";color: "+t.HeaderColor+"; font-weight: bold; font-size: "+o+"; border: none; margin: 10px; word-wrap: break-word;'>"+n+"</h1>",i+="<h2 id='walkme-first-step-not-available-content' class='walkme-custom-first-step-not-available-text mt-custom-first-step-not-available-text CUSTOM-TUTORIAL-ID' style='CSS-RESET font-family: "+t.Font+";color: "+t.HeaderColor+"; font-size: "+o+"; border: none; margin: 10px; word-wrap: break-word; font-weight: normal;'>"+r+"</h2>",i+='<a href="'+a+'" target="_blank" style="float: left; margin-left: 11px; text-decoration: underline; color: blue;">Read More</a>'}function c(i,o,s,u,l){var c=d(u),f=c.BalloonSettings,p='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+i+" mt-custom-popup-"+i+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+s+'px">'+o+"</div>";p=p.replace(/CSS-RESET/g,nc),p=p.replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+u);var g=Is();g.append(p),Pp=mtjQuery("#walkme-popup-body",g),Pp.css({position:"fixed","z-index":sc,padding:"8px 12px 12px 12px","font-family":"Arial"}),Ha(Pp,f,!1);var h=0;mtjQuery.each(mtjQuery("[width], [style*=width]",Pp),function(e,t){mtjQuery(t).width()>h&&(h=mtjQuery(t).width())}),Pp.width()<h&&Pp.css("width",h+"px"),e.centerElementInPage(Pp,!1),Zd=t.playSetInterval(function(){e.centerElementInPage(Pp,!0)},1e3),n.isQuirksMode()||e.shouldHandlePageAsFramesets()||r.displayOverlay(2147483630,!0),Pp.fadeIn("slow"),xa(Pp,{objectId:u,type:a.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),l&&l(Pp)}function d(e){var t;return t=Qc[e]?Qc[e].siteConfig:i.get()}function f(t,r,a,s){a=e.FixConfiguration(a),a.ButtonBorderColor=a.ButtonBorderColor||"#6c84a6";var u="rtl"==i.get().Direction?"right":"left";ka(a,"ButtonBgColor"),ka(a,"ButtonBgColor2");var l=a.ButtonBgColor,c=a.ButtonBgColor2,d=a.ButtonShadowWidth,f=a.BalloonButtonRadius,p=l!=c,g="CSS-RESET "+(p?"background:-moz-linear-gradient(top, "+l+", "+c+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+l+"), color-stop(100%,"+c+"));background:-webkit-linear-gradient(top, "+l+" 0%,"+c+" 100%);background:-o-linear-gradient(top, "+l+" 0%,"+c+" 100%);background:-ms-linear-gradient(top, "+l+" 0%,"+c+" 100%);background:linear-gradient(to bottom, "+l+" 0%,"+c+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+l+'", endColorstr="'+c+'",GradientType=0 );':"background-color:"+l+";")+"border: 1px solid "+a.ButtonBorderColor+";color:"+a.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+u+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+d+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+d+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+d+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+f+"px;-webkit-border-radius:"+f+"px;border-radius:"+f+"px;";return l!=c&&n.isIE()&&(g+="border-radius: 0px;"),p&&o.isGradientUsingFilter(g)&&(g+="background: url("+Wc+"/player/resources/images/spacer.gif) repeat;"),g=g.replace(/CSS-RESET/g,nc),g+=s?s:"","<button class='"+t+"' type='button' style='"+g+"'>"+r+"</button>"}function p(e){mtjQuery(".walkme-custom-first-step-not-available-ok-button",e).click(function(){ms()})}var g=this;g.showCantPlayBalloon=function(e,t,n){var r=d(e.Id),i=r.BalloonSettings,o="v3"==i.BalloonVersion,a=l(o,i,t,n);o?u(a):s(i,e,a)},g.showFirstStepNotAvailablePopup=function(t){var n=d(t.Id),r=n.BalloonSettings,i="v3"==r.BalloonVersion,o=Ss(t.Settings,"cantPlayAlert",n.TutorialCantPlayText),a=o==n.TutorialCantPlayText,c="";if(a&&(Zr()||ei())){var f="Oops, it seems that this walk-thru cannot be played from this current location.";o="Please note that your users will not be able to play the walk-thrus from this location either. In order to get this issue fixed, please enable the Safe start.",c+=l(i,r,f,o)}else{var p=i?"14px":"21px";o=e.parseBBCode(o),c+="<h1 class='walkme-custom-first-step-not-available-text mt-custom-first-step-not-available-text CUSTOM-TUTORIAL-ID' style='CSS-RESET font-family: "+r.Font+";color: "+r.HeaderColor+"; font-size: "+p+"; border: none; margin: 10px; word-wrap: break-word;'>"+o+"</h1>"}i?u(c):s(r,t,c)}}function jt(e,t,n){function r(){}function i(e){try{var r=t.getEventAppByDeployable(e.auditType),i=a(r,e.auditType,e.objectId,e.initiatorType,e.initiatorId,e.additionalParams),s=o(r);t.postEvent(s,i)}catch(u){n.error(u)}}function o(e){switch(e){case t.EVENT_APPS.Launcher:return t.EVENT_TYPES.Click;default:return t.EVENT_TYPES.Play}}function a(n,r,i,o,a,c){var d,f,p=e.getDeployablesManager(r),g={};if(p){var h=p.getById(i);h&&(d=h.Name,g=p.getActionData(h),f=p.isWithAction(h))}switch(n){case t.EVENT_APPS.Launcher:return s(n,i,d,g);case t.EVENT_APPS.Content:return l(n,i,d,a,o,f,c);default:return u(n,i,d,a,o,f)}}function s(e,t,n,r){return{type:e,oId:t,oName:n,aType:r.Type,aoId:r.ItemId,aoName:r.Name,pId:"-1"}}function u(e,t,n,r,i,o){return{type:e,oId:t,oName:n,pInit:{id:r,type:i},pId:"-1",oIsWithAction:o}}function l(e,t,r,i,o,a,s){var l=u(e,t,r,i,o,a,s);return s&&null!=s.contentType?l.oType=s.contentType:n.error(null,"No contentType was not provided for resouce params"),l}var c=this;c.send=i,r.apply(null,arguments)}function Ft(e,t,n,r,i,o){function a(){il.ElementRecognition.setJQuery(wmjQuery)}function s(e){var t={0:il.ElementRecognition.AlgorithmSensitivity.Low,1:il.ElementRecognition.AlgorithmSensitivity.Medium,2:il.ElementRecognition.AlgorithmSensitivity.High};return t[e]}function u(e,t){var n=il.ElementRecognition.SearchOptions.IGNORE_NOTHING,r=[];e.IsIdentifyByText&&r.push("IDENTIFY_TEXT"),e.IsIgnoreText&&r.push("IGNORE_TEXT"),e.IsIgnoreId&&(r.push("IGNORE_ID"),r.push("IGNORE_NAME")),0!=e.IgnorePosition&&r.push("IGNORE_POSITION"),e.IsIdentifyById&&r.push("IDENTIFY_ID_AND_NAME"),e.IgnoreShapeProportion&&r.push("IGNORE_SHAPE_PROPORTION"),e.IgnoreClass&&r.push("IGNORE_CLASS"),e.IgnoreStyle&&r.push("IGNORE_STYLE"),e.IgnoreHref&&r.push("IGNORE_HREF"),t["data-walkmeid"]&&r.push("IDENTIFY_WALKME_ID"),o.isFeatureEnabled("noAutoQuery")||r.push("USE_AUTO_SELECTOR");for(var i=0;i<r.length;i++)n|=il.ElementRecognition.SearchOptions[r[i]];return n}function l(e,t,i){var a=!o.isFeatureEnabled("fe_no_xpath_cache"),s=new il.ElementRecognition.ElementDescription(a);s.elementType=c(t.elementXpath.toLowerCase()),s.width=t.elementWidth,s.height=t.elementHeight,s.relativeLeft=t.relativeLeft,s.absY=t.elementAbsY,s.centeredElementWidth=t.centeredElementWidth,s.xpathArrayOriginal=il.XpathLib.xpathStringToArray(t.elementXpath.toUpperCase()),s.xpathArray=il.XpathLib.removeHtmlAndBodyFromXpathArray(s.xpathArrayOriginal),s.xpathArrayToIframe=il.XpathLib.removeHtmlAndBodyFromXpathArray(il.ContextUtils.getXpathUpToIframe(s.xpathArrayOriginal)),s.text=t.textArray&&t.textArray.length>0?r(t.textArray[0],["&",'"',"'",">","<"]):"",s.autoQuery=t.autoQuery,t["data-walkmeid"]?s.customSelector="[data-walkmeid='"+t["data-walkmeid"]+"']":(void 0==i||i)&&(s.visibilityFilter=n.getVisibleFilter(e));var u={elementClass:"class",elementId:"id",elementName:"name"};s.attributes={};for(var l in u)s.attributes[u[l]]=t[l];for(var d in t)!t.hasOwnProperty(d)||s.attributes.hasOwnProperty(d)||u[d]||(s.attributes[d]=t[d]);return s}function c(e){var t=e.split("/"),n=t[t.length-1],r=n.split("[")[0];return r}function d(e,t,n,r,i){var o=f.recognizeElement(e,t,n,i),a=f.getWinner(o),s=a&&a.element&&a.element.length&&a.element[0];return a&&r&&(r.score=a.totalScore,r.details=a.details),s&&wmjQuery(s).data("iframe",o.context),s}var f=this;f.LocalSVNRevision="$Rev$",f.getFindElementLib=function(){return il},f.wrapSession=function(e,t){return o.wrapSession(e,t)},f.recognizeElement=function(e,t,n,r){var a=o.getSession(r);lp(e.StepSensitivity)&&a.setAlgorithmSensitivity(s(e.StepSensitivity)),a.setSearchOptions(u(e,t));var c=l(e,t,n);i.extendAdaptedSettings(e,c);var d=a.recognize(c);return d},f.getWinner=function(e){var t=e&&e.elements&&e.elements.length&&e.elements[0];return t},f.findElement=function(n,r,o,a){var s;if(t.isPopupStep(n))return ss();if(t.isActionStep(n))return xo(n).isValid();if(!1===i.extendOriginalSettings(n))return!1;if(Za(n,5),n.IsJquerySelector){n.ElementDescription.extended=n.ElementDescription.extended||{},n.ElementDescription.extended.elementIframe=null;var u=e.findElements(n,r);return s=u&&u.length&&u[0],s?(s=wmjQuery(s),n.ElementDescription.extended&&s.data("iframe",n.ElementDescription.extended.elementIframe),s):!1}return s=i.findElement(n,o),void 0!==s?s?wmjQuery(s):s:(s=d(n,n.ElementDescription,r,o,a),s?wmjQuery(s):!1)},a.apply(this,arguments)}function Bt(e){function t(t){for(var n=!1,r=0;!n&&r<e.length;r++)n=t(e[r])}this.registerPlugin=function(t){e.push(t),t&&t.init&&t.init(Us.get("ElementFinder"))},this.findElement=function(e,n){var r;return t(function(t){return r=t.findElement&&t.findElement(e,n),void 0!==r}),r},this.extendDescription=function(e,n){var r=l(n);return t(function(t){t.extendDescription&&t.extendDescription(e,r)}),u(r)},this.extendOriginalSettings=function(e){try{t(function(t){t.extendOriginalSettings&&t.extendOriginalSettings(e)})}catch(n){return!1}return!0},this.extendAdaptedSettings=function(e,n){t(function(t){t.extendAdaptedSettings&&t.extendAdaptedSettings(e,n)})}}function Ut(e,t){function n(){}function r(e){e=e||0,c=new il.ElementRecognition.ElementRecognizerSession(e,f),f=!1}function i(){d=0,c=null,f=!1}function o(){return c&&d>0}function a(){0>d&&(d=0)}function s(t,n){return n?void 0:(o()||f||(f=!0,e.libSetTimeout(i,0)),a(),d+=1,!0)}function u(e){e||(d-=1,c&&0>=d&&i())}var l=this;l.LocalSVNRevision="$Rev: 6053 $";var c,d=0,f=!1;window._walkmeInternals=window._walkmeInternals||{},l.isFeatureEnabled=function(e){return t.isReady()?t.isFeatureEnabled(e):_walkmeInternals.findElementFeatures?!!_walkmeInternals.findElementFeatures[e]:!1},l.getSession=function(e){return o()||r(e),c},l.wrapSession=function(e,t){var n=l.isFeatureEnabled("fe_no_session_cache");s(t,n);var r=e&&e();return u(n),r},n.apply(this,arguments)}function Gt(){function e(r,i,o){if(o[0]>0)if(!r||3!==r.nodeType&&4!==r.nodeType){if(r&&1===r.nodeType&&!r.tagName.match(/^(script|style)$/i))for(var a=r.childNodes,s=0,u=a.length;u>s;s++)e(a[s],i,o)}else{var l=t(r.nodeValue);l=l.toLowerCase(),l=n(l),l&&(i.push(l),o[0]--)}}function t(e){return e=e.replace(new RegExp(String.fromCharCode(160),"g")," "),e=e.replace(new RegExp(String.fromCharCode(10),"g"),""),e=e.replace(new RegExp(String.fromCharCode(13),"g"),""),e=e.replace(new RegExp(String.fromCharCode(9),"g"),""),e=e.replace(new RegExp(" ","g"),""),e=mtjQuery.trim(e),e=e.substring(0,Pl)}function n(e){if(!r(e))return e;for(var t=-1,n=e.length,o="";++t<n;){var a=e.charAt(t);o+=/[\uD800-\uDBFF]/.test(a)||/[\uDC00-\uDFFF]/.test(a)?i(a):a}return o}function r(e){var t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;return null!=t.exec(e)}function i(e){var t=e.charCodeAt(0),n=t.toString(16).toUpperCase(),r=n.length>2,i="\\"+(r?"u":"x")+("0000"+n).slice(r?-4:-2);return i}var o=this;o.LocalSVNRevision="$Rev$",o.getElementTextArray=function(t){var n=[];return e(t,n,[3]),n}}function Vt(e){function t(){}function n(){if(u){for(var t=[],r=0;r<l.length;r++)try{i(l[r],r)}catch(o){t.push(r)}for(var r=t.length-1;r>=0;r--)l.splice(r,1)}l.length&&e.libSetTimeout(n,3e3)}function r(e){return e.nextAll(s).length>0}function i(e,t){var n=e.parent(),i=n.contents().length;r(e)||o(e[0])+t+1==i||e.appendTo(n)}function o(e){for(var t=0;e=e.previousSibling;)t++;return t}var a=this;a.LocalSVNRevision="$Rev$";var s=".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-front:visible",u=!0,l=[];a.addElement=function(t){Mf("noElk")||(l.length||e.libSetTimeout(n,3e3),l.push(t))},a.removeElement=function(e){if(!Mf("noElk")){var t=wmjQuery.inArray(e,l);-1!=t&&l.splice(t,1)}},a.setState=function(e){Mf("noElk")||(u=e)},t.apply(null,arguments)}function Wt(e,t,n,r,i){function o(){u=n.error,n.customerLog("Analytics manager was created",3,c)}function a(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0),n=Math.floor((t.getTime()-e.getTime())/1e3);return 0==n&&(n=1),n}function s(e,t,o){if(rs())return!0;try{i.postEvent(i.EVENT_TYPES.Loaded,{
type:i.EVENT_APPS.Walkme})}catch(a){n.error(a)}if(!Vc)return!0;var s=Vc+"/Analytics/UniqueEndUser",u={userId:e,permutationId:t,endUserGuid:o};r.execute({url:s,data:u})}this.LocalSVNRevision="$Rev$";var u,l="wm-ueuT",c="uniqueEndUser",d=this;d.auditUniqueEndUser=function(t,r,i){try{var o=e.getData(l)!=i;o&&(s(t,r,i),n.customerLog("auditUniqueEndUser: sent unique user request. userGuid="+t+" permutationId="+r+"endUserGuid="+i,3,c),e.saveData(l,i,a()))}catch(d){u(d,"Failed while auditing unique end users")}},o.apply(null,arguments)}function Qt(e,t,n,r,i,o,a,s,l){function c(){v=n.wrapCustomerLog(Qs)}function d(){return(new Date).getTime()+"-"+i()}function f(t){var n,r,i=t[0],a=i.auditType,u=i.objectId;if(void 0!=a&&void 0!=u&&(n=e.getDeployablesManager(a),n&&n.getById&&(r=n.getById(u),r&&r.userGuid)))return r.userGuid;var l=t[0].shoutOutId;return void 0!=l&&(n=e.getDeployablesManager(o.ShoutOut),n&&n.getById&&(r=n.getById(l),r&&r.userGuid))?r.userGuid:s.getUserGuid()}function p(e){var t=f(e),n=r.browser.string,i=r.os.name,o=s.getEnvironmentId(),a=s.getEndUserGuid(),l=s.getPermutationId(),c=r.getUrl();return{serizlizedClickAudits:u(e),userGuid:t,fullUrl:c,source:o,browser:n,os:i,permutationId:l,endUserGuid:a}}this.LocalSVNRevision="$Rev$";var g,h,m,v,y=this;y.SendClickAudit=function(e,t,n,r,i){if(!rs()){var o=d(),a={auditType:e,objectId:t,auditGuid:o,playInitiator:n,initiatorId:r};return g.sendData(a),l.send({auditType:e,objectId:t,initiatorType:n,initiatorId:r,additionalParams:i}),o}},y.SendWidgetOpen=function(e){if(rs())return!0;var t={userId:s.getUserGuid(),fullUrl:r.getUrl(),source:s.getEnvironmentId(),browser:r.browser.string,os:r.os.name,permutationId:s.getPermutationId(),endUserGuid:s.getEndUserGuid(),auditGuid:d()};h.sendData(t);try{var i;return e&&(i={type:e.type,id:e.objectId}),a.postEvent(a.EVENT_TYPES.Open,{type:a.EVENT_APPS.Player,pInit:i})}catch(o){return n.error(o),!0}},y.SendShoutOutAudit=function(t,r,i,s){if(!rs()){var u={shoutOutId:t,deployableType:r,clickType:i,auditGuid:d(),relatedClickAuditGuid:s};m.sendData(u);try{var l=e.getDeployablesManager(o.ShoutOut),c=l.getById(t);if(i===Iu.Close||i===Iu.XButton)return a.postEvent(a.EVENT_TYPES.Close,{type:a.getEventAppByDeployable(r),oId:t,oName:c.Name,pId:"-1",reason:i});var f=l.getActionData(c);return a.postEvent(a.EVENT_TYPES.Click,{type:a.getEventAppByDeployable(r),oId:t,oName:c.Name,aType:f.Type,aoId:f.ItemId,aoName:f.Name,pId:"-1"})}catch(p){return n.error(p),!0}}},y.init=function(){g=t.register("ca",{actionUrl:"/Statistics/AddClickAudits",prefixForStorage:"ca",sendingThreshold:1,dataType:"click audit",dataIdFieldName:"Id",requestParamsFunc:p}),h=t.register("wo",{actionUrl:"/Statistics/AddWidgetOpens",prefixForStorage:"wo",sendingThreshold:1,dataType:"widget open",dataIdFieldName:"Id",requestParamsFunc:function(e){return{serizlizedWidgetOpens:u(e)}}}),m=t.register("ac",{actionUrl:"/Statistics/AddShoutOutAudits",prefixForStorage:"ac",sendingThreshold:1,dataType:"shoutOut click",dataIdFieldName:"Id",requestParamsFunc:p})},c.apply(null,arguments)}function Ht(e,t,n,r){function i(){o=t.register("dca",{actionUrl:"/Statistics/AddDebuggerAudits",prefixForStorage:"dca",sendingThreshold:5,dataType:"debugger audit",dataIdFieldName:"Id",requestParamsFunc:function(t){var i=e.getUserGuid(),o=n.browser.string,a=n.os.name,s=os(),l=as(),c=e.getEndUserGuid(),d=r.getCurrentPermutation();return{debuggerAuditData:u(t),userGuid:i,fullUrl:l,source:s,browser:o,os:a,permutationId:d,endUserGuid:c}}})}var o,a=this;a.LocalSVNRevision="$Rev$",a.sendData=function(e){o.sendData(e)},i.apply(null,arguments)}function $t(e,t){function n(){}function r(e){return"object"==typeof e&&null!==e}function i(e,t,n){var i;return i=r(e)?c(e,t,n):wmjQuery(e,n)}function o(e,t,n){var r=void 0;if(void 0!=e&&(r=i(e,t,n),r.length>0)){var o=Ns(r[0]);"IFRAME"==o||"FRAME"==o?(t&&(t.ElementDescription.extended.elementIframe&&r.data("iframe",t.ElementDescription.extended.elementIframe),t.ElementDescription.extended.elementIframe=r),r=Ts(r)):t&&(t.ElementDescription.extended.elementIframe=!1)}return r}function a(e){return void 0!=e&&mtjQuery.inArray(e,g)>-1?!0:!1}function s(e,t){var n;try{n=e[t]().eq(0)}catch(r){_makeTutorial.Logger.error(r,"runJqueryMethod : element has no method named '"+t+"'"),n=wmjQuery()}return n}function u(e,t){if(void 0!=e.method){var n;n=r(e.method)?e.method.name:e.method,a(n)?t=s(t.eq(0),n):(Za("Unknown jQuery Selector Method : '"+n+"'"),t=wmjQuery())}return t}function c(e,t,n){try{var r=o(e.context,t,n),a=i(e.element,t,r);return a=u(e,a)}catch(s){return Za("jQuery Element Finder: Could not parse input"),wmjQuery()}}function d(e){if(e=wmjQuery.trim(e),!ls(e,"{")){var t=new Object;return t.element=e,t}try{return l(e)}catch(n){return null}return null}function f(e){function t(e,t){for(var n=e.split("."),r=t,i=0;i<n.length;i++)r=r[n[i]];return r}var n={result:null,iframe:null},r=new Array;if(e.params)for(var i=0;i<e.params.length;i++)r.push(e.params[i].value);var o=window;if(e.iframe){if(o=mtjQuery(e.iframe),0==o.length)throw"Iframe not found: "+e.iframe;o=o.contents()[0],o=o.parentWindow||o.defaultView,n.iframe=mtjQuery(e.iframe)}var a=t(e["function"],o);if(!a)throw"Function not found: "+e["function"];var s;if(e["this"]){if(s=t(e["this"],o),!s)throw"'This' not found: "+e["this"]}else s=-1==e["function"].indexOf(".")?null:t(e["function"].substring(0,e["function"].lastIndexOf(".")),o);var u=a.apply(s,r);return n.result=u,n}var p=this;p.LocalSVNRevision="$Rev$";var g=["parent","children","next"];p.findElementsByjQueryComplexSelector=function(e){e=Np(e,["&",'"',"'",">"]);var t=d(e),n=c(t);return n},p.getjQueryElementText=function(t){var n=p.findElementsByjQueryComplexSelector(t);return e.checkElementText(n)},p.findElements=function(e,n){if(!e.JquerySelector)return[];var r=e.JquerySelector;r=r.replace(/&quot;/gi,'"'),r=r.replace(/&apos;/gi,"'"),r=r.replace(/&#39;/gi,"'"),r=r.replace(/&amp;/gi,"&"),r=r.replace(/&gt;/gi,">");var i,o="context:",a=",element:",s="func:";if(ls(r,o)){var u=r.substr(o.length),l=u.substr(u.indexOf(a)+a.length);u=u.substr(0,u.indexOf(a));var p=mtjQuery(u);if(!(p.length>0))return[];"IFRAME"==Ns(p[0])?e.ElementDescription.extended.elementIframe=p:e.ElementDescription.extended.elementIframe=!1,p=p.contents(),i=mtjQuery(l,p),Za("jQuery selector found these elements:",5),Za(v,5)}else if(ls(r,s))try{var g=r.substr(s.length),h=mtjQuery.parseJSON(g),m=f(h);m.iframe&&(e.ElementDescription.extended.elementIframe=mtjQuery(m.iframe));var v=mtjQuery(m.result);return(void 0==n||n)&&(v=v.filter(t.getVisibleFilter(e))),Za("func selector found these elements:",5),Za(v,5),v}catch(y){return Ef?(console.log("Using jQuery selector with function raised an exception:"),console.log(y)):(Za("Using jQuery selector with function raised an exception:"),Za(y)),[]}else{var w=d(r);i=c(w,e)}return i.length>0&&(void 0==n||n)&&(i=i.filter(t.getVisibleFilter(e))),Za("jQuery selector found these elements:",5),Za(i,5),i},n.apply(null,arguments)}function zt(e,t){function n(){}function r(){for(var t=e.getUiDataProvider().uiObjectsTree(),n=0;n<t.length;n++)if(i(t[n]))return!0;return!1}function i(e){if("task"==e.type())return!0;var t=e.children();if(!t||0===t.length)return!1;for(var n=0;n<t.length;n++)if(i(t[n]))return!0;return!1}function o(){if(!t.isIEBrowser(9,"lte"))return!0;var e="abTasksIE"+t.browser.version;return Mf(e)?!0:!1}this.LocalSVNRevision="$Rev$";var a=this;a.shouldTrackAbTasks=function(){var t=parseInt(e.getSiteConfig().TodoListSettings.isActive);return t&&r()?!0:Mf("untrack_tasks")&&!t?!1:o()},n.apply(null,arguments)}function Yt(e,t,n){function r(){v=e.wrapCustomerLog(Ys),"Edge"==n.browser.name&&(b="Arial")}function i(e,t){for(var n=0;n<e[0].ownerDocument.styleSheets.length;n++)if(e[0].ownerDocument.styleSheets[n][t])return!0;return!1}function o(e,t,n,r){v("Start loading embeded file for font '"+e.name+"'",4),y.push({name:"walkme-"+e.name,tagId:t,head:n}),wmjQuery.ajax({type:"GET",url:r+".js",dataType:"script",cache:!0})}function a(e){for(var t=0;t<y.length;t++)if(y[t].name==e){var n=y[t];return y.splice(t,1),n}}function s(e,r,i,o){v("Start loading eot file for font '"+e.name+"'",4),o+=".eot",n.isIEBrowser(8)&&Mf("fixFontsCompatibility")&&(o+="?frame="+t.getFrameIndex(i[0].ownerDocument.parentWindow));var a=Lu.to_html(C,{family:"walkme-"+e.name,src:o,weight:"normal",style:"normal"});n.isIEBrowser(8)?g(a,r,i):p(a,i,e.name,r)}function u(e){e&&(l(top),E.libSetTimeout(function(){u(e-1)},100))}function l(e){try{var t=wmjQuery("head",e.document);g("",w,t),E.libSetTimeout(function(){t.find("#"+w).remove()},100)}catch(n){}for(var r=e.frames,i=0;i<r.length;i++)l(r[i])}function c(e,t,n,r){if(!n&&!r)return void v("Stop Tracking font '"+e.name+"' because we don't have success/fail Callback",4);v("Start tracking font '"+e.name+"'",4);var i=wmjQuery(t.createElement("span")).addClass("walkme-font-tester").important({position:"absolute",top:"-9999px",left:"-9999px",visibility:"hidden","font-family":b,"font-size":"250px","line-height":"normal"}).html((e.dummeyText||S)+"a").appendTo(wmjQuery("body",t).or("html",t)),o=i[0].offsetWidth,a=i[0].offsetHeight,s="walkme-"+e.name;i.important("font-family",s+","+b),d(i,o,a,I,s,n,r)}function d(e,t,n,r,i,o,a){var s=5;v("================================================================================",s),v("Tracking font '"+i+"'",s),v("Comparison tester width: "+t+" === "+e[0].offsetWidth,s),v("Comparison tester height: "+n+" === "+e[0].offsetHeight,s),v("================================================================================",s),t===e[0].offsetWidth&&n===e[0].offsetHeight?0>r?(v("Finished with failure tracking font '"+i+"'",4),e.remove(),a&&a()):E.libSetTimeout(function(){d(e,t,n,r-T,i,o,a)},T):(v("Finished successfully tracking font '"+i+"'",4),e.remove(),o&&o())}function f(){return!!document.createStyleSheet}function p(e,t,n,r,i){try{var o,a=t?t[0].ownerDocument:wmjQuery("body")[0].ownerDocument;i&&(o=h(i,a));var s=void 0===o?a.createStyleSheet(""):a.createStyleSheet("",o);s.cssText=e,s.owningElement.id=r,s.walkmeToRemove=!0,s[n]=!0}catch(u){throw v("Cannot inject style sheet"),u}}function g(e,t,n,r,i){var o,a=n||wmjQuery("head");Ef&&mtjQuery("#"+t,a).remove();var s=wmjQuery('<style type="text/css" class="walkme-to-remove">'+(i?"":e)+"</style>");if(t&&s.attr("id",t),r&&(o=a.find("#"+r)),o&&o.exist()?o.first().before(s):a.append(s),i){var u=s.prop("styleSheet");u?u.cssText=e:s.append(e)}return s}function h(e,t){for(var n=t.styleSheets,r=0;r<n.length;r++)if(n[r].owningElement.id==e)return r}var m=this;m.LocalSVNRevision="$Rev$";var v,y=[],w="walkme-framesets-fix-id",b="Comic Sans MS",S="QW@HhsXJ",T=50,I=2500,C=function(e,t,n){var r=this;return r.b(n=n||""),r.b("@font-face {"),r.b("\n"+n),r.b("font-family: '"),r.b(r.v(r.f("family",e,t,0))),r.b("';"),r.b("\n"+n),r.b("src: url("),r.b(r.v(r.f("src",e,t,0))),r.b(") "),r.s(r.f("format",e,t,1),e,t,0,69,89,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("format('"),n.b(n.v(n.f("format",e,t,0))),n.b("')")}),e.pop()),r.b(";"),r.b("\n"+n),r.b("font-weight: "),r.b(r.v(r.f("weight",e,t,0))),r.b(";"),r.b("\n"+n),r.b("font-style: "),r.b(r.v(r.f("style",e,t,0))),r.b(";"),r.b("\n"+n),r.b("}"),r.fl()},E=Us.get("TimerManager");m.font=function(r,a,l,d){if(Mf("noFonts")||t.isMobileNative())return void(l&&l());if(a&&a.length||(a=wmjQuery("head")),!a.length)return e.error(null,"cannot inject font - head element does not exist"),void(d&&d());var f=a[0].ownerDocument;if(n.isIEDoc(8,"lte",a[0])&&"widget-font"!=r.name&&!Mf("loadAllFonts"))return v("Not loading font '"+r.name+"' (IE7/8), to load all fonts enable the loadAllFonts feature",4),void(l&&l());v("Start loading font '"+r.name+"'",4);var p="wm-font-"+r.id,g=wmjQuery("#"+p,a);if(g&&g.length)return void c(r,f,l,d);var h=m.getResourcePath(r.url);if(n.isIEDoc(8,"lte",a[0])){if(i(a,r.name))return void c(r,f,l,d);s(r,p,a,h)}else o(r,p,a,h);var y;y=n.isIEDoc(8,null,a[0])?function(){Mf("highPerf")||u(5),l&&l()}:l,c(r,f,y,d)},m.preloadResources=function(e,t){var r;e=e||wmjQuery("head");for(var i=0;i<t.length;i++){var r=m.getResourcePath(t[i].url);r+=n.isIEDoc(8,null,e[0])?".eot":".js";var o=new Image;o.src=r,o.onload=function(){}}},m.fonts=function(e,t,n,r){var i=e.length,o=!1;if(i||n&&n(),n||r)for(var a=0;a<e.length;a++)m.font(e[a],t,function(){0==--i&&(o?r&&r():n&&n())},function(){o=!0,0==--i&&r&&r()});else for(var a=0;a<e.length;a++)m.font(e[a],t)},m.finishFontLoad=function(e,t){v("finish loading font '"+e+"'",4);for(var n="",r=0;r<t.length;r++)n+=Lu.to_html(C,{family:e,src:t[r].src,format:t[r].format,weight:t[r].weight,style:t[r].style});var i=a(e);m.injectCss(n,i.tagId,i.head,e,null,!0)},m.getResourcePath=function(e){return e&&e.indexOf("/")?e:e=Wc+e},m.injectCss=function(e,t,n,r,i,o){f()?p(e,n,r,t,i):g(e,t,n,i,o)},m.refreshContentCss=function(e,t){var n=g(t+" :before,"+t+" :after{content:none !important;}",null,e);E.libSetTimeout(function(){n.remove()},0)},m.emptyStyleSheets=function(){if(f())for(var e=document.styleSheets,t=0;t<e.length;t++)e[t].walkmeToRemove&&(e[t].disabled=!0)},r.apply(null,arguments)}function qt(e){function t(i,o,a){var s=(new Date).getMilliseconds();if(wmjQuery(i).find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){var e=n(this,o);e.documentAccessible&&t(wmjQuery(e.iframe.contentWindow.document),e),a&&r(e)}),void 0==o){var u=(new Date).getMilliseconds(),l=u-s;e("Mapping iframes took "+l+" ms",5)}}function n(n,i){var a={iframe:n,documentAccessible:o(n),children:[]};return i?i.children.push(a):s.push(a),r(a),wmjQuery(n).on("load.wmIframeManager",function(){a.children=[],o(n)&&(t(wmjQuery(n.contentWindow.document),a,!0),r(a))}),a.documentAccessible||e("Cross domain iframe detected: "+n.src,4),a}function r(e){for(var t=d.length-1;t>=0;t--)d[t](e)}function i(){s=[],u={children:s}}function o(e){try{e.contentWindow.document}catch(t){return!1}return!0}var a=this;a.LocalSVNRevision="$Rev: 5081 $";var s,u,l=-1,c=!1,d=[],e=e.wrapCustomerLog("IFramesManager");a.mapIframes=function(){c||(i(),t(document,void 0)),c=!0},a.remapTopIframes=function(){var t=(new Date).getMilliseconds();l++,newIframes=[],wmjQuery(document).find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){for(var e=!1,t=0;t<s.length;t++)if(s[t].iframe==this){s[t].foundInRemap=l,e=!0;break}e||newIframes.push(this)});for(var r=0;r<s.length;r++)s[r].foundInRemap!=l&&s.splice(r,1);for(var r=newIframes.length-1;r>=0;r--)n(newIframes[r],void 0);var i=(new Date).getMilliseconds(),o=i-t;e("Remapping top iframes took "+o+" ms",5)},a.getAll=function(){return s},a.foreachIframe=function(e,t){function n(r){for(var i=0;i<r.children.length;i++){var o=r.children[i];(!t||o.documentAccessible)&&(e(o),n(o))}}n(u)},a.onIframeLoad=function(e){d.push(e)},a.releaseEvents=function(){if(s)for(var e=0;e<s.length;e++)wmjQuery(s[e].iframe).off("load.wmIframeManager")},a.getMapping=function(){return u}}function Kt(){function e(){d.redrawElements()}function t(t){function n(){w&&(e(),p.libSetTimeout(n,Us.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW"))),y=w,w=!1}y?b||(w=!0):(e(),y=!0,b=!0,p.libSetTimeout(n,Us.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW")),p.libSetTimeout(function(){b=!1},Us.get("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW")))}var n=this;n.LocalSVNRevision="$Rev$";var r,i,o,a,s,u,l,c,d,f,p,g,h,m=[],v=!1;n.ready=function(e,t,m,y,w,b,S,T,I,C,E,k,_){if(h=E.wrapCustomerLog(ou),r=e,i=t,f=k,p=_,o=m,a=y,s=w,u=b,l=S,c=T,g=[o,a,s,u,l,c],d=n.getSpaConfigValue("legacyRedrawer",!1)?C:I,n.isEnabled()){f.mapIframes();for(var x=[],A=0;A<g.length;A++)g[A].start(),g[A].isActivated()&&x.push(g[A].getSpaTypeName());x.length>0?(v=!0,h("UIChangeTracker - Creating UIChangeTracker for types: "+x.join(", ")+". Using the following redrawer: "+d.getRedrawerName(),2)):h("UIChangeTracker - Did not activate",2)}},this.isEnabled=function(){var e=r.isWalkMeVisible();return e},this.stop=function(){if(n.isEnabled())for(var e=0;e<g.length;e++)g[e].isActivated()&&g[e].stop()},n.bind=function(e,t){t&&"ElementsRedrawerLegacy"!=d.getRedrawerName()||m.push(e)},n.unbind=function(e){for(var t=m.length-1;t>=0;t--)if(m[t]===e){m.splice(t,1);break}},n.callListeners=function(){for(var e=0;e<m.length;e++)try{m[e]()}catch(t){}},n.triggerUIChange=function(){e()},n.triggerThrottledUIChange=function(){t()};var y=!1,w=!1,b=!1;n.isActivated=function(){return v},n.getElementRedrawerType=function(){return d.getRedrawerName()},n.getSpaConfigValue=function(e,t){var n=t;return i.get()&&i.get().Settings&&i.get().Settings.spaConfig&&(n=Ss(i.get().Settings.spaConfig,e,t)),n},n.getSpaConfigIntValue=function(e,t){return t=void 0===t?0:t,parseInt(n.getSpaConfigValue(e,t))}}function Xt(){function e(){r=window.onhashchange,window.onhashchange=function(){r&&r.apply(null,arguments),n.triggerUIChange()}}var t=this;t.LocalSVNRevision="$Rev$";var n,r=null,i=!1;t.ready=function(e){n=e},t.start=function(){n.getSpaConfigValue("hash")&&(e(),i=!0)},t.stop=function(){i&&(window.onhashchange=r,r=null,i=!1)},t.isActivated=function(){return i},t.getSpaTypeName=function(){return"Hash"}}function Jt(){function e(){window.history&&window.history.pushState&&(r=window.onpopstate,window.onpopstate=function(){r&&r.apply(null,arguments),n.triggerUIChange()},i=window.history.pushState,window.history.pushState=function(){i.apply(window.history,arguments),n.triggerUIChange()})}var t=this;t.LocalSVNRevision="$Rev$";var n,r=null,i=null,o=!1;t.ready=function(e){n=e},t.start=function(){n.getSpaConfigValue("history")&&(e(),o=!0)},t.stop=function(){o&&(window.onpopstate=r,r=null,window.history.pushState=i,i=null,o=!1)},t.isActivated=function(){return o},t.getSpaTypeName=function(){return"History"}}function Zt(e){function t(){var e=!i(),t=e?"all iframes/frames":i();Za("UIChangeTracker - iframeLoadSelector config defined. Listening to iframe load events for "+t,2);var a;e?a=o:(n(document),a=r),u.foreachIframe(a,!0),u.onIframeLoad(function(e){e.iframeLoadListenerSet=!1,a(e)})}function n(e){wmjQuery(e).find(i()).on("load.wmSpa",function(){s.triggerUIChange()})}function r(e){if(!e.iframeLoadListenerSet&&e.documentAccessible){var t=wmjQuery(e.iframe.contentWindow.document);n(t),e.iframeLoadListenerSet=!0}}function i(){return s.getSpaConfigValue("iframeLoadSelector")}function o(e){e.iframeLoadListenerSet||(wmjQuery(e.iframe).on("load.wmSpa",function(){s.triggerUIChange()}),e.iframeLoadListenerSet=!0)}var a=this;a.LocalSVNRevision="$Rev$";var s,u,l=!1;a.ready=function(e,t){s=e,u=t},a.start=function(){void 0!=s.getSpaConfigValue("iframeLoadSelector")&&(t(),l=!0)},a.stop=function(){i()&&wmjQuery(i()).off("load.wmSpa"),l=!1},a.isActivated=function(){return l},a.getSpaTypeName=function(){return"IFrame load"}}function en(){function e(){Za("UIChangeTracker - clickSelector config defined. Listening to click events for "+t(),2),wmjQuery(document).on("mousedown.wmSpa",t(),r.triggerThrottledUIChange),wmjQuery(document).on("click.wmSpa",t(),r.triggerThrottledUIChange),wmjQuery(document).on("mouseup.wmSpa",t(),r.triggerThrottledUIChange)}function t(){return r.getSpaConfigValue("clickSelector")}var n=this;n.LocalSVNRevision="$Rev$";var r,i=!1;n.ready=function(e){r=e},n.start=function(){t()&&(e(),i=!0)},n.stop=function(){t()&&(wmjQuery(document).off("mousedown.wmSpa"),wmjQuery(document).off("click.wmSpa"),wmjQuery(document).off("mouseup.wmSpa")),i=!1},n.isActivated=function(){return i},n.getSpaTypeName=function(){return"Click"}}function tn(){function e(){n(wmjQuery(document)),s.foreachIframe(t,!0),s.onIframeLoad(function(e){e.userInputListenerSet=!1,t(e)})}function t(e){if(!e.userInputListenerSet&&e.documentAccessible){var t=wmjQuery(e.iframe.contentWindow.document);n(t),e.userInputListenerSet=!0}}function n(e){e.on("click.wmUITrack",a.triggerThrottledUIChange),e.on("dblclick.wmUITrack",a.triggerThrottledUIChange),e.on("mousedown.wmUITrack",a.triggerThrottledUIChange),e.on("mouseup.wmUITrack",a.triggerThrottledUIChange),a.getSpaConfigValue("userInputHoverOff")||(e.on("hover.wmUITrack",a.triggerThrottledUIChange),e.on("mouseenter.wmUITrack",a.triggerThrottledUIChange),e.on("mouseleave.wmUITrack",a.triggerThrottledUIChange),e.on("mousemove.wmUITrack",a.triggerThrottledUIChange),e.on("mouseout.wmUITrack",a.triggerThrottledUIChange),e.on("mouseover.wmUITrack",a.triggerThrottledUIChange)),e.on("keydown.wmUITrack",a.triggerThrottledUIChange),e.on("keypress.wmUITrack",a.triggerThrottledUIChange),e.on("keyup.wmUITrack",a.triggerThrottledUIChange)}function r(){Za("UIChangeTracker - Stopped listening to User Input",2),i(wmjQuery(document))}function i(e){e.off("click.wmUITrack"),e.off("dblclick.wmUITrack"),e.off("mousedown.wmUITrack"),e.off("mouseup.wmUITrack"),a.getSpaConfigValue("userInputHoverOff")||(e.off("hover.wmUITrack"),e.off("mouseenter.wmUITrack"),e.off("mouseleave.wmUITrack"),e.off("mousemove.wmUITrack"),e.off("mouseout.wmUITrack"),e.off("mouseover.wmUITrack")),e.off("keydown.wmUITrack"),e.off("keypress.wmUITrack"),e.off("keyup.wmUITrack"),e.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{i(wmjQuery(this.contentWindow.document)),wmjQuery(this).off("load.wmUITrack")}catch(e){Za("User input change tracker did not stop listening for all iframes.. This can occur for cross-domain iframes ",4)}})}var o=this;o.LocalSVNRevision="$Rev$";var a,s,u=!1;o.ready=function(e,t){a=e,s=t},o.start=function(){a.getSpaConfigValue("userInput")&&(e(),u=!0)},o.stop=function(){r(),u=!1},o.isActivated=function(){return u},o.getSpaTypeName=function(){return"User input"}}function nn(e){function t(){n(window),c.foreachIframe(i,!0),c.onIframeLoad(function(e){e.ajaxCallsListenerSet=!1,i(e)})}function n(e){e.XMLHttpRequest&&(d=e.XMLHttpRequest.prototype.send,r(e.XMLHttpRequest))}function r(e){var t=e.prototype.send,n=function(){var e=this;setTimeout(function(){var t=e.onreadystatechange;e.onreadystatechange=function(){t&&t.apply(e,arguments),l.triggerThrottledUIChange()}},0),t.apply(this,arguments)};e.prototype.send=n}function i(e){!e.ajaxCallsListenerSet&&e.documentAccessible&&(n(e.iframe.contentWindow),e.ajaxCallsListenerSet=!0)}function o(){Za("UIChangeTracker - Stopped listening to Ajax calls",2),a(window),s(wmjQuery(document))}function a(e){e.XMLHttpRequest&&(e.XMLHttpRequest.prototype.send=d)}function s(e){e.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{a(this.contentWindow),s(wmjQuery(this.contentWindow.document)),wmjQuery(this).off("load.wmAjaxResposive")}catch(e){Za("Ajax calls were not overridden for all iframes. (ajax calls ui tracker). This can occur for cross-domain iframes ",4)}})}var u=this;u.LocalSVNRevision="$Rev$";var l,c,d,f=!1;u.ready=function(e,t){l=e,c=t},u.start=function(){l.getSpaConfigValue("ajaxCalls")&&(t(),f=!0)},u.stop=function(){o(),f=!1},u.isActivated=function(){return f},u.getSpaTypeName=function(){return"Ajax Calls"}}function rn(){function e(){p=!1,c.remapTopIframes(),a.callListeners(),t()}function t(){for(var e=i.getLaunchers(),t=0;t<e.length;t++)launcher=e[t],n(launcher)?i.showLauncherForSticky(launcher):launcher.drawable&&launcher.drawable.recalculateOrDestory()}function n(e){var t=e.drawable&&e.drawable.isDrawn();return!e.actionInProgress&&!t}var r=this;r.LocalSVNRevision="$Rev$";var i,o,a,s,u,l,c,d,f=300,p=!1;r.ready=function(e,t,n,r,s,f){i=e,o=t,a=n,u=s.wrapCustomerLog(ou),l=r,c=f,d=Us.get("ProfilerAPI")},r.redrawElements=function(){var t=function(){if(p)return void u("UIChangeTracker - Canceling uiChange, already waiting for redraw",4);u("UIChangeTracker - UI change triggered",2),p=!0;var t=a.getSpaConfigIntValue("redrawTimeout",f);u("UIChangeTracker - redrawing in "+t,4),s&&(s.clear(),s=void 0),s=o.libSetTimeout(e,t)};o.libSetTimeout(t,0)},r.getRedrawerName=function(){return"ElementsRedrawer"},r.profile=function(e){t=e.profile("redrawLaunchers",t)}}function on(){function e(){s=!1,i.getSpaConfigValue("iframeLoadSelector")||i.getSpaConfigIntValue("dontDestoryBalloons")||(ef=!1,da()),n.showAllLaunchers(),i.callListeners()}var t=this;t.LocalSVNRevision="$Rev$";var n,r,i,o,a=300,s=!1;t.ready=function(e,t,o){n=e,r=t,i=o},t.redrawElements=function(){var t=function(){if(s)return void Za("UIChangeTracker - Canceling uiChange, already waiting for redraw",4);Za("UIChangeTracker - UI change triggered",2),s=!0,_lastRedrawTime=new Date;var t=[];i.getSpaConfigValue("iframeLoadSelector")||i.getSpaConfigIntValue("dontDestoryBalloons")||(Ja(),t.push(n.releaseBalloons)),i.getSpaConfigIntValue("dontDestoryLaunchers")||t.push(function(e){n.releaseLaunchers(e,void 0,!0)}),oi({functionsToExecute:t,successCallback:function(){var t=i.getSpaConfigIntValue("redrawTimeout",a);Za("UIChangeTracker - redrawing in "+t,4),o&&(o.clear(),o=void 0),o=r.libSetTimeout(e,t)}})};i.getSpaConfigIntValue("syncUiChange")?t():r.libSetTimeout(t,0)},this.getRedrawerName=function(){return"ElementsRedrawerLegacy"}}function an(e){function t(){return r||(r=ga(),qd==Dl.PAUSED&&(r.state=qd)),r}function n(e){if(void 0==i){var n=t();i=!hd.surveyIsShown()&&e&&(n.state==Dl.PAUSED||n.state==Dl.NOT_RUNNING)||!e&&(n.state==Dl.PAUSED||n.state==Dl.NOT_RUNNING||Zi(n.tutorial,n.step,void 0,void 0,void 0,yu.Sandbox,"- Engagement")<0)}return i}this.LocalSVNRevision="$Rev$";var r,i,o,a={clearCache:function(){r=void 0,i=void 0,o=void 0},checkShouldAutoStart:function(r,i,a){var s=!1;if(r!=e.Tutorial)return!0;if(!o){var u=zf(i.Id),l=wa(u),c=ba(u,!1),d=i.IsWelcomeStep,f=t();s=!(f.state==Dl.RUNNING&&f.step==l)&&n(a)&&(c&&d||Zi(u,l,void 0,void 0,void 0,yu.Sandbox,"- Check if Exists with Skippables")>=l&&!c),o=s||o}return s}};return a}function sn(e,t,n){var r=new an(e),i=t.wrapCustomerLog(tu);this.clearCache=function(){return r.clearCache()},this.checkShouldAutoStart=function(t,o,a){if(t==e.Tutorial){var s=o.Steps[0];if(n.isPassOwnershipStep(s)){if(!n.isOwnerByCondition(s.Id,o.Id))return i("AutoStartHelper - condition not met, not starting"),!1}else if(!n.isOwnerByDefault())return i("AutoStartHelper - not top window, not starting"),!1}return r.checkShouldAutoStart(t,o,a)}}function un(e,t,n,r,i,o,a,s,u,l,c){function d(){s.shouldTrackFinder()&&u.registerProfilerCallback(function(e){y.run=e.profile("runAutoStart",y.run)})}function f(e,t,r){function i(t){var n=p(e,t),r=Ss(t.Settings,"ASRep","visit");return""===r&&(r="visit"),y.checkRepeatCookie(n,r)}var o;w("Checking deployable named: "+t.Name,4);var a=Ss(t.Settings,"ASEnabled",0);if(a){if(o=i(t),!o.shouldStart)return w("Repeat condition doesn't meet, not auto starting: "+t.Name,3),!1;var u=Ss(t.Settings,"ASCTEnabled",0);if(1!=u)return w("Non-conditional autostart, trying to auto start "+t.Name,3),g(e,t,o);w("Autostart is enabled for deployable: "+t.Name,3);var l=Ss(t.Settings,"ASCT","");if(""!=l)try{var c={stopPollingAfterEvaluateTrue:!1,elementPollingIntervalMs:2e3,jqueryPollingIntervalMs:2e3,featureName:tu,elementName:t.Name,trackEvent:Yr(e)+" - Engagement",trackData:s.getTrackData(t)},d=Us.create("ConditionChecker",c),f=!1;d.onEvaluated(function(r){if(r){w("Autostart condition met, trying to auto start: "+t.Name,3),n.clearCache();var i=g(e,t,o,f);i&&-1!=o.repeatCookieExpiry&&d.cleanResources()}Qd("WtAutoStartConditionEvaluated",t)}),d.evaluateAsync(l),f=!0,d.getCachedValue()||w("Condition didn't meet, not starting deployable: "+t.Name,3)}catch(h){}}var m=ma(t,Ol.Action);if(m.length>0&&(o=i(t),o.shouldStart))for(var b=0;b<m.length;b++)if(v(e,t,m[b],o))return!0;return!1}function p(e,t){return 0==e?"wm-ASRep-"+t.Id:"wm-ASRep-"+e+"-"+t.Id}function g(e,t,r,i){if(n.checkShouldAutoStart(e,t,i)){r.store();var o=parseFloat(Ss(t.Settings,"Delay",0));return o?a.libSetTimeout(function(){h(e,t)},1e3*o):h(e,t),!0}return!1}function h(e,t){Qd(c.EVENTS.AutoStartActivated),r.get(e).activateById(t.Id,{type:Ll.AUTOSTART})}function v(e,t,n,r){switch(n.Type){case Ml.AUTO_START:if(Xf(n.Content))return g(e,t,r)}return!1}var y=this,w=t.wrapCustomerLog(tu),b=[i.ShoutOut,i.ShoutOutBar,i.Tutorial,i.Survey];y.LocalSVNRevision="$Rev$",this.run=function(){w("Trying to find a deployable that can auto start",1),n.clearCache(),l.wrapSession(function(){for(var e=0;e<b.length;e++)for(var t=r.get(b[e]),n=t.getAll(),i=0;i<n.length;i++)t.autoStartEnabled(n[i].Id)&&f(b[e],n[i])})},this.checkRepeatCookie=function(n,r,i){var a={shouldStart:!0,repeatCookieExpiry:-1},s=i?o:e;if("always"==r);else{"visit"==r&&(n+="-v");var u=1;s.getData(n,void 0,void 0,u)==u?a.shouldStart=!1:m(r)?a.repeatCookieExpiry=r:"visit"==r?a.repeatCookieExpiry=wu:"once"==r?a.repeatCookieExpiry=Su:t.error(new Error("checkRepeatCookie bad value: "+r))}return a.store=function(){a.repeatCookieExpiry>=0&&s.saveData(n,1,a.repeatCookieExpiry)},a},d.apply(null,arguments)}function ln(e,t,n,r,i,o){function a(t,n){var r=1e3*parseFloat(i.getSettingsValue(t.Settings,"Delay",0)),o=n&&e&&e.enabled()?2*e.crossDomainSampleRate():1;return Math.max(r,o)}function s(){var e=/walkme=([0-9]+)-?([0-9]*)/,t=e.exec(window.location.href);if(t&&t.length>1){var n=t[2]||t[1],i=t[2]?t[1]:r.Tutorial;return{type:parseInt(i,10),id:parseInt(n,10)}}}var u;this.run=function(){var e=s();if(e){var i=e.type==r.Tutorial,l=t.get(e.type);if(!l)return;var c=l.getById(e.id);if(!c)return;var d=a(c,i);Ud.libSetTimeout(function(){Qd(o.EVENTS.PermalinkClicked),l.activateById(e.id,{type:n.getPlayInitiatorEnum().PERMALINK}),i&&(u=!1)},d),i&&(u=!0)}},this.isStartingWalkthru=function(){return u}}function cn(){function e(e){t=e}this.LocalSVNRevision="$Rev$";var t,n=this;n.set=function(e){t=e},n.get=function(){return t},e.apply(n,arguments)}function dn(e){var t=this;this.LocalSVNRevision="$Rev: 6240 $",t.isFeatureEnabled=function(t){var n=e.get();return"undefined"!=n.Features&&n.Features?n.Features.indexOf(t)>-1:!1},t.isReady=function(){var t=e.get();return t&&0!==t.length}}function fn(e,t,n){function r(){var t=n.getData(u);if(t==c&&(t=d),!t&&t!==d&&e.walkme_get_language)try{t=e.walkme_get_language()}catch(r){}return t?t:d}function i(e){return n.getData(u)==e}function o(e,t,r){var i=e.url;return t?(a(t,e.languages)?(i=i.substring(0,i.length-3),i=i+"_"+t+".js"):r||n.removeData(u),i):i}function a(e,t){for(var n=0;n<t.length;n++)if(t[n].shortName==e)return!0;return!1}this.LocalSVNRevision="$Rev$";var s=this,u="wm-lang",l=31536e3,c="_default_",d="",f=[],p=[];s.setLanguages=function(e){f.length=p.length=0;for(var t=0;t<e.length;t++)for(var n=e[t].languages,r=0;r<n.length;r++){var i=n[r];f.push(i),i.showInPlayer&&p.push(i)}},s.getMenuLanguages=function(){return p},s.getCurrentLanguage=function(){var e=r();return a(e,f)?e:d},s.changeLanguage=function(e){var t=e;return e===d&&(t=c),i(t)||!a(e,f)?!1:(n.saveData(u,t,l),!0)},s.fixLanguageUrlInDataFiles=function(e,t){for(var n=r(),i=0;i<e.length;i++){var a=e[i];a.url=o(a,n,t)}return e}}function pn(){function e(e){var t=wmjQuery.inArray(e,l);t>-1&&l.splice(t,1)}function t(e){s||(s=o()),s.css({zIndex:e.zIndex,backgroundColor:e.color||"#000",opacity:e.opacity||.7})}function n(e){t(e),s.insertBefore(e.element)}function r(e,t){return e.zIndex>t.zIndex||e.zIndex==t.zIndex&&e.index>t.index}function i(){if(l.length){for(var e=l[0],t=1;t<l.length;t++)r(l[t],e)&&(e=l[t]);return e}}function o(){var e=wmjQuery('<div id="walkme-overlay-all" style="position: fixed; height: 100%; width: 100%; top: 0; left: 0;"/>');return e}var a=this;a.LocalSVNRevision="$Rev$";var s,u,l=[];this.create=function(o,a,c){var d={element:o,color:c,opacity:a};return{remove:function(){e(d),d==u&&(u=i(),u?n(u):(s.remove(),s=null))},show:function(){d.zIndex=o[0].style.zIndex,d.index=o.index(),wmjQuery.inArray(d,l)<0&&l.push(d),(!u||u==d||r(d,u))&&(u=d,n(d))},getOverlayElement:function(){return s||t(d),s}}}}function gn(e,t,n,r,i){function o(){s=t.get(),u=e.getEndUserGuid(),l=n.get(),c=l+"/EndUserStorage/Get"}var a=this;a.LocalSVNRevision="$Rev$";var s,u,l,c,d=1e4;a.get=function(e,t,n,o){var a={walkmeUserGuid:e,source:s,endUserGuid:u,secondsSinceUpdate:t};i.execute({url:c,data:a,success:function(i,a,l){i.Data.ErrorMessage?(r.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+e+", source: "+s+", end user: "+u+", seconds since update: "+t+". Error: "+i.Data.ErrorMessage+"."),
o&&o()):n(i.Data)},error:function(n,i,a){r.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+e+", source: "+s+", end user: "+u+", seconds since update: "+t+". Error: "+i+"."),o&&o()},timeout:d})},o.apply(null,arguments)}function hn(e,t,n,r,i,o,a,s){function u(){y=n,w=t.getUserGuid(),b=t.getEndUserGuid(),S=i.get(),T=!1}function c(){var e=r.getData(x,null,w),t=r.getData(A,null,w);return!E&&(e!=b||t!=S)}function d(){for(var e=r.getInternalKeys(w),t=0;t<P.length;t++)wmjQuery.each(e,function(n){0==n.indexOf(P[t])&&delete e[n]});for(var n in e)e.hasOwnProperty(n)&&r.removeData(n,w)}function f(){r.saveData(x,b,Su,w),r.saveData(A,S,Su,w)}function p(e){var t=s.getStorageType(),n=t[k]||_;return null===e||e>=n}function g(e,t,n,r){o.get(w,e,function(e){v.updateLocalStorage(e,t),I=0,n&&n()},function(){I=1,r&&r()})}function h(e){return I}function m(t,n,r){var i=!1;return n>=e.TIME_PERIODS.OneHourSeconds&&(i=!0),i}var v=this;v.LocalSVNRevision="$Rev$";var y,w,b,S,T,I,C=!1,E=!0,k="ss_ii",_=wu,x="wm-ceug",A="wm-cenv",P=["wm-c-test","wm-dbg-cnf","wm-dbg","wm-ueug","wm-fgug","wm-gb","wm-load-testme","wm-prsst","wm-sf-lst-usr","wm-sf-users-data","wm-sat","wm-sst","wm-sk","wm-SrvSmt","wm-wtchd","wm-cond-win","wm-prf-stt","wm-prf-snk","wm-cdstop","wm-cdplay","wm-po-pc","wm-po-r","wm-po-q","wm-dt","wm-ne","wm-nx","wm_abg_","wm_ct_","wm-po-p",x,A,"wm-ftr-cnf","wm-ftr","wm-ltm","wm-ct-prv","wm-lg-act"];v.init=function(t,n){if(T)return void(t&&t());T=!0;var i=r.getData(e.STORAGE_KEYS.lastGetDataTime,null,w);i&&(E=!1),c()&&(d(),i=null),f();var o=a.getDateAtUTC(),s=null==i?null:(o-i)/1e3;p(s)?g(s,o,t,n):t&&t()},v.updateLocalStorage=function(t,n){C=E?!0:!1;for(var i=0;i<t.length;i++){var o=t[i];o.IsDeleted?r.removeData(o.Key,w):r.saveData(o.Key,l(o.Value),o.SecondsToExpiry,w)}r.saveData(e.STORAGE_KEYS.lastGetDataTime,n,bu,w)},v.shouldUpdateOldKeys=function(){return C},v.getStorageType=r.getStorageType,v.refreshGetData=r.refreshGetData,v.saveData=function(e,t,n,i){void 0==i&&(i=w),m(e,n,i)&&y.update(e,t,n,i),r.saveData(e,t,n,i)},v.getData=function(e,t,n,i){return void 0!==i&&h(n)&&(t=i),r.getData(e,t,n)},v.addToDictionary=r.addToDictionary,v.removeData=function(e,t){void 0==t&&(t=w),y.remove(e,t),r.removeData(e,t)},v.addToQueue=r.addToQueue,v.convertOldCookieStorage=r.convertOldCookieStorage,v.increment=r.increment,v.getInternalKeys=r.getInternalKeys,v.removeAllData=r.removeAllData,v.sessionSetData=r.sessionSetData,v.sessionGetData=r.sessionGetData,v.setSyncFlag=r.setSyncFlag,u.apply(null,arguments)}function mn(e,t,n,r,i){function o(){s=e.getUserGuid(),u=e.getEndUserGuid(),l=n.get(),c=r.register("us",{actionUrl:"/EndUserStorage/Update",prefixForStorage:"us",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:a.updateRequestParamsFunc,shouldTruncateData:!1}),d=r.register("rs",{actionUrl:"/EndUserStorage/Remove",prefixForStorage:"rs",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:a.removeRequestParamsFunc,shouldTruncateData:!1})}var a=this;a.LocalSVNRevision="$Rev$";var s,u,l,c,d;a.update=function(e,n,r,i){s=i||s;var o={Key:e,Value:t.toJSON(n),Expiry:r};c.sendData(o)},a.remove=function(e,t){s=t||s,d.sendData({Key:e})},a.getUpdateTypedDataSender=function(){return c},a.getRemoveTypedDataSender=function(){return d},a.updateRequestParamsFunc=function(e){return{walkmeUserGuid:s,source:l,endUserGuid:u,keyValueExpiryListSerialized:t.toJSON(e)}},a.removeRequestParamsFunc=function(e){return{walkmeUserGuid:s,source:l,endUserGuid:u,keyListSerialized:t.toJSON(e)}},o.apply(null,arguments)}function vn(e,t,n,r,i){function o(){g=n.wrapCustomerLog("SettingsCacheManager")}function a(){var n=t.getPublishDate(),r=t.getUrl();if(g("SettingsCacheManager.shouldCheckSettings - publishDate: "+new Date(n),5),g("SettingsCacheManager.shouldCheckSettings - settingsUrl: "+r,5),n&&r){h=e.getStorageManagerInstance(c);var i=h.isEnabled();if(g("SettingsCacheManager.shouldCheckSettings - storageManagerEnabled: "+i,5),i){var o=h.getData(d);return g("SettingsCacheManager.shouldCheckSettings - settingsFileCacheBust: "+o,5),!o}}return!1}function s(){var e=t.getUrl()+"?b="+(new Date).getTime();g("SettingsCacheManager - Fetching newest settings file from: "+e,3),i.execute({url:e,cache:!1,dataType:"jsonp",jsonpCallback:"fixedCallback",success:u,error:l})}function u(e,t,n){var i=e.PublishDate;if(g("SettingsCacheManager.settingsFileReceived - publishDate: "+new Date(i),5),i){var o=((new Date).getTime()-i)/1e3;if(g("SettingsCacheManager.settingsFileReceived - secondsSincePublish: "+o,5),f>o){var a=f-o;g(r.formatString("SettingsCacheManager - Will fetch newset settings file in the next {0} seconds",a),3),h.saveData(d,!0,a)}}}function l(e,t,n){g(r.formatString("SettingsCacheManager - Error fetching settings file. jqXHR: {0}, textStatus: {1}, errorThrown: {2}",e,t,n))}var c="jstorage",d="wm-settings-cache-bust",f=3600,p=this;p.LocalSVNRevision="$Rev$";var g,e,h;this.start=function(){g("SettingsCacheManager.start - Check if need to fetch settings ",5),a()?s():g("SettingsCacheManager - No need to check settings file",3)},o.apply(null,arguments)}function yn(e,t,n,r,i){function o(){g=e.getUserGuid()}function a(e){for(var n in e)if(e.hasOwnProperty(n)){var r=s(n,e);r.Key&&t.saveData(r.Key,r.Value,r.Expiry,g)}}function s(e,t){var n,r={};if(h[e])n=h[e];else if(y[e])n=u(e);else{var i=d(e);if(i){var o=i.KeyWithoutSuffix;m[o]?n=m[o]:v[o]&&(n=l(i))}}return n&&(r.Key=e,r.Value=t[e],r.Expiry=n),r}function u(t){var n=y[t],i=n.SettingsKey,o=n.PropertyForKey,a=r.getSettingsValue(e.getSiteConfig().Settings[i],o,void 0),s=c(a);return s}function l(e){var t=v[e.KeyWithoutSuffix],i=e.SuffixParts;if("v"==i[i.length-1])return wu;for(var o=0;o<t.length;o++){var a=t[o];if(a.Parts==i.length){var s,u=a.DeployableTypeIndex,l=void 0!==u?i[u]:a.DeployableType,d=n.get(parseInt(l)),f=d.getById(i[a.DeployableIdIndex]);a.SubSettings?s=r.getSettingsValue(f.Settings,a.SubSettings,void 0):f&&(s=f.Settings);var p;return s&&(p=r.getSettingsValue(s,a.SettingsKey,void 0)),c(p)}}}function c(e){var t;return r.isNumber(e)&&e>=wu?t=e:"once"==e&&(t=Su),t}function d(e){var t,n,r=e.split(w);if(r.length>1){var i,o=r[0]+w+r[1];r.length>2&&(i=o+w+r[2]),wmjQuery.inArray(i,b)>-1?(t=i,n=r.slice(3)):(t=o,n=r.slice(2))}var a={KeyWithoutSuffix:t,SuffixParts:n};return a}function f(e){for(var o=n.get(0),a=o.getAll(),s={},u=0;u<a.length;u++)for(var l=a[u].Steps,c=0;c<l.length;c++){var d=l[c];if(i.isActionStep(d)){var f=r.getSettingsValue(d.Settings,"action",null);if(f&&"setWalkMeData"==f.actionType){var p=f.arguments,h=p.dataKey;if(e[h]){var m=p.dataDuration;if(m>=wu)if(s[h])m>s[h].Expiry&&(s[h].Expiry=m);else{var v=e[h];if(void 0!==v){var y={Value:v,Expiry:m};s[h]=y}}}}}}for(var h in s)s.hasOwnProperty(h)&&t.saveData(h,s[h].Value,parseInt(s[h].Expiry),g)}var p=this;p.LocalSVNRevision="$Rev$";var g,h={"wm-lang":bu,"wm-ldv":Su,"wm-ag-rep-v":wu,"wm-ag-d":Su},m={"wm-stpcond":Su},v={"wm-ASRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"ASRep",DeployableType:Fl.Tutorial},{Parts:2,DeployableTypeIndex:0,DeployableIdIndex:1,SettingsKey:"ASRep"}],"wm-SrvWtRep":[{Parts:2,DeployableIdIndex:0,SubSettings:"survey",SettingsKey:"repeat",DeployableType:Fl.Tutorial}],"wm-SrvRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"repeat",DeployableType:Fl.Survey}]},y={"wm-ag-rep":{SettingsKey:"AG",PropertyForKey:"repeat"}},w="-",b=["wm-ag-rep"];p.convertData=function(){if(t.shouldUpdateOldKeys&&t.shouldUpdateOldKeys()){var e=t.getInternalKeys(g);a(e),f(e)}},o.apply(null,arguments)}function wn(e,t){function n(){}var r=this;r.LocalSVNRevision="$Rev$",r.init=function(n){function i(e,t,i){fi("loadWalkmeConfigEnd"),window._walkmeInternals=window._walkmeInternals||{},window._walkmeInternals.walkmeConfig=e,r.Data=e,n&&n()}var o=t.getSettingsFile(),a=o.WalkMeConfigFile;a?(fi("loadWalkmeConfigStart"),e.loadTextFile(a,"WalkMeConfigCallback",i,void 0,!0)):n&&n()},n.apply(null,arguments)}function bn(e,t,n){function r(){}function i(e,n){var r;if(n=n||{},e.Actions&&(r=wmjQuery.grep(e.Actions,function(e){return e.Type!=u})[0])){var i=l[r.Type];if(i){n.Type=i.eventType;var o=r.Args;o&&o[i.idField]&&(n.ItemId=o[i.idField].toString(),n.Name=t.getDeployableName(i.deployableType,n.ItemId))}}return n}function o(e){var t=e.Actions;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(r.Type!=u&&r.Type!=s)return!0}return!1}var a=this,s="none",u="destroy",l={};l=n.isMobileNative()?{rateApp:{eventType:e.EVENT_SENDER_IOS_ACTION_TYPES.RateApp},openSettings:{eventType:e.EVENT_SENDER_IOS_ACTION_TYPES.OpenSettings},browseToPage:{eventType:e.EVENT_SENDER_IOS_ACTION_TYPES.BrowseToPage},playVideo:{eventType:e.EVENT_SENDER_IOS_ACTION_TYPES.PlayVideo},none:{eventType:e.EVENT_SENDER_IOS_ACTION_TYPES.None}}:{playWt:{idField:"wtId",deployableType:e.DEPLOYABLE_TYPE.Tutorial,eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.Walkthru},playContent:{idField:"contentId",deployableType:e.DEPLOYABLE_TYPE.Content,eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.Resource},playShuttle:{idField:"shuttleId",deployableType:e.DEPLOYABLE_TYPE.Shuttle,eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.Shuttle},openMenu:{eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.Menu},none:{eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.None}},a.fillActionData=i,a.isWithAction=o,r.apply(null,arguments)}function Sn(e,t){function n(){}function r(e,n){if(n=n||{},null==e)return n;var r=e.Settings;if(r&&r.action){var i=r.action,o=s[i.actionType];if(o){n.Type=o.eventType;var a=i.arguments;a&&a[o.idField]&&(n.ItemId=a[o.idField].toString(),n.Name=t.getDeployableName(o.deployableType,n.ItemId))}}return n}function i(e){var t=e.Settings;if(t&&t.action){var n=t.action.actionType;if(n&&n!=a)return!0}return!1}var o=this,a="none",s={playWt:{idField:"wtId",deployableType:e.DEPLOYABLE_TYPE.Tutorial,eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.Walkthru},playContent:{idField:"contentId",deployableType:e.DEPLOYABLE_TYPE.Content,eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.Resource},playSurvey:{idField:"surveyId",deployableType:e.DEPLOYABLE_TYPE.Survey,eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.Survey},shoutOut:{idField:"id",deployableType:e.DEPLOYABLE_TYPE.ShoutOut,eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.ShoutOut},openMenu:{eventType:e.EVENT_SENDER_ACTION_ENTITY_TYPES.Menu}};o.fillActionData=r,o.isWithAction=i,n.apply(null,arguments)}function Tn(e){function t(){}function n(t,n){if(null!=t&&null!=n){var r=e.getDeployablesManager(t);if(r){var i=r.getById(n);return i?i.Name:void 0}}}var r=this;r.getDeployableName=n,t.apply(null,arguments)}function In(e,t){function n(){s={}}function r(){var n=e.get().Settings;if(n&&n.analyticsProperties)for(var r=0;r<n.analyticsProperties.length;r++){var i=n.analyticsProperties[r],o=t.get(i);s[i.name]=o}}function i(e,n){var r=t.getPredefinedProvider(n);s[e]=r}function o(e){return s[e]?s[e].get():void 0}var a=this;a.setPredefinedPropertyValue=i,a.getPropertyValue=o,a.init=r;var s;n.apply(this,arguments)}function Cn(e,t,n){function r(){}function i(n){var r=o(n);if(e.isFeatureEnabled(t.FEATURES.StickyCustomVars)){var i={calculateValueFunc:r};return Us.create("StickyValueProvider",i)}var s=r();return a(s)}function o(e){var t=n.get(e.calculationMethod),r=e.variable,i=function(){return t.calculate(r)};return i}function a(e){var t={value:e};return Us.create("PredefinedValueProvider",t)}var s=this;s.get=i,s.getPredefinedProvider=a,r.apply(this,arguments)}function En(e){function t(e){a=e.calculateValueFunc,r()}function n(){return void 0===o&&r(),o}function r(){o=a()}var i=this;i.get=n;var o,a;t.apply(this,[e])}function kn(e){function t(e){i=e.value}function n(){return i}var r=this;r.get=n;var i;t.apply(this,[e])}function _n(e,t){function n(){}function r(e,t){if(_makeTutorial.getHostData().isIEBrowser())if(window.dispatchEvent){var n=document.createEvent("UIEvents");n.initUIEvent(t,!0,!0,window,1);e.dispatchEvent(n)}else"input"==t&&(t="propertychange"),e.fireEvent("on"+t);else e.dispatchEvent(new Event(t,{bubbles:!0}))}function i(e){var t=e.closest("a");e=0!==t.length?t:e,wmjQuery.each(g,function(t,n){s(e,n,wmjQuery),window.jQuery&&s(e,n,jQuery),u(e,n)})}function o(e,t){switch(t){case g.MouseOver:e.trigger("mouseover");break;case g.MouseEnter:default:e.trigger("mouseenter")}}function a(e){var t=e.find("*:mt_hidden");t.css("display","block"),t.css("visibility","visible"),t.css("opacity","1")}function s(e,t,n){var r=l(e,!0);wmjQuery.each(r,function(e,r){r=n(r),o(r,t)})}function u(e,t){var n=l(e,!0);wmjQuery.each(n,function(e,n){r(n,t)})}function l(e,t){var n=e.find("*:mt_visible");return t&&n.push(e[0]),n}function c(e){for(var n=!0,r=e[0].ownerDocument,i=r.styleSheets,o=0;o<i.length;o++){var a=i[o];try{for(var s=a.cssRules||a.rules,u=0;u<s.length;u++){var l=s[u];l&&l.selectorText&&l.selectorText.indexOf(":hover")>-1&&d(e,l)}}catch(c){n=!1,t.customerLog("OpenCssMenu error. ex:"+c,5)}}return n}function d(e,t){var n=f(t),r=t.selectorText.split(","),i=new RegExp("([^:]*):hover(.*)");wmjQuery.each(r,function(t,r){var o=i.exec(r);if(!o)return!0;var a=o[1],s=e.parents().andSelf().filter(a),u=o[2];""!=u&&(s=s.find(u)),wmjQuery.each(s,function(e,t){wmjQuery(t).css(n)})})}function f(e){var t=(e.style.cssText,e.cssText.replace(e.selectorText,""));return t=t.trim().replace(/"/g,"'").replace(/: /g,'":"').replace(/; /g,'","').replace("{ ",'{"').replace(',"}',"}"),t=JSON.parse(t)}var p=this,g={MouseEnter:"mouseenter",MouseOver:"mouseover"};p.click=function(e,t){r(e[0],"mousedown"),r(e[0],"mouseup"),e.trigger("mouseover"),e[0].click(),t&&t()},p.hover=function(e,t){i(e);var n=c(e);n||a(e.is("a")&&e.parent().is("li")?e.parent():e),t&&t()},p.text=function(e,t,n,i){n=n||0,r(e[0],"focus"),setTimeout(function(){e.val(t),r(e[0],"paste"),r(e[0],"input"),setTimeout(function(){r(e[0],"change"),r(e[0],"blur"),i&&i()},n)},n)},p.select=function(e,t,n){e.val()!=t&&(r(e[0],"focus"),e.val(t),r(e[0],"change")),n&&n()},n.apply(null,arguments)}function xn(e,t,n){function r(){i(),p()}function i(){for(var e="",t=[],n=wmjQuery(document.styleSheets).toArray(),r=0;r<n.length;r++){sheet=n[r];try{var i=sheet.cssRules;i?e+=s(i):t.push(function(e){a(sheet.href,e)})}catch(u){t.push(function(e){a(sheet.href,e)})}}C.push(e);var l=_makeTutorial.getExecuteParallel();l({functionsToExecute:t,successCallback:function(){o()}})}function o(){var e=C.join("\n");n.injectCss(e,"walkme-hover-css")}function a(t,n){if(!t)return void n();try{var r="+++wmplaceholder+++";wmjQuery.ajax({url:t,success:function(e){var t=e.replace(/\}/g,"}"+r).split(r),i=t.map(function(e){return{cssText:e,selectorText:e.substring(0,e.indexOf("{"))}}),o=s(i);C.push(o),n()},error:function(){e.customerLog("Failed getting hover css rules using ajax, url is: "+t,3),n()}})}catch(i){e.customerLog("Failed getting hover css rules using ajax, url is: "+t,3),n()}}function s(t){var n="";try{for(var r=0;r<t.length;r++){var i=t[r],o=i.cssText;if(o.indexOf(":hover")>-1){n+="\n"+d(o);var a=i.cssRules;if(a)for(var s=0;s<i.cssRules.length;s++){var u=d(i.cssRules[s].selectorText);c(u)}else{var u=d(i.selectorText);c(u)}}}}catch(l){e.customerLog("Failed parsing css rule, rule is",3)}return n}function u(e){T=e,S=e.parents().add(e),S.addClass(y),I=!0}function l(e,t){var n=e.parentsUntil(t).add(e);n.removeClass(y)}function c(n){try{wmjQuery(n),b.push(n)}catch(r){var i=t.formatString("Unable to parse selector '{0}'",n);e.customerLog(i,3)}}function d(e){return e.replace(/:hover/g,"."+y)}function f(){S.removeClass(y),I=!1}function p(){_walkmeInternals.bind("NewStepShown",v),_walkmeInternals.bind("WalkthruCompleted",g),_walkmeInternals.bind("TutorialStopped",g)}function g(){t.libSetTimeout(f,1500)}function h(e,t){if(e===t)return e;if(wmjQuery(t).parents().is(e))return e;if(wmjQuery(e).parents().is(t))return t;var n=wmjQuery(t).parents().has(e).first();return n}function m(e){if(void 0!=T&&e!=T){var t=h(e,T);l(T,t)}}function v(e,t,n){if(I&&n&&n.Element){var r=n.Element;m(r),T=r}}var y="wm-se-hover",w=this,b=[],S=wmjQuery(),T=void 0,I=!1,C=[];w.hover=function(e){m(e),u(e)},r.apply(null,arguments)}function An(){function e(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var n=this;n.generateGuid=e}function Pn(e){function t(t){var n=e.getCookie(t);return n===!1?void 0:n}var n=this;n.calculate=t}function Dn(e){function t(t){var n=e.getjQueryElementText(t);return""===n?void 0:n}var n=this;n.calculate=t}function Nn(e){function t(t){var n=e.getWindowVar(t);return n}var n=this;n.calculate=t}function Ln(e,t,n,r,i){function o(o){switch(o){case t.VALUE_CALCULATOR_TYPE.JQuery:return r;case t.VALUE_CALCULATOR_TYPE.Cookie:return n;case t.VALUE_CALCULATOR_TYPE.Variable:return i;default:e.error(new Error("Unknown calculation method"))}}var a=this;a.get=o}function On(e,t,n,r){function i(e,t,n){this.doAction=function(){try{void 0!=window.WalkMePlayerAPI&&WalkMePlayerAPI.toggleMenu(o(t,n))}catch(e){Za(p("Failed opening menu. Exception: {0}",u(e)))}}}function o(e,t){var n={type:e};return t&&(n.objectId=t.Id),n}function a(e,t,n){this.isValid=function(){return!0},this.doAction=function(){try{var r=e.playWtFromBeginning?0:Yf(e.StepId,e.wtId);if(-1==r){var i=p("Step with id: {0} was not found in walkthru with id {1}",e.StepId,e.wtId);Za(i)}else WalkMeAPI.startWalkthruById({id:parseInt(e.wtId),fromStep:r,playInitiator:{type:t,objectId:n.Id}})}catch(o){var a="Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",i=p(a,e.wtId,e.StepId,u(o));Za(i)}}}function s(e,t,n){this.isValid=function(){return!0},this.doAction=function(){try{var r=e.contentId;WalkMeAPI.startContentById(r,t,n.Id)}catch(i){var o="Failed playing content with id {0}. Exception is: {1}",a=p(o,e.wtId,u(i));Za(a)}}}function l(e,t,n){this.isValid=function(){return!0},this.doAction=function(){try{var r=e.surveyId,i={type:t,objectId:n?n.Id:void 0};WalkMeAPI.startSurveyById(r,i)}catch(o){var a="Failed playing survey with id {0}. Exception is: {1}",s=p(a,e.surveyId,u(o));Za(s)}}}function c(e,t,n){this.isValid=function(){return!0},this.doAction=function(){try{md.activateById(e.id,{type:t,objectId:n.Id})}catch(r){Za(p("Failed playing deployable with id {0}. Exception is: {1}",e.wtId,u(r)))}}}function d(e){this.isValid=function(){return!0},this.doAction=function(){}}function f(t){this.isValid=function(){return!0},this.doAction=function(){Ca(),Ta(t.redirectUrl,!0)||(Ca(),e.executeTutorialNextStep())}}function g(e,t,n){function r(e){for(var t=0;t<Sc.length;t++)if(Sc[t].TutorialId==e)return!0;return!1}this.isValid=function(){return r(e.wtId)},this.doAction=function(){var t,r=e.wtId;1==e.returnToWt?(t=Yf(e.StepId,n.TutorialId),Wo([r],t,!1,e.startingStepId)):Wo([r],t,!0,e.startingStepId)},this.getGoToData=function(){var t=zf(e.wtId);return{tutorialIndex:t,stepIndex:0}}}function h(t){this.type="stopWt",this.isValid=function(){return!0},this.doAction=function(){Ca(),e.stopTutorial()}}function m(t,r,i){function o(e,t){return-1!=Yf(e,t)}this.isValid=function(){return o(t.StepId,i.TutorialId)},this.doAction=function(){var r=t.StepId,o=Yf(r,i.TutorialId);Ca(),o>Yd&&zi(zd,Yd+1,o,n.STEP_STATUS.SkippedByActionStep),Yd=o,e.executeCurrentStep()},this.getGoToData=function(){var e=t.StepId,n=Yf(e,i.TutorialId),r=zf(i.TutorialId);return{tutorialIndex:r,stepIndex:n}}}function v(t,n,r){this.isValid=function(){return void 0!=window.WalkMePlayerAPI},this.doAction=function(){try{Ca(),WalkMePlayerAPI.toggleMenu(o(n,r))}catch(t){}e.executeTutorialNextStep()}}function y(t){this.isValid=function(){return!0},this.doAction=function(){qd=Dl.WAITING_FOR_CONDITION,ua();var n=Gf(Yd),r={evaluationPollingIntervalMs:500,jqueryPollingIntervalMs:500,featureName:ru,elementName:"Wait for condition step: "+n.StepTitle},i=Us.create("ConditionChecker",r),o=t.condition;i.onValueChanged(function(t){Fo()&&Qd("ActionConditionEvaluated",n),t&&(Ca(),e.executeTutorialNextStep())}),i.evaluateAsync(o),Lf.push(i)}}function w(t){this.isValid=function(){return!0},this.doAction=function(){return ua(),Ud.playSetTimeout(function(){Ca(),e.executeTutorialNextStep()},1e3*t.duration),!0}}function b(){this.isValid=function(){return!0},this.doAction=function(){Ca(),ua(),Ud.libSetTimeout(function(){location.reload(!0)},200)}}function S(t,n,i){function o(t){if(Za("Checking condition..."),t)try{return e.evaluateConditionTree(t)}catch(n){}return!0}function a(){var e=Vi();return e&&zd&&e.TutorialId==zd.Id&&e.StepIndex<=Yd?!0:!1}this.isValid=function(){return!0};var s={stepId:i.Id,tutorialId:i.TutorialId};this.doAction=function(){if(r.saveData(Sf,(new Date).getTime(),3600),o(t.condition))Dd.switchOwner(s,!1),Ca(),e.executeTutorialNextStep();else{if(!Dd.enabled())return Za("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void e.tutorialFinished();qd=Dl.PASSING_OWNERSHIP,Yd++,a()||ua(),Dd.switchOwner(s,!0)}}}function T(n){this.isValid=function(){return!0},this.doAction=function(){t.saveData(n.dataKey,n.dataValue,n.dataDuration),Ca(),e.executeTutorialNextStep()}}function I(e){this.isValid=function(){return!0},this.doAction=function(){e&&e.uiComponent&&e.uiComponent.destroy()}}function C(t,n,r){this.isValid=function(){return!0},this.doAction=function(){try{var i={type:n};r&&(i.objectId=r.Id);var o=t.shuttleId;e.getDeployablesManager(Fl.Shuttle).activateById(o,i)}catch(a){var s="Failed playing shuttle with id {0}. Exception is: {1}",l=p(s,t.wtId,u(a));Za(l)}}}function E(e){this.iOSAction=n.MOBILE_COMMANDS.ACTION.rateApp}function k(e){this.iOSAction=n.MOBILE_COMMANDS.ACTION.openSettings}function _(e){this.iOSAction=n.MOBILE_COMMANDS.ACTION.browseToPage,this.args={url:e.URL}}function x(e){this.iOSAction=n.MOBILE_COMMANDS.ACTION.playVideo,this.args={url:e.URL}}var A=this;A.LocalSVNRevision="$Rev$";this.get=function(e,t,n,r){return new P[e](t,n,r)};var P={none:d,playWt:a,openMenu:i,playContent:s,playSurvey:l,shoutOut:c,redirect:f,refresh:b,branchWt:g,stopWt:h,playStep:m,openPlayerMenu:v,waitForCond:y,delay:w,passOwnership:S,setWalkMeData:T,destroy:I,playShuttle:C,rateApp:E,openSettings:k,browseToPage:_,playVideo:x}}function Mn(e,t,n){function r(){i()}function i(){if(window.WalkMe_Extension){var e=window.location.href;(e.indexOf("salesforce")>-1||e.indexOf("visual.force")>-1)&&(s=!0,o())}}function o(){wmjQuery("iframe[title*='WM_EXT_IFRAME']").remove()}this.LocalSVNRevision="$Rev$";var a=this,s=!1;a.removeIFrameByFeature=function(){window.WalkMe_Extension&&!s&&n.isFeatureEnabled("removeSFFrame")&&o()},a.extractSalesForceVars=function(t){e.extractSalesForceVars(t)},a.search=function(e,n){t.search(e,n)},r.apply(null)}function Rn(e){function t(e,t){if(!i&&window.sforce){i=!0;var r;if(r=n()?document.cookie.match("sid=([^;]*)")[1]:window.__sfdcSessionId,!r)return o("there is no session id in this page."),void(t&&t());if(Mf("sfCommunity"))sforce.connection.sessionId=r;else{var a="https://"+window.location.host+"/services/Soap/u/29.0";sforce.connection.init(r,a)}e&&e()}}function n(){var e="salesforce",t=new RegExp(e+".+com");return t.test(document.domain)}var r=this;r.LocalSVNRevision="$Rev$";var i=!1,o=e.wrapCustomerLog(nu);r.injectSFConnection=function(e,n){if(i=!1,window.sforce&&window.sforce.connection)return window.sforce.connection.sessionId?void e():void t(e,n);var r=document.createElement("script");r.src="https://"+document.domain+"/soap/ajax/29.0/connection.js",r.type="text/javascript",r.onload=function(){t(e,n)},r.onreadystatechange=function(){t(e,n)},document.getElementsByTagName("head")[0].appendChild(r)}}function jn(e,t,n,r,i){function o(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var i=wmjQuery.trim(n[r]);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}function a(){if(window.UserContext&&window.ApiUtils&&window.ApiUtils.to18CharId){var e=ApiUtils.to18CharId(window.UserContext.userId);if(s(e),e)return e}var t=c();return t?t:void I("No UserContext on window. Can't get userId")}function s(e){e&&t.saveData(_,e,P)}function c(){return t.getData(_)}function d(){var e=t.getData(k);return e?l(e):void 0}function f(e,t){return e&&e[t]}function p(e){if(e.lastModified){var t=(new Date).getTime();if(t-A<e.lastModified)return!1}return!0}function g(e){r.injectSFConnection(function(){h(e)},function(){b(e)})}function h(e){try{var t=sforce.connection.getUserInfo(),r=w(n.get()),i=m(t.userId,r);i=i&&i[0]||[];var o=v(t,D,i,r);b(o)}catch(a){b(e,!0),I(a,5)}}function m(e,t){if(t&&t.length>0){var n="Select "+t.join(",")+" From User Where Id = '"+e+"'",r=sforce.connection.query(n);return r.getArray("records")}}function v(e,t,n,r){for(var i={},o=0;o<t.length;o++){var a=t[o];i[a]=e[a]}for(var o=0;o<r.length;o++)y(r[o],n,i);return i}function y(e,t,n){for(var r=t,i=e.split("."),o=0;o<i.length;o++){if(""===i[o])return;if(r=r&&r[i[o]],null===r&&o==i.length-1)return void(n[i[o]]=null);"object"==typeof r?(n[i[o]]={},n=n[i[o]]):n[i[o]]=r}}function w(e){var t=e.Settings.sfCustomVars;return t||[]}function b(t,n){t?(n||S(a(),t),window.walkme_sf_vars=t,delete window.walkme_sf_vars.lastModified,Wd("SfVarsExposed"),i.sendInternalEvent("SfVarsExposed"),I("sales force var were exposed",5)):I("no user data for user: "+a(),5);try{C&&C()}catch(r){e.Logger.error(r,"error during callback in extract sf vars: exposeData")}}function S(e,n){var r=d();r||(r={}),r[e]=n,r[e].lastModified=(new Date).getTime();var i=u(r);i&&t.saveData(k,i,x)}function T(){I=e.Logger.wrapCustomerLog(nu)}this.LocalSVNRevision="$Rev$";var I,C,E=this,k="wm-sf-users-data",_="wm-sf-lst-usr",x=31536e5,A=864e5,P=86400,D=["userId","organizationId","organizationName","profileId","roleId","userName","userLanguage"];E.extractSalesForceVars=function(t){C=t;try{var n=o("wm-expirationCookie");n&&(A=parseInt(n));var r=a();if(r){var i=d(),s=f(i,r);!s||p(s)?g(s):b(s,!0)}else try{C&&C()}catch(u){e.Logger.error(u,"error during callback in extract sf vars: exposeData")}}catch(u){I("unknown error getting walkmeSfVars: "+u.message),C&&C()}},T.apply(null,arguments)}function Fn(e,t,n){function r(e,n){var r=u;try{var i=t.get().Settings.sfSearch||s;r=sforce.connection.search("find {"+e+"*} RETURNING "+i)}catch(o){a("unknown error getting search results: "+o.message)}n(r)}function i(){a=e.Logger.wrapCustomerLog(nu)}var o=this;o.LocalSVNRevision="$Rev$";var a,s="Account (Id, Name), Contact (Id, Name), Opportunity (Id, Name), Lead (Id, Name)",u="";o.search=function(e,t){n.injectSFConnection(function(){r(e,t)},function(){t(u)})},i.apply(null,arguments)}function Bn(){function e(e){n=e}function t(e){return e.properties().hasProperty(ku.Visible)}this.LocalSVNRevision="$Rev$";var n,r=this;r.isGroup=function(e){return e?void 0!==e.LinkedDeployables:!1},r.isSearchEnabled=function(){var e=n.getSiteConfig();return e.Settings&&Number(e.Settings.search)},r.hasChildren=function(e){for(var t=e.LinkedDeployables,i=0;i<t.length;i++){var o=n.getDeployablesManager(t[i].DeployableType),a=o.getById(t[i].DeployableID),s=r.isGroup(a)?r.hasChildren(a):a;if(s)return!0}return!1},r.hasVisibleChildren=function(e,n){for(var r=0;r<n.length;r++){var i=n[r];if(t(i))return!0}return!1},r.supportsDeployableType=function(e,t){var n=e.Settings,r=n&&n.DeployableTypes;return r&&-1!=mtjQuery.inArray(t+"",e.Settings.DeployableTypes)?!0:!1},r.hasUncompletedChildren=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n.properties().hasProperty(ku.Completed))return!0}return!1},r.isTab=function(e){var t=e.Settings;return t&&t.DeployableTypes},r.isTasksTab=function(e){return r.isGroup(e)&&r.supportsDeployableType(e,Fl.Task)},r.isHelpTab=function(e){return r.isGroup(e)&&r.supportsDeployableType(e,Fl.Tutorial)},e.apply(null,arguments)}function Un(){function e(e){t=new Bn(e)}this.LocalSVNRevision="$Rev: 5720 $";var t,n=this;n.generateAll=function(e){e.utils=t;var n=[];return n.push(new cl(e)),n.push(new dl(e)),n.push(new fl(e)),n.push(new pl(e)),n.push(new hl(e)),n.push(new gl(e)),n.push(new ml(e)),n},e.apply(null,arguments)}function Gn(){function e(e,i,a){n=e,r=i,o=a,t()}function t(){var e={lib:n,deployable:r,logger:a.Logger,children:o};i=Un.generateAll(e)}this.LocalSVNRevision="$Rev$";var n,r,i,o,a=this;a.getAll=function(){var e=[];return n.wrapFESession(function(){for(var t=0;t<i.length;t++)e=e.concat(i[t].getAll())}),e},a.clearCache=function(){for(var e=0;e<i.length;e++)i[e].clear()},a.hasProperty=function(e,t){for(var n=0;n<i.length;n++)if(i[n].canGenerate(e)&&i[n].hasProperty(e,t))return!0;return!1},e.apply(null,arguments)}function Vn(){function e(e){t=e.type,r=e.id,i=e.activateFunction,n=e.description,u=e.childNodes,o=e.name,s=e.propertiesGenerator,a=e.keywords?e.keywords:[]}this.LocalSVNRevision="$Rev$";var t,n,r,i,o,a,s,u,l=this;l.activate=function(e){i(r,e)},l.children=function(){return u},l.properties=function(e){return e&&s.clearCache(),s},l.type=function(){return t.toLowerCase()},l.name=function(){return o},l.id=function(){return r},l.description=function(){return n||""},l.keywords=function(){return a},e.apply(null,arguments)}function Wn(e){function t(){c=e.Logger.wrapCustomerLog("showWidget")}function n(e){var t=parseInt(Pc.get().TodoListSettings[f]),n=parseInt(Pc.get().TodoListSettings[p]);return t?n&&(c("Show widget - 'Display only onboarding on menu' is on - not show help tabs"),e=hp(e,function(e){return!r(e)})):(c("Show widget - todo list is inactive in todo list settings"),e=hp(e,r)),e}function r(e){var t=e.Settings.DeployableTypes,n=-1!=wmjQuery.inArray(Fl.Task.toString(),t);return!n}function i(t,n){var r=e.getDeployablesManager(t),i=r.getById(n);return i&&(i.deployableType=t),i}function o(t){for(var n=e.getDeployablesManager(t).getAll(),r=0;r<n.length;r++)n[r].deployableType=t;return n}function a(e){e&&e.sort(function(e,t){return e.OrderIndex-t.OrderIndex})}function s(e){if(!e.LinkedDeployables)return null;for(var t=[],n=e.LinkedDeployables,r=0;r<n.length;r++){var o=i(n[r].DeployableType,n[r].DeployableID);o&&t.push(o)}return t}function u(t,n){var r=e.getDeployablesManager(t.deployableType),i=new Vn({type:r.name(),id:t.Id,activateFunction:r.activateById,description:t.Description,childNodes:n,name:t.Name,propertiesGenerator:new Gn(e,t,n),keywords:t.Keywords});return i}function l(e){if(e){for(var t=[],n=0;n<e.length;n++){var r=s(e[n]),i=l(r);t.push(u(e[n],i))}return t}}this.LocalSVNRevision="$Rev$";var c,d=this,f="isActive",p="showOnlyTasksTab";d.uiObjectsTree=function(){var e=o(Fl.Collection);e=n(e),a(e);var t=l(e);return t},t.apply(null,arguments)}function Qn(){function e(e){n(e.lib),i(e.deployables)}var t=new o(this);this.LocalSVNRevision="$Rev$";var n=t.Prop.Protected("lib"),r=t.Prop.Protected("deployablesDict",{}),i=(t.Virtual.Public("name"),t.Virtual.Public("setDeployables",function(e){if(e)for(var t=0;t<e.length;t++)e[t].Id&&(r()[e[t].Id]=e[t])}));t.Virtual.Public("getActionData",function(e){return{Type:"",ItemId:"",Name:""}}),t.Virtual.Public("isWithAction",function(e){return!1}),t.Virtual.Public("activateById",function(e,t,n){}),t.Virtual.Public("getById",function(e){return r()[e]}),t.Public("getAll",function(){var e=[],t=r();for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e.sort(function(e,t){return void 0===e.OrderIndex||void 0===t.OrderIndex?0:e.OrderIndex-t.OrderIndex})});t.Virtual.Public("releaseAll"),t.Virtual.Public("autoStartEnabled",function(e){return!1}),e.apply(null,arguments)}function Hn(){function e(e){t.Extends(Qn,e)}var t=new o(this);this.LocalSVNRevision="$Rev$";t.Override("activateById",function(e){}),t.Override("name",function(){return"Category"});e.apply(null,arguments)}function $n(){function e(e){t.Extends(Qn,e),n=Us.get("PermalinkManager")}var t=new o(this);this.LocalSVNRevision="$Rev$";var n;t.Override("name",function(){return"Walkthru"}),t.Override("activateById",function(e,t){WalkMeAPI.startWalkthruById({id:e,fromStep:0,playInitiator:t})});t.Override("autoStartEnabled",function(e){return n.isStartingWalkthru()?!1:!0}),e.apply(null,arguments)}function zn(e,t,n,r,i,a,s,u,l,c,d,p,g,h,m,v){function y(){D.Extends(Qn,{deployables:e,lib:c}),j=D._base.deployablesDict(),M=l.getEnvironmentId()==u.SOURCES.preview,R=l.getEnvironmentId()==u.SOURCES.play,
B=_makeTutorial.Logger.wrapCustomerLog(Xs),B('Initializing TodoListManager (isActive: "'+t+'", serverAddress: "'+n+'", userGuid: "'+l.getUserGuid()+'", endUserId: "'+a+'")',3),N=new ut(n,r,i,s,l,M,g,c),window.walkMeRemoveTasksData&&(r.removeData(N.getEndUserUniqueDataKey(a)),window.walkMeRemoveTasksData=!1),F=a,O=s,t=t&&e&&e.length>0,U.setActiveState(t),P(),d.onActivated(U.updateDeployableCompleted)}function b(e,t){return e.Index<t.Index?-1:e.Index>t.Index?1:0}function S(e,t){for(var n=0;n<e.Goals.length;n++){var r=e.Goals[n];if(r.Id&&-1===mp(r.Id,t.CompletedGoals))return 0}return 1}function T(e,t){I(e,t)&&U.deactivate()}function I(e,t){for(var n in e){var r=e[n];if(C(r)){var i=t[r.Id];if(!i)return!1;if(!i.IsCompleted)return!1}}return!0}function C(e){if(!e.Id)return!1;if(e.RelatedDeployableType!==Fl.Tutorial&&e.RelatedDeployableType!==Fl.Content)return B("Task (id: "+e.Id+") is of unknown type: "+e.RelatedDeployableType),!1;if(!e.RelatedDeployableId)return B("Task (id: "+e.Id+") does not have any related Walk-Thru id"),!1;var t;return t=e.RelatedDeployableType===Fl.Tutorial?p:d,t.getById(e.RelatedDeployableId)?!0:(B("Task (id: "+e.Id+") related deployable ("+e.RelatedDeployableType+") (id: "+e.RelatedDeployableId+") does not exist"),!1)}function E(e){B("syncing local tasks completion data",3),B(e,5);for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(n.IsCompleted)continue;var r=n.CompletedGoals,i=U.getById(t);if(i&&i.Goals){var o=i.Goals;if(o&&r&&r.length>0&&o.length>0){var a=S(i,n);a&&(n.IsCompleted=1,U.completeTask(i,e))}}}}function k(e,t){for(var n=0;n<e.Goals.length;n++)if(e.Goals[n].Id==t)return e.Goals[n]}function _(){return!rs()&&!M}function x(e){Q=!0,H&&H(e),H=null}function A(e,t){for(var n=e.Goals.length-1;n>=0;n--)if(e.Goals[n].Id==t)return t}function P(){for(var e=D._base.getAll(),t=0;t<e.length;t++)C(e[t])||delete j[e[t].Id]}var D=new o(this);this.LocalSVNRevision="$Rev$";var N,L,O,M,R,j,F,B,U=this;U.init=function(){N.init()};var G=(D.Override("name",function(){return"Task"}),D.Override("activateById",function(e,t){var n=D._base.getById(e),r=D._base.lib().getDeployablesManager(n.RelatedDeployableType);try{t=t||{type:c.getPlayInitiatorEnum().NONE};var i=void 0==t.id?t.objectId:t.id;v.auditTaskPlayed(n,i,t.type)}catch(o){O(o)}var a={type:c.getPlayInitiatorEnum().TASK,objectId:e};r.activateById(n.RelatedDeployableId,a)}),D.Override("getById",function(e){var t=D._base.getById(e);return t&&C(t)?t:void 0}),D.Public("isTaskCompleted",function(e){var t=U.getCompletedTasks(),n=t?mp(e.Id,t)>-1:!1;return n}),D.Public("isTaskConditionsPassed",function(e){var t=!0;switch(e.RelatedDeployableType){case Fl.Tutorial:if(e.RelatedDeployableId){var n=Wf(e.RelatedDeployableId);t=_makeTutorial.canShowTutorial(n)}}return t})),V=D.Public("isTaskActive",function(e){var t=e.Settings;return parseInt(t.ActivateConditionEnabled)?_makeTutorial.evaluateConditionTree(t.ActivateCondition):!0}),W=D.Public("isTaskDisplayed",function(e){var t=e.Settings;if(!parseInt(t.DisplayConditionEnabled))return!0;var n=Us.create("ConditionChecker",{featureName:Xs,elementName:e.Name,trackEvent:"Task - Segmentation",trackData:m.getTrackData(e)});return n.evaluateAsync(t.DisplayCondition),n.getValue(!0)});U.hasTaskGoalCompletionCondition=function(){function e(){var e,t,n,i,o,a;return wmjQuery.each(Fl,function(s,u){if(n=c.getDeployablesManager(u),t=n&&n.getAll())for(var l=0;l<t.length;l++)if(e=t[l],i=Ss(e.Settings,"ASCTEnabled",0),i&&(o=Ss(e.Settings,"ASCT",""),a=r(o)))return}),a}function t(){var e=c.getSiteConfig(),t=Ss(e.Settings,xl,"");return r(t)}function n(){var e=c.getDeployablesManager(Fl.AbExperiment);if(!e)return!1;for(var t,n,i,o,a=e.getAll(),s=0;s<a.length;s++){t=a[s],i=t.Goals;for(var u=0;u<i.length;u++)if(n=i[u],o=Ss(n.Settings,"Conditions",""),r(o))return!0}}function r(e){function t(e){return"Func"==e.nodeType?"TaskGoalReached"==e.funcName||"TaskGoalNotReached"==e.funcName:"And"==e.nodeType||"Or"==e.nodeType?t(e.leftSon)||t(e.rightSon):!1}return null==e?!1:t(e)}return e()||t()||n()},U.completeGoal=function(e,t,n){var r=t[e];r.CompletedGoals.push(n);var i=j[e];r.IsCompleted=S(i,r);var o=k(i,n);r.IsCompleted?U.completeTask(i,t,o):(t[r.TaskId]=r,B("Server update completed GOAL (taskId: "+e+", goalId: "+n+")",3),N.updateTaskCompleted(F,null,o,t,j,_()))},U.completeTask=function(e,t,n){try{var r=n?n.Id:-1;t[e.Id]={TaskId:e.Id,IsCompleted:1,CompletedGoals:[]},h.sendApiEvent("TaskCompleted",{TaskId:e.Id}),T(j,t),B("Server update completed TASK (taskId: "+e.Id+", goalId: "+r+")",3),N.updateTaskCompleted(F,e,n,t,j,_())}catch(i){U.deactivate(),O(i,"An error occurred while trying to complete a Task")}};var Q,H;U.didTasksFinishLoading=function(){return Q},U.setTasksFinishedLoadingCallback=function(e){H=e},U.loadTasks=function(e,t){if(B("loadTasks - start loading completion data",3),R)return B("loadTasks - Play mode - returning empty tasks completion data",3),T(j,{}),void e({});if(!F)return B("loadTasks - No end user - Deactivating",3),void U.deactivate();try{var n=function(t){E(t),B("Tasks completion data loaded successfully",3),T(j,t),e&&e(t),x(),Wd("TasksLoaded")},r=function(e){B("Tasks completion data failed loading",3),U.deactivate(),t&&t(e)};N.asyncRetrieveCompletedTasks(F,U.getTaskGoalsIds(j),n,r)}catch(i){U.deactivate(),O(i,"An error occurred while trying to load completed tasks to the local storage")}},U.getTaskGoalsIds=function(e){var t={};return mtjQuery.each(e,function(e,n){t[e]=n.Goals?mtjQuery.map(n.Goals,function(e){return e.Id}):[]}),t},U.clearTaskAndGoalCompletionLocally=function(e,t){var n=this.getTaskIdByGoalId(t);N.clearTaskAndGoalCompletionLocally(e,n,t)},U.getTaskIdByGoalId=function(e){for(var t=w(j),n=t.length-1;n>=0;n--){var r=j[t[n]];if(A(r,e))return r.Id}},U.tempClearUserCompletedTasks=function(){F&&N.tempClearUserCompletedTasks(F)},U.getCompletedTasks=function(){if(B("Getting completed tasks",3),R)return B("Play mode - returning empty array of completed tasks",3),[];if(!F)return U.deactivate(),null;try{var e=N.syncRetrieveCompletedTasks(F,U.getTaskGoalsIds(j));if(!e)return null;var t=[];return mtjQuery.each(e,function(e,n){n.TaskId&&n.IsCompleted&&t.push(n.TaskId)}),B("Returning completed tasks ("+t+")",3),t}catch(n){U.deactivate(),O(n,"An error occurred while trying to retrieve completed tasks")}return null},U.updateGoalCompleted=function(e){var t=e.RelatedObjectId,n=e.Id,r=e.Name;if(B("Updating completed goal (taskId: "+t+", goalId: "+n+", goalName: "+r+")",3),$d(u.EVENTS.GoalReached,{GoalId:n,GoalName:r}),R)return void B("Play mode - exiting without updating",3);if(!F)return void U.deactivate();try{N.asyncRetrieveCompletedTasks(F,U.getTaskGoalsIds(j),function(e){var r=e[t];r||(r={TaskId:t,IsCompleted:0,CompletedGoals:[]},e[t]=r),r.IsCompleted||mp(n,r.CompletedGoals)>-1||U.completeGoal(r.TaskId,e,n)})}catch(i){U.deactivate(),O(i,"An error occurred while trying to update task completed")}},U.updateDeployableCompleted=function(e,t){return B("Updating completed deployable ("+t+") deployableId: "+e+")",3),R?void B("Play mode - exiting without updating",3):F?void mtjQuery.each(j,function(n,r){if(r.Id&&r.RelatedDeployableType===t&&parseInt(r.RelatedDeployableId)===e&&!(r.Goals&&r.Goals.length>0)){N.asyncRetrieveCompletedTasks(F,U.getTaskGoalsIds(j),function(e){e[r.Id]&&e[r.Id].IsCompleted||U.completeTask(r,e)})}}):void U.deactivate()},U.getTasksGoalsNotCompleted=function(){if(R)return B("Play mode - not getting tasks not completed goals",3),[];B("Getting tasks uncompleted goals",3);var e=N.syncRetrieveCompletedTasks(F,U.getTaskGoalsIds(j));e||(e=[]);var t=[];return mtjQuery.each(j,function(n,r){if(r.Id){var i=e[r.Id];if(!i||!i.IsCompleted){var o={TaskId:r.Id,Name:r.Name,GoalsNotCompleted:[]};mtjQuery.each(r.Goals,function(e,t){if(t.Id){var n=i&&i.CompletedGoals?i.CompletedGoals:[];if(-1===mp(t.Id,n)){var r=mtjQuery.extend(!0,{},t);o.GoalsNotCompleted.push(r)}}}),t.push(o)}}}),t},U.getApiTasks=function(e){B("Getting tasks fot the API",3);var t=U.getCompletedTasks();t||(t=[]);var n=[];return mtjQuery.each(j,function(r,i){if(C(i)){var o=t&&mp(i.Id,t)>-1?1:0,a={Index:i.OrderIndex,Name:i.Name,Id:i.Id,IsCompleted:o,Settings:f(i.Settings),Description:i.Description,RelatedDeployableType:i.RelatedDeployableType,RelatedDeployableId:i.RelatedDeployableId};a.TaskProperties=a.Settings,e&&(a.ConditionsPassed=G(i),a.IsActive=V(i),a.IsDisplayed=W(i)),delete a.Settings.ActivateConditionEnabled,delete a.Settings.ActivateCondition,n.push(a)}}),n.sort(b),n},U.isTaskGoalReached=function(e,t){var n=N.syncRetrieveCompletedTasks(F,U.getTaskGoalsIds(j));if(!n)return!1;var r=n[e];return r?r.IsCompleted?!0:-1!==mp(t,r.CompletedGoals):!1},U.isActive=function(){return L},U.setActiveState=function(e){B("Setting todo list active state to: "+e,3),L=e},U.activate=function(){N.asyncRetrieveCompletedTasks(F,U.getTaskGoalsIds(j),function(e){I(j,e)||U.setActiveState(!0)})},U.deactivate=function(){x(!1),U.setActiveState(!1)},U.toggleActiveState=function(){U.setActiveState(!U.isActive())},y.apply(null,arguments)}function Yn(){function e(e){t.Extends(Qn,e)}var t=new o(this);this.LocalSVNRevision="$Rev: 2150 $";var n=2e3,r={openMenu:500},i=(Us.get("Lib"),Us.get("LauncherActionDataProvider"));t.Override("name",function(){return"Launcher"}),t.Override("getActionData",function(e){var n=t._base.getActionData();return i.fillActionData(e,n)}),t.Override("isWithAction",function(e){return i.isWithAction(e)}),t.Public("getMinClickDelay",function(e){var t=Ss(e.Settings,"action",null),i=t.actionType;return void 0!==r[i]?r[i]:n});e.apply(null,arguments)}function qn(e,t,n,r,i,a,s,u){function l(e){e=e||{},e.lib=a,d.Extends(Qn,e)}function c(t){if(e._walkmeInternals.customShuttleUrl){var n=e._walkmeInternals.customShuttleUrl(t);return n}return t}var d=new o(this);this.LocalSVNRevision="$Rev$";var f="ShuttlePlayMode",g=100;d.Override("name",function(){return"Shuttle"}),d.Override("activateById",function(o,u){try{u=u||{};var l=d._base.deployablesDict()[o];if(!l)return void Za(p("Shuttle with id {0} doesn't exist",o),3);r.SendClickAudit(Fl.Shuttle,l.Id,u.type,u.objectId);var h=parseInt(i.getSettingsValue(l.Settings,f,s.PLAY_MODE.SameTab)),m=c(l.DestinationUrl);i.isValidUrl(m)&&(n.startWatchingDeployable(l,a.generateNewPlayGuid(l.Id)),a.userSawWalkMe(),h==s.PLAY_MODE.NewTab&&e.open(m,"_blank"),h==s.PLAY_MODE.SameTab&&t.libSetTimeout(function(){e.location.href=m},g))}catch(v){Za(p("Failed playing shuttle with id {0}. Exception is {1}",o,v),3)}}),l.apply(null,[u])}function Kn(){function e(e){r.Extends(Qn,e),i=e.cdnServerName,a=e.deployablesGoalsManager,u=e.clickAuditManager,c=Us.get("FeaturesManager")}function t(e,t){var r=null;switch(e){case d.Video:var i=n(t.content.Url);i?(t.videoId=i.videoId,t.vendorName=i.vendorName,r=new xt(t)):r=new At(t);break;case d.Article:r=new At(t);break;default:throw p("Invalid content type : {0}",e)}return r}function n(e){var t,n=/^(?:http|https):\/\/.*youtube\..*v=([\w-]+)/i,r=/^(?:http|https):\/\/.*youtu.be\/([\w-]+)/i,i=/^(?:http|https):\/\/.*youtube.*\/embed\/([\w-]+)/i,o=/^(?:http:\/\/|https:\/\/).*vimeo.*\/([\w-]+)/i,a=[{regex:n,vendorName:"youtube"},{regex:r,vendorName:"youtube"},{regex:i,vendorName:"youtube"},{regex:o,vendorName:"vimeo"}];return wmjQuery.each(a,function(n,r){var i=e.match(r.regex);return i&&i.length>1?(t={videoId:i[1],vendorName:r.vendorName},!1):void 0}),!t&&c.isFeatureEnabled("html5video")&&(t={vendorName:"html5video"}),t}var r=new o(this);this.LocalSVNRevision="$Rev$";var i=null,a=null,s=null,u=null,l=[],c=null,d={Article:0,Video:1};this.onActivated=function(e){l.push(e)};var f=(r.Override("name",function(){return"Content"}),r.Override("activateById",function(e,n){try{n=n||{};var o=r._base.deployablesDict()[e];if(!o)return void Za(p("Content with id {0} doesn't exist",e),3);var c={lib:r._base.lib(),cdnServer:i,clickAuditManager:u,content:o};f(),s=t(o.Type,c),s.activateContent(o,n.type,n.objectId),r._base.lib().userSawWalkMe(),a.startWatchingDeployable(o,r._base.lib().generateNewPlayGuid(o.Id));for(var d=0;d<l.length;d++)l[d](o.Id,Fl.Content)}catch(g){Za(p("Failed playing content with id {0}. Exception is {1}",e,g),3)}}),r.Public("removeContent",function(){s&&s.removeContent()}));r.Public("types",function(){return d});e.apply(null,arguments)}function Xn(){function e(e){t.Extends(Qn,e)}var t=new o(this);this.LocalSVNRevision="$Rev$";t.Override("name",function(){return"Tab"}),t.Override("activateById",function(e){});e.apply(null,arguments)}function Jn(){function e(e){t.Extends(Qn,e)}var t=new o(this);this.LocalSVNRevision="$Rev$";t.Override("name",function(){return"Experiments"}),t.Override("activateById",function(e){});e.apply(null,arguments)}function Zn(e,t,n,r,i,a,s){function u(e){S.Extends(Qn,e),w=e.type}function l(e,t){return C+w+"-"+e.Id+"-"+t}function c(e){var t=d(e);return t?(t.unbind("hide-end."+x),t.once("hide-end."+x,function(){t.show()}),t.hide(),!0):void 0}function d(e){for(var t=_.length-1;t>=0;t--)if(_[t].getComponent().Id==e)return _[t]}function f(e,t){e.once("append-end",function(){e.show(),g()}),b?k.push(e):(b=!0,e.append())}function g(){var e=k.splice(0,1)[0];e?e.append():b=!1}function h(e,t){if(e.Settings.stopOn&&e.Settings.stopOn[t]){var n=l(e,t);i.saveData(n,1,E)}}function m(e,t){return t=t||{},r.SendClickAudit(w,e.Id,t.type,t.objectId)}function v(e,t,n,i){r.SendShoutOutAudit(e.Id,t,n,i)}function y(e){var t=_.length;_.push(e),e.bind(T,function(){e.unbind(T),_.splice(t,1)})}this.LocalSVNRevision="$Rev$";var w,b,S=new o(this),T="destroy-begin.manager",I="destroy",C="wm-stpcond-",E=31536e4,k=[],_=[];S.Override("name",function(){return"ShoutOut"}),S.Override("activateById",function(r,i,o){try{if(c(r))return;var a=S._base.deployablesDict()[r];if(!a)return void Za(p("ShoutOut with id {0} doesn't exist",r),3);var s=t.get(a.UiComponentId,[a]);y(s);var u=m(a,i);s.once("show-end",function(){n.startWatchingDeployable(a,S._base.lib().generateNewPlayGuid(a.Id)),s.once("action-start",function(e,t){var n=t==I;h(a,n?A.Cancel:A.Action);var r=n?Iu.Close:Iu.Action;v(a,w,r,u)}),s.once("x-clicked",function(){h(a,A.XButton),v(a,w,Iu.XButton,u)}),s.once("destroy-end",function(){Wd("UIComponentDestroyed")})}),f(s,a),e.userSawWalkMe();var l={deployable:a,uiComponent:s,deployableType:w};return Wd("DeployableCreated",l),s}catch(d){Za(p("Failed playing shoutOut with id {0}. Exception is {1}",r,d),3)}});var x=(S.Override("getActionData",function(e){var t=S._base.getActionData();return a.fillActionData(e,t)}),S.Override("isWithAction",function(e){return a.isWithAction(e)}),"acs");S.Override("releaseAll",function(e){try{for(var t=0;t<_.length;t++){var n=_[t];n.unbind(T),n.destroy()}_.length=0}catch(r){}e&&e()}),S.Override("autoStartEnabled",function(e){var t=S._base.deployablesDict()[e],n=t.Settings.stopOn;for(var r in n)if(n.hasOwnProperty(r)&&n[r]){var o=l(t,r);if(i.getData(o,!1))return!1}return!0});var A={XButton:"x",Cancel:"close",Action:"action"};u.apply(null,[s])}function er(){function e(e){t.Extends(Qn,e)}var t=new o(this);this.LocalSVNRevision="$Rev: 2182 $";var n=500,r={};t.Override("activateById",function(e,t){if(void 0!=r[e])return r[e];var i={elementName:"conditionBlock"+e},o=Us.create("ConditionChecker",i);o.onValueChanged(function(e){t&&t(e)});var a=this.getById(e);return o.evaluateAsync(a.ConditionsTree),r[e]=o.getValue(!0),Ud.libSetTimeout(function(){r[e]=void 0},n),r[e]});e.apply(null,arguments)}function tr(){function e(e){n.Extends(Qn,e)}function t(e,t){var n=t.Settings&&t.Settings.Condition;return n?e?{nodeType:"Or",leftSon:t.Settings.Condition,rightSon:e,nodeDepth:0}:t.Settings.Condition:e}var n=new o(this);this.LocalSVNRevision="$Rev: 2182 $";var r={};r[Fl.Tutorial]="DOCT",r[Fl.Task]="DisplayCondition",r[Fl.Launcher]="PlayLauncherConditionTree",r[Fl.Shuttle]="DisplayCondition",r[Fl.Content]="DisplayCondition";n.Override("activateById",function(e){}),n.Override("name",function(){return"Tag"}),n.Public("injectTagsToDeployables",function(){for(var e=n._base.getAll(),i=0;i<e.length;i++){var o=e[i];if(o.Settings&&o.Settings.Condition)for(var a=o.LinkedDeployables.length-1;a>=0;a--){var s=o.LinkedDeployables[a],u=wd[s.DeployableType],l=u.getById(s.DeployableID);if(l){var c=r[s.DeployableType],d=c+"Enabled";if(c){l.Settings||(l.Settings={});var f=0==l.Settings[d]?"":l.Settings[c];l.Settings[c]=t(f,o),l.Settings[d]=1}}}}});e.apply(null,arguments)}function nr(e,t,n){function r(){}var i=this;i.LocalSVNRevision="$Rev$";var o=0,a=function(){return-1!=n.get().indexOf("https:")},s=function(){var e=t.get().Settings;return e&&e.UrlWl};i.parse=function(t){function n(e,t){return new RegExp(e,t)}function r(e,t){var n=t.exec(e);return null!=n&&n.length>2?n.splice(0,1):n="",n}function u(e,t,n){var r=l(e,t,n);return d(r,e),r}function l(e,t,n){void 0!=t&&(t=t.replace(/&quot;/gi,'"'));var r=c(t);return g(n,e,r),r}function c(e){for(var t,r={},i=n('([^\\s]+)="([^\\"]+)"',"g");t=i.exec(e);){var o=t[1],a=t[2];r[o]=a}return r}function d(e,t){wmjQuery.each(e,function(n,r){var i=-1==wmjQuery.inArray(n,t);i&&delete e[n]})}function g(e,t,n){if(void 0!=e)for(var r=0;r<t.length;r++){var i=t[r],o=n[i],a=void 0==o,s=void 0!=e[i],u=a&&s;u&&(n[i]=e[i])}}function h(e){var t=e.replace(O,S);return t}function v(e,t){e=e.replace(/javascript:/gi,""),e=b(e);for(var r in t)e=e.replace(n(r,"g"),t[r]);return e}function y(e){return a()?e.replace("http:","https:"):e}function w(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function b(e){if(e.indexOf("on")<0)return e;for(var t=0;t<K.length;t++)e=e.replace(new RegExp(K[t]+"\\s*=","gi"),"^");return e}function S(e,t,n,i){switch(i&&i.indexOf("[")>-1&&(i=h(i)),(!n||n.indexOf("javascript:")>-1)&&(n=""),t){case"url":return T(e,t,n,i);case"wt":var o=-1,a=n;if(a){var s=a.split(" ");o=s[0],o=m(o)?o:-1,a=s.splice(1,s.length-1).join(" ")}var l=u(q[t],a,{"class":"",style:""}),c=l["class"],d=l.style;return delete l["class"],delete l.style,'<a style="cursor: pointer; '+d+'" class="walkme-custom-bbcode-wt-link walkme-action-start-wt '+c+'" data-walkthru-id="'+o+'"'+N(l)+">"+i+"</a>";case"img":var f=r(n,M);return'<img src="'+i+'"'+(f?' width="'+f[0]+'px" height="'+f[1]+'px"':"")+N(u(q[t],n))+"/>";case"youtube":return x(e,t,n,i,L.Youtube);case"vimeo":return x(e,t,n,i,L.Vimeo);case"wistia":return x(e,t,n,i,L.Wistia);case"iframe":return D(e,t,n,i);case"b":case"u":case"i":case"table":case"tr":case"th":case"td":case"tbody":case"div":case"span":case"ul":case"li":return"<"+t+N(u(q[t],n))+" data-"+t+"='"+n+"'>"+i+"</"+t+">";case"p":return"<"+t+N(u(q[t],n))+" data-"+t+"=' "+n+"'>"+i+"</"+t+">";case"survey":return'<a data-survey-id="" class="walkme-custom-bbcode-survey" style="cursor: pointer;"'+N(u(q[t],n))+">"+i+"</a>";case"flash":return _(e,t,n,i)}var p=window.walkme_custom_bbcode_parser;if("function"==typeof p){var g=p(e,t,n,i);if(g)return g}return"["+t+(n?"="+n:"")+"]"+i+"[/"+t+"]"}function T(e,t,n,r){var i=n;if(i){var o=i.split(" ");if(!w(o[0],q[t])){var a=o[0];i=o.splice(1,o.length-1).join(" ")}}var s,l=u(q[t],i,{"class":"",style:"",target:"_blank"}),c={classes:l["class"],target:l.target,src:k(a||r),label:r,style:l.style,title:l.title,data:n.substring(Math.max(n.indexOf(" "),0)).replace(new RegExp("^"+a||r),"")};s=l.height&&l.width?I(l,c):E(l,c,R[t]);var d=Lu.to_html(s,c);return d}function I(e,t){var n='<span id="walkme-new-window-link-{{{spanId}}}"'+(t.title?' title="{{{title}}}"':"")+"><a class=\"walkme-custom-bbcode-link {{{classes}}}\" style=\"color: inherit; text-decoration:underline; {{{style}}}\" href=# onclick=\"event.preventDefault ? event.preventDefault() : event.returnValue = false;_walkMe.getCommonUtils().sendEvent('BBCodeLinkClicked', {Src : '{{{src}}}' });window.open({{{srcForOpen}}},'{{{target}}}',{{{specs}}});\" data-url='"+t.data+"'>{{{label}}}</a></span>",r=o++;t.spanId=r;var i=C(e);return t.specs="'"+i+"'",t.srcForOpen="'"+t.src.replace(/\'/g,"")+"'",n}function C(e){for(var t=["width","height","channelmode","directories","fullscreen","left","top","location","menubar","resizable","scrollbars","status","titlebar","toolbar"],n="",r=t.length-1;r>=0;r--){var i=t[r];e[i]&&(n+=p("{0}={1},",i,e[i].replace(/\'/g,"")))}return n.length>0&&(n=n.substring(0,n.length-1)),n}function E(e,t,n){var r="<a"+(t.title?' title="{{{title}}}"':"")+' target="{{{target}}}" class="walkme-custom-bbcode-link {{{classes}}}" onclick="_walkMe.getCommonUtils().sendEvent(\'BBCodeLinkClicked\', {Src : \'{{{src}}} \'});" style="color: inherit; text-decoration:underline; {{{style}}}" {{{linkTypes}}}{{{src}}}" data-url=\''+t.data+"'>{{{label}}}</a>";return t.linkTypes=n,r}function k(t){var n=s();if(void 0==n)return t;for(var r=0;r<n.length;r++)if(e.isLike(t,n[r]))return t;return""}function _(e,t,n,r){var i=u(q[t],n,{width:420,height:315}),o='<div class="walkme-custom-flash-wrapper" style="width: {{{width}}}px; height: {{{height}}}px;"><object type="application/x-shockwave-flash" data="{{{swf}}}" allowNetworking="none" allowFullScreen="false" width="{{{width}}}" height="{{{height}}}"><param name="SRC" value="{{{swf}}}"/><param name="allowNetworking" value="none"/><param name="allowFullScreen" value="false"/></object></div>',a=Lu.to_html(o,{swf:r,width:i.width,height:i.height});return a}function x(e,t,n,r,i){var o=l(q[t],n,{width:420,height:315}),a=A(o),s=P(i,t),u=s.url+r+"?"+a,c='<iframe data-{{{vendorName}}}-id="{{{videoId}}}" src="{{{src}}}" frameborder="0" {{{allowFullScreen}}} style="position:relative; width: {{{width}}}px; height: {{{height}}}px;"{{{additionalParams}}}></iframe>',d=Lu.to_html(c,{vendorName:s.name,videoId:r,width:o.width,height:o.height,src:u,allowFullScreen:s.allowFullScreen,additionalParams:s.additionalParams});return d}function A(e){var t="",n=f(e);return delete n.height,delete n.width,wmjQuery.each(n,function(e,n){t+=p("{0}={1}&",e,n)}),t}function P(e,t){var n,r,o,a;switch(e){case L.Youtube:n=y(j[t]),r="youtube",o="allowfullscreen";break;case L.Vimeo:n=y(F[t]),r="vimeo",o="webkitAllowFullScreen mozallowfullscreen allowFullScreen";break;case L.Wistia:n=y(B[t]),r="wistia",o="allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen",a=' allowtransparency="true" scrolling="no" class="wistia_embed" name="wistia_embed"';break;default:i.Logger.error(new Error("Unsupported video vendor "+e))}var s={url:n,name:r,allowFullScreen:o,additionalParams:a};return s}function D(e,t,n,r){var i=l(q[t],n,{width:420,height:315}),o=r,a='<iframe src="{{{src}}}" frameborder="0" style="width: {{{width}}}px; height: {{{height}}}px;"></iframe>',s=Lu.to_html(a,{src:o,width:i.width,height:i.height});return s}function N(e){var t="";return mtjQuery.each(e,function(e,n){t+=e+'="'+n+'" '}),t=t.replace(/\s+$/,""),t?" "+t:t}var L={Youtube:0,Vimeo:1,Wistia:2};if(t.indexOf("[")<0)return t;var O=n("\\[([a-z][a-z0-9]*)=?([^\\]]+)?]((?:.|[\r\n])*?)\\[/\\1]","g"),M=n("^(\\d+)x(\\d+)[^\\]]*"),R={url:'href="',anchor:'name="',email:'href="mailto: '},j={youtube:"http://www.youtube.com/embed/",flash:""},F={vimeo:"http://player.vimeo.com/video/",flash:""},B={wistia:"http://fast.wistia.net/embed/iframe/",flash:""},U={font:"font-family:$1",size:"font-size:$1px",color:"color:$1"},G={},V=["title"],W=["style","class","id"].concat(V),Q=["width","height"].concat(W),H=["channelmode","directories","fullscreen","left","top","target","location","menubar","resizable","scrollbars","status","titlebar","toolbar"].concat(Q),$=["border","cellspacing","cellpadding"].concat(W),z=["autoplay"].concat(Q),Y=["href"].concat(W),q={table:$,tr:W,th:W,td:W,tbody:W,p:W,div:Q,span:Q,iframe:Q,youtube:z,vimeo:z,wistia:z,wt:Y,url:H,flash:Q,img:V,b:V,u:V,i:V,ul:V,li:V,survey:V},K=["onblur","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","onerror","onfocus","onfocusin","onfocusout","onhashchange","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onreset","onresize","onscroll","onselect","onsubmit","ontextinput","onunload","onwheel"];for(var X in U)G["\\["+X+"=([^\\]]+)]"]='<span style="'+U[X]+'">',G["\\[/"+X+"]"]="</span>";var J=v(t,G),Z=h(J);return Z},r.apply(null,arguments)}function rr(e){var t=this;t.LocalSVNRevision="$Rev$";var n;this.concat=function(t){if(e&&e.adapt(t),n)for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);else n=t},this.get=function(e){for(var t=n,r=0;r<arguments.length;r++)t=t[arguments[r]];return t}}function ir(e,t,n){if(!e)return n;n=n||{};var r=e.attributes;if(r)for(var i in r)if(r.hasOwnProperty(i)&&"string"==typeof r[i]&&(r[i]=r[i].replace("###ResourcesDir###",t),"font-family"==i)){n.fonts=n.fonts||[];var o=r[i].split(",");n.fonts.push(mtjQuery.trim(o[0]))}var a=e.children;if(a)for(var s in a)a.hasOwnProperty(s)&&ir(a[s],t,n);return n}function or(e){this.adapt=function(t){if(t)for(var n in t){var r=e.getResourcePath("/player/resources/templates/"+n),i=ir(t[n],r);t[n].metaData=i}}}function ar(e){this.adapt=function(t){if(t)for(var n in t)if(t[n])for(var r in t[n]){var i=t[n][r];if(i&&i.Css){var o=e.getResourcePath("/player/resources/templates/"+n+"/"+r),a=ir(i.Css,o);i.Css.metaData=a}}}}function sr(e,t,n,r,i,o,a,s){function u(e,t,n){for(var o=[],a=0;a<e.length;a++){var s=e[a].metaData&&e[a].metaData.fonts;if(s)for(var u=0;u<s.length;u++){var l=i.get(s[u]);l&&o.push(l)}}r.fonts(o,n||null,t,t)}function l(e){var t=o.get().Direction||"ltr";e.addClass(w+t),e.addClass(w+a.browser.name.toLowerCase()),"IE"==a.browser.name&&e.addClass(w+"ie-"+a.browser.version)}function c(e){var t=e.allCss();e.children().each(function(e,n){var r=wmjQuery(n);r.cssReset(t),c(r)})}function d(e){var t=o.get().Direction||"ltr";e.find("span,button,input,label,a,b,br,img,i,u").cssReset("display","inline"),e.find("*").andSelf().cssReset(Tu).cssReset("direction",t)}function f(e){e.find("*").andSelf().each(function(e,t){t=wmjQuery(t);var n=t.data(b);if(n){var r=n.hover;p(t,r);var i=n.click;g(t,i),t.removeData(b)}})}function p(e,t){if(t){var n=e.attr("style");e.hover(function(){e.css(t)},function(){e.attr("style",n)})}}function g(e,t){if(t){var n=e.attr("style");e.mousedown(function(n){e.css(t)}),e.bind("mouseup blur",function(){e.attr("style",n)})}}function h(e,t){if(t&&t.children)for(var n in t.children)if(t.children.hasOwnProperty(n)){var r=n.split(":"),i=e.find(r[0]),o=t.children[n].attributes;for(var a in o)o.hasOwnProperty(a)&&m(i,a,o[a],r[1]);h(i,t.children[n].children)}}function m(e,t,n,r){if(n instanceof Array)for(var i in n)v(e,t,n[i],r);else v(e,t,n,r)}function v(e,t,n,r){return r?(r=r.toLowerCase(),void y(r,e,t,n)):void e.cssReset(t,n)}function y(e,t,n,r){var i=t.data(b)||{};i[e]||(i[e]={}),i[e][n]||(i[e][n]=r),t.data(b,i)}var w="wm-",b="templatesFactoryStates";this.addResources=function(e,t,r,i,o){var a=n.get(e,t).Css;u([a].concat(r),i,o)},this.get=function(e,r,i,o,a){var u=n.get(e,r),p=s.createElementInDocument(t.to_html(u.Html,o||{}),a||window.document);l(p),c(p);for(var g=p.wrap("<div />").parent(),m=i.length-1;m>=0;m--)h(g,i[m]);return h(g,u.Css),d(p),f(p),p.unwrap(),p.hide()}}function ur(e,t){this.get=function(n,r){try{var i=t.get(n),o=Us.create(i,r);return o}catch(a){e.error(a,"error generating class")}}}function lr(){function e(e,t,n){a=e,s=t}function t(){Me.registerEventHandler("message",function(e){try{var t=l(e.data);"DEBUGGER_LOADED"==t.requestType&&n()}catch(r){Za("Error loading debugger from post message: "+r,4)}})}function n(e){i(e),s.dbgr.shouldClear=e;var t;t||(t=di()+"debugger/"+ci()+"/"),s.dbgr||(s.dbgr={}),s.dbgr.rootPath=t,Me.addScript(t+"walkme_debugger.js",null,r)}function r(){Za("Failed loading the Flow Tracker!",1);var e=s.dbgr;e&&e.debuggerWasLoaded&&e.debuggerWasLoaded()}function i(e){s.dbgr||(s.dbgr={})}function o(){return a.getClientStorageManager()}this.LocalSVNRevision="$Rev$";var a,s,c=this,d="wm-ftr",f="wm-ftr-cnf";c.launchDebugger=function(e,t){c.isDebuggerOnWindow()||(e?o().saveData(f,e,bu):o().removeData(f),t&&(s.dbgr||(s.dbgr={}),s.dbgr.debuggerWasLoaded=t),n(!0),Me.postMessageToFrameAndDescendants(window.top,u({requestType:"DEBUGGER_LOADED"})))},c.closeDebugger=function(){if(c.isDebuggerOnWindow()){var e=s.dbgr.close;e&&e()}delete s.dbgr},c.loadDebuggerFromStorage=function(){t(),n()},c.isDebuggerOnWindow=function(){return!!s.dbgr},c.loadDebuggerForEditor=function(){c.closeDebugger(),o().saveData(f,{uiState:"wmd-minimize"},bu),o().saveData(d,vu.ActiveAndReset,bu)},c.isDebuggerEnalbled=function(){return Pc.get().DebuggerSettings&&"1"==Pc.get().DebuggerSettings.IsInPublish},c.clearDebuggerState=function(){o().removeData(d),o().removeData(f)},e.apply(null,arguments)}function cr(){function e(){}var t=this,n="wmLogger.js",r="logger/"+n;t.launchLogger=function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",di()+r),document.getElementsByTagName("head")[0].appendChild(e)},t.isLoggerActivated=function(){return wmjQuery("script[src*='"+n+"']").length>0},e.apply(null,arguments)}function dr(){function e(){}function t(e){i(e.stack)}this.LocalSVNRevision="$Rev$";var n=new o(this),r=[];n.Virtual.Public("analyze",function(e){e.bind("stackComplete",t)}),n.Virtual.Public("stop",function(e){e.unbind("stackComplete",t)}),n.Virtual.Public("getData",function(){}),n.Virtual.Public("clearData",function(){}),n.Public("bind",function(e){r.push(e)}),n.Public("unbind",function(e){r=hp(r,function(t){return e!=t})});var i=n.Protected("dispatch",function(e){for(var t=0;t<r.length;t++)try{r[t](e)}catch(n){}});e.apply(null,arguments)}function fr(){function e(){f.Extends(dr)}function t(e){var t=e.stack.getName();if(g.hasOwnProperty(t)){var o,a=g[t];if(!(e.stack.totalTimeSync()<a.limit)){c={};var o=e.stack.getArgs();n(a,o),r(a,o),i(a,e),(c.event||c.data||g[t].noDetails)&&(l.push({data:e.stack,map:c}),f._base.dispatch(l)),s.clearData()}}}function n(e,t){e.evtIndex&&!c.event&&t[e.evtIndex]&&(c.event=t[e.evtIndex])}function r(e,t){e.dataIndex&&!c.data&&t[e.dataIndex]&&(c.data=t[e.dataIndex])}function i(e,t){if(e.trackData)for(var i,o,a,s=0;s<t.stacks.length;s++)i=t.stacks[s],e.trackData.hasOwnProperty(i.getName())&&(o=e.trackData[i.getName()],o&&(a=i.getArgs(),n(o,a),r(o,a)))}this.LocalSVNRevision="$Rev: 4681 $";var a=Pc.get().Settings&&Pc.get().Settings.feLimit,s=this,l=[],c={},d="wm-fe-l",f=new o(this),p=tc.getData(d)||a||-1,g={findElement:{limit:p,evtIndex:3,dataIndex:4,trackData:{getValueProfiled:{evtIndex:1,dataIndex:2},evaluateAsyncProfiled:{evtIndex:1,dataIndex:2}}},showAllLaunchers:{limit:p,noDetails:!0},redrawLaunchers:{limit:p,noDetails:!0},runAutoStart:{limit:p,noDetails:!0},"menu.openMenu":{limit:p,noDetails:!0}};f.Override("analyze",function(e){e.bind("stackComplete",t)}),f.Override("stop",function(e){e.unbind("stackComplete",t),s.clearData()}),f.Override("getData",function(){return l}),f.Override("clearData",function(){l.length=0}),s.getMapData=function(e){var t="";return e?(e.event&&(t+=", "+e.event),e.data&&(t+=", Details: "+u(e.data)),t):t},e.apply(null,arguments)}function pr(){function e(){n.Extends(dr)}function t(e){i.push(e)}this.LocalSVNRevision="$Rev: 4401 $";var n=new o(this),r=this,i=[];n.Override("analyze",function(e){e.bind("stackComplete",t)}),n.Override("stop",function(e){e.unbind("stackComplete",t);for(var n=0;n<i.length;n++)e.dispatch("stackComplete",i[n]);r.clearData()}),n.Override("getData",function(){return i}),n.Override("clearData",function(){i=[]}),e.apply(null,arguments)}function gr(){function e(){r.Extends(dr)}function t(e){for(var t=dp(e,0,function(e,t){return t>e?t:e}),n=e.length,r=dp(e,0,function(e,t){return e+t}),i=r/n,o=0,a=0;n>a;a++)o+=Math.pow(e[a]-i,2);return o/=n,{size:n,average:i,variance:o,max:t}}function n(e){if(e.stack){var t=e.stack.getName();i[t]||(i[t]=[]),i[t].push(e.stack.totalTimeSync()),a++,r._base.dispatch({stack:e.stack,totalStacksAnalyzed:a})}}this.LocalSVNRevision="$Rev$";var r=new o(this),i={},a=0;r.Override("analyze",function(e){e.bind("stackComplete",n)}),r.Override("stop",function(e){e.unbind("stackComplete",n)}),r.Override("getData",function(){if(0==a)return null;var e={};for(var n in i)i.hasOwnProperty(n)&&(e[n]=t(i[n]));
return e}),r.Override("clearData",function(){i={},a=0}),e.apply(null,arguments)}function hr(){function e(){n.Extends(dr)}function t(e){for(var t=0;r>t;t++)if(!i[t]||e.stack.totalTimeSync()>i[t].totalTimeSync())return i.splice(t,0,e.stack),i.length>r&&i.pop(),void n._base.dispatch(i)}this.LocalSVNRevision="$Rev$";var n=new o(this),r=10,i=[];n.Override("analyze",function(e){e.bind("stackComplete",t)}),n.Override("stop",function(e){e.unbind("stackComplete",t)}),n.Override("getData",function(){return i}),e.apply(null,arguments)}function mr(){function e(e){s.Extends(Ir),i=new hr,i.analyze(e)}function t(){c(),a=l.libSetTimeout(t,u)}function n(e){for(var t=0,n=0;n<e.length;n++){var r=e[n].totalTimeSync();r>t&&(t=r)}return t}function r(e,t){var n=e.totalTimeSync(),r=Math.ceil(100*n/t),i=e.getTraces();tracesString="";for(var o=0;o<i.length;o++)tracesString+=i[o].getName()+": "+i[o].totalTime()+(i[o].isAsync()?" async":"")+", ";console.log(i[0].getName()+": ("+tracesString.substring(0,tracesString.length-2)+")"),console.log(Array(r).join("-")+" (total time: "+n+")")}this.LocalSVNRevision="$Rev$";var i,a,s=new o(this),u=3e3,l=Us.get("TimerManager");s.Override("start",function(){t()}),s.Override("stop",function(){a&&(a.clear(),a=null)});var c=s.Override("flush",function(){var e=i.getData();console.log(" ----------------------------------------------\n|                Top Ten Stacks                |\n ----------------------------------------------");for(var t=n(e),o=0;o<e.length;o++)r(e[o],t)});e.apply(null,arguments)}function vr(){function e(e){r.Extends(Ir),n=new fr,n.analyze(e)}function t(e){for(var t,r,o=0;o<e.length;o++)t=e[o],r='"'+t.data.getName()+'" execution time is '+t.data.totalTimeSync()+"ms"+n.getMapData(t.map),Za(r,i,au)}this.LocalSVNRevision="$Rev: 4401 $";var n,r=new o(this),i=1;Us.get("TimerManager");r.Override("start",function(){n.bind(t)}),r.Override("stop",function(){n.unbind(t)});r.Override("flush",function(){});e.apply(null,arguments)}function yr(){function e(e,t){i.Extends(Ir),r=t,n=new fr,n.analyze(e)}function t(e){try{for(var t,n,i,o,a=0;a<e.length;a++){t=e[a],i=t.data.totalTimeSync(),n=t.data.getName();var s=Us.get("EventSender");n==s.EVENT_APPS.FindElement&&i>fu&&(o=t.map.data,s.postEvent(s.EVENT_TYPES.Performance,{type:t.map.event+" ["+n+"]",seekTime:i,oId:o.Id,oName:o.Name,wId:o.TutorialId,wName:o.TutorialName,owId:o.RelatedObjectId}))}}catch(u){r.error(u)}}this.LocalSVNRevision="$Rev: 4401 $";var n,r,i=new o(this);i.Override("start",function(){n.bind(t)}),i.Override("stop",function(){n.unbind(t)});i.Override("flush",function(){});e.apply(null,arguments)}function wr(){function e(e,t,n){s.Extends(Ir),i=t,a=n,r=new dr,r.analyze(e)}function t(e){try{var t=u[e.getName()];t&&a(function(){i(t,n(e),{timeSync:e.totalTimeSync(),timeTotal:e.totalTime(),playGuid:e.playState().playGuid,playNum:e.playState().playNum})},0)}catch(r){}}function n(e){var t=e.getArgs();switch(e.getName()){case"startNewTutorial":return _makeTutorial.getTutorials()[t[0]];case"executeTutorialStep":case"checkGoal":return t[0]}return null}this.LocalSVNRevision="$Rev$";var r,i,a,s=new o(this),u={startNewTutorial:"WalkthruProfilingEnd",executeTutorialStep:"StepProfilingEnd",checkGoal:"GoalProfilingEnd"};s.Override("start",function(){r.bind(t)}),s.Override("stop",function(){r.unbind(t)});s.Override("flush",function(){});e.apply(null,arguments)}function br(){function e(e,t,o){s.Extends(Ir),r=t,i=o;var u=Us.get("ClientStorageManager"),l=u.getData(lu)||{};a=l[cu],m(a)||(a=du),n=new fr,n.analyze(e)}function t(e){for(var t,i,o,s=0;s<e.length;s++)t=e[s],o=t.data.totalTimeSync(),o>=a&&(i={name:t.data.getName(),map:n.getMapData(t.map)||"",time:o},r("ProfileLimitExceeded",i))}this.LocalSVNRevision="$Rev: 4681 $";var n,r,i,a,s=new o(this);s.Override("start",function(){n.bind(t)}),s.Override("stop",function(){n.unbind(t)}),s.Override("setProfilerState",function(e,t){t&&m(t.limit)&&(a=t.limit)});s.Override("flush",function(){});e.apply(null,arguments)}function Sr(){function e(e,r,i,o,a,s,g,h){b.Extends(Ir),c=o,d=a,f=s,p=g,n(i),m=r,y=h,w=[],v=m.getData(C,E),l=new gr,l.bind(u),l.analyze(e),t()}function t(){var e=window.onbeforeunload;window.onbeforeunload=function(){e&&e(),S.flush()}}function n(e){h=e.register("pa",{actionUrl:"/Monitoring/AddMmt",technicalSuccessHandler:i,defaultDataStorageLifeSeconds:I,prefixForStorage:"pa",sendingThreshold:4,dataType:"profiling audit",requestParamsFunc:function(e){return{mmt:r(e),userGuid:c}},recursiveMinification:!0})}function r(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return y.toJSON(t)}function i(e,t,n,r,i){"true"==e||e&&e.Data&&e.Data.length>0?(a(e,i),r()):(Za("Profiler Measurements Audit - Internal Error",3),n())}function a(e,t){gp(w,function(n){n(e,t)})}function s(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t.push({description:n,numOfSamples:r.size,average:r.average,variance:r.variance,max:r.max})}return t}function u(e){g&&e.totalStacksAnalyzed>=T&&S.flush()}this.LocalSVNRevision="$Rev$";var l,c,d,f,p,g,h,m,v,y,w,b=new o(this),S=this,T=100,I=3600,C="wm-prf-snk",E="default";b.Override("start",function(){g=!0}),b.Override("stop",function(){g=!1}),b.Override("flush",function(){var e=l.getData();if(e){l.clearData();for(var t=s(e),n=0;n<t.length;n++){var r={measurements:[t[n]],endUserGuid:d,browser:f,page:window.location.href,os:p,session:v};h.sendData(r)}}}),b.Override("startSession",function(e){S.flush(),v=e,m.saveData(C,v,I)}),b.Override("endSession",function(){S.flush(),v=E,m.removeData(C)}),b.Override("addAuditListener",function(e){e&&w.push(e)}),e.apply(null,arguments)}function Tr(e){function t(){}function n(e,t){v.length&&v[v.length-1].playState(t)}function r(){window._walkmeInternals&&(_walkmeInternals.bind("WalkthruGuid",n),_walkmeInternals.bind("StepPlayNum",n))}function i(){e.libSetTimeout=o(e.libSetTimeout),e.playSetTimeout=o(e.playSetTimeout)}function o(e){return function(t,n){var r=h,i=u("timeout",!0);h=[];var o=e(function(){l(i),h=r,t(),h=[],a(r)},n),s=o.clear;return o.clear=function(){l(i),a(r),s.apply(o)},o}}function a(e){for(var t=0;t<e.length;t++){var n=e[t];n.hasEnded()&&(g.dispatch("stackComplete",{stack:n,stacks:e}),e.splice(t,1),t--)}}function s(e,t){f(e);var n=new _r(e,t);return h.push(n),g.dispatch("stackStart",{stack:n}),n}function u(e,t){for(var n=[],r=0;r<h.length;r++)n.push(h[r].startTrace(e,t));return n}function l(e){for(var t=0;t<e.length;t++)e[t].hasEnded()||e[t].end();e.length=0}function c(e,t,n){return function(){if(n){var r=s(e,arguments);v.push(r)}var i=u(e),o=t.apply(this,arguments);return l(i),a(h),n&&(d(r),v.pop()),o}}function d(e){for(var t=0;t<h.length;t++)if(h[t]==e)return void h.splice(t,1)}function f(e){var t=p(e);t&&(t.endAll(),a(h))}function p(e){for(var t=0;t<h.length;t++){var n=h[t].getTraces()[0];if(n&&n.getName()==e)return h[t]}}this.LocalSVNRevision="$Rev: 3683 $";var g=this,h=[],m={},v=[];g.init=function(){i(),r()},g.startStackByName=function(e){function t(){r&&(n=h,h=[r],r.endAll(),a(h),h=n,r=void 0)}var n=h;h=[];var r=s(e);return u(e),h=n,t},g.profile=function(e,t){return c(e,t,!0)},g.instrument=function(e,t){return c(e,t)},g.bind=function(e,t){m[e]||(m[e]=[]),m[e].push(t)},g.unbind=function(e,t){if(m[e])for(var n=0;n<m[e].length;n++)if(m[e][n]==t){m[e].splice(n,1);break}},g.dispatch=function(e,t){if(m[e])for(var n=0;n<m[e].length;n++)try{m[e][n](t)}catch(r){}},t.apply(null,arguments)}function Ir(){function e(){}this.LocalSVNRevision="$Rev$";var t=new o(this);t.Virtual.Public("start"),t.Virtual.Public("stop"),t.Virtual.Public("flush"),t.Virtual.Public("startSession",function(){}),t.Virtual.Public("endSession",function(){}),t.Virtual.Public("addAuditListener",function(){}),t.Virtual.Public("setProfilerState",function(){}),e.apply(null,arguments)}function Cr(){function e(){}this.LocalSVNRevision="$Rev: 4401 $";var t,n=this;n.setProfilerManager=function(e){t=e},n.start=function(e){t&&t.start(e)},n.stop=function(e){t&&t.stop(e)},n.doneLoading=function(){t&&t.doneLoading()},n.startSession=function(e){t&&t.startSession(e)},n.endSession=function(){t&&t.endSession()},n.startProfile=function(e){return t?t.startProfile(e):void 0},n.registerProfilerCallback=function(e){t&&t.registerProfilerCallback(e)},n.addAuditListener=function(e){t&&t.addAuditListener(e)},n.setProfilerState=function(e,n){t&&t.setProfilerState(e,n)},e.apply(null,arguments)}function Er(){function e(e,t,n,i,o,a,v,y){s=e,l=t,c=n,d=i,f=o,u=a,p=!1,g=[],h=v,m=y,r()}function t(e){for(var t in y)y.hasOwnProperty(t)&&y[t]&&e(y[t])}function n(){if(!p){p=!0,u.init();for(var e=0;e<g.length;e++)g[e](u)}}function r(){if(v=new pr,v.analyze(u),window._walkmeInternals&&_walkmeInternals.profilerModes&&_walkmeInternals.profilerModes.length>0)for(var e=0;e<_walkmeInternals.profilerModes.length;e++)o.start(_walkmeInternals.profilerModes[e])}function i(e){switch(e){case Cu.Console:return new mr(u);case Cu.CustomerLogLimit:return new vr(u);case Cu.Debugger:return new wr(u,Qd,d.libSetTimeout);case Cu.DebuggerLimit:return new br(u,Qd,d.libSetTimeout);case Cu.Server:return new Sr(u,s,h,bd,l.getEndUserGuid(),c.browser.string,c.os.name,f);case Cu.EventServer:return new yr(u,m)}}this.LocalSVNRevision="$Rev: 3683 $";var o=this,a={};a[Cu.Console]=mr,a[Cu.Debugger]=wr,a[Cu.DebuggerLimit]=br,a[Cu.Server]=Sr,a[Cu.CustomerLogLimit]=vr,a[Cu.EventServer]=yr;var s,u,l,c,d,f,p,g,h,m,v,y={};o.start=function(e){n(),a[e]&&!y[e]&&(y[e]=i(e),y[e].start()),o.doneLoading()},o.stop=function(e){y[e]&&(y[e].stop(),y[e]=null)},o.startSession=function(e){t(function(t){t.startSession(e)})},o.endSession=function(){t(function(e){e.endSession()})},o.addAuditListener=function(e){t(function(t){t.addAuditListener(e)})},o.setProfilerState=function(e,t){y[e]&&y[e].setProfilerState(e,t)},o.startProfile=function(e){return u.startStackByName(e)},o.registerProfilerCallback=function(e){e&&(p?e(u):g.push(e))},o.doneLoading=function(){v&&(v.stop(u),v=null)},e.apply(null,arguments)}function kr(){function e(e,t){i=e,o=t}function t(){return(new Date).getTime()}this.LocalSVNRevision="$Rev$";var n,r,i,o,a=this;a.getStart=function(){return n},a.getEnd=function(){return r},a.start=function(){n=t()},a.end=function(e){r=e||t()},a.hasEnded=function(){return!!r},a.totalTime=function(){return r-n},a.getName=function(){return i},a.isAsync=function(){return o},e.apply(null,arguments)}function _r(){function e(e,t){n=e,r=t}function t(e){for(var t,n=0;n<o.length;n++)(!t||e(t,o[n]))&&(t=o[n]);return t}var n,r,i=this,o=[],a={};i.startTrace=function(e,t){var n=new kr(e,t);return o.push(n),n.start(),n},i.hasEnded=function(){if(0===o.length)return!1;for(var e=0;e<o.length;e++)if(!o[e].hasEnded())return!1;return!0},i.totalTime=function(){var e=t(function(e,t){return t.getStart()<e.getStart()}).getStart(),n=t(function(e,t){return t.getStart()>e.getStart()}).getEnd();return n-e},i.totalTimeSync=function(){for(var e=0,t=0;t<o.length;t++)o[t].isAsync()||(e+=o[t].totalTime());return e},i.endAll=function(){for(var e=0;e<o.length;e++)o[e].hasEnded()||o[e].end()},i.getTraces=function(){return o},i.getName=function(){return n},i.getArgs=function(){return r},i.playState=function(e){if(void 0===e)return a;for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])},e.apply(null,arguments)}function xr(e,t,n){function r(e,t,n){a=t,s=e,n.shouldTrackFinder()&&u.enable()}function i(e){for(var t=0;t<e.length;t++)a.stop(e[t])}function o(e){for(var t=0;t<e.length;t++)a.start(e[t])}this.LocalSVNRevision="$Rev: 4681 $";var a,s,u=this;this.enable=function(e){var t=s.getData(lu);(!t||m(e))&&(t={},t[cu]=e,a.setProfilerState(Cu.DebuggerLimit,{limit:e})),s.saveData(lu,t,pu,void 0),o([Cu.CustomerLogLimit,Cu.DebuggerLimit])},this.disable=function(){i([Cu.CustomerLogLimit,Cu.DebuggerLimit]),s.saveData(lu,null,0,void 0)},r.apply(null,arguments)}function Ar(e,t,n){function r(e){T=e.logContext,k=e.elementStickyType,_=e.conditionStickyType,x=e.isRemoveByCondition,e.conditionCheckerParams&&(e.conditionCheckerParams.stopPollingAfterEvaluateTrue=!1,I=Us.create("ConditionChecker",e.conditionCheckerParams),C=e.conditionTree);var n={logContext:T,findElementParams:e.elementVisibilityParams.findElementParams,elementEvaluationIntervalMs:e.elementVisibilityParams.elementEvaluationIntervalMs};E=Us.create("ElementVisibilityEvaluator",n),P=e.onShow,D=e.onRemove,A=t.VISIBILITY_STATE.HIDDEN,N=!1}function i(){e.customerLog(p("UIVisibilityManager watchForVisibility for {0} with elementStickyType {1}, conditionStickyType {2}, with condition {3}, isRemoveByCondition {4}",T,k,_,!!I,x),L,O),I?l():m()}function o(){e.customerLog(p("UIVisibilityManager cleanResources for {0}",T),L,O),N=!0,I&&I.cleanResources(),E.cleanResources(),A=t.VISIBILITY_STATE.HIDDEN}function a(){s(),o()}function s(){D&&(e.customerLog(p("UIVisibilityManager triggerRemove for {0}",T),L,O),D()),A=t.VISIBILITY_STATE.HIDDEN}function u(){P&&(e.customerLog(p("UIVisibilityManager triggerShow for {0}",T),L,O),P(E.getElement())),A=t.VISIBILITY_STATE.VISIBLE}function l(){switch(_){case t.CONDITION_SHOW_STICKY_TYPE.ONCE:f();break;case t.CONDITION_SHOW_STICKY_TYPE.CONTINUE:I.onValueChanged(c),I.evaluateAsync(C);break;default:e.customerLog(p("UIVisibilityManager startWatchByConditionStickyType unknown element sticky type {0} for {1}",k,T),1,O)}}function c(n){if(!N)switch(A){case t.VISIBILITY_STATE.HIDDEN:n&&g();break;case t.VISIBILITY_STATE.VISIBLE:x&&d();break;default:e.customerLog(p("UIVisibilityManager watchByConditionStickyType unknown visibility state {0} for {1}",A,T),1,O)}}function d(){switch(_){case t.CONDITION_SHOW_STICKY_TYPE.ONCE:a();break;case t.CONDITION_SHOW_STICKY_TYPE.CONTINUE:h();break;default:e.customerLog(p("UIVisibilityManager checkConditionForRemove unknown condition sticky type {0} for {1}",k,T),1,O)}}function f(){I.onValueChanged(void 0),I.evaluateAsync(C),I.getValue(!0)&&(e.customerLog(p("UIVisibilityManager conditionOnceForShow condition valid for {0}, start watching by element",T),L,O),x&&I.onValueChanged(c),m()),x||I.cleanResources()}function g(){e.customerLog(p("UIVisibilityManager conditionContinueForShow condition valid for {0}, start watching by element",T),3,O),m(),x||I.cleanResources()}function h(){s(),E.cleanResources()}function m(){switch(k){case t.ELEMENT_STICKY_TYPE.ONCE:b();break;case t.ELEMENT_STICKY_TYPE.SOFT:case t.ELEMENT_STICKY_TYPE.STRONG:E.setOnVisibilityChanged(v),E.evaluateElementVisibilityAsynch();break;default:e.customerLog(p("UIVisibilityManager startWatchByElementStickyType unknown element sticky type {0} for {1}",k,T),1,O)}}function v(n){if(!N)switch(A){case t.VISIBILITY_STATE.HIDDEN:n==t.VISIBILITY_STATE.VISIBLE&&y();break;case t.VISIBILITY_STATE.VISIBLE:n==t.VISIBILITY_STATE.HIDDEN&&w();break;default:e.customerLog(p("UIVisibilityManager watchByElementStickyType unknown visibility state {0} for {1}",A,T),1,O)}}function y(){switch(k){case t.ELEMENT_STICKY_TYPE.SOFT:case t.ELEMENT_STICKY_TYPE.STRONG:u()}}function w(){switch(k){case t.ELEMENT_STICKY_TYPE.ONCE:case t.ELEMENT_STICKY_TYPE.SOFT:a();break;case t.ELEMENT_STICKY_TYPE.STRONG:s();break;default:e.customerLog(p("UIVisibilityManager startWatchByConditionStickyType unknown element sticky type {0} for {1}",k,T),1,O)}}function b(){E.evaluateElementVisibility(),E.getElementVisibility()==t.VISIBILITY_STATE.VISIBLE&&u(),E.setOnVisibilityChanged(v),E.evaluateElementVisibilityAsynch()}this.LocalSVNRevision="$Rev$";var S=this;S.watchForVisibility=i,S.cleanResources=o;var T,I,C,E,k,_,x,A,P,D,N,L=3,O="uiVisibility";r.apply(null,[n])}function Pr(e,t,n,r,i){function o(e){S=e.logContext,T=e.findElementParams,b=e.elementEvaluationIntervalMs||x,E=t.VISIBILITY_STATE.HIDDEN}function a(){e.customerLog(p("ElementVisibilityEvaluator evaluateElementVisibility for {0}",S),A,P),_=!1,g()}function s(){E=f()}function u(){return E}function l(){return C}function c(e){k=e}function d(){e.customerLog(p("ElementVisibilityEvaluator cleanResources for {0}",S),A,P),I&&clearTimeout(I),E=t.VISIBILITY_STATE.HIDDEN,_=!0,b=x,C=void 0}function f(){var n;switch(E){case t.VISIBILITY_STATE.VISIBLE:n=m();break;case t.VISIBILITY_STATE.HIDDEN:n=h();break;default:e.customerLog(p("ElementVisibilityEvaluator findByState unknown state {0} for {1}",E,S),1,P)}return n}function g(){var t=f();e.customerLog(p("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} new state is {1}",S,t),A,P),t!=E&&(e.customerLog(p("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} state changed from {1} to {2}",S,E,t),A,P),v(t)),E=t,_||(I=setTimeout(function(){g()},b))}function h(){var e=t.VISIBILITY_STATE.HIDDEN;return C=y(),C&&(e=t.VISIBILITY_STATE.VISIBLE),e}function m(){var e,n=t.VISIBILITY_STATE.HIDDEN;e=T.IdentifySettings?T.IdentifySettings.filter:void 0;var i=r.isElementVisible(C,e);return i&&(n=t.VISIBILITY_STATE.VISIBLE),n}function v(t){k&&(e.customerLog(p("ElementVisibilityEvaluator callOnValueChangeIfExist calling onValueChange for {0}",S),5,P),k(t))}function y(){return n.findElement(T.IdentifySettings,T.isVisible,T.scoreOut,T.mode)}this.LocalSVNRevision="$Rev$";var w=this;w.evaluateElementVisibilityAsynch=a,w.evaluateElementVisibility=s,w.getElementVisibility=u,w.getElement=l,w.setOnVisibilityChanged=c,w.cleanResources=d;var b,S,T,I,C,E,k,_,x=2e3,A=3,P="elementVisibility";o.apply(null,[i])}function Dr(e){function t(){n()}function n(){s[e.FLOW_UIELEMENT_TYPE.Popup]=i,s[e.FLOW_UIELEMENT_TYPE.Element]=o}function r(e){return s[e.Type](e)}function i(e){return Us.create("UIPopUpBalloon",e)}function o(e){return Us.create("UIElementBalloon",e)}var a=this;a.createUIElement=r;var s={};t.apply(null,arguments)}function Nr(e,t,n,r,i,o){function a(){v=o.Triggers;var r=n.findElement({Type:i.STEP_TYPE.Popup}),a=n.getSiteConfig(),s=a.BalloonSettings,u=n.getBalloonDrawer(s);y=new Fe({element:r,position:0,logger:e,text:{title:o.Title,content:o.Text},buttons:{next:d("next"),done:d("done"),back:d("back")},configuration:s,siteConfig:a,data:{stepId:0,tutorialId:0,type:i.STEP_TYPE.Popup},positionHelper:t,drawer:u,isNotSignToButtonsEvents:!0,stepSettings:{popupStepButtons:[{id:0,name:"Next/Done",action:0}],displayX:1,fadeBackground:1}})}function s(){var e=wmjQuery.Deferred();return h=e.resolve,m=e.reject,y.Show(!0,f),e.promise()}function u(){y.destroy(),r.removeOverlay(),p()}function l(t){u();for(var n=0;n<v.length;n++)if(v[n].Id==t&&h)return void h(v[n].TargetFlowNodeId);e.customerLog("OnTrigger was called but no triggers were found",1,w)}function c(){u(),m&&m()}function d(e){for(var t=0;t<v.length;t++)if(v[t].Type==e)return v[t].Id}function f(e,t){wmjQuery(".walkme-action-close, .walkme-action-cancel",t).on("click"+i.FLOW_TRIGGER_WORKSPACE,function(){c()}),wmjQuery(".walkme-action-next, .walkme-action-start",t).on("click"+i.FLOW_TRIGGER_WORKSPACE,function(){l(d("next"))}),wmjQuery(".walkme-action-done",t).on("click"+i.FLOW_TRIGGER_WORKSPACE,function(){l(d("done"))})}function p(e){wmjQuery(".walkme-action-close, .walkme-action-cancel",e).off("click"+i.FLOW_TRIGGER_WORKSPACE),wmjQuery(".walkme-action-next, .walkme-action-start",e).off("click"+i.FLOW_TRIGGER_WORKSPACE),wmjQuery(".walkme-action-done",e).off("click"+i.FLOW_TRIGGER_WORKSPACE)}var g=this;g.show=s,g.destroy=u,g.onTrigger=l,g.onClosed=c;var h,m,v,y,w="UIElementPopUpBalloon";a.apply(null,arguments)}function Lr(e,t,n,r,i){function o(){C=i.Triggers,I={title:i.Title,content:i.Text},T=i.Id;var e={logContext:i.Id,elementStickyType:n.ELEMENT_STICKY_TYPE.STRONG,elementVisibilityParams:{findElementParams:{IdentifySettings:i.IdentifySettings}},onShow:c,onRemove:d};k=Us.create("UIVisibilityManager",e)}function a(){var e=wmjQuery.Deferred();return b=e.resolve,S=e.reject,k.watchForVisibility(),e.promise()}function s(){y(),v(),m()}function u(t){s();for(var n=0;n<C.length;n++)if(C[n].Id==t&&b)return void b(C[n].TargetFlowNodeId);e.customerLog(p("UIElementBalloon OnTrigger was called but no triggers were found for uiElement {0}",T),1,A)}function l(){s(),S&&S()}function c(t){e.customerLog(p("UIElementBalloon showUIElement showing balloon {0}",T),x,A),f(t),g(t)}function d(){e.customerLog(p("UIElementBalloon removeUIElement removing balloon {0}",T),x,A),v()}function f(e){if(!_){var t={triggers:C,element:e,logContext:T};_=Us.create("UITriggersManager",t)}_.listen().then(u,l)}function g(o){var a=t.getSiteConfig(),s=a.BalloonSettings,u=t.getBalloonDrawer(s);E=new Fe({element:o,position:i.Settings.Position,logger:e,text:I,buttons:{next:!1,done:!1,back:!1},configuration:s,siteConfig:a,data:{stepId:0,tutorialId:0,type:n.STEP_TYPE.Normal},positionHelper:r,drawer:u,isNotSignToButtonsEvents:!1}),E.Show(!0,h)}function h(e,t){wmjQuery(".walkme-action-close, .walkme-action-cancel",t).on("click"+n.FLOW_TRIGGER_WORKSPACE,function(){l()})}function m(e){wmjQuery(".walkme-action-close, .walkme-action-cancel",e).off("click"+n.FLOW_TRIGGER_WORKSPACE)}function v(){_&&(_.destroy(),_=void 0),E&&E.destroy()}function y(){k&&k.cleanResources()}var w=this;w.show=a,w.destroy=s,w.onTrigger=u,w.onClosed=l;var b,S,T,I,C,E,k,_,x=3,A="UIElementBalloon";o.apply(null,arguments)}function Or(e,t,n){function r(e){a=e.logContext;for(var n=0;n<e.triggers.length;n++){var r={element:e.element,trigger:e.triggers[n]};u.push(t.createUITrigger(r))}}function i(){e.customerLog(p("UITriggersManager listenToTriggers for uiElement {0}",a),l,c);for(var t=wmjQuery.Deferred(),n=0;n<u.length;n++)u[n].listen().then(t.resolve);return t.promise()}function o(){for(var e=0;e<u.length;e++)u[e].destroy()}var a,s=this,u=[],l=3,c="triggers";s.listen=i,s.destroy=o,r.apply(null,[n])}function Mr(e){function t(){n()}function n(){a[e.FLOW_TRIGGER_TYPE.Click]=i}function r(e){return a[e.trigger.Type](e)}function i(e){return Us.create("ClickUITrigger",e)}var o=this;o.createUITrigger=r;var a={};t.apply(null,arguments)}function Rr(e,t){function n(){o=t.element,a=t.trigger,s=l+e.FLOW_TRIGGER_WORKSPACE}function r(){var e=wmjQuery.Deferred();return o.on(s,function(){e.resolve(a.Id)}),e.promise()}function i(){o.off(s)}var o,a,s,u=this,l="click";u.listen=r,u.destroy=i,n.apply(null,arguments)}function jr(e,t,n){function r(e){g=y+e.uniqueIndicator+w,h=e.uniqueIndicator}function i(t,n){e.customerLog(p("StateMachine {0} add() {1}",h,t),b,S),m[t]=n,n.init(d)}function o(t){f=l(),f&&""!=f?(e.customerLog(p("StateMachine {0}, start with recovered state from storage {1}",h,f),b,S),m[f].continueState()):(e.customerLog(p("StateMachine {0} start() with new state {1}",h,t),b,S),f=t,c())}function a(t){e.customerLog(p("StateMachine {0} switchState to {1}",h,t),b,S),m[f].exit(),f=t,c()}function s(){e.customerLog(p("StateMachine {0} end",h),b,S),m[f].exit(),f=void 0,u()}function u(){f?t.saveData(g,f,v):t.saveData(g,"",v)}function l(){var e;return t.refreshGetData(null,function(){e=t.getData(g)}),e}function c(){m[f]?(u(),m[f].enter()):e.customerLog(p("StateMachine {0} storeAndEnterCurrentState unknown key {1}",h,f),1,S)}this.LocalSVNRevision="$Rev$";var d=this;d.add=i,d.start=o,d.switchState=a,d.end=s;var f,g,h,m={},v=3600,y="wm-state-machine-",w="-current-state",b=3,S="stateMachine";r.apply(null,[n])}function Fr(e,t,n){function r(r){switch(r.Type){case t.FLOW_STEP_TYPE.UI:return Us.create("UIFlowStage",r);case t.FLOW_STEP_TYPE.Action:return n.createActionStage(r);default:e.customerLog(p("StagesFactory getStage - Unknown flow node type: {0}",r.FlowNodeType),1,o)}}var i=this;i.LocalSVNRevision="$Rev$",i.createStage=r;var o="stages"}function Br(e,t){function n(){for(var n=0;n<t.UIElements.length;n++)l.push(e.createUIElement(t.UIElements[n]))}function r(){return o()}function i(){for(var e=0;e<l.length;e++)l[e].destroy()}function o(){for(var e=wmjQuery.Deferred(),t=0;t<l.length;t++)l[t].show().then(function(t){a(e,t)},function(t){s(e,t)});return e.promise()}function a(e,t){e.resolve(t)}function s(e,t){e.reject(t)}var u=this;u.execute=r,u.destroy=i,u.restore=o;var l=[];n.apply(null,arguments)}function Ur(e){function t(){n()}function n(){h[e.FLOW_ACTION_TYPE.Branch]=i,h[e.FLOW_ACTION_TYPE.Delay]=o,h[e.FLOW_ACTION_TYPE.OpenMenu]=a,h[e.FLOW_ACTION_TYPE.PassOwnership]=s,h[e.FLOW_ACTION_TYPE.Redirect]=u,h[e.FLOW_ACTION_TYPE.Refresh]=l,h[e.FLOW_ACTION_TYPE.SetData]=c,h[e.FLOW_ACTION_TYPE.Split]=d,h[e.FLOW_ACTION_TYPE.Stop]=f,h[e.FLOW_ACTION_TYPE.WaitForCondition]=p}function r(e){return h[e.ActionType](e)}function i(e){return Us.create("BranchActionStage",e)}function o(e){return Us.create("DelayActionStage",e)}function a(e){return Us.create("OpenMenuActionStage",e)}function s(e){return Us.create("PassOwnershipSwitchActionStage",e)}function u(e){return Us.create("RedirectActionStage",e)}function l(e){return Us.create("RefreshActionStage",e)}function c(e){return Us.create("SetWalkMeDataActionStage",e)}function d(e){return Us.create("SplitActionStage",e)}function f(e){return Us.create("StopActionStage",e)}function p(e){return Us.create("WaitForConditionActionStage",e)}var g=this;g.createActionStage=r;var h={};t.apply(null,arguments)}function Gr(e){function t(){}function n(){var t=wmjQuery.Deferred(),n=e.Settings;return o(t,n.branchFlowNode.entityId,n.branchFlow.entityId),t.promise()}function r(){}function i(){}function o(e,t,n){return e.resolve(t,n)}var a=this;a.execute=n,a.destroy=r,a.restore=i,t.apply(null,arguments)}function Vr(e){function t(e){l=e.Links,c=e.Name}function n(){for(var e=wmjQuery.Deferred(),t=0;t<l.length;t++)if(s(l[t]))return o(e,l[t].TargetFlowNodeId);return a(e)}function r(){}function i(){}function o(e,t){return e.resolve(t)}function a(e){return e.reject()}function s(e){if(e.ConditionTree){var t={_elementName:c},n=Us.create("ConditionChecker",t);return n.evaluateAsync(e.ConditionTree),n.getValue()}return!0}var u=this;u.LocalSVNRevision="$Rev$",u.execute=n,u.destroy=r,u.restore=i;var l,c;t.apply(null,[e])}function Wr(){function e(e){t.Extends(Qn,e),r=new Us.get("FlowsPlayer")}var t=new o(this),n=this;n.LocalSVNRevision="$Rev$";var r;t.Override("setDeployables",function(e){t._base.setDeployables(e),r.init(t._base.deployablesDict())}),t.Override("name",function(){return"Flow"}),t.Override("activateById",function(e){r.start(e)});e.apply(null,arguments)}function Qr(e,t,n){function r(){}function i(e){k=e}function o(t,n){e.customerLog(p("FlowPlayer start - Starting flow {0} with node {1}",t,n),D,P),s(),g(t,n)}function a(){I(),e.customerLog(p("FlowsPlayer restore - Restoring flow {0}",_[_.length-1].flowId),D,P),h()}function s(){e.customerLog("FlowPlayer stop - Stopping current flow",D,P),E&&(E.destroy(),E=void 0),_=[],T()}function u(t,n){return e.customerLog(p("FlowPlayer onStageSuccess - next stage id: {0}, next flow id: {1} ",t,n),D,P),E&&E.destroy(),n?void c(n,t):t?void d(t):void v()}function l(t){e.customerLog(p("FlowPlayer onStageError - next stage id: {0}",t),D,P),t?u(t):s()}function c(t,n){e.customerLog(p("FlowPlayer branch - Branching to flow {0} with node {1}",t,n),D,P),g(t,n)}function d(t){e.customerLog(p("FlowPlayer transition - Transitioning to node {0}",t),D,P),S(t),h()}function f(){var t=_[_.length-1],n=k[t.flowId].Nodes[t.stageId];n.Links&&n.Links.length>0&&(e.customerLog(p("FlowPlayer branchBack - Returning from branch to flow id: {0}, node id: {1}",t.flowId,n.Links[0].TargetFlowNodeId),D,P),d(n.Links[0].TargetFlowNodeId))}function g(e,t){var n=y(e,t);b(e,n),m(e,n)}function h(){var e=_[_.length-1];m(e.flowId,e.stageId)}function m(t,n){e.customerLog(p("FlowPlayer run - Running flow id: {0}, node id: {1}",t,n),D,P),E=w(t,n),E.execute().then(u,l)}function v(){return _.pop(),_.length>0?void f():void s()}function y(e,t){return t?t:k[e].RootFlowNodeId}function w(e,t){return k[e].Nodes[t]?n.createStage(k[e].Nodes[t]):void 0}function b(e,t){_.push({flowId:e,stageId:t}),T()}function S(e){var t=_[_.length-1];t.stageId=e,T()}function T(){t.saveData(x,_,A)}function I(){t.refreshGetData(null,function(){_=t.getData(x)}),_||(_=[])}var C=this;C.LocalSVNRevision="$Rev$",C.init=i,C.start=o,C.restore=a,C.stop=s;var E,k,_=[],x="wm-flow-stack",A=60,P="flow",D=3;r.apply(null,arguments)}function Hr(){function e(){}e.apply(this,arguments)}function $r(e,t){function n(e){var n=e.get().Settings.customAuditVars;if(n)for(var i=0;i<n.length;i++){var a=n[i];a.value&&""!=a.value&&(a.value.indexOf("walkme_sf_vars")>-1?o.push({index:i+1,value:a.value}):r(i+1,t.getWindowVar(a.value)))}}function r(e,t){"string"==typeof t?WalkMeAPI.setAnalyticsCustomField(e,t):void 0==t&&WalkMeAPI.setAnalyticsCustomField(e,"")}this.LocalSVNRevision="$Rev: 4681 $";var i=this,o=[];i.handleSfVars=function(){for(var e=0;e<o.length;e++){var n=o[e];r(n.index,t.getWindowVar(n.value))}},n.apply(null,arguments)}function zr(e){function t(e){return e&&e.embed}this.getContainer=function(n,r,i,o){if(t(n))return je.closestNonStatic(r);var a=null;return i&&(a=e(r)),a&&a.length||(a=e(null,!0)),a},this.handleEmbedding=function(e,n,r){t(e)&&(n.bind("click,mousedown",function(e){e.stopPropagation()}),n.css("cursor","default"))},this.fixPosition=function(e,n,r){if(t(n)){var i=r.offset();e.left-=i.left,e.top-=i.top}}}function Yr(e){var t=void 0;return mtjQuery.each(Fl,function(n,r){return e==r?(t=n,!1):void 0}),t}function qr(e){Us.createCallback(function(e,t){var n="set"+e;Rs.hasOwnProperty(n)&&Rs[n](t)}),Us.get("DataEncoderFactory").registerEncoders(),Xl=Us.get("StepUtils"),Jl=Us.get("AuditSourceManager"),Us.initialize("Logger"),Us.initialize("HostData"),Us.initialize("ElementFinder"),Us.get("WalkmeLoader").start(function(){e&&e(Rs)})}function Kr(e){Cf=e}function Xr(){return Vl.getAllUserGuids()||Td}function Jr(){var e=window.jQuery||window.$;return e&&e.fn&&e.fn.jquery?e:void 0}function Zr(){return Jl.get()===Au.SOURCES.preview}function ei(){return Jl.get()===Au.SOURCES.play}function ti(){return Jl.get()===Au.SOURCES.production}function ni(e,t){void 0==e.BalloonSettings&&t.length>0&&(e.BalloonSettings=t[0].Steps[0].Configuration)}function ri(e,t){var n=e.css(t);return n?parseFloat(n):0}function ii(e){var t=Jd;Jd=[],oi({objectsArray:t,functionsToExecute:[function(e,t){e.destroy(!1,t)}],successCallback:e})}function oi(e){function t(){if(0==a.length)return void(l&&l());o=u.length*a.length;for(var e=u.length-1;e>=0;e--)for(var t=a.length-1;t>=0;t--){if(d)return;var n=s?s(a[t]):a[t];u[e](n,r)}}function n(){if(0==u.length)return void(l&&l());o=u.length;for(var e=u.length-1;e>=0;e--){if(d)return;u[e](r,i)}}function r(){o--,0==o&&l&&l()}function i(){d||(d=!0,c&&c())}var o,a=e.objectsArray,s=e.selectorFunc,u=e.functionsToExecute,l=e.successCallback,c=e.failCallback,d=!1;a?t():n()}function ai(){for(var e="",t=0;t<Cc.length;t++){var n=Cc[t];n.Css&&(e+=n.Css)}return e}function si(){_.extendVisibilityFilters()}function ui(e){var t=f(e),n=Pc.get();return n&&(t.direction=n.Direction,t.showPoweredBy="1"==n.PoweredByLink,t.showPoweredByFormat=n.IsDisplayPoweredBy),t}function li(e,t){for(var n=0;n<e.length;n++)e[n].userGuid=t}function ci(){return Rs.LibVersion}function di(){var e=Vl.getSettingsFile().LibFile,t=/http.+\/player\//.exec(e);return t[0]}function fi(e){try{window._walkmeInternals||(window._walkmeInternals={}),_walkmeInternals.timing||(_walkmeInternals.timing={});var t=_walkmeInternals.timing;t.map||(t.map={}),t.list||(t.list=[]);var n=(new Date).getTime();t.map[e]=n,t.list.push({name:e,time:n})}catch(r){}}function pi(){var e=Rs.getSiteConfig();return e.Settings&&e.Settings.rmWMCond&&qc.evaluate(e.Settings.rmWMCond)?(Za("Remove walkme condition is true. Removing WalkMe.",3),Rs.removeWalkMe("Removed by condition"),!0):!1}function gi(){if(Mf("noDebugger"))return!1;var e=tc.getData(af,vu.Deactive,Rs.getUserGuid());return e==vu.Active||e==vu.ActiveAndReset}function hi(){var e=tc.getData(sf,!1,Rs.getUserGuid());return e}function mi(){var e=vi()||yi();return e||Za(iu,"Not loading test me (checked window var, query string parameter and storage entry)",1),e}function vi(){return window.walkMeTestMeLoad?(Za(iu,"ShouldLoadTestMe - True by window var",1),Rs.rememberTestMeIsOn(),window.walkMeTestMeLoad=void 0,!0):void 0}function yi(){var e=tc.getData(su,0,Rs.getUserGuid());return e?(Za(iu,"ShouldLoadTestMe - True by storage entry",1),!0):void 0}function wi(e,t){Za("after loading storage",4);var n=e?bi:Si;(t||!e)&&(gi()&&!Fo()&&(zl.dbgr={debuggerWasLoaded:n
},n=nd.loadDebuggerFromStorage),hi()&&Rs.launchLogger());var r=mi();if(r&&(window._walkmeInternals.testme||(window._walkmeInternals.testme={}),window._walkmeInternals.testme.testmeLoadedCallback=n,n=Rs.loadTestMe),Za("willLoadTestMe: "+r,1),od.hasTaskGoalCompletionCondition()){var i=n,o=function(){ei()||od.didTasksFinishLoading()?i():od.setTasksFinishedLoadingCallback(i)};n=o}return n}function bi(){Za("after loading storage for play",4),Kc.init(),Ti(),Dd.enabled()?Dd.start():da(),Za("sending editor event: StorageManagerInitialized",4),Vd("StorageManagerInitialized")}function Si(){Ti();var e=Rs.Logger.timer("after loading storage"),t=Rs.Logger.timer("show all launchers");Rs.showAllLaunchers(),t.stop(),ki();var n=[];if(Dd.enabled())try{n.push(Dd.start)}catch(r){Rs.Logger.customerLog(r,"failed to start pass ownership manager",1),da()}else da();if(ti()){var i=Rs.getEndUserGuid(),o=_walkmeInternals.walkme_userGuid_to_replace||bd;Cd.auditUniqueEndUser(o,xd.getPermutation(),i)}n.push(Pd?Pd.startWatching:Ei),oi({functionsToExecute:n,successCallback:function(){Kc.init(Dd.enabled()),Rs.profilerAPI.doneLoading(),fi("walkmeReady"),Ii(),Zr()||ei()||Yc.reportEndUser(function(){Rs.removeWalkMe("reportEndUserFailed")}),setTimeout(function(){Us.get("SettingsCacheManager").start()},5e3),e.stop()}})}function Ti(){Hc.init(),Ed.init(),Md.start(),Rs.setCrossDomainManager(Us.get("CrossDomainManager"))}function Ii(){try{walkme_ready()}catch(e){}try{mt_ready()}catch(e){}Us.get("EventsTrigger").sync("WalkMeReady"),Rs.isWalkMeVisible()&&!Ci()&&(Us.get("PermalinkManager").run(),Us.get("AutoStartManager").run())}function Ci(){return!!window._testMe}function Ei(e){e()}function ki(){if(ql.isIE()){var e=mtjQuery("a[href^='javascript:']"),t="click.walkme.ignoreUnload";e.off(t),e.on(t,function(){tf=!0})}}function _i(e,t){for(var n=e.Steps,r=0;r<n.length;r++)xi(n[r],r,t)}function xi(e,t,n){e.StepIndex=t,e.Configuration&&-1!=e.Configuration?(e.End=e.Configuration.End,e.Duration=e.Configuration.Duration,e.Delay=e.Configuration.Delay,e.Position=e.Configuration.Position):e.Configuration=n.BalloonSettings,e.IgnorePosition=void 0!=e.IgnorePosition?e.IgnorePosition:parseInt(Ss(e.Settings,"ignorePosition",0))}function Ai(e){return Pi(e,"TaskProperties","Settings"),Di(e),e}function Pi(e,t,n){void 0!==e[t]?e[n]=e[t]:e[t]=e[n]}function Di(e){e.RelatedDeployableId?e.Settings.WalkThruId=e.RelatedDeployableId:(e.RelatedDeployableType=Fl.Tutorial,e.RelatedDeployableId=Number(e.Settings.WalkThruId))}function Ni(){return!Mf("walkmeIE7Support")&&ql.isIEBrowser(8,"lt")&&!window.postMessage}function Li(){if(Us.get("WalkMeInfo").init(),Ni())return Za("WalkMe is not supported on that browser"),!1;if(Us.get("InteractionInitiationEventListener").init(),Us.get("AnalyticsPropertiesManager").init(),Rs.getBalloonDrawer(Pc.get().BalloonSettings).loadResources(Is().siblings("head")),Oi(),Vl.getStorageType()||(Jc=Gl.byFeature(),Zc=Jc),Jc===!1)return!1;if(Od.setFeatures(Mf("blockJsonp"),Mf("corsJsonpFallback")),Id=Us.get("AbTestingManager"),!Id.shouldLoadWalkme())return!1;Ud.overrideTimeouts(),Rs.profilerAPI.setProfilerManager(Us.get("ProfilerManager")),Rs.profilerAPI.registerProfilerCallback(ts),Rs.profilerAPI.start(Cu.EventServer),Rs.trackFinder=Us.get("TrackFinder"),id=new $n({deployables:Sc});var e=Pc.get();e.EndUserSettings&&zc.setEndUserSettings(e.EndUserSettings),Nf=Mf("oldframesets");var t=parseInt(e.TodoListSettings.isActive)&&Rs.evaluateConditionTree(e.TodoListSettings.activateCondition),n=Dc.length>0;n&&(Kc.enableMultiUserStorage(),gd=new Jn({deployables:Dc,lib:Rs}),Pd=new Mt({deployablesGoalManager:Kc,experiments:gd.getAll(),lib:Rs,getEndUserGuid:Rs.getEndUserGuid,getPermutationId:xd.getPermutation,getAuditSource:os,serverAddress:Uc.get(),storageManager:tc})),ud=new Kn({deployables:Ec,lib:Rs,cdnServerName:Wc,deployablesGoalsManager:Kc,clickAuditManager:Ed}),ld=new Hn({deployables:Lc,lib:Rs}),pd=new Xn({deployables:jc,lib:Rs}),ad=new Yn({deployables:Ic,lib:Rs}),dd=new er({deployables:Oc,lib:Rs}),fd=new tr({deployables:Mc,lib:Rs}),hd=new wt({deployables:_c,abPermutationManager:xd,recorderServerManager:Uc,permalinkManager:Gc,state:Dl,lib:Rs}),cd=Us.create("ShuttlesManager",{deployables:kc}),md=Us.create("ShoutOutsManager",{deployables:xc,lib:Rs,type:Fl.ShoutOut}),vd=Us.create("ShoutOutsManager",{deployables:Ac,lib:Rs,type:Fl.ShoutOutBar}),yd=Us.create("FlowsManager",{deployables:Rc,lib:Rs,type:Fl.BusinessSolutions}),od=new zn(Tc,t,Uc.get(),tc,Md,Rs.getEndUserId(),Rs.Logger.error,Us.get("Consts"),Us.get("WalkMeInfo"),Rs,ud,id,Us.get("EventSender"),Us.get("CommonEvents"),Us.get("CommonUtils"),Us.get("AuditTasksManager")),Mi(),fd.injectTagsToDeployables();var r=Us.get("AbTasksValidator");return r.shouldTrackAbTasks()?(sd=new ct({todoListManager:od,goalsManager:Ul}),od.init(),od.loadTasks(sd.startWatchingTasks)):(_walkmeInternals.abTasksBlocked=!0,Qd("AbTasksBlocked"),Za("Not tracking ab testing and tasks - blocked in this browser."),Id.disableReport()),Id.isAbTestingEnabled()&&Rs.setAnalyticsCustomFields(0,Rs.getEndUserId()),!0}function Oi(){Me.setDefault(Pc.get(),"TodoListSettings",{})}function Mi(){wd[Fl.Tutorial]=id,wd[Fl.Content]=ud,wd[Fl.Task]=od,wd[Fl.Launcher]=ad,wd[Fl.Category]=ld,wd[Fl.Collection]=pd,wd[Fl.Shuttle]=cd,wd[Fl.AbExperiment]=gd,wd[Fl.Survey]=hd,wd[Fl.ShoutOut]=md,wd[Fl.ShoutOutBar]=vd,wd[Fl.ConditionBlocks]=Oc,wd[Fl.Tag]=fd,wd[Fl.BusinessSolutions]=yd}function Ri(){this.get=function(e){return wd[e]}}function ji(e){xf.push(e);var t=Pf[Pf.length-1];t!=e&&Pf.push(e)}function Fi(e){Af.push(e.Id)}function Bi(e){Za("onbeforeunload called",1),tf?tf=!1:(ef=!0,Ud.pauseAllTimeouts(),Dd&&Dd.enabled()?Dd.loseOwnership(!1,!0):Mf("noUnload")&&Gi())}function Ui(){ef=!1,Ud.resumeTimeoutsArray("playTimeouts")}function Gi(){setTimeout(function(){ef=!1,Ud.resumeAllTimeouts()},3e3)}function Vi(e){try{e=e||0;var t=tc.getData(of,{},Xr()[0]),n=t[lf],r=Wf(n),i=t[df],o=r.Steps[i+e];return o}catch(a){return null}}function Wi(){window._testMe&&(_testMe.exit(),wmjQuery("script[src*='waklme_testme']").remove(),window._testMe=void 0,window.walkMeTestMeLoad=void 0,tc.removeData(su),window.walkMeTestMeClearStorage=void 0,window.testMeData&&(window.testMeData=void 0,Za(iu,"Test me data cleared",1)),Za(iu,"_testMe cleared",1))}function Qi(e){if(ed.isFramesetsPage())for(var t=ed.getAllFramesDocuments(),n=0;n<t.length;n++)wmjQuery(e,t[n]).remove()}function Hi(e,t){return Me.defaultValue(e,t)}function $i(e,t){zd=-1,qd=Dl.NOT_RUNNING,Yd=-1,Kd=[],Hc._currentPlayGUID="",kf=!1,xf=[],Af=[],Pf=[],Bc={},Df=-1,ef=!1,nf=!1,e||(Hc._currentPlayInitiator=null),t||ua()}function zi(e,t,n,r){for(var i=t;n>i;i++)Hc.auditStep(Sc[e],Sc[e].Steps[i],r)}function Yi(e){if(Qc[Sc[e].TutorialId]){var t=Qc[Sc[e].TutorialId].siteConfig;t&&Pc.set(t)}}function qi(e){var t;return t=Ss(Sc[e].Settings,"SafeStart",!1),t&&"0"!=t.enabled||(t=Ss(Pc.get().Settings,"SafeStart",null)),t}function Ki(e,t,n,r){for(var i=t;n>i;i++)r!=Au.STEP_STATUS.SkippedByActionStep&&Qd("NewSkippedStep",Sc[e].Steps[i])}function Xi(e){var t={ClickEvent:e};Wd("UserStoppedWalkthru",t),Hd("UserStoppedTutorial",t);var n=-1==Yd;n||Hc.auditStep(sa(),is(),Au.STEP_STATUS.Exited),Rs.stopTutorial(n),Wd("UserStoppedWalkthruAfterStop",t),Hd("UserStoppedTutorialAfterStop",t)}function Ji(e,t,n,r,i,o){try{Rs.userSawWalkMe(),js=0,Qd("LoadWt",Sc[e]),Yi(e),ud.removeContent(),r=Hi(r,Rs.generateNewPlayGuid(Sc[e].TutorialId)),n=Hi(n,!0),t=Hi(t,0);var a=void 0==o?t:o;0===t&&(t=wa(e)),Uf(e,t,r,i,[],[],[]);var s=Sc[e];try{i=i||{type:Rs.getPlayInitiatorEnum().NONE},$c.auditWalkthruStart(s,i,a,t,r)}catch(u){Rs.Logger.error(u)}os()!=Au.SOURCES.play&&Kc.startWatchingDeployable(s,r),Rs.postWelcomeStep(e)}catch(l){_makeTutorial.Logger.error(l)}}function Zi(e,t,n,r,i,o,a){return Ld.wrapSession(function(){function s(t){if(!ko(t)||1!=r)return t.StepIndex;if(Sc[e].Steps.length>t.StepIndex){var o=Zi(e,t.StepIndex+1,n,r,i,yu.Normal);return 0>o?o:t.StepIndex}}function u(e){var t=xo(e);if(t.getGoToData){var o=t.getGoToData(),a=Zi(o.tutorialIndex,o.stepIndex,n,r,i,yu.Normal);if(0>a)return a}else if("stopWt"==t.type)return-2;return e.StepIndex}function l(e,n){return to(Bf,n),Za("returned checking "+t+" ("+d.Id+") result: "+e,5,eu),e}var c=Sc[e],d=c.Steps[t];r=Hi(r,1),n=Hi(n,0);var f=no(Bf,d.Id);if(Za("Checking if step index "+t+" ("+d.Id+") can be played. looped: "+f+" on mode:"+o,5,eu),Bf.push({id:d.Id,mode:o}),f)return l(-5,d.Id);var p=Ro(d),g=!0;p!=jl.STICKY_CONDITION&&(g=jo(d));var h=Ss(d.Settings,"fake",!1),m=Ss(d.Settings,"skipNotExists",!1),v=m||d.IsSkippable||!g||h;if(g&&!h&&Rs.findElement(d,null,null,"Step - Find Element "+(a||""),Me.getStepTrackData(d,c)))return Xl.isActionStep(d)?l(u(d),d.Id):Xl.isPopupStep(d)?l(s(d),d.Id):l(t,d.Id);i&&i.push({stepIndex:t,stepStatus:eo(v,g)});var y=t+r;if(v){var w;if(0>y)return l(-2,d.Id);if(y==c.Steps.length){if(Kd&&Kd.length>n){var b=Kd[Kd.length-1-n];return w=Zi(b.tutorialIndex,b.stepIndex,n+1,r,i,yu.Normal),Za("Checking if step "+t+" ("+d.Id+") can be played. reached last step",5,eu),l(w,d.Id)}return l(-2,d.Id)}return Za("Checking if step "+t+" ("+d.Id+") can be played. Skipping to: "+y,5,eu),w=Zi(e,y,n,r,i,yu.Normal),l(w,d.Id)}return l(-1,d.Id)})}function eo(e,t){return e?t?Au.STEP_STATUS.SkippedNotFound:Au.STEP_STATUS.SkippedByCondition:Au.STEP_STATUS.SupposedToShow}function to(e,t){if(!e||0==e.length)return!1;for(var n=[],r=void 0,i=!1;e.length>0;){if(r=e.pop(),r.id==t){i=!0;break}n.push(r)}if(n.length>0)for(;n.length>0;)e.push(n.pop());return i}function no(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id==t)return!0}return!1}function ro(e,t,n,r,i,o){var a=ss(!0),s=f(n);i&&(s.displayX=!1);var u=Rs.getSiteConfig().BalloonSettings;u=f(u),wmjQuery.extend(u,o);var l=new Fe({element:a,forceEmbedBalloonInIframe:!1,positionHelper:_,fixedSize:{width:t,height:0},stepSettings:s,htmlContent:e.htmlContent,text:{title:e.title||"",content:e.text||"",subText:e.subText||""},data:{type:Au.STEP_TYPE.Popup},configuration:u,logger:Rs.Logger,drawer:Rs.getBalloonDrawer(u),siteConfig:Rs.getSiteConfig()});Jd.push(l),l.Show(!1,function(){var e=mtjQuery(l.getBalloonDiv());if(e.removeClass("walkme-custom-step-undefined"),mtjQuery("*",e).removeClass("walkme-custom-step-undefined"),e.removeClass("walkme-custom-walkthru-undefined"),mtjQuery("*",e).removeClass("walkme-custom-walkthru-undefined"),o&&o.surveyId){var t=o.surveyId;e.attr("id","walkme-survey-balloon-"+t)}r(e,u)})}function io(e){var t=mtjQuery("<div></div>");return e=Me.nl2br(e),t.append(e),t}function oo(e,t){var n=Rs.getSiteConfig(),r=io(n.SafeStartPopupText),i={popupStepButtons:[{id:0,name:n.RedirectButtonText,action:5},{id:1,name:n.StayButtonText,action:6}]};ro({htmlContent:r},400,i,function(n){uo(n,e,t)})}function ao(e,t){var n="Sorry about that! The Walk-Thru cannot be played right now. Please try again later",r=so();r.enabled&&(n+=p(" or contact <a href='{0}' target='_blank' style='text-decoration: underline; color: blue;'>support.</a>",r.url));var i=io(n),o={popupStepButtons:[{id:0,name:"OK",action:7}]},a=!0;ro({htmlContent:i},400,o,function(e){mtjQuery(".walkme-action-ok",e).click(function(){Rs.releaseBalloons()})},a)}function so(){var e={};return e.enabled=Rs.getCommonUtils().isTrue(Rs.getSiteConfig().Settings,"openATicketEnabled",!1),e.url=Rs.getCommonUtils().getSettingsValue(Rs.getSiteConfig().Settings,"openATicketUrl",""),e.url&&Rs.getCommonUtils().isValidUrl(e.url)?(e.url=encodeURI(e.url),e.url=Np(e.url,["&"])):(e.enabled=!1,e.url=null),e}function uo(e,t,n){mtjQuery(".walkme-action-redirect",e).click(function(){co(t,Nl.RedirectClicked,n)}),mtjQuery(".walkme-action-stay",e).click(function(){fo(n)}),mtjQuery(".walkme-action-close",e).attr("onclick","").unbind("click"),mtjQuery(".walkme-action-close",e).click(function(){fo(n)})}function lo(e,t,n){void 0!=t.Id&&Hc.safeStartAudit(e,t),n&&setTimeout(n)}function co(e,t,n){var r=Sc[n],i=function(){po(e,n)};lo(t,r,i)}function fo(e){lo(Nl.StayClicked,Sc[e]),go()}function po(e,t){Yd=0,qd=Dl.WAITING_FOR_REDIRECT,zd=t,ua(),Ta(e,!0),go()}function go(){Rs.releaseBalloons()}function ho(){if(Lf){for(var e=Lf.length-1;e>=0;e--)Lf[e].cleanResources();Lf=[]}}function mo(){tc.refreshGetData(),Ud.playSetTimeout(function(){var e=tc.getData(rf,void 0,sa().userGuid);1==e?(Za("Other window finished. Resuming walk-thru here."),tc.saveData(rf,0,fc,sa().userGuid),da()):mo()},500)}function vo(e,t){if("number"==typeof e)return e==t;for(var n=e.split(","),r=0;r<n.length;r++)if(t+""==n[r])return!0;return!1}function yo(e){Vf()||Kd.push({tutorialIndex:zd,stepIndex:void 0!=e?e:Yd+1,playGuid:Hc._currentPlayGUID,playInitiator:Hc._currentPlayInitiator,stepPlayHistory:xf,stepCompletedHistory:Af,stepPlayStack:Pf})}function wo(e){return Sc[e]}function bo(e){var t=Ru(e,function(e){var t=es(e.TutorialId);Za("Check walk-thru: "+e.TutorialId+" ("+t+")");var n=Rs.findElement(e,null,null,'Checking Walk-Thru "'+t+'"');return Za(n?"First step found.":"First step not found."),{step:e,element:n}});return t=hp(t,function(e){return e.element}),Ru(t,function(e){return e.step})}function So(e){try{Za("Multiple branch: Going through all walk-thrus.");var t=Qf(e),n=bo(t);if(1==n.length)return n[0].TutorialId;if(!(n.length>1))return null;Za("can't decide which tutorial to play",5),Za(n.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(r){Rs.Logger.error(r)}}function To(){return Io(zd,Yd,0)}function Io(e,t,n){if(Sc[e].Steps.length>t+1){var r=Sc[e].Steps[t+1];return r.TutorialIndex=e,r}if(Kd&&Kd.length>n){var i=Kd[Kd.length-1-n];return Io(i.tutorialIndex,i.stepIndex-1,n+1)}return null}function Co(){var e=To();return null==e?0:e.Delay}function Eo(e){var t=sa();hd.handleSurveyPlayThroughWalkthru(t,_u.WalkThruInterrupted,void 0,Rs.executeTutorialNextStep,e)}function ko(e){return e.Type!=Au.STEP_TYPE.Popup?!1:1==Ss(e.Settings,"popup-play-condition",0)}function _o(e){for(var t=0;t<Ic.length;t++)if(Ic[t].Id==e)return Ic[t]}function xo(e){if(void 0!=Bc[e.Id])return Bc[e.Id];var t=Ss(e.Settings,"action",null);return t?(Bc[e.Id]=Us.get("ActionsFactory").get(t.actionType,t.arguments,Ll.STEP,e),Bc[e.Id]):(Za("No action core. aborting..."),null)}function Ao(e){var t=e;return xf.length>1&&(t=qf(xf[xf.length-2],Sc[zd])),vo(e.End,hu.NOTHING)||vo(t.End,hu.NOTHING)}function Po(e,t){function n(){var n=r();switch(n){case hu.CLICK:Za("Self Executed Step - Trigger: Click",3),i.click(t);break;case hu.HOVER:Za("Self Executed Step - Trigger: Hover",3),i.hover(t);break;case hu.KEY_PRESSED:Za("Self Executed Step - Trigger: Text Input",3),i.text(t,e.Settings.selfExecuteText);break;case hu.SELECT_VALUE:var o=e.Settings.complexHtml&&e.Settings.complexHtml.val;o?(i.select(t,o),Za("Self Executed Step - Trigger: Select Value",3)):Za("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:Za("SKIPPED Self Executed Step - Trigger not supprted",3),ef=!1,Rs.executeTutorialNextStep()}}function r(){var t=e.End.split(/,/);return fa(t[0]==hu.NEXT_BUTTON&&t.length>1?t[1]:t[0])}var i=Us.get("InputGenerator");Ud.libSetTimeout(n,1e3*e.Settings.reactionTime||Au.DEFAULT_REACTION_TIME)}function Do(e,t){var n,r=t.data("iframe");if(e.Settings.complexHtml){if((e.Settings.complexHtml.type==Eu.TABLE||"table"==e.Settings.complexHtml.type)&&(n=_.findNearestSelfOrParentByType(t,["table"]),e.Settings.complexHtml.settings)){switch(e.Settings.complexHtml.settings.triggerType){case"cell":t=_.findFirstSelfOrChildByType(t,["td","th"])||_.findNearestSelfOrParentByType(t,["td","th"]);break;case"column":t=_.getColumn(t);break;case"row":t=_.findFirstSelfOrChildByType(t,["tr"])||_.findNearestSelfOrParentByType(t,["tr"]);break;case"table":t=_.findNearestSelfOrParentByType(t,["table"])}e.Settings.complexHtml.settings.onTable||(n=void 0)}if(t&&t.length>0)return r&&t.data("iframe",r),{parentElement:n,elements:t}}}function No(){if(!lp(xf)||xf.length<2)return!0;for(var e=0;e<xf.length-1;e++){var t=qf(xf[e],Sc[zd]);if(!lp(t.Settings.action))return!1}return!0}function Lo(){for(var e=Pc.get().StepsInfoText,t=Sc[zd].Steps,n=0,r=0,i=0;i<t.length;i++)Oo(t[i])&&(n++,Yd>=i&&r++);return Mf("floatingsubtext")?(e=e.replace("{0}",gc+r+hc),e=e.replace("{1}",mc+n+vc)):(e=e.replace("{0}",r),e=e.replace("{1}",n)),e}function Oo(e){return!(e.Type==Au.STEP_TYPE.Action||parseInt(Ss(e.Settings,"isInvisible",0))||parseInt(Ss(e.Settings,"fake",0)))}function Mo(e){var t=Ru(e,zf),n=mp(-1,t);return void 0==n||-1==n}function Ro(e){return Ss(e.Settings,Rl,jl.PLAY_CONDITION)}function jo(e){var t=Ss(e.Settings,"skipStepCond","");if(t.length>0)try{return Rs.evaluateCondition(t)?!1:!0}catch(n){return!0}var r=Ss(e.Settings,"PSCTEnabled",0);if(1!=r)return Xl.isActionStep(e)&&"never"==Ss(e.Settings,"whenToFire","")?!1:!0;var i=Ss(e.Settings,"PSCT","");if(""==i)return!0;try{var o=Rs.evaluateConditionTree(i);return Qd("PlayStepCondition",e,{playGUID:Hc._currentPlayGUID}),o}catch(n){return!1}}function Fo(){return nd.isDebuggerOnWindow()}function Bo(){return rd.isLoggerActivated()}function Uo(e,t){var n=zf(t);if(n>-1){var r=qf(e,Sc[n]);if(r)return r}return null}function Go(e,t){return Sc[e]&&Sc[e].Steps[t]?Sc[e].Steps[t]:void 0}function Vo(e,t){for(var n=t.Steps,r=0;r<n.length;r++)if(n[r].Id==e)return n[r];return null}function Wo(e,t,n,r,i){qd=Dl.WAITING_FOR_SPLIT,1!=n&&yo(t),Xd=e,Rd=r,ua(),Ca(),Rs.resumeSplit(i)}function Qo(e,t){for(var n=0;n<t.length;n++)e.unbind(t[n]+".mt");return!1}function Ho(e,t){var n=window._walkmeInternals;if(n){var r="LauncherIsShown";e?n.bind(r,t):n.unbind(r,t)}}function $o(e,t){var n=Ss(e.Settings,lc,!1);if(n){var r=parseInt(Ss(e.Settings,cc,null));if(r==uc.soft&&t||e.isContentSecure===!1)return;zo(e,r)}}function zo(e,t){var n=function(e){var t=e.drawable&&e.drawable.isDrawn();return!e.actionInProgress&&!t},r=function(e){return Rs.showLauncherForSticky(e)};Gd.registerSticky({identifier:e.Id,stickinessType:t,redrawFunction:Rs.getCommonUtils().encloseCall(r,e),shouldDrawFunction:Rs.getCommonUtils().encloseCall(n,e)})}function Yo(e,t){for(var n=[],r=0;r<e.length;r++)t!=r&&n.push(e[r]);return n}function w(e){var t=[];return wmjQuery.each(e,function(e){t.push(e)}),t}function b(e){var t=[];return wmjQuery.each(e,function(n){t.push(e[n])}),t}function qo(e){var t=e.Settings.action;switch(t.actionType){case"playWt":return null!=id.getById(parseInt(t.arguments.wtId));case"playContent":return null!=ud.getById(parseInt(t.arguments.contentId));case"playSurvey":return null!=hd.getById(parseInt(t.arguments.surveyId))}return!0}function Ko(e,t){e.actionInProgress=!0;var n=Mf("hideLauncherWithoutLink");if(n&&!qo(e))return e.actionInProgress=!1,!1;var r=Ss(e.Settings,"PlayLauncherConditionTree",null);return e.element=void 0,"onHover"==e.Settings.displayStyle&&Xo(e,t),r?Zo(e,t,r):ta(e,t,!0)}function Xo(e,t){var n={featureName:Ks,elementName:e.Name,jqueryPollingIntervalMs:700,stopPollingAfterEvaluateTrue:!1,stickySonar:!0,trackEvent:"Launcher - Segmentation (Hover)",trackData:Me.getTrackData(e)},r=Us.create("ConditionChecker",n);e.hoverLauncherEvaluator&&e.hoverLauncherEvaluator.cleanResources(),e.hoverLauncherEvaluator=r,r.onValueChanged(function(n){return n?(e.hoverDestroyTimeout&&(e.hoverDestroyTimeout.clear(),e.hoverDestroyTimeout=void 0),ta(e,t,!1)):(e.hoverDestroyTimeout=Ud.libSetTimeout(function(){e.drawable&&e.drawable.isDrawn()&&(e.hoverLauncherEvaluator.getCachedValue()||e.drawable.destroy(function(){e.hoverLauncherEvaluator.cleanResources(),e.hoverLauncherEvaluator=void 0,Xo(e,t)}))},750),!1)});var i,o=".walkme-launcher-id-"+e.Id;e.IdentifySettings.IsJquerySelector?i={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:e.IdentifySettings.JquerySelector},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:o},nodeDepth:0},nodeDepth:0}:(identifySettings=Jo(e.IdentifySettings),i={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"ElementHoverSwitch",funcArgs:{IdentifySettings:identifySettings},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:o},nodeDepth:0},nodeDepth:0}),r.evaluateAsync(i)}function Jo(e){var t=f(e);return t.Sensitivity=e.StepSensitivity,t.StepSensitivity=void 0,t.IgnoreId=e.IsIgnoreId,t.IsIgnoreId=void 0,t.IgnoreText=e.IsIgnoreText,t.IsIgnoreText=void 0,t}function Zo(e,t,n){var r=!0;if(!e.evaluator){var i={featureName:Ks,elementName:e.Name,bypassUIChange:!0,trackEvent:"Launcher - Segmentation",trackData:Me.getTrackData(e)},o=Us.create("ConditionChecker",i);e.evaluator=o,o.onValueChanged(function(n){n?r=ta(e,t,!0):e.actionInProgress=!1}),o.evaluateAsync(n)}return e.evaluator.getCachedValue()&&r}function ea(e){var t=Rs.findElement(e.IdentifySettings,null,null,"Launcher - Find Element",Me.getTrackData(e));return t?(e.element=t,!0):!1}function ta(e,t,n){function r(){return e.element?!0:ea(e)}function i(){return n?!0:e.evaluator?e.evaluator.getValue():!0}function o(){return"onHover"!=e.Settings.displayStyle?!0:e.drawable&&e.drawable.isDrawn()?!1:e.hoverLauncherEvaluator.getCachedValue()}return i()&&r()&&o()?na(e,t):(e.actionInProgress=!1,!1)}function na(e,t){var n=e.element,r=Ss(e.Settings,"imageObject",""),i=ra(n,r,e);if(i)return e.isContentSecure=!1,Za("Launcher ["+e.Id+"] will not be displayed. Launcher URL must be https in secure page",1),Qd("LauncherInsecure",{name:e.Name}),!1;e.isContentSecure=!0,fs(n);var o=ad.getMinClickDelay(e),a="none"!=e.Settings.action.actionType,s=new $e({element:n,settings:e.Settings,identifySettings:e.IdentifySettings,lib:Rs,position:e.Position,launcherId:e.Id,userGuid:e.userGuid,launcherName:e.Name,positionHelper:_,addFunctionality:a,cdnServer:Wc,clickAuditManager:Ed,delayBetweenClicks:o});e.drawable=s,e.drawable.evaluator=e.evaluator;var u=function(n){return function(){n.show(function(){n.setTimeoutOn(),t&&t(),e.actionInProgress=!1})}}(s);return aa(e,u),!0}function ra(e,t,n){if(void 0===typeof n.isContentSecure)return n.isContentSecure;var r=e[0].ownerDocument.location.href;return oa(r)&&"custom"==t.type?oa(t.data.url)&&ia(t.data.click)&&ia(t.data.hover)?!1:!0:!1}function ia(e){return!e||oa(e)}function oa(e){return/^https/i.test(e)}function aa(e,t){var n=Me.isTrue(e.Settings,"hasDelay",!1);if(n){var r=Ss(e.Settings,"delayInSeconds",0);Ud.libSetTimeout(t,1e3*r)}else t()}function sa(){return Sc[zd]}function ua(){var e=void 0,t=void 0,n=void 0,r=void 0,i=sa(),o=i?i.TutorialId:-1,a=i?i.userGuid:bd,s=Us.get("InteractionManager").getCurrentInteractionGuid();qd==Dl.RUNNING||qd==Dl.WAITING_FOR_PAGE_CHANGE?(e=Yd+1,i.Steps.length<=Yd+1&&(t=1)):qd==Dl.WAITING_FOR_SPLIT?(e=Yd,n=Xd,r=Rd):e=Yd;var u=la(o,e,t,n,r,s);tc.saveData(of,u,fc,a)}function la(e,t,n,r,i,o){var a={};return a[lf]=e,a[cf]=qd,a[df]=t,a[ff]=js,a[pf]=Hc._currentPlayGUID,a[gf]=Hc._currentPlayInitiator,a[hf]=Kd,a[mf]=n,a[vf]=xf,a[uf]=r,a[wf]=i,a[bf]=o,window._testMe&&(a[yf]=Af),a}function ca(){for(var e=Xr(),t=0;t<e.length;t++){var n=e[t];tc.removeData(of,n)}}function da(){Za("Restoring cross user state",5);for(var e=Xr(),t=0;t<e.length;t++){var n=e[t],r=ha(n);if(r)return n}return!1}function fa(e,t){return m(e)?parseInt(e,10):t}function pa(e){var t=ga(e),n=Go(t.tutorial,t.step);return n&&(t.isTutorialFinished||t.state!=Dl.WAITING_FOR_ELEMENT_EVENT&&t.state!=Dl.WAITING_FOR_NEXT_BUTTON_CLICK||Ss(n.Settings,"sticky",0)||n.IsSkippable||(Za("page change happened while waiting for element - pausing walkthru",2),t.state=Dl.PAUSED)),t}function ga(e){var t=tc.getData(of,{},e),n=fa(t[lf],-1),r={state:fa(t[cf],Dl.NOT_RUNNING),step:fa(t[df],-1),playNum:t[ff]||js,tutotrialGUID:t[pf],playInitiator:t[gf],splitPointStack:Hi(t[hf],[]),isTutorialFinished:Hi(t[mf],0),stepPlayHistory:Hi(t[vf],[]),stepCompletedHistory:Hi(t[yf],[]),tutorial:zf(n),splitTutorialIds:Hi(t[uf],[]),splitStartFromStepId:Hi(t[wf],[]),interactionGuid:t[bf]};return r}function ha(e){function t(){Ud.playSetTimeout(function(){_makeTutorial.executeCurrentStep()},1e3*r.Delay)}var n=pa(e);js=n.playNum,Kd=n.splitPointStack,xf=n.stepPlayHistory,Af=n.stepCompletedHistory,zd=n.tutorial,qd=n.state,Yd=n.step,Us.get("InteractionManager").setCurrentInteractionGuid(n.interactionGuid),n.tutotrialGUID&&(Hc._currentPlayGUID=n.tutotrialGUID),Hc._currentPlayInitiator=n.playInitiator;var r=Go(zd,Yd);if((qd==Dl.WAITING_FOR_PAGE_CHANGE||qd==Dl.PASSING_OWNERSHIP)&&r){Yd--;var i=Go(zd,Yd);i&&(i.playNumber=js),Ca(!0),Yd++}if(Za("isTutorialFinished: "+n.isTutorialFinished,5),1!=n.isTutorialFinished||qd!=Dl.RUNNING&&qd!=Dl.WAITING_FOR_PAGE_CHANGE&&qd!=Dl.PASSING_OWNERSHIP)if(Za("Continue from cookie: currentTutorial: "+zd+" -- currentState: "+qd+" -- currentStep: "+Yd+" -- currentPlayGUID: "+Hc._currentPlayGUID+" -- currentUserGUID: "+e,5),!r||qd!=Dl.RUNNING&&qd!=Dl.WAITING_FOR_ELEMENT&&qd!=Dl.WAITING_FOR_STICKY_ELEMENT&&qd!=Dl.WAITING_FOR_PAGE_CHANGE&&qd!=Dl.WAITING_FOR_CONDITION&&qd!=Dl.PASSING_OWNERSHIP)if(r&&qd==Dl.WAITING_FOR_REDIRECT)Ji(zd,0,!1,Hc._currentPlayGUID,Hc._currentPlayInitiator);else if(r&&qd==Dl.WAITING_FOR_OWNERSHIP)_makeTutorial.startNewTutorial(zd,Yd,!1,Hc._currentPlayInitiator);else if(!r||qd!=Dl.WAITING_FOR_ELEMENT_EVENT&&qd!=Dl.WAITING_FOR_NEXT_BUTTON_CLICK)if(qd==Dl.WAITING_FOR_SPLIT)Xd=n.splitTutorialIds,Rd=n.splitStartFromStepId,Rs.resumeSplit();else{if(qd!=Dl.PAUSED)return $i(),Za("Invalid cookie data. Not running tutorial. (userGuid : "+e+")",5),!1;Za("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),Rs.releaseBalloons(),Ja(),$i(),Wd("WalkthruAborted")}else Ss(r.Settings,"sticky",0)?(Za("Sticky - keep looking for element",5),qd=Dl.WAITING_FOR_STICKY_ELEMENT,t()):r.IsSkippable&&(sa().Steps.length==Yd+1?Rs.tutorialFinished():(Yd++,qd=Dl.RUNNING,t()));else t();else Rs.tutorialFinished();return!0}function ma(e,t){var n=Array();if(!e.Conditions)return n;for(var r=0;r<e.Conditions.length;r++)e.Conditions[r].GroupType==t&&(void 0==e.Conditions[r].IsEnabled||1==e.Conditions[r].IsEnabled)&&n.push(e.Conditions[r]);return n}function va(e,t){var n=Array();if(!e.Conditions)return n;for(var r=0;r<e.Conditions.length;r++)e.Conditions[r].Type==t&&(void 0==e.Conditions[r].IsEnabled||1==e.Conditions[r].IsEnabled)&&n.push(e.Conditions[r]);return n}function ya(e){return va(e,Ml.FIRST_STEP_MUST_EXIST).length>0?!0:!1}function wa(e){for(var t=Sc[e],n=va(t,Ml.SKIP_FIRST_STEP),r=0;r<n.length;r++){var i=n[r];if(Xf(i.Content)){var o=i.ExtraData,a=o?o-1:1;return Za("The walk-thru has a skip step condition ("+i.Content+") which is true. Skipping to: "+a),a}}return 0}function ba(e,t){var n=Sc[e],r=va(n,Ml.REDIRECT);return 0==r.length?!1:Sa(r[0],t)}function Sa(e,t){return Ta(e.Content,t)}function Ta(e,t){if(!Rs.getCommonUtils().isValidUrl(e))return!1;e=Np(e,["&"]);var n=Zf(window.location.href),r=Jf(e),i=Zf(r);return n==i?!1:(t&&vp(r),Ia(n,i)?!1:!0)}function Ia(e,t){var n=e.split("#"),r=t.split("#");return r.length>1?n.length>1?n[0]==r[0]&&n[1]!=r[1]:n[0]==r[0]:!1}function Ca(e){e=Hi(e,!0);var t=is();Qd("StepCompleted",t),Fi(t),e?(Hc.auditStep(sa(),t,Au.STEP_STATUS.Performed),Ea(t)):Hc.auditStep(sa(),t,Au.STEP_STATUS.MovedBack)}function Ea(e){var t=Ss(e.Settings,"resumeOtherWindow",!1);t&&tc.saveData(rf,1,fc,sa().userGuid)}function ka(e,t){e[t]&&"transparent"!=e[t]||(e[t]=ql.isIE()?"#00000000":"transparent")}function _a(e){return e.Type==Au.STEP_TYPE.Popup&&e.LinkedTutorialIds&&Mo(e.LinkedTutorialIds.split(";"))?(Wo(e.LinkedTutorialIds.split(";")),!0):!1}function xa(e,t){mtjQuery(".walkme-action-close, .walkme-action-cancel",e).click(function(e){Xi(e)}),mtjQuery(".walkme-action-next, .walkme-action-start",e).click(function(e){Na()}),mtjQuery(".walkme-action-back",e).click(function(e){Da()}),mtjQuery(".walkme-action-done",e).click(function(e){La()}),mtjQuery(".walkme-custom-bbcode-survey",e).click(function(e){Eo(Aa(t))}),Rs.bindBBCodeEvents(e,null,t),Mf("stopButtonPropagation")&&e.on("mousedown mouseup click",function(e){e.stopImmediatePropagation()})}function Aa(e){return e?{objectId:e.objectId,type:Ll.BBCODE,sType:e.type}:void 0}function Pa(e){e.durationHandler&&(e.durationHandler.clear(),e.durationHandler=null)}function Da(){Wd("BackButtonClicked"),Hd("BackButtonClicked");var e=Gf(Yd);Pa(e),Pf.pop();var t=Oa(Df-1);t||(qd=Dl.RUNNING,Rs.releaseBalloons(function(){Ca(!1),Yd=Df-1,Rs.executeTutorialNextStep()}))}function Na(){Wd("NextButtonClicked"),Hd("NextButtonClicked");var e=Gf(Yd);Qd("StepWasTriggered",e),Pa(e);var t=Oa();t||(qd=Dl.RUNNING,Rs.releaseBalloons(function(){_a(e)||(Ca(),Rs.executeTutorialNextStep())}))}function La(){Wd("DoneButtonClicked"),Hd("DoneButtonClicked");var e=Gf(Yd);if(Qd("StepWasTriggered",e),Pa(e),!_a(e)){var t=Oa();t||(Ca(),Rs.tutorialFinished())}}function Oa(e){for(var t,n=0;n<Jd.length;n++)Jd[n].releaseEvents(e)&&(t=!0);return t}function Ma(e){return e.offset().top<=0&&"relative"==e.css("position")&&(!ql.isIE()||"visible"==e.css("overflow-x")&&"visible"==e.css("overflow-y"))&&(!ql.isIEBrowser(9)||Ra(e))}function Ra(e){try{var t=wmjQuery("<div />");t.important({position:"absolute",top:0,visibility:"hidden"}),e.append(t);var n=t.offset().top;return t.remove(),n>0}catch(r){return!1}}function ja(e,t){return(new Date).getTime()-e<t}function Fa(){return jd&&ja(Fd,bc)?jd:(jd=Ba(),Fd=(new Date).getTime(),jd)}function Ba(){var e={top:0,left:0};if(!Mf("collapsedMargins"))return e;var t=wmjQuery("body"),n=0;if(Ma(t)){t.css("margin-top");t.find("> div").each(function(){var e=wmjQuery(this),t=e.offset().top,r=e.position().top;if(parseInt(e.css("margin-top"),10)>0){var i=t-r;i>n&&(n=i)}})}return e.top+=n,e}function Ua(e,t){for(var n=e,r=Rs.getUiUtils().getStyle(e,t);r&&"static"==r.position;)n=n.parentNode,r=Rs.getUiUtils().getStyle(n,t);var i=Rs.getBodyInheritedMargin();i.top=_.tryParsingStyleValue(i.top),i.left=_.tryParsingStyleValue(i.left);var o={top:i.top,left:i.left},a=Fa();if(o.top+=a.top,o.left+=a.left,r)for(Va(o,n,r,"margin"),Wa(o,n,r),Ga(o,n,r),_.fixFirefoxAutoMarginBug(o,n,r,t),n=n.parentNode,r=Rs.getUiUtils().getStyle(n,t);r;)Va(o,n,r,"margin"),Va(o,n,r,"padding"),Wa(o,n,r),Ga(o,n,r),n=n.parentNode,r=Rs.getUiUtils().getStyle(n,t);return o}function Ga(e,t,n){"static"!=n.position&&(e.top+=_.tryParsingStyleValue(n.top),e.left+=_.tryParsingStyleValue(n.left))}function Va(e,t,n,r){e.top+=_.tryParsingStyleValue(n[r+"Top"]),e.left+=_.tryParsingStyleValue(n[r+"Left"])}function Wa(e,t,n){/(html|body)/i.test(t.tagName)||(e.top+=Qa(n.borderTopWidth),e.left+=Qa(n.borderLeftWidth))}function Qa(e){var t=1,n=3,r=5,i=0;switch(e){case"thin":i=t;break;case"medium":i=n;break;case"thick":i=r;break;default:i=Math.round(parseFloat(e))}return i}function Ha(e,t,n){e.css("border",""+t.BalloonBorderWidth+"px solid "+t.BorderColor),ka(t,"Color"),ka(t,"BalloonColor2");var r=void 0!=t.BalloonColor2?t.BalloonColor2:t.Color,i=void 0!=t.BalloonRadius?t.BalloonRadius:15,o=""+i+"px";if(e.css("-moz-border-radius",o),e.css("-webkit-border-radius",o),e.css("border-radius",o),t.Color==r?e.css("background",t.Color):(e.css("background","-moz-linear-gradient(top, "+t.Color+", "+r+")"),e.css("background","-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+t.Color+"), color-stop(100%,"+r+"))"),e.css("background","-webkit-linear-gradient(top, "+t.Color+" 0%,"+r+" 100%)"),e.css("background","-o-linear-gradient(top, "+t.Color+" 0%,"+r+" 100%)"),e.css("background","-ms-linear-gradient(top, "+t.Color+" 0%,"+r+" 100%)"),e.css("background","linear-gradient(to bottom, "+t.Color+" 0%,"+r+" 100%)"),e.css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr='"+t.Color+"', endColorstr='"+r+"',GradientType=0 )"),-1==e.css("background-image").indexOf("gradient")&&(e.css("background-image","url('"+Wc+"/player/resources/images/spacer.gif')"),e.css("background-repeat","repeat")),Ms()||e.css("border-radius","0px")),!n){var a="0px 0px";switch(parseInt(t.Position)){case rc.Top:a="-3px -3px";break;case rc.Right:
a="4px -4px";break;case rc.Bottom:a="4px 4px";break;case rc.Left:a="-4px 4px"}var s=" 3px rgba(0, 0, 0, 0.2)";e.css("-moz-box-shadow",a+s),e.css("-webkit-box-shadow",a+s),e.css("box-shadow",a+s)}}function $a(e,t){var n=e.left+t.left,r=e.top+t.top,i=e.right-e.left,o=e.bottom-e.top,a=e.right+t.left,s=e.bottom+t.top;return{top:r,left:n,width:i,height:o,right:a,bottom:s}}function za(e,t){if(!e)return void(t&&t());var n=mtjQuery("iframe",e);0==n.length?Ud.libSetTimeout(function(){e.remove(),t&&t()},1):(n.attr("src",""),Ud.libSetTimeout(function(){n.hide(),n.remove(),e.remove(),t&&t()},1))}function Ya(e){for(var t=ap(e),n={top:0,left:0},r=0;r<t.length;r++){var i=t[r].offset(),o=Me.getBody(t[r][0].contentWindow.document);n.top+=i.top,n.top-=o.scrollTop||t[r][0].contentWindow.document.documentElement.scrollTop,n.left+=i.left,n.left-=o.scrollLeft||t[r][0].contentWindow.document.documentElement.scrollLeft}return n}function qa(e){try{if("1.7.1"!=e.jquery)return;var t=e[0].ownerDocument.documentMode;if(7==t||8==t){var n=e.data("iframe");if(n&&"FRAME"==n[0].tagName)return!0}}catch(r){}}function Ka(e,t){if(qa(e)){var n=e[0].ownerDocument,r=Me.getBody(n);t.top+=r.scrollTop||n.documentElement.scrollTop,t.left+=r.scrollLeft||n.documentElement.scrollLeft}}function Xa(e,t){t=wmjQuery.extend({},wc,t);var n=Ya(e),r=e.offset();n.top+=r.top,n.left+=r.left,Ka(e,n);var i=sp(Mf("fixIframeScroll")?e:mtjQuery(window)),o=Mf("bodyClientHeight")?wmjQuery("body")[0].clientHeight:i.height(),a=i.top()+t.top,s=i.left()+t.left,u=o-t.bottom+(i.top()-0),l=i.width()-t.right+(i.left()-0),c=op(n.top,n.left+e.width(),n.top+e.height(),n.left,a,l,u,s);return c}function Ja(){Ud.stopTimeoutsArray("playTimeouts"),kf=!1}function Za(e,t,n){Rs.Logger.customerLog(e,t,n)}function es(e){for(var t=0;t<Sc.length;t++)if(Sc[t].TutorialId==e)return Sc[t].Name;return""}function ts(e){Rs.getBodyInheritedMargin=e.profile("getBodyInheritedMargin",Rs.getBodyInheritedMargin),Rs.startNewTutorial=e.profile("startNewTutorial",Rs.startNewTutorial),$f=e.profile("executeTutorialStep",$f),Rs.findElement=e.profile("findElement",Rs.findElement);var t=Us.get("ElementsRedrawer");t.profile(e),Rs.evaluateAsync=e.instrument("evaluateAsync",Rs.evaluateAsync)}function ns(){var e="withCredentials"in new XMLHttpRequest;return e}function rs(){var e=!1,t=!!window.wm_no_audit,n=!!Me.getWindowCookie("wm-no-audit"),r=Mf("blockJsonp")?ns():!0,i=Rs.getSiteConfig(),o=!!i.Settings&&!!i.Settings.noAuditCond&&qc.evaluate(i.Settings.noAuditCond);return!r||!Uc.get()||Mf("noAudit")||e||t||n||o}function is(){var e=sa();return e&&e.Steps[Yd]}function os(){return Jl.get()}function as(){return Mf("disableWidgetOpenFullUrl")?"":ql.getUrl()}function ss(e){var t=Is();if(0==t.length)return!1;var n=mtjQuery("#walkme-popup-element",t);if(n.length<=0||e){var r="walkme-popup-element";e&&(r+="-"+n.length),n=mtjQuery(t[0].ownerDocument.createElement("div")),n.attr({id:r}),n.css("width","0px;"),n.css("height","0px;"),mtjQuery(t.append(n))}return n.data("iframe",t),n}function us(e,t){return e.length>=t.length&&e.lastIndexOf(t)+t.length==e.length}function ls(e,t){return 0==e.indexOf(t)}function cs(e){return void 0!=e&&e.length>0}function ds(){this.NumNodeRemove=0,this.NumNodeDiff=0,this.SumNodeDiff=0}function fs(e,t){if(Rs.isWalkMeVisible()){var n=Rs.getCustomCssProp()||"",r=ai()||"",i=r+n;if(cs(i)){var o=hs(e);if(o){var a="wm_custom_css_set";Ef&&o.data(a,!1);var s=o.data(a);return t||!s?(s&&ps(o),gs(i,o,a)):void 0}}}}function ps(e){wmjQuery("#walkme-custom-css",e).remove()}function gs(e,t,n){try{return e=Np(e,["&",'"',"'",">"]),Rs.ResourceManager.injectCss(e,"walkme-custom-css",t,null,"walkme-player-css"),t.data(n,!0),!0}catch(r){return!1}}function hs(e){if(!e){var t;return Rs.shouldHandlePageAsFramesets()&&(t=Ts(wmjQuery(_makeTutorial.getBiggestFrame()))),wmjQuery("head",t)}return Ef||e.data("iframe")?e.parents("html").children("head"):void 0}function ms(e){Zd&&Zd.clear(),je.removeOverlay(),za(Pp,e),Pp=null}function vs(e,t){return void 0===e?t:e}function ys(e,t,n,r,i,o){this.width=e,this.height=t,this.point_direction=vs(n,0),this.angle=vs(r,0),this.color=vs(i,"red"),this.background=vs(o,"transparent")}function ws(e){return e?0==e.length?!1:!0:!1}function bs(e,t){return ws(e)&&t in e?!0:!1}function Ss(e,t,n){return ws(e)&&bs(e,t)?e[t]:n}function Ts(e){var t=e[0];if(void 0==t)return[];var n;try{n=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:[],n=mtjQuery(n)}catch(r){Me.handleCrossDomainError(r),n=[]}return n}function Is(e,t){if(window.walkme_get_top_container){var n=window.walkme_get_top_container();if(n)return mtjQuery(n)}var r;return r=e?e.parents("body"):mtjQuery("body"),(0==r.length||"FRAMESET"==Ns(r[0]))&&(r=e?e.parents("html"):t||!Rs.shouldHandlePageAsFramesets()?mtjQuery("html"):mtjQuery("body",Ts(mtjQuery(Rs.getBiggestFrame())))),r}function Cs(e,t){var n=Jr(),r=e.parents("div"),i=pp(r,function(e){var e=n(e);return void 0!=e.data&&void 0!=e.data("jsp")?e:void 0});return i?wmjQuery(i).find(".jspPane"):t}function Es(){var e="Lib on "+walkme_lib_notify_ServerName+": "+Rs.SVNRevision;if(window.walkme_lib_version&&(e+=", Version: "+walkme_lib_version),window.walkme_lib_upload_date&&(e+=", Uploaded On: "+walkme_lib_upload_date),window.walkme_lib_uploader&&(e+=", By: "+walkme_lib_uploader),ql.isQuirksMode())return void Za(e,5);var t=Lu.to_html("<div id='walkme-dev-mode-alert' class='walkme-to-remove' style='z-index: {{{popupBalloonZindex}}}; position: fixed; top: 0; left: 30px; background-color: {{{backgroundColor}}}; font-size: 15px; padding:0 4px;'>{{{message}}}</div>",{popupBalloonZindex:sc,backgroundColor:ks(walkme_lib_notify_ServerName),message:e}),n=Is(null,!0);mtjQuery("#walkme-dev-mode-alert",n).remove(),n.append(t)}function ks(e){var t,e=e.toLowerCase();switch(e){case"dev":t="lightblue";break;case"qa":t="red";break;case"test":t="yellow";break;case"local":t="lightgreen";break;default:t="pink"}return t}function _s(){try{if(FB._inCanvas&&FB.Canvas.getPageInfo)return 1==window.walkme_dont_use_fb_scroll?!1:!0}catch(e){return!1}}function xs(e,t,n,r,i,o,a,s){if(void 0==a||null==a)var a={top:0,left:0};n>500&&(n=0);var u=(o-mtjQuery(e).outerHeight())/2+r+a.top,l=(i-mtjQuery(e).outerWidth())/2+n+a.left;u=Math.round(u>0?u:0),l=Math.round(l>0?l:0),Math.abs(u-mtjQuery(e).offset().top)<2&&Math.abs(l-mtjQuery(e).offset().left)<2||(u+="px",l+="px",mtjQuery(e).css({position:"absolute",margin:0}),t?(s=s?s:{duration:400},mtjQuery(e).animate({top:u,left:l},s)):mtjQuery(e).css({top:u,left:l}))}function As(e,t){FB.Canvas.getPageInfo(function(n){Ps(e,t,n)})}function Ps(e,t,n){xs(e,t,n.scrollLeft,n.scrollTop,mtjQuery(window).width(),n.clientHeight)}function Ds(e){this.evaluate=function(t){function n(t){if("Func"==t.nodeType){var r=e.getFunctionsByLibNameType(t.funcName),i=[];i.push(t.funcArgs);var o=r.apply(this,i);return t.result=o,o}if("And"==t.nodeType){var o=n(t.leftSon)&&n(t.rightSon);return t.result=o,o}if("Or"==t.nodeType){var o=n(t.leftSon)||n(t.rightSon);return t.result=o,o}return!1}return null==t?!0:n(t)}}function Ns(e){var t=e.tagName;return t.toUpperCase&&(t=t.toUpperCase()),t}function Ls(e,t,n,r,i){function o(){c=t.get(),f=n.getEndUserId,d=r.error}function a(e){try{if(p||rs())return!0;var t=c.Settings.abTesting.testNumber,n=void 0!=window.wm_customData?wm_customData.abTestingData:null;Od.execute({url:i.get()+"/Statistics/AddAbTestingWidgetVisible",data:{userGuid:bd,endUserId:f(),testNumber:t,isVisible:e,customDataSerialized:u(n)}})}catch(r){d(r,"Could not report ab testing result to server")}}function s(t,n,r){var i=t+c.Settings.abTesting.testNumber,o=e.getData(i);if(o===!0||o===!1)return o;var a=l(1,100);return o=n>=a,e.saveData(i,o,Su),r&&r(o),o}function l(e,t){return Math.floor(Math.random()*(t-e+1)+e)}this.LocalSVNRevision="$Rev$";var c,d,f,p,g=this,h="wm-absl-",m="wm-abss-";g.shouldLoadWalkme=function(){try{return g.isAbTestingEnabled()?s(h,c.Settings.abTesting.loadPercentage):!0}catch(e){return d(e,"Could not check if Walkme should be loaded according to AB Testing"),!0}},g.shouldShowWidget=function(){try{if(!g.isAbTestingEnabled())return!0;var e=m;return window.walkme_ab_imp_cookie&&(e+=f()+"-"),s(e,c.Settings.abTesting.showPercentage,a)}catch(t){return d(t,"Could not check if widget should be shown according to AB Testing"),!0}},g.isAbTestingEnabled=function(){var e=c.Settings&&c.Settings.abTesting&&parseInt(c.Settings.abTesting.enabled),t=Mf("abtesting")&&e&&!Zr()&&!ei();return t},g.disableReport=function(){p=!0},o.apply(null,arguments)}function Os(e){od.clearTaskAndGoalCompletionLocally(Rs.getEndUserGuid(),e)}function Ms(){return!ql.isIE(9,"lte")}fi("libStartInit");var Rs=this,js=0,Fs=0;this.MTVersion="1.0",this.SVNRevision="$MasterRev: 45a135d35cc0e55af7c33673ef5edf83cdbf879b $",this.LibVersion="964",this.LocalSVNRevision="$Rev$",this.SpecialRevision="no",window._walkmeInternals=window._walkmeInternals||{};var Bs=window._walkmeInternals.di,Us=window._walkmeInternals.ctx;if(!Us){Bs=function(e){e=e||{},e.version="0.3.3";return e.logger=function(e,t){},e.log=function(t,n,r){n&&(t="[class="+n.name()+"] "+t),e.logger("DI - "+t,r||4)},e.error=function(t,n,r){e.log(t,n,r)},e.createContext=function(){function t(e){for(;e.indexOf(" ")>=0;)e=e.replace(" ","");return e}var n={map:{}};return n.entry=function(e){return n.map[e]},n.register=function(t,r,i){var o=e.entry(t,n).type(r).args(i);return n.map[t]=o,o},n.has=function(e){return null!=n.entry(e)},n.get=function(t,r){return n.has(t)||e.error("Object["+t+"] is not registered"),n.entry(t).getObject(r)},n.create=function(t,r){return n.entry(t).strategy()==e.strategy.singleton&&e.error("Attempt to create singleton object ["+t+"]"),n.has(t)?n.entry(t).create(r):void e.error("Object["+t+"] is not registered")},n.initialize=function(){function t(t){var r=n.entry(t);r?r.initialize()&&r.strategy().initialize()&&n.get(t):e.error("Object["+t+"] is not registered")}return function(e){if(e)t(e);else for(var e in n.map)t(e)}}(),n.clear=function(){this.map={}},n.resolve=function(t){var r=t.load(),i={};return n.eachDependency(t.dependencies(),function(o,a){var s=n.get(o,r);n.ready(s,n.entry(o)),null==s&&e.error("Dependency ["+t.name()+"."+a+"]->["+o+"] can not be satisfied",t),i[a]=s}),i},n.eachDependency=function(n,r){if(n)for(var i=t(n).split(","),o=0;o<i.length;o++){var a=i[o];if(a){var s=e.dependencyExpression(a);try{r(s.name,s.property,o)}catch(u){e.error("An exception was thrown while the DI tried to resolve class '"+s.name+"'. Check the class name, or if it was registred correctly. \r\n inner exception: \r\n"+u.message)}}}},n.ready=function(e,t){var r=t.wasReady();if(t.wasReady(!0),!r){var i=n.createCallback();i&&i(t.name(),e),e&&"function"==typeof e.ready&&e!=window&&e!=window.document&&e!=window.document.body&&(t.wasReady(!0),e.ready.apply(e,t.injector().ready(e,t)||[]))}return e},n.createCallback=function(){var e;return function(t){return 0==arguments.length?e:(e=t,n)}}(),n},e.dependencyExpression=function(e){var t={},n=e,r=e;if(e.indexOf("=")>0){var i=e.split("=");n=i[0],r=i[1]}return t.name=r,t.property=n,t},e.entry=function(t,n){function r(e){s[e]=function(t){return arguments.length?(l[e]=t,s):l[e]}}function i(e,t){return void 0!=t&&s.type(t),s.factory(e),s}function o(e,t){return void 0!=t&&s.dependencies(t),s.load(e),s}var a,s={};s.name=function(){return t};for(var u=["load","wasReady","strategy","injector","type","dependencies","args","factory","initialize"],l={},c=0;c<u.length;c++){var d=u[c];r(d)}return s.depsDictionary=function(e){return arguments.length?(l.depsDictionary=e,s):(l.depsDictionary||s.depsDictionary(n.resolve(s)),l.depsDictionary)},l.strategy=e.defaults.strategy,l.factory=e.defaults.factory,l.injector=e.defaults.injector,l.load=e.defaults.load,l.wasReady=!1,l.initialize=!0,s.create=function(t,r,i){i=i||e.load.recursive;var o=l.strategy.test(a,i);if(r)return o;o&&(t=l.injector.create(t?t:l.args,s,n,i));var u=l.strategy.create(a,l.factory,l.type,t,n,s,i);return n.ready(u,s)},s.getObject=function(e){return s.create(void 0,void 0,e)},s.object=function(e){return arguments.length?(a=e,s):s.create()},s.asFunction=function(t){return i(e.factory.func,t)},s.asInstance=function(t){return i(e.factory.instance,t)},s.asCtor=function(t){return i(e.factory.constructor,t)},s.asSingleton=function(){return s.strategy(e.strategy.singleton)},s.asProto=function(){return s.strategy(e.strategy.proto)},s.injectToCtor=function(){return s.injector(e.injector.ctor)},s.injectToReady=function(){return s.injector(e.injector.ready)},s.injectToProperty=function(){return s.injector(e.injector.property)},s.flatDependencies=function(t){return o(e.load.flat,t)},s.recursiveDependencies=function(t){return o(e.load.recursive,t)},s},e.strategy={proto:{test:function(e,t){return!0&&(!t||t())},initialize:function(){return!1},create:function(e,t,n,r,i,o,a){return e=t(n,r,o),a()&&o.injector().ready(e,o),o.depsDictionary(void 0),o.wasReady(!1),e}},singleton:{test:function(e,t){return!e&&(!t||t())},initialize:function(){return!0},create:function(e,t,n,r,i,o,a){return e||(e=t(n,r,o),o.object(e),o.wasReady(!0),a()&&o.injector().ready(e,o),o.wasReady(!1)),e}}},e.factory={constructor:function(t,n,r){return n instanceof Array?(n.length>30&&e.error("trying to create a class with too many args!",r),new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24],n[25],n[26],n[27],n[28],n[29])):new t(n)},func:function(e,t,n){return t instanceof Array?e.apply(e,t):e(t)},instance:function(e,t,n){return e}},e.injector={property:{create:function(e,t,n){return e},ready:function(e,t){var n=t.depsDictionary();for(var r in n)e[r]=n[r];var i=t.args();void 0==i||n.hasOwnProperty("args")||(e.args=i)}},ready:{create:function(e,t,n){return e},ready:function(e,t){var n=t.args(),r=[],i=t.depsDictionary();if(Us.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),n){n=n instanceof Array?n:[n];for(var o=0;o<n.length;o++)r.push(n[o])}return r}},ctor:{create:function(e,t,n){var r=[],i=t.depsDictionary();if(n.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),e){e=e instanceof Array?e:[e];for(var o=0;o<e.length;o++)r.push(e[o])}return r},ready:function(e,t){}}},e.load={flat:function(e,t,n){return!1},recursive:function(e,t,n){return!0}},e.defaults={strategy:e.strategy.singleton,factory:e.factory.constructor,injector:e.injector.ctor,load:e.load.recursive},e}();Us=Bs.createContext(),window._walkmeInternals.ctx=Us,window._walkmeInternals.di=Bs}Us.register("WmInternals").asInstance(window._walkmeInternals),zl=Us.get("WmInternals"),Us.register("LibInitializer").asCtor(e).dependencies("Lib,ServerStorageManager,AbPermutationManager,WalkMeInfo,ConditionTreeEvaluator,CommonUtils,SettingsFile,WmInternals,LanguageManager,WmAjax,WalkmeConfigManager,EventsTrigger");var Gs=null;this.Init=function(){t(),_walkmeInternals.bind("NewWalkMeLoadTime",t),ql.isIE(7)||ei()||Us.get("EventSenderInitializer").init(),Gs.startInitializer()},this.dataFileLoaded=function(){Gs.dataFileLoadedWrapper()};var Vs="uiProperties",Ws="passOwnership",Qs="auditSteps",Hs="goals",$s="sticky",zs="balloon",Ys="resources",qs="FramesetsUtils",Ks="showLaunchers",Xs="tasks",Js="content",Zs="hl",eu="stepCheck",tu="autostart",nu="salesforce",ru="superstep",iu="loadTestMe",ou="changeTracker",au="limitReporter",su="wm-ltm",uu=900,lu="wm-tf",cu="dl",du=1e3,fu=1e3,pu=3600,gu={Cookies:"cookies",LocalStorage:"localStorage",IndexedDB:"indexedDB"},hu={NOTHING:0,NEXT_BUTTON:1,CLICK:2,HOVER:3,PAGE_CHANGED:4,KEY_PRESSED:5,DURATION:6,SELECT_ANY:7,SELECT_VALUE:8},mu={FreeText:0,RadioButton:1,CheckBox:2},vu={Deactive:0,Active:1,ActiveAndReset:2},yu={Normal:1,Sandbox:2},wu=86400,bu=31536e3,Su=31536e4,Tu={display:"block",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,marginTop:0,marginLeft:0,marginBottom:0,marginRight:0,verticalAlign:"baseline",borderCollapse:"inherit",backgroundImage:"none",backgroundColor:"transparent",orderSpacing:"1px 1px",lineHeight:"normal",height:"auto",textIndent:"inherit",letterSpacing:"normal",textTransform:"none",outline:"invert none medium",width:"auto",boxShadow:"none",textShadow:"none",borderTopStyle:"none",borderTopWidth:"medium",borderRightStyle:"none",borderRightWidth:"medium",borderBottomStyle:"none",borderBottomWidth:"medium",borderLeftStyle:"none",borderLeftWidth:"medium",position:"static",top:"auto",left:"auto",transition:"none",boxSizing:"content-box",color:"#EB15E2"},Iu={Action:0,Close:1,XButton:2},Cu={Console:1,CustomerLogLimit:2,Debugger:3,DebuggerLimit:4,Server:5,EventServer:6},Eu={TABLE:1,DROPDOWN:2},ku={Visible:"visible",Invisible:"invisible",Completed:"completed",Uncompleted:"uncompleted",StrikedOut:"strike-out",Active:"active",Inactive:"inactive",ProgressBar:"progress-bar",Default:"default",Search:"search",SearchProviders:"search-providers",Video:"video",Article:"article",Accessible:"accessible",Phantom:"phantom"},_u={WalkThruCompleted:0,WalkThruExited:1,Both:2,WalkThruInterrupted:3},xu={Cookie:0,Var:1};Us.register("Consts").asCtor(n);var Au=Us.get("Consts");Us.register("ExternalWalkMeConfig").asCtor(r).dependencies("Consts"),Us.register("PlatformDI").asCtor(i).dependencies("Consts, ExternalWalkMeConfig");var Pu=Us.get("PlatformDI"),Du=function(){function e(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var t=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={},i={compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,function(r){return e(n,t.charAt(r))}))},compress:function(e){return i._compress(e,16,function(e){return t(e)})},_compress:function(e,t,n){if(null==e)return"";var r,i,o,a={},s={},u="",l="",c="",d=2,f=3,p=2,g=[],h=0,m=0;for(o=0;o<e.length;o+=1)if(u=e.charAt(o),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=f++,s[u]=!0),l=c+u,Object.prototype.hasOwnProperty.call(a,l))c=l;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;p>r;r++)h<<=1,m==t-1?(m=0,g.push(n(h)),h=0):m++;for(i=c.charCodeAt(0),r=0;8>r;r++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1}else{for(i=1,r=0;p>r;r++)h=h<<1|i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i=0;for(i=c.charCodeAt(0),r=0;16>r;r++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1}d--,0==d&&(d=Math.pow(2,p),p++),delete s[c]}else for(i=a[c],r=0;p>r;r++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1;d--,0==d&&(d=Math.pow(2,p),p++),a[l]=f++,c=String(u)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;p>r;r++)h<<=1,m==t-1?(m=0,g.push(n(h)),h=0):m++;for(i=c.charCodeAt(0),r=0;8>r;r++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1}else{for(i=1,r=0;p>r;r++)h=h<<1|i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i=0;for(i=c.charCodeAt(0),r=0;16>r;r++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1}d--,0==d&&(d=Math.pow(2,p),p++),delete s[c]}else for(i=a[c],r=0;p>r;r++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1;d--,0==d&&(d=Math.pow(2,p),p++)}for(i=2,r=0;p>r;r++)h=h<<1|1&i,m==t-1?(m=0,g.push(n(h)),h=0):m++,i>>=1;for(;;){if(h<<=1,m==t-1){g.push(n(h));break}m++}return g.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,n,r){var i,o,a,s,u,l,c,d,f=[],p=4,g=4,h=3,m="",v=[],y={val:r(0),position:n,index:1};for(o=0;3>o;o+=1)f[o]=o;for(s=0,l=4,c=1;c!=l;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(u>0?1:0)*c,c<<=1;switch(i=s){case 0:for(s=0,l=256,c=1;c!=l;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(u>0?1:0)*c,c<<=1;d=t(s);break;case 1:for(s=0,l=65536,c=1;c!=l;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(u>0?1:0)*c,c<<=1;d=t(s);break;case 2:return""}for(f[3]=d,a=d,v.push(d);;){if(y.index>e)return"";for(s=0,l=Math.pow(2,h),c=1;c!=l;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(u>0?1:0)*c,c<<=1;switch(d=s){case 0:for(s=0,l=256,c=1;c!=l;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(u>0?1:0)*c,c<<=1;f[g++]=t(s),d=g-1,p--;break;case 1:for(s=0,l=65536,c=1;c!=l;)u=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),s|=(u>0?1:0)*c,c<<=1;f[g++]=t(s),d=g-1,p--;break;case 2:return v.join("")}if(0==p&&(p=Math.pow(2,h),h++),f[d])m=f[d];else{if(d!==g)return null;m=a+a.charAt(0)}v.push(m),f[g++]=a+m.charAt(0),p--,a=m,0==p&&(p=Math.pow(2,h),h++)}}};return i}();Us.register("Compressor").asInstance(Du);var Nu={};!function(e,t){function n(e){return String(null===e||void 0===e?"":e)}function r(e){return e=n(e),l.test(e)?e.replace(i,"&amp;").replace(o,"&lt;").replace(a,"&gt;").replace(s,"&#39;").replace(u,"&quot;"):e}e.Template=function(e,n,r,i){this.r=e||this.r,this.c=r,this.options=i,this.text=n||"",this.buf=t?[]:""},e.Template.prototype={r:function(e,t,n){return""},v:r,t:n,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];return i?(this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(t,n,r)):""},rs:function(e,t,n){var r=e[e.length-1];if(!c(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,o,a){var s;return c(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ls(e,t,n,r,i,o,a)),s=""===e||!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s)},d:function(e,t,n,r){var i=e.split("."),o=this.f(i[0],t,n,r),a=null;if("."===e&&c(t[t.length-2]))return t[t.length-1];for(var s=1;s<i.length;s++)o&&"object"==typeof o&&i[s]in o?(a=o,o=o[i[s]]):o="";return r&&!o?!1:(r||"function"!=typeof o||(t.push(a),o=this.lv(o,t,n),t.pop()),o)},f:function(e,t,n,r){for(var i=!1,o=null,a=!1,s=t.length-1;s>=0;s--)if(o=t[s],o&&"object"==typeof o&&e in o){i=o[e],a=!0;break}return a?(r||"function"!=typeof i||(i=this.lv(i,t,n)),i):r?!1:""},ho:function(e,t,n,r,i){var o=this.c,a=this.options;a.delimiters=i;var r=e.call(t,r);return r=null==r?String(r):r.toString(),this.b(o.compile(r,a).render(t,n)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,r,i,o,a){var s=t[t.length-1],u=null;if(!r&&this.c&&e.length>0)return this.ho(e,s,n,this.text.substring(i,o),a);if(u=e.call(s),"function"==typeof u){if(r)return!0;if(this.c)return this.ho(u,s,n,this.text.substring(i,o),a)}return u},lv:function(e,t,r){var i=t[t.length-1],o=e.call(i);return"function"==typeof o&&(o=n(o.call(i)),this.c&&~o.indexOf("{{"))?this.c.compile(o,this.options).render(i,r):n(o)}};var i=/&/g,o=/</g,a=/>/g,s=/\'/g,u=/\"/g,l=/[&<>\"\']/,c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(Nu),function(e){function t(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function n(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function r(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;i>r;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function i(e,t,n,r){for(var s=[],u=null,l=null;e.length>0;)if(l=e.shift(),"#"==l.tag||"^"==l.tag||o(l,r))n.push(l),l.nodes=i(e,l.tag,n,r),s.push(l);else{if("/"==l.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+l.n);if(u=n.pop(),l.n!=u.n&&!a(l.n,u.n,r))throw new Error("Nesting error: "+u.n+" vs. "+l.n);return u.end=l.i,s}s.push(l)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return s}function o(e,t){for(var n=0,r=t.length;r>n;n++)if(t[n].o==e.n)return e.tag="#",!0}function a(e,t,n){for(var r=0,i=n.length;i>r;r++)if(n[r].c==e&&n[r].o==t)return!0}function s(e){return e.replace(b,"\\\\").replace(v,'\\"').replace(y,"\\n").replace(w,"\\r")}function u(e){return~e.indexOf(".")?"d":"f"}function l(e){for(var t="",n=0,r=e.length;r>n;n++){var i=e[n].tag;"#"==i?t+=c(e[n].nodes,e[n].n,u(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag):"^"==i?t+=d(e[n].nodes,e[n].n,u(e[n].n)):"<"==i||">"==i?t+=f(e[n]):"{"==i||"&"==i?t+=p(e[n].n,u(e[n].n)):"\n"==i?t+=h('"\\n"'+(e.length-1==n?"":" + i")):"_v"==i?t+=g(e[n].n,u(e[n].n)):void 0===i&&(t+=h('"'+s(e[n])+'"'))}return t}function c(e,t,n,r,i,o){return"if(_.s(_."+n+'("'+s(t)+'",c,p,1),c,p,0,'+r+","+i+',"'+o+'")){_.rs(c,p,function(c,p,_){'+l(e)+"});c.pop();}"}function d(e,t,n){return"if(!_.s(_."+n+'("'+s(t)+'",c,p,1),c,p,1,0,0,"")){'+l(e)+"};"}function f(e){return'_.b(_.rp("'+s(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function p(e,t){return"_.b(_.t(_."+t+'("'+s(e)+'",c,p,0)));'}function g(e,t){return"_.b(_.v(_."+t+'("'+s(e)+'",c,p,0)));'}function h(e){return"_.b("+e+");"}var m=/\S/,v=/\"/g,y=/\n/g,w=/\r/g,b=/\\/g,S={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};e.scan=function(e,i){function o(){v.length>0&&(y.push(new String(v)),v="")}function a(){for(var e=!0,t=T;t<y.length;t++)if(e=y[t].tag&&S[y[t].tag]<S._v||!y[t].tag&&null===y[t].match(m),!e)return!1;return e}function s(e,t){if(o(),e&&a())for(var n,r=T;r<y.length;r++)y[r].tag||((n=y[r+1])&&">"==n.tag&&(n.indent=y[r].toString()),y.splice(r,1));else t||y.push({tag:"\n"});w=!1,T=y.length}function u(e,t){var r="="+C,i=e.indexOf(r,t),o=n(e.substring(e.indexOf("=",t)+1,i)).split(" ");return I=o[0],C=o[1],i+r.length-1}var l=e.length,c=0,d=1,f=2,p=c,g=null,h=null,v="",y=[],w=!1,b=0,T=0,I="{{",C="}}";for(i&&(i=i.split(" "),I=i[0],C=i[1]),b=0;l>b;b++)p==c?r(I,e,b)?(--b,o(),p=d):"\n"==e.charAt(b)?s(w):v+=e.charAt(b):p==d?(b+=I.length-1,h=S[e.charAt(b+1)],g=h?e.charAt(b+1):"_v","="==g?(b=u(e,b),p=c):(h&&b++,p=f),w=b):r(C,e,b)?(y.push({tag:g,n:n(v),otag:I,ctag:C,i:"/"==g?w-C.length:b+I.length}),v="",b+=C.length-1,p=c,"{"==g&&("}}"==C?b++:t(y[y.length-1]))):v+=e.charAt(b);return s(w,!0),y},e.generate=function(t,n,r){var i='var _=this;_.b(i=i||"");'+l(t)+"return _.fl();";return r.asString?"function(c,p,i){"+i+";}":new e.Template(new Function("c","p","i",i),n,e,r)},e.parse=function(e,t,n){return n=n||{},i(e,"",[],n.sectionTags||[])},e.cache={},e.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString,r=this.cache[n];return r?r:(r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r)}}(Nu),function(e){e.to_html=function(t,n,r){var i=t;return"string"==typeof i?i=this.compile(t):"function"==typeof i&&(i=new e.Template(i)),i.render(n,r)}}(Nu);var Lu=Nu;Us.register("Mustache").asInstance(Nu);var Ou=/["\\\x00-\x1f\x7f-\x9f]/g,Mu={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},Ru=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n};Us.register("GeneralUtils").asInstance({getDictionaryKeys:w,reduce:g,map:Ru});var ju=function(){function e(e,t){this.parent=e,this.key=t,this.children=[],this.templateIndex=null,this.links=[]}function t(e,n){var r,i,o,a;if(null!==n&&"object"==typeof n)if("[object Array]"===Object.prototype.toString.apply(n))for(r=[],i=0;i<n.length;i++)r.push(t(e,n[i]));else{a=e,r={"":[]};for(o in n)Object.hasOwnProperty.call(n,o)&&(a=a.follow(o),r[""].push(t(e,n[o])));a.links.push(r)}else r=n;return r}function n(e){var t,n,r,i,o,a,s=[],u=[];e.templateIndex=0;for(o in e.children)Object.hasOwnProperty.call(e.children,o)&&u.push(e.children[o]);for(;u.length>0;){t=u.shift(),a=0;for(o in t.children)Object.hasOwnProperty.call(t.children,o)&&(u.push(t.children[o]),a+=1);if(a>1||t.links.length>0){for(n=[],r=t;null===r.templateIndex;)n.unshift(r.key),r=r.parent;for(n.unshift(r.templateIndex),s.push(n),t.templateIndex=s.length,i=0;i<t.links.length;i++)t.links[i][""].unshift(t.templateIndex)}}return s}function r(r){var i,o,a;return i=new e(null,""),a=t(i,r),o=n(i),o.length>0?u({f:"cjson",t:o,v:a},null,null):u(r)}function i(e,t){for(var n=[];t>0;)n=e[t-1].slice(1).concat(n),t=e[t-1][0];return n}function o(e,t){var n,r,a;if(null!==t&&"object"==typeof t)if("[object Array]"===Object.prototype.toString.apply(t))for(n=[],r=0;r<t.length;r++)n.push(o(e,t[r]));else for(n={},a=i(e,t[""][0]),r=0;r<a.length;r++){var s=o(e,t[""][r+1]);null!==s&&void 0!==s&&(n[a[r]]=s)}else n=t;return n}function a(e){var t=l(e);return null!==t&&"object"==typeof t&&"f"in t&&"cjson"===t.f?o(t.t,t.v):t}return e.prototype.follow=function(t){return t in this.children?this.children[t]:(this.children[t]=new e(this,t),this.children[t])},{stringify:r,parse:a}}();Us.register("CJson").asInstance(ju),Us.register("Logger").asCtor(I).dependencies("CookiesManager, HostData, Lib"),Us.register("WalkMeInfo").asCtor(C).dependencies("EndUsersManager,AbCurrentPermutationProvider,LanguageManager,GetAuditSource,GetAnalyticsCustomFields,GetUserGuid"),Us.register("WalkmeLoader").asCtor(E).dependencies("Lib, WalkmeConfigManager, Consts"),Us.register("SettingsFile").asCtor(k),Us.register("PositionHelper").asCtor(_).dependencies("Lib,UiUtils"),Us.register("CookiesManager").dependencies("logger=Logger").injectToProperty().asCtor(x),Us.register("StorageResourceManager").asCtor(A).dependencies("SettingsFile, CommonUtils, win"),Us.register("HiddenIframeProxy").asCtor(P).asProto().dependencies("CommonUtils"),Us.register("CookiesStorageManager").asCtor(D).asProto().dependencies("CookiesManager,TimerManager,Consts"),Us.register("ExtensionStorageManager").asCtor(N).asProto().dependencies("TimerManager, Logger"),Us.register("WalkMejStorageManager").asCtor(O).asProto().dependencies("CommonUtils"),Us.register("StorageManagerFactory").asCtor(M).dependencies("StorageManagerFactoryParams, SettingsFile, FeaturesManager, Logger, HostData, CommonUtils, Consts"),Us.register("StringCache").asCtor(j).asProto();var Fu=function(){function e(){}return e.prototype.on=function(e,t){},e.prototype.once=function(e,t){},e.prototype.off=function(e,t){},e}(),Bu=function(){function e(){}return e.prototype.async=function(e,t,n,r){n&&n()},e.prototype.sync=function(e,t,n){return n},e}();Us.register("EventsListener").asFunction(function(e){return e.events&&e.events.listener?e.events.listener:new Fu}).dependencies("WmInternals"),Us.register("EventsTrigger").asFunction(function(e){return e.events&&e.events.trigger?e.events.trigger:new Bu}).dependencies("WmInternals"),Us.get("EventsTrigger").sync("DICreated",Us),Us.register("DataEncoderFactory").asCtor(V).dependencies("SettingsFile"),Us.register("MalformedStorageDataPetaSender").asCtor(W).dependencies("Lib, EndUsersManager, WmAjax, AbCurrentPermutationProvider,CommonUtils, AuditSourceManager, HostData"),Us.register("GoalsCompletedPetaSender").asCtor(Q).dependencies("Lib, EndUsersManager, WmAjax, AbCurrentPermutationProvider,CommonUtils, AuditSourceManager, HostData"),Us.register("TimerManager").asCtor(H).asSingleton(),function(){var e="mt",t=0,n={0:$,1:Y,2:z};Us.has("DataMinifier")||Us.register("DataMinifier").asFunction(function(r,i,o,a){function s(){var r=o.getStorageType(),i=r&&r[e];return n[i||t]}var u=s();return new u(r,i,a)}).dependencies("Compressor,CommonUtils,SettingsFile,Logger")}(),Us.register("TypedDataSender").asCtor(q).asProto(),Us.register("ServerDataSenderManager").asCtor(K).dependencies("Lib,Logger,RecorderServerManager,ServerDataSenderManagerParams,ClientStorageManager,WmAjax,FeaturesManager,TimerManager"),Us.register("CommonEvents").asCtor(X).dependencies("Logger").asSingleton(),Us.register("WmAjax").asCtor(J).dependencies("CommonEvents"),Us.register("PetaLogger").asCtor(Z).dependencies("WmAjax,HostData, WalkMeInfo");var Uu;!function(e){var t=function(){function e(e,t){this.callback=t,this.timeoutMs=e}return e.prototype.start=function(){var e=this;this.enabled||(this.enabled=!0,this.timerHandle=setTimeout(function(){e.onTick()},this.timeoutMs))},e.prototype.onTick=function(){this.enabled=!1,this.callback()},e.prototype.stop=function(){clearTimeout(this.timerHandle),this.enabled=!1},e.prototype.restart=function(){this.stop(),this.start()},e.prototype.isEnabled=function(){
return this.enabled},e}();e.SimpleTimer=t,function(e){e[e.Chrome=6]="Chrome"}(e.BrowserConnectionLimit||(e.BrowserConnectionLimit={}));e.BrowserConnectionLimit}(Uu||(Uu={}));var Uu;!function(e){var t;!function(t){var n=function(){function t(t){this.maxConnections=e.BrowserConnectionLimit.Chrome,this.postEventAction=t.postEventAction,this.healthCheckAction=t.healthCheckAction,this.allocateImages()}return t.prototype.getChannelType=function(){return"ImageChannel"},t.prototype.getChannelMethod=function(){return"GET"},t.prototype.setBaseUrl=function(e){this.baseUrl=e},t.prototype.getBaseUrl=function(){return this.baseUrl},t.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},t.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},t.prototype.getLineBreak=function(){return"\n"},t.prototype.checkHealth=function(){wmjQuery.get(this.getHealthCheckUrl())},t.prototype.send=function(e,t,n){var r=this,i=encodeURIComponent(e),o=this.assertFree();o.attr(this.getBusyFlag(),"true");var a=this.getPostEventUrl()+"?"+this.getURLQueryParamKey()+"="+i;o.load(function(){o.unbind("load"),o.attr(r.getBusyFlag(),"false"),r.whenFreeCallback&&r.whenFreeCallback(),t&&t(),r.successCallback&&r.successCallback()}).error(function(){n&&n(null,null,null),r.failCallback&&r.failCallback(null,null,null)}),o.attr("src",a)},t.prototype.isInitialized=function(){return!!this.baseUrl},t.prototype.isAvailable=function(){var e=this.getFreeImg();return null!==e},t.prototype.isIdle=function(){for(var e=0;e<this.images.length;e++)if(!this.isImageFree(this.images[e]))return!1;return!0},t.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},t.prototype.estimateDataSize=function(e){return encodeURIComponent(e).length},t.prototype.maxPacketSize=function(){var e="?"+this.getURLQueryParamKey()+"=";return this.getMaxUrlSize()-this.getPostEventUrl().length-e.length},t.prototype.channelBandwidth=function(){return e.BrowserConnectionLimit.Chrome*this.maxPacketSize()},t.prototype.whenFree=function(e){this.whenFreeCallback=e},t.prototype.fail=function(e){this.failCallback=e},t.prototype.success=function(e){this.successCallback=e},t.prototype.getFreeImg=function(){for(var e=0;e<this.images.length;e++)if(this.isImageFree(this.images[e]))return this.images[e];return null},t.prototype.isImageFree=function(e){return"false"===e.attr(this.getBusyFlag())},t.prototype.allocateImages=function(){this.images=[];for(var e=0;e<this.maxConnections;e++){var t=this.createImage();this.images.push(t)}},t.prototype.createImage=function(){var e=wmjQuery("<img/>");return e.css("width","1px"),e.css("height","1px"),e.attr(this.getBusyFlag(),"false"),e},t.prototype.getMaxUrlSize=function(){return 2048},t.prototype.getBusyFlag=function(){return"_WM_BUSY_"},t.prototype.getURLQueryParamKey=function(){return"ed"},t.prototype.assertFree=function(){var e=this.getFreeImg();if(!e)throw"Channel is at max capacity. Can't send anymore data.";return e},t.prototype.getCurrentImages=function(){return this.images.slice(0)},t.prototype.dispose=function(){for(var e=0;e<this.images.length;e++)this.images[e].remove()},t}();t.ImageChannel=n}(t=e.Channels||(e.Channels={}))}(Uu||(Uu={}));var Uu;!function(e){var t;!function(t){var n=function(){function t(t){this.maxConnections=e.BrowserConnectionLimit.Chrome,this.currentOpenConnections=0,this.postEventAction=t.postEventAction,this.healthCheckAction=t.healthCheckAction}return t.prototype.getChannelType=function(){return"AjaxChannel"},t.prototype.getChannelMethod=function(){return"POST"},t.prototype.setBaseUrl=function(e){this.baseUrl=e},t.prototype.getBaseUrl=function(){return this.baseUrl},t.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},t.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},t.prototype.getLineBreak=function(){return"\n"},t.prototype.checkHealth=function(){wmjQuery.get(this.getHealthCheckUrl())},t.prototype.send=function(e,t,n){var r=this;if(!this.isAvailable())throw"Channel is at max capacity. Can't send anymore data.";this.currentOpenConnections++,wmjQuery.ajax({url:this.getPostEventUrl(),data:e,contentType:"text/plain",type:"POST"}).always(function(){r.singleLinkFree()}).success(function(){t&&t(),r.successCallback&&r.successCallback()}).error(function(e,t,i){n&&n(e,t,i),r.failCallback&&r.failCallback(e,t,i)})},t.prototype.isInitialized=function(){return!!this.baseUrl},t.prototype.isAvailable=function(){var e=this.currentOpenConnections<this.maxConnections;return e},t.prototype.isIdle=function(){return 0===this.currentOpenConnections},t.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},t.prototype.estimateDataSize=function(e){return e.length},t.prototype.maxPacketSize=function(){return 9e3},t.prototype.channelBandwidth=function(){return e.BrowserConnectionLimit.Chrome*this.maxPacketSize()},t.prototype.whenFree=function(e){this.whenFreeCallback=e},t.prototype.fail=function(e){this.failCallback=e},t.prototype.success=function(e){this.successCallback=e},t.prototype.singleLinkFree=function(){this.currentOpenConnections--,this.whenFreeCallback&&this.whenFreeCallback()},t}();t.AjaxChannel=n}(t=e.Channels||(e.Channels={}))}(Uu||(Uu={}));var Uu;!function(e){var t;!function(e){!function(e){e[e.PostNativeCors=0]="PostNativeCors",e[e.GetImage=1]="GetImage",e[e.PostIECorsPlugin=2]="PostIECorsPlugin"}(e.CompatibilityChannelMode||(e.CompatibilityChannelMode={}));var t=e.CompatibilityChannelMode,n=function(){function n(t){var n=this;this.config=t,this.sendFn=function(i,o,a){var s=!0;try{r(i,o,a)}catch(u){var l=new e.ImageChannel(t);l.setBaseUrl(n.underlyingChannel.getBaseUrl()),n.underlyingChannel=l,s=!1}n.sendFn=r,s||a(null,null,null)};var r=function(e,t,r){n.underlyingChannel.send(e,t,r)}}return n.prototype.getChannelType=function(){return"CompatibilityChannel."+this.underlyingChannel.getChannelType()},n.prototype.getChannelMethod=function(){return t[this.mode]},n.prototype.getBaseUrl=function(){return this.underlyingChannel.getBaseUrl()},n.prototype.setBaseUrl=function(e){var t=this.checkCompatibility(),n=new RegExp("^(//|"+location.protocol+")","i"),r=n.test(e),i=this.pickChannel(t,this.config,r);i.setBaseUrl(e),this.underlyingChannel=i},n.prototype.getPostEventUrl=function(){return this.underlyingChannel.getPostEventUrl()},n.prototype.getHealthCheckUrl=function(){return this.underlyingChannel.getHealthCheckUrl()},n.prototype.getLineBreak=function(){return this.underlyingChannel.getLineBreak()},n.prototype.checkHealth=function(){wmjQuery.get(this.underlyingChannel.checkHealth())},n.prototype.send=function(e,t,n){this.sendFn(e,t,n)},n.prototype.isInitialized=function(){return!!this.underlyingChannel&&this.underlyingChannel.isInitialized()},n.prototype.isAvailable=function(){return this.underlyingChannel.isAvailable()},n.prototype.isIdle=function(){return this.underlyingChannel.isIdle()},n.prototype.withinSizeLimit=function(e){return this.underlyingChannel.withinSizeLimit(e)},n.prototype.estimateDataSize=function(e){return this.underlyingChannel.estimateDataSize(e)},n.prototype.maxPacketSize=function(){return this.underlyingChannel.maxPacketSize()},n.prototype.channelBandwidth=function(){return this.underlyingChannel.channelBandwidth()},n.prototype.whenFree=function(e){this.underlyingChannel.whenFree(e)},n.prototype.fail=function(e){this.underlyingChannel.fail(e)},n.prototype.success=function(e){this.underlyingChannel.success(e)},n.prototype.pickChannel=function(n,r,i){switch(this.mode=n,n){case t.PostIECorsPlugin:return i?new e.AjaxChannel(r):new e.ImageChannel(r);case t.PostNativeCors:return new e.AjaxChannel(r);case t.GetImage:return new e.ImageChannel(r)}},n.prototype.checkCompatibility=function(){return void 0!==(new XMLHttpRequest).withCredentials?t.PostNativeCors:"undefined"!=typeof window.XDomainRequest?t.PostIECorsPlugin:t.GetImage},n}();e.CompatibilityChannel=n}(t=e.Channels||(e.Channels={}))}(Uu||(Uu={}));var Uu;!function(e){var t;!function(e){var t=function(){function e(e){this.buffer=[],this.reduceFn=e.reduce}return e.prototype.getStorageType=function(){return"ArrayBuffer"},e.prototype.push=function(e){this.buffer.push(e)},e.prototype.pull=function(){var e=this.buffer.shift();return e},e.prototype.peek=function(){var e=this.buffer[0];return e},e.prototype.count=function(){return this.buffer.length},e.prototype.clear=function(){this.buffer=[]},e.prototype.dataSize=function(){var e=this.reduceFn(this.buffer,function(e,t){return e+t.length},0);return e},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.getRawData=function(){return this.buffer},e.prototype.set=function(e){this.pushAll(e)},e.prototype.pushAll=function(e){if(wmjQuery.isArray(e))for(var t=0,n=e.length;n>t;t++)this.push(e[t])},e.prototype.pullAll=function(){var e=this.buffer;return this.clear(),e},e}();e.ArrayBuffer=t}(t=e.Storage||(e.Storage={}))}(Uu||(Uu={}));var Uu;!function(e){var t;!function(e){var t=function(){function e(e){this.buffer={},this.runningId=0,this.getDictionaryKeys=e.getDictionaryKeys}return e.prototype.getStorageType=function(){return"DictionaryBuffer"},e.prototype.generateId=function(){return""+ ++this.runningId},e.prototype.push=function(e){var t=this.generateId();return this.buffer[t]=e,t},e.prototype.pull=function(e){var t=this.buffer[e];return delete this.buffer[e],t},e.prototype.peek=function(e){return this.buffer[e]},e.prototype.count=function(){return this.getAllIds().length},e.prototype.clear=function(){this.buffer={}},e.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=this.buffer[t].length);return e},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.getRawData=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&e.push(this.peek(t));return e},e.prototype.set=function(e){return this.pushAll(e)},e.prototype.pushAll=function(e){var t=[];if(wmjQuery.isArray(e))for(var n=0,r=e.length;r>n;n++)t.push(this.push(e[n]));return t},e.prototype.pullAll=function(e){var t=[];if(e)for(var n=0,r=e.length;r>n;n++)t.push(this.pull(e[n]));else for(var i in this.buffer)this.buffer.hasOwnProperty(i)&&t.push(this.pull(i));return t},e.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},e}();e.DictionaryBuffer=t}(t=e.Storage||(e.Storage={}))}(Uu||(Uu={}));var Uu;!function(e){var t;!function(e){var t=function(){function e(e,t,n){this.buffer={},this.inputMapper=t,this.outputMapper=n,this.getDictionaryKeys=e.getDictionaryKeys,this.mapFn=e.map,this.reduceFn=e.reduce}return e.prototype.getStorageType=function(){return"ReduceBuffer"},e.prototype.count=function(){return this.getAllIds().length},e.prototype.clear=function(){this.buffer={}},e.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=t.length+(""+this.buffer[t]).length);return e},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.getRawData=function(){return this.buffer},e.prototype.set=function(e){this.buffer=e},e.prototype.pushAll=function(e){var t=this,n=this.mapFn(e,function(e){return t.inputMapper.convert(e)}),r=this.reduceFn(n,function(e,t){return e[t]=(e[t]||0)+1,e},this.buffer);this.set(r)},e.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},e.prototype.pullAll=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e.push(this.format(t)),delete this.buffer[t]);return e},e.prototype.format=function(e){return this.outputMapper.convert({type:e,count:this.buffer[e]})},e}();e.ReduceBuffer=t}(t=e.Storage||(e.Storage={}))}(Uu||(Uu={}));var Uu;!function(e){var t;!function(e){var t=function(){function e(e,t,n,r){this.autoSave=e.autoSave||!1,this.keyName=e.keyName||"wm-ds-b",this.expiresSeconds=e.expiresSeconds||600,this.storageTypesEnum=n.STORAGE_TYPE,this.clientStorageManager=t,this.buffer=r}return e.prototype.save=function(){var e=u(this.getRawData());this.clientStorageManager.saveData(this.keyName,e,this.expiresSeconds)},e.prototype.load=function(){this.buffer.clear();var e=this.clientStorageManager.getData(this.keyName);if(e)try{this.set(l(e))}catch(t){this.buffer.clear()}},e.prototype.count=function(){return this.buffer.count()},e.prototype.clear=function(){this.buffer.clear(),this.updateStorageIfNeeded()},e.prototype.dataSize=function(){return this.buffer.dataSize()},e.prototype.maxSize=function(){var e,t=.5;switch(this.clientStorageManager.getStorageType()){case this.storageTypesEnum.JStorage:case this.storageTypesEnum.CrossDomainLocalStorage:case this.storageTypesEnum.CrossDomain:e=2621440;break;case this.storageTypesEnum.HiddenIframe:case this.storageTypesEnum.Extension:case this.storageTypesEnum.ProxyIframe:e=524288;break;case this.storageTypesEnum.CrossDomainCookies:case this.storageTypesEnum.Cookie:e=2048;break;default:e=2048}return e*t},e.prototype.withinSizeLimit=function(e){return e<=this.maxSize()},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.updateStorageIfNeeded=function(){this.autoSave&&this.save()},e.prototype.getRawData=function(){return this.buffer.getRawData()},e}();e.BaseClientStorageBuffer=t}(t=e.Storage||(e.Storage={}))}(Uu||(Uu={}));var Uu,Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){var t;!function(e){var t=function(e){function t(t,n,r,i){e.call(this,t,n,r,i)}return Gu(t,e),t.prototype.getStorageType=function(){return"ClientStorageArrayBuffer::"+this.getBuffer().getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.push=function(e){this.getBuffer().push(e),this.updateStorageIfNeeded()},t.prototype.pull=function(){var e=this.getBuffer().pull();return this.updateStorageIfNeeded(),e},t.prototype.peek=function(){var e=this.getBuffer().peek();return e},t.prototype.set=function(e){this.getBuffer().set(e)},t.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},t.prototype.pullAll=function(){return this.getBuffer().pullAll()},t}(e.BaseClientStorageBuffer);e.ClientStorageArrayBuffer=t}(t=e.Storage||(e.Storage={}))}(Uu||(Uu={}));var Uu,Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){var t;!function(e){var t=function(e){function t(t,n,r,i){e.call(this,t,n,r,i)}return Gu(t,e),t.prototype.getStorageType=function(){return"ClientStorageDictionaryBuffer::"+this.buffer.getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.push=function(e){var t=this.getBuffer().push(e);return this.updateStorageIfNeeded(),t},t.prototype.pull=function(e){var t=this.getBuffer().pull(e);return this.updateStorageIfNeeded(),t},t.prototype.peek=function(e){var t=this.getBuffer().peek(e);return t},t.prototype.set=function(e){return this.getBuffer().set(e)},t.prototype.pushAll=function(e){return this.getBuffer().pushAll(e)},t.prototype.pullAll=function(e){return this.getBuffer().pullAll(e)},t}(e.BaseClientStorageBuffer);e.ClientStorageDictionaryBuffer=t}(t=e.Storage||(e.Storage={}))}(Uu||(Uu={}));var Uu,Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){var t;!function(e){var t=function(e){function t(t,n,r,i){e.call(this,t,n,r,i)}return Gu(t,e),t.prototype.getStorageType=function(){return"ClientStorageReduceBuffer::"+this.getBuffer().getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.set=function(e){this.getBuffer().set(e)},t.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},t.prototype.pullAll=function(){return this.getBuffer().pullAll()},t}(e.BaseClientStorageBuffer);e.ClientStorageReduceBuffer=t}(t=e.Storage||(e.Storage={}))}(Uu||(Uu={}));var Uu;!function(e){var t;!function(e){var t=function(){function e(e,t,n,r,i){this.buffer=t,this._isEnabled=!1,this.dataChannel=e,this._eventsErrorLogger=i,r?this._logger=r.wrapCustomerLog("newSender"):this._logger=function(){}}return e.prototype.checkHealth=function(){return this.dataChannel.checkHealth()},e.prototype.getBaseUrl=function(){return this.dataChannel.getBaseUrl()},e.prototype.setBaseUrl=function(e){this.dataChannel.setBaseUrl(e)},e.prototype.getPostEventUrl=function(){return this.dataChannel.getPostEventUrl()},e.prototype.getHealthCheckUrl=function(){return this.dataChannel.getHealthCheckUrl()},e.prototype.enable=function(){var e=this;if(!this._isEnabled)try{this._logger(this.getSenderType()+"::enable. Enabling new data sender. \r\n [channel : "+this.dataChannel.getChannelType()+" , method : "+this.dataChannel.getChannelMethod()+" ,max packet size: "+this.dataChannel.maxPacketSize()+" ] \r\n [storage : "+this.buffer.getStorageType()+" , max storage size: "+this.buffer.maxSize()+"] \r\n",3),this._isEnabled=!0,this.dataChannel.whenFree(function(){e.linkIsFree()}),this.registerToUnload(function(){return e.sleep()}),this.wakeUp()}catch(t){this.logError(t,"Enable")}},e.prototype.logError=function(e,t){if(this._eventsErrorLogger){var n=this.dataChannel&&this.buffer?{storage:this.buffer.getStorageType(),channel:this.dataChannel.getChannelType()}:{};n.sender=this.getSenderType()+(t?"::"+t:""),this._eventsErrorLogger.logError(u(e.message),n)}},e.prototype.disable=function(){this._isEnabled&&(this._isEnabled=!1,this.unregisterFromUnload())},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.isIdle=function(){return this._isEnabled&&this.dataChannel.isIdle()&&this.buffer.isEmpty()},e.prototype.clearStorage=function(){this.buffer.clear()},e.prototype.registerToUnload=function(e){var t=this;t._originalUnloadEvent=window.onbeforeunload,window.onbeforeunload=function(n){return e(),t._originalUnloadEvent?t._originalUnloadEvent(n):void 0}},e.prototype.unregisterFromUnload=function(){window.onbeforeunload=this._originalUnloadEvent},e}();e.SuperSender=t}(t=e.Managers||(e.Managers={}))}(Uu||(Uu={}));var Uu,Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){var t;!function(e){var t=function(e){function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return Gu(t,e),t.prototype.getBuffer=function(){return this.buffer},t.prototype.getSenderType=function(){return"ImmediateSender"},t.prototype.send=function(e){return this.isEnabled()?(this.dataChannel.isAvailable()?this.dataChannel.send(e):this.getBuffer().push(e),!0):!1},t.prototype.wakeUp=function(){return this.isEnabled()?void this.loadFromStorage():!1},t.prototype.sleep=function(){return this.isEnabled()?void this.getBuffer().save():!1},t.prototype.linkIsFree=function(){return this.isEnabled()?void this.sendFromBuffer():!1},t.prototype.loadFromStorage=function(){if(!this.isEnabled())return!1;for(this.getBuffer().load();this.dataChannel.isAvailable()&&this.getBuffer().count();)this.sendFromBuffer()},t.prototype.sendFromBuffer=function(){if(!this.isEnabled())return!1;var e=this.getBuffer().pull();e&&this.dataChannel.send(e)},t}(e.SuperSender);e.ImmediateSender=t}(t=e.Managers||(e.Managers={}))}(Uu||(Uu={}));var Uu,Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){var t;!function(t){var n=function(t){function n(n,r,i,o,a,s,u,l){var c=this;t.call(this,n,r,o,u,l),this.estimatedPacketSize=0,this.cycleTimer=new e.SimpleTimer(o.sendingIntervalMs,function(){return c.doCycle()}),this.retryTimer=new e.SimpleTimer(o.retryIntervalMs,function(){return c.doCycle()}),this.maxRetries=o.maxRetries,this.currentRetries=0,this.isHealthy=!0,this.needMoreLink=!1,this.isLogFailed=o.isLogFailed,this.stagingBuffer=i,this.failureBuffer=a,this.dataSenderLogFailure=s}return Gu(n,t),n.prototype.getSenderType=function(){return"AccumulationSender"},n.prototype.getBuffer=function(){return this.buffer},n.prototype.send=function(e){try{if(this._logger(this.getSenderType()+"::Send. called for: "+u(e),5),!this.isEnabled())return!1;var t=this.dataChannel.estimateDataSize(e);if(!this.dataChannel.withinSizeLimit(t))throw new Error("Data exceeds channel packet size");if(this.getBuffer().withinSizeLimit(e.length))return this.getBuffer().isEmpty()||(this.estimatedPacketSize+=this.dataChannel.estimateDataSize(this.dataChannel.getLineBreak())),this.estimatedPacketSize+=t,this.getBuffer().dataSize()+e.length>this.getBuffer().maxSize()&&this.sendBuffer(),this.getBuffer().push(e),this.estimatedPacketSize>=this.dataChannel.channelBandwidth()?(this.sendBuffer(),this.getTimer().restart()):this.getTimer().start(),!0;this.stageAndSend([e])}catch(n){throw this.logError(n,"Send"),n}},n.prototype.wakeUp=function(){if(this.isEnabled())try{this._logger(this.getSenderType()+"::WakeUp. buffer size before load. "+this.getBuffer().dataSize(),3),this.loadFromStorage(),this._logger(this.getSenderType()+"::WakeUp. buffer size after load. "+this.getBuffer().dataSize(),3)}catch(e){throw this.logError(e,"WakeUp"),e}},n.prototype.sleep=function(){if(this.isEnabled())try{this._logger(this.getSenderType()+"::Sleep. buffer size before flush: "+this.getBuffer().dataSize(),3),this.sendBuffer(),this._logger(this.getSenderType()+"::Sleep. buffer size after flush: "+this.getBuffer().dataSize(),3),this.getBuffer().save(),this.stagingBuffer.save(),this.failureBuffer.save()}catch(e){throw this.logError(e,"Sleep"),e}},n.prototype.isIdle=function(){return t.prototype.isIdle.call(this)},n.prototype.linkIsFree=function(){this.isEnabled()&&this.needMoreLink&&this.sendBuffer()},n.prototype.doCycle=function(){this.isEnabled()&&(this._logger(this.getSenderType()+"::doCycle. buffer size before flush. "+this.getBuffer().dataSize(),4),this.sendBuffer(),this._logger(this.getSenderType()+"::doCycle. buffer size after flush. "+this.getBuffer().dataSize(),4))},n.prototype.getSeperator=function(){return this.dataChannel.getLineBreak()},n.prototype.getTimer=function(){return this.isHealthy?this.cycleTimer:this.retryTimer},n.prototype.sendBuffer=function(){if(this.isEnabled())try{for(;!this.getBuffer().isEmpty()&&this.dataChannel.isAvailable();){var e=[],t=0;do{var n=this.getBuffer().pull(),r=this.dataChannel.estimateDataSize(n);e.push(n);var i=0;0!==t&&(i=this.dataChannel.estimateDataSize(this.getSeperator())),i+=r,t+=i,this.estimatedPacketSize-=i}while(!this.getBuffer().isEmpty()&&t<this.dataChannel.maxPacketSize());this.stageAndSend(e)}this.needMoreLink=!this.getBuffer().isEmpty()}catch(o){throw this.logError(o,"SendBuffer"),o}},n.prototype.stageAndSend=function(e){var t=this,n=e.join(this.getSeperator());this._logger(this.getSenderType()+"::sendBuffer. packet size "+n.length,3),this._logger(this.getSenderType()+"::sendBuffer. sending packet :"+u(n),4);var r=this.stagingBuffer.pushAll(e);this.dataChannel.send(n,function(){try{t.isHealthy=!0,t.currentRetries=0,t.stagingBuffer.pullAll(r),t.isLogFailedEnabled()&&t.logFailedEvents()}catch(e){}},function(){try{if(t.isHealthy=!1,t.getBuffer().pushAll(t.stagingBuffer.pullAll(r)),t.currentRetries++,t.currentRetries>t.maxRetries){if(t.isLogFailedEnabled()){var e=t.getBuffer().pullAll();t.failureBuffer.pushAll(e)}t.currentRetries=0,t.getBuffer().clear()}else t.getTimer().start()}catch(n){}})},n.prototype.loadFromStorage=function(){this.isEnabled()&&(this.getBuffer().load(),this.stagingBuffer.load(),this.failureBuffer.load(),this.getBuffer().pushAll(this.stagingBuffer.pullAll()),this.stagingBuffer.save(),this._logger(this.getSenderType()+"::loadFromStorage. buffer size after load : "+this.getBuffer().dataSize(),4),this.sendBuffer())},n.prototype.isLogFailedEnabled=function(){return this.isLogFailed},n.prototype.logFailedEvents=function(){if(!(this.failureBuffer.count()<=0))for(var e=this.failureBuffer.pullAll(),t=0;t<e.length;t++){var n=e[t];this.dataSenderLogFailure.log.warn(n.message,n.extraData)}},n}(t.SuperSender);t.AccumulationSender=n}(t=e.Managers||(e.Managers={}))}(Uu||(Uu={}));var Uu;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.convert=function(e){var t=l(e);return t.data.type+":"+t.type},e}();e.EventTypeMapper=t}(t=e.Manipulation||(e.Manipulation={}))}(Uu||(Uu={}));var Uu;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.convert=function(e){return{message:"Event failed to send [type "+e.type+", count "+e.count+"]",extraData:{type:e.type,count:e.count}}},e}();e.EventLogMapper=t}(t=e.Manipulation||(e.Manipulation={}))}(Uu||(Uu={})),Us.register("DataChannelConfig").asInstance({postEventAction:"/event/postEvent",healthCheckAction:"/general/status"}),Us.register("DataChannelConfigLog").asInstance({postEventAction:"/event/log",healthCheckAction:"/general/status"}),Us.register("DataSenderConfig").asInstance({sendingIntervalMs:250,retryIntervalMs:3e3,maxRetries:3,isLogFailed:!0}),Us.register("DataSenderConfigLog").asInstance({sendingIntervalMs:5e3,retryIntervalMs:5e3,maxRetries:3,isLogFailed:!1}),Us.register("EventTypeMapper").asCtor(Uu.Manipulation.EventTypeMapper),Us.register("EventLogMapper").asCtor(Uu.Manipulation.EventLogMapper),Us.register("ArrayBuffer").asCtor(Uu.Storage.ArrayBuffer).asProto().dependencies("GeneralUtils"),Us.register("DictionaryBuffer").asCtor(Uu.Storage.DictionaryBuffer).asProto().dependencies("GeneralUtils"),Us.register("ReduceBuffer").asCtor(Uu.Storage.ReduceBuffer).asProto().dependencies("GeneralUtils,EventTypeMapper,EventLogMapper"),Us.register("DataSenderMethod").asCtor(Uu.Channels.CompatibilityChannel).dependencies("DataChannelConfig"),Us.register("DataSenderStorageConfig").asInstance({keyName:"wm-ds-b",autoSave:!1,expiresSeconds:600}),Us.register("DataSenderStorageStagingConfig").asInstance({keyName:"wm-ds-s",autoSave:!1,expiresSeconds:600}),Us.register("DataSenderStorage").asCtor(Uu.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfig,ClientStorageManager,Consts,ArrayBuffer"),Us.register("DataSenderStagingStorage").asCtor(Uu.Storage.ClientStorageDictionaryBuffer).dependencies("DataSenderStorageStagingConfig,ClientStorageManager,Consts,DictionaryBuffer"),Us.register("DataSender").asCtor(Uu.Managers.AccumulationSender).dependencies("DataSenderMethod,DataSenderStorage,DataSenderStagingStorage,DataSenderConfig,DataSenderStorageLogFailure,EventCollectorLogger,Logger,EventSenderErrorLogger"),Us.register("DataSenderMethodLog").asCtor(Uu.Channels.CompatibilityChannel).dependencies("DataChannelConfigLog"),Us.register("DataSenderStorageConfigLog").asInstance({keyName:"wm-ds-lb",autoSave:!1,expiresSeconds:600}),Us.register("DataSenderStorageLog").asCtor(Uu.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfigLog,ClientStorageManager,Consts,ArrayBuffer"),Us.register("DataSenderLog").asCtor(Uu.Managers.ImmediateSender).dependencies("DataSenderMethodLog,DataSenderStorageLog,DataSenderConfigLog,Logger,EventSenderErrorLogger"),Us.register("DataSenderStorageConfigLogFailure").asInstance({keyName:"wm-ds-lfb",autoSave:!1,expiresSeconds:86400}),Us.register("DataSenderStorageLogFailure").asCtor(Uu.Storage.ClientStorageReduceBuffer).dependencies("DataSenderStorageConfigLogFailure,ClientStorageManager,Consts,ReduceBuffer"),Us.register("UserTimeMonitor").asCtor(ee).dependencies("ClientStorageManager, EndUsersManager"),Us.register("EventSender").asCtor(te).dependencies("Consts, EventSenderAppTypeConverter, EventsCollectorAuditingEnabledIndicator, EventCollectorEventSender"),Us.register("EventSenderAppTypeConverter").asCtor(ne).dependencies("Consts"),Us.register("EventSenderEnvironmentDataProvider").asCtor(re).dependencies("HostData, FeaturesManager, Consts, CommonUtils, iOSUtils"),Us.register("WalkmeVisibleReporter").asCtor(ie).dependencies("EventSender, UserTimeMonitor, Consts, Logger"),Us.register("EventSenderErrorLogger").asCtor(oe).dependencies("DataChannelConfigLog,HostData,WalkMeInfo"),Us.register("EventSenderStepActionNameProvider").asCtor(ae).dependencies("Consts, Logger"),Us.register("EventSenderInitializer").asCtor(se).dependencies("EventServerBaseUrl, EventSenderErrorLogger, DataSender, DataSenderLog, EventSenderEventListener, win"),Us.register("EventSenderDisabler").asCtor(ue).dependencies("DataSender"),Us.register("EventSenderEventListener").asCtor(le).dependencies("Consts, WmInternals, GoalReachedEventSender"),Us.register("GoalReachedEventSender").asCtor(ce).dependencies("EventSender, Logger, Consts, EventSenderAppTypeConverter, Lib, WalkMeGoalsManager"),Us.register("EventsCollectorAuditingEnabledIndicator").asCtor(de).dependencies("EventsCollectorFeatureEnabledIndicator, AuditingEnabledIndicator"),Us.register("EventCollectorLogger").asCtor(fe).dependencies("DataSenderLog, EventSenderErrorLogger, EventsCollectorFeatureEnabledIndicator, EventSenderEnvironmentDataProvider, EventCollectorWalkMeDataProvider"),Us.register("EventCollectorEventSender").asCtor(pe).dependencies("DataSender, EventSenderErrorLogger, EventSenderEnvironmentDataProvider, EventCollectorWalkMeDataProvider"),Us.register("EventCollectorWalkMeDataProvider").asCtor(ge).dependencies("WalkMeInfo, InteractionManager, ExternalWalkMeConfig, EventCollectorUserDataProvider"),Us.register("EventCollectorUserDataProvider").asCtor(he).dependencies("AnalyticsPropertiesManager"),Us.register("EventsCollectorFeatureEnabledIndicator").asCtor(me).dependencies("Consts, HostData, FeaturesManager"),Us.register("ReportInitiatorMapper").asCtor(ve),Us.register("InteractionEventsInitiatorsProvider").asCtor(ye).dependencies("Consts, InteractionEventInitiatorFactory, ApiWasCalledNewInteractionIndicator, WidgetOpenedNewInteractionIndicator"),Us.register("InteractionManager").asCtor(we).asSingleton().dependencies("GuidGenerator, Logger"),Us.register("InteractionInitiationEventListener").asCtor(be).dependencies("WmInternals, InteractionEventsInitiatorsProvider"),Us.register("InteractionEventInitiatorFactory").asCtor(Se).dependencies("InteractionManager"),Us.register("ApiWasCalledNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.CHAT_AGENT]};return Us.create("NewInteractionIndicator",n)}),Us.register("WidgetOpenedNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.ATTENTION_GRABBER]};return Us.create("NewInteractionIndicator",n)}),Us.register("NewInteractionIndicator").asCtor(Te).asProto().dependencies("inArrayFunc"),Us.register("AuditingEnabledIndicator").asCtor(Ie),Us.register("WidgetApi").asCtor(Ce).dependencies(),Us.register("GoalsManager").asCtor(Ee).dependencies("GoalsManagerParams,Logger, HostData, ClientStorageManager, CommonUtils, Consts"),Us.register("WalkMeGoalsManager").asCtor(ke).dependencies("ClientStorageManager,GoalsManager,Lib,WalkMeInfo,ServerDataSenderManager,Logger,GoalsCompletedPetaSender,TimerManager,CommonEvents, InteractionManager, Consts, AuditingEnabledIndicator");mtjQuery.extend(mtjQuery.easing,{easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?7.5625*r*t*t+n:2/2.75>t?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeOutBack:function(e,t,n,r,i,o){return void 0==o&&(o=1.70158),r*((t=t/i-1)*t*((o+1)*t+o)+1)+n},easeOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a||(a=.3*i),s<Math.abs(r)){s=r;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(r/s);
return s*Math.pow(2,-10*t)*Math.sin(2*(t*i-o)*Math.PI/a)+r+n}}),Us.register("PublishDataManager").asCtor(De).dependencies("Lib, ServerStorageManager, Logger");var Vu=function(){function e(e,t,n,r,i){this.NEW_CONTENT_PRIORITY=1e3,this._lib=e,this._agDataManager=t,this._serverStorageManager=n,this._publishDataManager=r,this._logger=i}return e.prototype.init=function(e){if(e.config&&e.player){this._config=e.config,this._player=e.player,this._menu=e.menu;var t=this._config.Settings.AG,n=this._config.Settings.AGs;if(n)this.initAllAGs(n);else if(t){var r=this.create(e);r.setupAttenGrab()}}},e.prototype.reset=function(){this._agData=this._agClass=this._config=this._player=this._menu=void 0},e.prototype.initAllAGs=function(e){if(0!=e.length){if(this._agDataManager.isNewSession){1===this._agDataManager.sessionCounter&&this._publishDataManager.saveDataVersion();var t=this.getPotentialAGsForNewSession(e);t=t.sort(function(e,t){return e.Priority-t.Priority}),this.updateAGForNewSession(t)}else this.updateAGForOldSession(e);this._agData?(this._logger.customerLog("Attention grabber - name: "+this._agData.Name+", settings:",3),this._logger.customerLog(this._agData.Settings,3)):this._logger.customerLog("Attention grabber: not selected",3);var n="Attention grabber data: session counter = "+this._agDataManager.sessionCounter+", selected AG = "+this._agDataManager.selectedId+", unload AG = "+this._agDataManager.unload+", event timestamp delta = "+this._agDataManager.eventTimestampDelta/1e3+"s, session = "+this._agDataManager.isNewSession;this._logger.customerLog(n,4)}},e.prototype.getPotentialAGsForNewSession=function(e){for(var t=[],n=this._agDataManager.sessionCounter,r=0;r<e.length;r++){var i=e[r],o=i.Settings;this.shouldPlayAtSession(n,o)&&(parseInt(o.newContent)?this._publishDataManager.hasNewDeployables()&&(i.Priority-=this.NEW_CONTENT_PRIORITY,t.push(i)):t.push(i))}return t},e.prototype.updateAGForNewSession=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.Settings;if(!r.conditions)return this._agData=n,void this._agDataManager.updateSelection(n.Id);var i=this._lib.evaluateConditionTree(r.conditions);if(i)return this._agData=n,void this._agDataManager.updateSelection(n.Id)}},e.prototype.updateAGForOldSession=function(e){for(var t=this._agDataManager.sessionCounter,n=0;n<e.length;n++){var r=e[n],i=r.Settings;if(r.Id==this._agDataManager.selectedId){var i=r.Settings;if(this.shouldPlayAtSession(t,i)&&this.shouldReplayAG(i))if(i.conditions){var o=this._lib.evaluateConditionTree(i.conditions);o?(this._agData=r,this._agDataManager.updateSelection(r.Id)):this._logger.customerLog("Attention grabber conditions are not satisfied",5)}else this._agData=r,this._agDataManager.updateSelection(r.Id);return}}},e.prototype.shouldPlayAtSession=function(e,t){return t&&lp(t.session)&&lp(t.interval)?e<t.session?!1:e==t.session?!0:0==t.interval?!1:(e-t.session)%t.interval==0?!0:!1:!1},e.prototype.shouldReplayAG=function(e){if(this._agDataManager.unload)return!1;if(!e)return!1;var t=this._agDataManager.eventTimestampDelta,n=parseInt(e.replay);if(!n||!t)return!1;var r=60*n*1e3;return t>r?e.delay=0:e.delay=(r-t)/1e3,!0},e.prototype.load=function(){if(this._agData){var e={config:this._config,player:this._player,menu:this._menu,agData:this._agData};this._agClass=Us.create("AttentionGrabber",e),this._agClass.setupAttenGrab()}},e.prototype.remove=function(e){return this._agClass?(this._agDataManager.updateUnload(),void this._agClass.remove(e)):void(e&&e())},e.prototype.create=function(e){return this._config=e.config,this._player=e.player,this._agClass=Us.create("AttentionGrabber",e),this._agClass},e.prototype.getImageAG=function(e){return this._config=e.config,this._player=e.player,this._agClass=Us.create("ImageAttentionGrabber",e),this._agClass},e}();Us.register("AttentionGrabberManager").asCtor(Vu).dependencies("Lib, AttentionGrabberDataManager, ServerStorageManager, PublishDataManager, Logger");var Wu=function(){function e(e,t,n){this.AG_DATA_COOKIE_NAME="wm-ag-d",this.AG_SESSION_LENGTH_NAME="wm-ag-sl",this._siteConfigManager=e,this._serverStorageManager=t,this._commonUtils=n,this.init(),this.save()}return e.prototype.updateSelection=function(e){this.selectedId=e,this.save()},e.prototype.updateEvent=function(){this._eventTimestamp=(new Date).getTime(),this.save()},e.prototype.updateUnload=function(){this.unload=1,this.save()},e.prototype.init=function(){var e=this._serverStorageManager.getData(this.AG_DATA_COOKIE_NAME),t=(new Date).getTime(),n=this._siteConfigManager.get().Settings,r=parseInt(n.AGDataVersion)||0;if(e){this._sessionTimestamp=t,this.sessionCounter=e.sc||1,this._version=lp(e.v)?e.v:r,this._shouldUpdateVersion=r>this._version;var i,o=e.st?Math.abs(t-e.st):0;this._commonUtils.isLocalStorageEnabled()&&(i=window.localStorage.getItem(this.AG_SESSION_LENGTH_NAME)),this._sessionLength=parseFloat(i||n.AGSL||1440),this._shouldUpdateCounter=o/6e4>this._sessionLength,this.isNewSession=this._shouldUpdateCounter||this._shouldUpdateVersion,this.sessionCounter=this._shouldUpdateVersion?1:this._shouldUpdateCounter?this.sessionCounter+1:this.sessionCounter,this._version=this._shouldUpdateVersion?r:e.v,this.selectedId=this.isNewSession?void 0:e.id,this._eventTimestamp=this.isNewSession?t:e.et,this.unload=this.isNewSession?0:e.u,this.eventTimestampDelta=this._eventTimestamp?Math.abs(t-this._eventTimestamp):0}else this.isNewSession=!0,this._sessionTimestamp=t,this.sessionCounter=1,this._version=r,this._eventTimestamp=t,this.unload=0},e.prototype.save=function(){var e={st:this._sessionTimestamp,sc:this.sessionCounter,v:this._version,id:this.selectedId,et:this._eventTimestamp,u:this.unload};this._serverStorageManager.saveData(this.AG_DATA_COOKIE_NAME,e,Su)},e}();Us.register("AttentionGrabberDataManager").asCtor(Wu).dependencies("SiteConfigManager, ServerStorageManager, CommonUtils"),Us.register("AttentionGrabber").asFunction(Ne).asProto();var Qu=function(){function e(e,t,n,r,i,o,a,s){this.AG_REPEAT_COOKIE_NAME="wm-ag-rep",this._stopAnimation=!1,this.POSITION="TrianglePosition",this._lib=e,this._commonUtils=t,this._timerManager=n,this._endUsersManager=r,this._auditSourceManager=i,this._hostData=o,this._wmAjax=a,this._config=s.config,this._player=s.player,this._menu=s.menu,this._logger=Us.get("Logger"),this._topContainer=Is(),s.agData?(this._data=s.agData,this._settings=s.agData.Settings,this._agId=this._data.Id,this._dataManager=Us.get("AttentionGrabberDataManager")):(this._oldAG=!0,this._oldAGData=this._commonUtils.getSettingsValue(this._config.Settings,"AG",!1),this._oldAGData&&(this._settings={},this._oldAGData.delay&&(this._settings.delay=this._oldAGData.delay),this._oldAGData.timeout&&(this._settings.duration=this._oldAGData.timeout),this._oldAGData.repeat&&(this._settings.repeat=this._oldAGData.repeat)))}return e.prototype.drawAttentionGrabber=function(){if(this._logger.customerLog("Start drawing attention grabber",5),this._replayTimeoutHandler&&this._replayTimeoutHandler.clear(),this._attentionGrabber=this.getHtml(),this._attentionGrabber){var e=wmjQuery.proxy(function(){this.auditToPeta("Click")},this);this._attentionGrabber.click(e),this._attentionGrabberWrapper=wmjQuery("<div id='walkme-attengrab' class='walkme-to-destroy' style='display: none;'/>"),this._attentionGrabberWrapper.append(this._attentionGrabber),this._topContainer.append(this._attentionGrabberWrapper),this._lib.getUiUtils().setLangAttribute(this._attentionGrabberWrapper),this.updateEvent(),this.auditToPeta("Shown");var t=wmjQuery.proxy(function(){this.postDrawing(),this.hideAfterTimeout()},this);this._timerManager.libSetTimeout(t,100)}},e.prototype.auditToPeta=function(e){if(!rs()&&Vc&&this._agId){var t=Vc+"/Analytics/AttentionGrabbers",n={userGuid:this._lib.getUserGuid(),endUserGuid:this._endUsersManager.getEndUserGuid(),datetime:this._commonUtils.getDateAtUTC(),fullUrl:as(),source:this._auditSourceManager.get(),browser:this._hostData.browser.string,os:this._hostData.os.name,domain:window.location.host,agId:this._agId,eventName:e};this._wmAjax.execute({url:t,data:n})}},e.prototype.getHtml=function(){},e.prototype.postDrawing=function(){},e.prototype.hideAfterTimeout=function(){var e=parseInt(this._settings.duration);if(e){var t=wmjQuery.proxy(function(){this.hide(),this._stopAnimation=!0},this);this._hideTimeoutHandler=this._timerManager.libSetTimeout(t,1e3*e)}},e.prototype.isSupportedByBrowser=function(){return!0},e.prototype.setupAttenGrab=function(){if(this.isSupportedByBrowser()&&this._settings&&!wmjQuery.isEmptyObject(this._settings)&&this.innerSetup()!==!1){if(this._settings.repeat){var e=this._lib.checkRepeatCookie(this.AG_REPEAT_COOKIE_NAME,this._settings.repeat);if(!e.shouldStart)return;e.store()}var t=wmjQuery.proxy(function(){this.drawAttentionGrabber()},this);this._delayTimeoutHandler=this._timerManager.libSetTimeout(t,1e3*parseFloat(this._settings.delay))}},e.prototype.innerSetup=function(){return!0},e.prototype.remove=function(e){try{this._logger.customerLog("Remove attention grabber",5),this._attentionGrabberWrapper&&this._attentionGrabberWrapper.remove(),this.clearTimers(),this.updateEvent(),e&&e()}catch(t){e&&e()}},e.prototype.hide=function(){this.remove(),this.replay()},e.prototype.updateEvent=function(){this._dataManager&&this._dataManager.updateEvent()},e.prototype.replay=function(){var e=parseInt(this._settings.replay);if(e){this._logger.customerLog("Replay attention grabber",5);var t=wmjQuery.proxy(function(){this.drawAttentionGrabber()},this);this._replayTimeoutHandler=this._timerManager.libSetTimeout(t,1e3*e*60)}},e.prototype.getDirection=function(){return this._config.Direction},e.prototype.getDefaultOrFirstTab=function(){for(var e=this._lib.getUiDataProvider().uiObjectsTree(),t=0;t<e.length;t++)if(e[t].properties().hasProperty("default"))return e[t];for(var t=0;t<e.length;t++)if(e[t].properties().hasProperty("visible"))return e[t]},e.prototype.clearTimers=function(){this._delayTimeoutHandler&&this._delayTimeoutHandler.clear(),this._replayTimeoutHandler&&this._replayTimeoutHandler.clear(),this._hideTimeoutHandler&&this._hideTimeoutHandler.clear()},e}();Us.register("AttentionGrabberBase").asCtor(Qu).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Hu=function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n,r,i,o,a,s,u),this._drawAGWaitForImagesFailCount=0,this._oldAG&&(this._oldAGData.id&&(this._settings.id=this._oldAGData.id),this._oldAGData.filename&&(this._settings.filename=this._oldAGData.filename),this._oldAGData.hOffset&&(this._settings.hOffset=this._oldAGData.hOffset),this._oldAGData.vOffset&&(this._settings.vOffset=this._oldAGData.vOffset))}return Gu(t,e),t.prototype.getHtml=function(){return wmjQuery("<img src='"+this._settings.filename+"' />")},t.prototype.innerSetup=function(){return this._settings.filename&&(this._settings.filename=this._lib.ResourceManager.getResourcePath(this._settings.filename)),-1==parseInt(this._settings.id)?!1:!0},t.prototype.postDrawing=function(){this.drawAGWaitForImages()},t.prototype.drawAGWaitForImages=function(){function e(e){var n=t(),r="1"==e.attr("data-inanimation");return n||r}var t=wmjQuery.proxy(this.imageNotLoadedCases,this);if(e(this._player)){if(this._drawAGWaitForImagesFailCount++,this._drawAGWaitForImagesFailCount>10)return;var n=wmjQuery.proxy(this.drawAGWaitForImages,this);this._timerManager.libSetTimeout(function(){n()},500)}else this.drawAGPostLoad()},t.prototype.drawAGPostLoad=function(){var e="0px",t="0px",n="0px",r="0px",i="auto",o="auto",a="auto",s="auto",u=parseInt(this._settings.hOffset),l=parseInt(this._settings.vOffset),c=(this._player.width()-this._attentionGrabberWrapper.width())/2,d=(this._player.height()-this._attentionGrabberWrapper.height())/2;a=this.handlePosition(a,"bottom",d,l),i=this.handlePosition(i,"top",d,l),o=this.handlePosition(o,"right",c,u),s=this.handlePosition(s,"left",c,u),this._config[this.POSITION].indexOf("center")>-1&&(s="50%",r=this.buildPosition(r,"margin-left",c,u),r=this.dynamicSizeHandler("width",r)),this._config[this.POSITION].indexOf("middle")>-1&&(i="50%",e=this.buildPosition(e,"margin-top",d,l),e=this.dynamicSizeHandler("height",e)),this._attentionGrabberWrapper.css({position:"fixed",top:i,right:o,bottom:a,left:s,"margin-top":e,"margin-right":t,"margin-bottom":n,"margin-left":r}),this._attentionGrabberWrapper.show()},t.prototype.handlePosition=function(e,t,n,r){return this._config[this.POSITION].indexOf(t)>-1&&(e=this.buildPosition(e,t,n,r)),e},t.prototype.buildPosition=function(e,t,n,r){return e=parseFloat(this._player.css(t).replace("px","")),e+=n,e+=r,e+="px"},t.prototype.dynamicSizeHandler=function(e,t){return this._player.hasClass("walkme-dynamic-size")&&(t=parseFloat(t.replace("px",""))+this._player.css(e).replace("px","")/2*-1),t},t.prototype.imageNotLoadedCases=function(){return 0==this._player.width()||28==this._player.width()||0==this._attentionGrabberWrapper.width()||28==this._attentionGrabberWrapper.width()||24==this._attentionGrabberWrapper.width()&&24==this._attentionGrabberWrapper.width()},t}(Qu);Us.register("ImageAttentionGrabber").asCtor(Hu).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},$u=function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n,r,i,o,a,s,u),this._defaultValues={animationDuration:700},this._oldAG&&this._oldAGData.settings&&(this._oldAGData.settings.width&&(this._settings.width=this._oldAGData.settings.width),this._oldAGData.settings.right&&(this._settings.right=this._oldAGData.settings.right),this._oldAGData.settings.deg&&(this._settings.deg=this._oldAGData.settings.deg),this._oldAGData.settings.dir&&(this._settings.dir=this._oldAGData.settings.dir,this._direction=this._oldAGData.settings.dir),this._oldAGData.settings.opacity&&(this._settings.opacity=this._oldAGData.settings.opacity))}return Gu(t,e),t.prototype.isSupportedByBrowser=function(){return!ql.isIE(9,"lte")},t.prototype.getHtml=function(){var e,t;this.isHorizental()?(e=this._settings.width+"px",t="130%"):(t=this._settings.width+"px",e="130%");var n=this._settings.opacity,r=this._settings.deg;return wmjQuery("<div class='wm-ag-swoosh' style='width: "+e+"; height:"+t+"; position: absolute; top:-6px; right: -6px; background-color: transparent !important; "+this.getRotateCss(r)+this.getBackgoundCss(n)+"'/>")},t.prototype.postDrawing=function(){var e=this._settings.right;this._attentionGrabberWrapper.detach().appendTo(this._player);var t=this.isHorizental()?"width":"height",n=this._player.css(t);this._attentionGrabberWrapper.css({position:"absolute",overflow:"hidden",width:"100%",height:"100%","z-index":this._player.css("z-index"),right:"0",bottom:"auto",top:"0"}).important("background","none"),this._attentionGrabber.show(),this._attentionGrabberWrapper.show();var r=this.getProperty("animationDuration");this.animate(n,e,r)},t.prototype.animate=function(e,t,n){function r(){var e={};e[o]=a,i.animate(e,n);var s=this._stopAnimation;setTimeout(function(){var e={};e[o]=t+"px",i.animate(e,n)},1e3),s||setTimeout(r,4e3)}var i=this._attentionGrabber,o=this.isHorizental()?"right":"top";i.css(o,t+"px");var a=1.3*parseFloat(e)+"px";r()},t.prototype.isHorizental=function(){return"hoz"==this._direction},t.prototype.getProperty=function(e){return this._settings[e]||this._defaultValues[e]},t.prototype.getBackgoundCss=function(e){return"background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjkxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);background: -moz-linear-gradient(left,  rgba(255,255,255,0) 0%, rgba(255,255,255,"+e+") 50%, rgba(255,255,255,0) 100%);background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,0)), color-stop(50%,rgba(255,255,255,"+e+")), color-stop(100%,rgba(255,255,255,0)));background: -webkit-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,"+e+") 50%,rgba(255,255,255,0) 100%);background: -o-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,"+e+") 50%,rgba(255,255,255,0) 100%);background: -ms-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,"+e+") 50%,rgba(255,255,255,0) 100%);background: linear-gradient(to right,  rgba(255,255,255,0) 0%,rgba(255,255,255,"+e+") 50%,rgba(255,255,255,0) 100%);"},t.prototype.getRotateCss=function(e){return"transform: rotate("+e+"deg); -moz-transform:rotate("+e+"deg); -webkit-transform:rotate("+e+"deg); -o-transform:rotate("+e+"deg);  -ms-transform:rotate("+e+"deg);"},t}(Qu);Us.register("OldSwooshAttentionGrabber").asCtor($u).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},zu=function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n,r,i,o,a,s,u),this.positions=["left","right","top","bottom"],this._templateId=this._data.UITemplateId,this._templateVersion=this._data.UITemplateVersion,this._templateVariations=[];for(var l in this._data.UIVariationsIds)this._templateVariations.push(Us.get("UIVariations").get(this._data.UIVariationsIds[l]));this._data.Settings.customVariation&&this._templateVariations.push(this._data.Settings.customVariation),this._setPositionProxy=wmjQuery.proxy(function(){this.setPosition()},this),this._playerMajorPosition=this._config[this.POSITION].slice(0,this._config[this.POSITION].indexOf("-")),this._agPlayInitiator=t.getPlayInitiatorEnum().ATTENTION_GRABBER}return Gu(t,e),t.prototype.isSupportedByBrowser=function(){return!ql.isIE(7)},t.prototype.getHtml=function(){return Us.get("TemplatesFactory").get(this._templateId,this._templateVersion,this._templateVariations,this.getTemplateData())},t.prototype.getTemplateData=function(){return{}},t.prototype.getHorizontalOffset=function(){return 0},t.prototype.getVerticalOffset=function(){return 0},t.prototype.animate=function(){},t.prototype.postDrawing=function(){this.addMainClass(),this._attentionGrabber.show(),this._attentionGrabberWrapper.show(),this.setPosition(),this.bindEvents(),this.animate()},t.prototype.addMainClass=function(){this._attentionGrabber.addClass("wm-ag-"+this._mainClass)},t.prototype.copyCssProperties=function(){for(var e=0;e<this.positions.length;e++)this._attentionGrabberWrapper.css(this.positions[e],this.getCssPosition(this._player,this.positions[e])),this._attentionGrabberWrapper.css("margin-"+this.positions[e],this._player.css("margin-"+this.positions[e]))},t.prototype.fixCssMargins=function(e,t){var n=parseFloat(this._attentionGrabberWrapper.css("margin-left"))||0,r=parseFloat(this._attentionGrabberWrapper.css("margin-right"))||0,i=parseFloat(this._attentionGrabberWrapper.css("margin-top"))||0,o=parseFloat(this._attentionGrabberWrapper.css("margin-bottom"))||0;this._attentionGrabberWrapper.css("margin-left",n+e+"px").css("margin-right",r+e+"px"),this._attentionGrabberWrapper.css("margin-top",i+t+"px").css("margin-bottom",o+t+"px")},t.prototype.getCssPosition=function(e,t){var n,r=e[0].style[t];n=this._lib.getHostData().isIE(8)?e[0].currentStyle[t]:e.css(t),e.important(t,"auto");var i=e.css(t);return e.important(t,""),r&&(e[0].style[t]=r),n!=i?n:"auto"},t.prototype.setLogicCss=function(){this._attentionGrabberWrapper.css("z-index"," 2147483647"),this._attentionGrabberWrapper.css("cursor","pointer")},t.prototype.bindEvents=function(){wmjQuery(window).resize(this._setPositionProxy);var e=wmjQuery.proxy(function(){var e={type:this._agPlayInitiator};this._menu.toggle({initiator:e})},this);this._attentionGrabberWrapper.click(e)},t.prototype.unbindEvents=function(){wmjQuery(window).off("resize",this._setPositionProxy)},t.prototype.setPosition=function(){this._attentionGrabberWrapper.css("position","fixed"),this.setLogicCss();var e,t;"left"==this._playerMajorPosition||"right"==this._playerMajorPosition?(e=this._player.outerWidth()+this.getHorizontalOffset(),t=(this._player.outerHeight()-this._attentionGrabber.outerHeight())/2):("top"==this._playerMajorPosition||"bottom"==this._playerMajorPosition)&&(e=(this._player.outerWidth()-this._attentionGrabber.outerWidth())/2,t=this._player.outerHeight()+this.getVerticalOffset()),this.copyCssProperties(),this.fixCssMargins(e,t)},t.prototype.remove=function(t){try{this.unbindEvents(),e.prototype.remove.call(this,t)}catch(n){e.prototype.remove.call(this,t)}},t}(Qu);Us.register("TemplateAttentionGrabber").asCtor(zu).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Yu=function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n,r,i,o,a,s,u),this._mainClass="ag",this._animationDuration=this._settings.animationDuration||700}return Gu(t,e),t.prototype.isSupportedByBrowser=function(){return!ql.isIE(9,"lte")},t.prototype.postDrawing=function(){this._attentionGrabberWrapper.detach().appendTo(this._player),this._attentionGrabberWrapper.css({position:"absolute",overflow:"hidden",width:"100%",height:"100%","z-index":this._player.css("z-index"),right:"0",bottom:"auto",top:"0"}).important("background","none"),this._attentionGrabber.show(),this._attentionGrabberWrapper.show(),this.animate()},t.prototype.animate=function(){function e(){var o={};o[r]=a,t.animate(o,n);var s=this._stopAnimation;setTimeout(function(){var e={};e[r]=i,t.animate(e,n)},1e3),s||setTimeout(e,4e3)}var t=this._attentionGrabber,n=this._animationDuration,r=this.isHorizental()?"right":"top",i="-60px";t.css(r,i);var o=this.isHorizental()?"width":"height",a=1.3*parseFloat(this._player.css(o))+"px";e()},t.prototype.isHorizental=function(){return"top"==this._playerMajorPosition||"bottom"==this._playerMajorPosition},t}(zu);Us.register("SwooshAttentionGrabber").asCtor(Yu).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},qu=function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n,r,i,o,a,s,u),this._oppositeDirections={left:"right",right:"left",bottom:"top",top:"bottom"}}return Gu(t,e),t.prototype.getTemplateData=function(){var e=Us.get("LanguageManager");return{title:this.getBalloonTitle(),text:this.getBalloonText(),position:this.getOppositeDirection(this._playerMajorPosition),buttons:this._settings.buttons,direction:this.getDirection(),language:e.getCurrentLanguage()}},t.prototype.getBalloonText=function(){return""},t.prototype.getBalloonTitle=function(){return void 0},t.prototype.setLogicCss=function(){e.prototype.setLogicCss.call(this),this._attentionGrabberWrapper.css("direction",this.getDirection())},t.prototype.bindEvents=function(){e.prototype.bindEvents.call(this);var t=wmjQuery.proxy(this.remove,this);this._xBtn=wmjQuery(".wm-x-button",this._attentionGrabberWrapper),this._xBtn.click(function(){t()})},t.prototype.getHorizontalOffset=function(){return wmjQuery(".wm-outer-arrow",this._attentionGrabberWrapper).outerWidth()},t.prototype.getVerticalOffset=function(){return wmjQuery(".wm-outer-arrow",this._attentionGrabberWrapper).outerHeight()},t.prototype.animate=function(){function e(){if(1==a)return a=0,void s(function(){e()},3e3);a++;var u={};u[n]=i,t.animate(u,{easing:"swing",duration:700,complete:function(){s(function(){var i={};i[n]=r+5+"px",t.animate(i,{easing:"easeOutBounce",duration:700,complete:function(){o||s(function(){e()},100)}})},100)}})}var t=this._attentionGrabberWrapper,n=this._playerMajorPosition,r=parseInt(t.css(n)),i=r+30+"px",o=this._stopAnimation,a=0,s=this._timerManager.libSetTimeout;e()},t.prototype.getOppositeDirection=function(e){return this._oppositeDirections[e]},t.prototype.remove=function(t){try{if(this._attentionGrabberWrapper){this._attentionGrabberWrapper.off("click"),this._xBtn&&this._xBtn.off("click");var n=wmjQuery.proxy(e.prototype.remove,this);this._attentionGrabberWrapper.stop(!0,!0);var r={opacity:0};ql.isIE(8)?e.prototype.remove.call(this,t):this._attentionGrabberWrapper.animate(r,{duration:300,complete:function(){n(t)}})}else e.prototype.remove.call(this,t)}catch(i){e.prototype.remove.call(this,t)}},t}(zu);Us.register("BalloonAttentionGrabber").asCtor(qu).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Ku=function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n,r,i,o,a,s,u),this._mainClass="ticker",this._textItems=[],this.MAX_DEPLOYABLES_TO_SHOW=5;var l=this.getDefaultOrFirstTab();if(l)for(var c=l.children(),d=0,f=0;f<c.length;f++){var p=c[f];if(p.properties().hasProperty("visible")&&(this._textItems.push(p.name()),d++),d==this.MAX_DEPLOYABLES_TO_SHOW)break}this._currentDeployableIndex=0}return Gu(t,e),t.prototype.setupAttenGrab=function(){0!==this._textItems.length&&e.prototype.setupAttenGrab.call(this)},t.prototype.getBalloonTitle=function(){return"Help me with..."},t.prototype.getBalloonText=function(){return this._textItems[this._currentDeployableIndex]},t.prototype.getDeployableText=function(){var e=this._textItems[this._currentDeployableIndex];return this._currentDeployableIndex<Math.min(this.MAX_DEPLOYABLES_TO_SHOW,this._textItems.length)-1?this._currentDeployableIndex++:this._currentDeployableIndex=0,e},t.prototype.animate=function(){if(ql.isIE(8))this.innerAnimate();else{this._attentionGrabberWrapper.css({opacity:0});var e={opacity:1},t=wmjQuery.proxy(this.innerAnimate,this);this._attentionGrabberWrapper.animate(e,{duration:300,complete:t})}},t.prototype.innerAnimate=function(){var e=wmjQuery(".wm-title",this._attentionGrabber),t={opacity:1};this.fixOpacityForIe8(t),e.css(t);var n=this._stopAnimation;e.text(Np(this.getDeployableText(),["&",'"',"'",">","<"]));var r=wmjQuery.proxy(this.innerAnimate,this),i=this._timerManager.libSetTimeout;e.animate(t,{duration:700,complete:function(){i(function(){var t={opacity:0};e.animate(t,{duration:700,complete:function(){n||r()}})},2e3)}})},t.prototype.getDirection=function(){return"ltr"},t.prototype.fixOpacityForIe8=function(e){ql.isIE(8)&&(e.opacity=.99)},t}(qu);Us.register("TickerAttentionGrabber").asCtor(Ku).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Xu=function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n,r,i,o,a,s,u),this._mainClass="custom-text"}return Gu(t,e),t.prototype.getBalloonText=function(){return this._settings.text||""},t.prototype.setLogicCss=function(){e.prototype.setLogicCss.call(this);var t=wmjQuery(".wm-title",this._attentionGrabber);t.css("width","auto")},t}(qu);Us.register("CustomTextAttentionGrabber").asCtor(Xu).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Ju=function(e){function t(t,n,r,i,o,a,s,u,l){e.call(this,t,n,r,i,o,a,s,l),this._mainClass="custom-image",this._resourceManager=u}return Gu(t,e),t.prototype.getHtml=function(){var e=this._resourceManager.getResourcePath(this._settings.image.url);if(this.isHttpOverHttps(e))return this._logger.customerLog("Attention Grabber - Could not load Custom Image because source is http over https",3),Qd("AGDataInsecure",{name:"Custom Image"}),null;var t=Us.get("TemplatesFactory").get(this._templateId,this._templateVersion,this._templateVariations,{src:e});return t.height(this._settings.image.height).width(this._settings.image.width),t},t.prototype.setLogicCss=function(){e.prototype.setLogicCss.call(this),this._attentionGrabberWrapper.height(this._settings.image.height).width(this._settings.image.width)},t.prototype.isHttpOverHttps=function(e){return e?0!=window.location.href.indexOf("https://")?!1:-1==e.indexOf("https://"):!1},t}(zu);Us.register("CustomImageAttentionGrabber").asCtor(Ju).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, ResourceManager");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Zu=function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n,r,i,o,a,s,u),this._balloonsData={0:{classType:"3.sub",title:"Meet WalkMe!",text:"Your New Personal Assistant.",buttonText:"Start",position:"bottom-center",firstBalloon:!0},1:{classType:"3.sub",text:"The WalkMe menu is the place to get all the help you might need.",boldText:'Click "Next" and take a look...',buttonText:"Next",position:"bottom-center",delay:1,marginBottom:3},2:{classType:"3.sub",text:"Here you can select your preferred language.",boldText:'Click "Next" to continue...',buttonText:"Next",position:"bottom-center",attachedToElementSelector:"#walkme-languages",moveArrow:!0},3:{classType:"3.sub",text:"Quickly find answers to your support issue by using the search bar.",boldText:'Click "Next" to continue...',buttonText:"Next",position:"right-middle",attachedToElementSelector:".walkme-search-box-container",marginRight:12},4:{classType:"3.sub",text:"All the Walk-Thrus and help resources are located here, click them to start your online guidance.",boldText:'Click "Next" to continue...',buttonText:"Next",position:"right-middle",attachedToElementSelector:".walkme-deployables-list .walkme-tab .walkme-deployable",marginRight:14},5:{classType:"3.sub",text:"Couldn't find what you want? this link takes you to the support page.",boldText:"To learn more about WalkMe, click here.",buttonText:"Next",position:"bottom-center",attachedToElementSelector:".walkme-open-ticket",moveArrow:!0},6:{classType:"3.sub",title:"Thank You!",text:"We're here to help.",buttonText:"Done",position:"bottom-center",marginBottom:3}},this._stepIndex=0,this._themeVariation=this._data.ExtraUIVariationsIds[0],this._balloonsData[0].position=this._config[this.POSITION],this._balloonsData[0].delay=this._settings.delay,this._agPlayInitiator=t.getPlayInitiatorEnum().ATTENTION_GRABBER;var l=wmjQuery.proxy(this.updateJqueryMenu,this);this._menu.bind("build-menu-end",function(e,t){l(t.menu)})}return Gu(t,e),t.prototype.updateJqueryMenu=function(e){this._jQueryMenu=e},t.prototype.createAg=function(e,t){var n=wmjQuery.proxy(this.showNextBalloon,this),r=wmjQuery.proxy(function(){var e=wmjQuery.proxy(function(){if(n(),1==this._stepIndex){var e={type:this._agPlayInitiator};WalkMePlayerAPI.toggleMenu(e)}},this);o.remove(e)},this),i={config:{Direction:this._config.Direction},player:e,menu:this._menu,onClickFunc:r,agData:{Id:t.firstBalloon?this._agId:null,
ClassType:t.classType,UITemplateId:this._data.UITemplateId,UITemplateVersion:this._data.UITemplateVersion,UIVariationsIds:[this._themeVariation,this._data.ExtraUIVariationsIds[this._stepIndex+1]],Settings:{delay:t.delay,text:t.text,title:t.title,boldText:t.boldText,buttons:[{text:t.buttonText}],firstBalloon:t.firstBalloon,attachedToElementSelector:t.attachedToElementSelector,jQueryMenu:this._jQueryMenu,moveArrow:t.moveArrow,marginRight:t.marginRight,marginBottom:t.marginBottom}}};i.config[this.POSITION]=t.position;var o=Us.create("AttentionGrabber",i);this._currentAg=o,o.setupAttenGrab()},t.prototype.showNextBalloon=function(){if(!this._stopPlaying&&(this._stepIndex++,this._balloonsData[this._stepIndex])){if(!this.shouldPlay())return void this.showNextBalloon();if(this._jQueryMenu)this.createAg(this._jQueryMenu,this._balloonsData[this._stepIndex]);else{var e=wmjQuery.proxy(function(e){this._jQueryMenu=e,this.createAg(e,this._balloonsData[this._stepIndex])},this);this._menu.bind("on-open-end",function(t,n){t.target.unbind("on-open-end"),e(n.menu)})}}},t.prototype.shouldPlay=function(){var e=this._balloonsData[this._stepIndex].attachedToElementSelector;return e?wmjQuery(e+":visible",this._jQueryMenu).length>0:!0},t.prototype.setupAttenGrab=function(){if(this.isWalkthrusTab()&&"iOS"!=ql.os.name&&"Android"!=ql.os.name){var e=wmjQuery.proxy(this.stopAll,this);this._menu.bind("on-close-begin",function(t){e()}),this.createAg(this._player,this._balloonsData[0])}},t.prototype.isWalkthrusTab=function(){var e=this.getDefaultOrFirstTab(),t=e.properties().getAll();return wmjQuery.inArray("contains-walkthru",t)>-1},t.prototype.stopAll=function(){this._stopPlaying=!0,this._currentAg.remove()},t.prototype.remove=function(t){this._currentAg&&this._currentAg.remove(),e.prototype.remove.call(this,t)},t}(Qu);Us.register("MenuOverviewAttentionGrabber").asCtor(Zu).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax");var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},el=function(e){function t(t,n,r,i,o,a,s,u){e.call(this,t,n,r,i,o,a,s,u),this._mainClass="menu-overview",this._arrowOffset=0,this._onClickFunc=u.onClickFunc}return Gu(t,e),t.prototype.getTemplateData=function(){return{title:this._settings.title,"bold-text":this._settings.boldText,text:this._settings.text,position:this.getOppositeDirection(this._playerMajorPosition),buttons:this._settings.buttons}},t.prototype.setLogicCss=function(){e.prototype.setLogicCss.call(this),this.moveArrow(),this._data.Settings.firstBalloon||this._attentionGrabberWrapper.css("cursor","auto")},t.prototype.moveArrow=function(){if(this._data.Settings.moveArrow){var e=wmjQuery(".wm-outer-arrow",this._attentionGrabberWrapper),t=wmjQuery(".wm-inner-arrow",this._attentionGrabberWrapper),n=e.offset().left;e.css("left");e.css("left","85%"),t.css("left","85%");var r=e.offset().left,i=r-n;this._arrowOffset=i,this._data.Settings.moveArrow=!1}},t.prototype.bindEvents=function(){e.prototype.bindEvents.call(this),this._attentionGrabberWrapper.off("click"),wmjQuery(".wm-button",this._attentionGrabberWrapper).click(this._onClickFunc),this._fixPositionProxy=wmjQuery.proxy(this.fixPosition,this),wmjQuery(window).resize(this._fixPositionProxy),this._data.Settings.firstBalloon&&this._attentionGrabberWrapper.click(this._onClickFunc)},t.prototype.unbindEvents=function(){e.prototype.unbindEvents.call(this),wmjQuery(window).off("resize",this._fixPositionProxy)},t.prototype.animate=function(){this.fixPosition(),this._data.Settings.firstBalloon&&e.prototype.animate.call(this)},t.prototype.fixPosition=function(){var e=this._attentionGrabberWrapper.css("margin-bottom"),t=this._attentionGrabberWrapper.css("margin-right"),n=this._data.Settings.marginRight||0,r=this._data.Settings.marginBottom||0;if(this._data.Settings.attachedToElementSelector){var i=this._data.Settings.jQueryMenu,o=wmjQuery(this._data.Settings.attachedToElementSelector,i),a=o.offset().left-i.offset().left,s=o.offset().top-i.offset().top;if("bottom"==this._playerMajorPosition){var u=(this._attentionGrabberWrapper.width(),i.width()),l=this._attentionGrabberWrapper.css("margin-bottom"),c=o.width(),d=(o.css("margin-right"),o.css("margin-top"),parseFloat(t)+u/2-a-c/2+this._arrowOffset+n);this._attentionGrabberWrapper.css("margin-right",d+"px").css("margin-bottom",parseFloat(l)-s+r+"px")}else{var f=i.height(),p=(i.css("border-left-width"),o.css("margin-right"),o.height()),d=parseFloat(e)+f/2-s-p/2+r;this._attentionGrabberWrapper.css("margin-right",parseFloat(t)-a+n+"px").css("margin-bottom",d+"px")}}else this._attentionGrabberWrapper.css("margin-right",parseFloat(t)+n+"px").css("margin-bottom",parseFloat(e)+r+"px")},t}(Xu);Us.register("MenuOverviewSubAttentionGrabber").asCtor(el).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax"),Us.register("RegularBodyUtils").asCtor(Le);var Le;Us.register("TagBodyUtils").asCtor(Oe);var Oe;Us.register("CommonUtils").asCtor(Me).dependencies("TimerManager, HostData, AuditSourceManager, Consts, RegularBodyUtils, CookiesManager, SettingsValuesRetriever, ExternalWalkMeConfig");var Me;Us.register("SettingsValuesRetriever").asCtor(Re),Us.register("UiUtils").asCtor(je).dependencies("Lib");var je;Us.register("Balloon").asCtor(Fe).asProto(),Us.register("DrawableLauncher").asCtor($e).asProto(),Us.register("AuditStepsManager").asCtor(ze).dependencies("Lib,ServerDataSenderManager,WalkMeInfo,Logger,HostData,WmAjax,Consts,StepUtils,CommonUtils,EventSender, AuditSafeStartManager, EventSenderStepActionNameProvider, SettingsValuesRetriever"),Us.register("AuditWtsManager").asCtor(Ye).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper"),Us.register("AuditTasksManager").asCtor(qe).dependencies("EventSender"),Us.register("AuditSafeStartManager").asCtor(Ke).dependencies("EventSender,ReportInitiatorMapper,Logger"),Us.register("EndUsersManager").asCtor(Xe).dependencies("ClientStorageManager,Logger,JQueryElementFinder,Lib,GenerateGuidFunc,CommonUtils,CommonEvents"),Us.register("EndUserLoggerManager").asCtor(Je).dependencies("ClientStorageManager, Logger, EndUsersManager, SiteConfigManager, AbCurrentPermutationProvider, Lib, RecorderServerManager, HostData, FeaturesManager"),Us.register("iOSConditionFunctions").asCtor(Ze).asSingleton().dependencies("CommonUtils, iOSUtils, Consts"),Us.register("ScreenSizeConditionFunctions").asCtor(et).asSingleton().dependencies("screen"),Us.register("WindowSizeConditionFunctions").asCtor(tt).asSingleton().dependencies("win");var tl=function(){function e(e,t,n){this.args=[];for(var r in arguments)arguments[r]&&this.args.push(arguments[r])}return e.prototype.getFuncList=function(){var e={};return wmjQuery.safeEach(this.args,function(t,n){n&&n.getFuncList&&wmjQuery.extend(e,n.getFuncList())}),e},e.prototype.getFuncAssert=function(){var e=[];return wmjQuery.safeEach(this.args,function(t,n){n&&n.getFuncAssert&&wmjQuery.extend(e,n.getFuncAssert())}),e},e.prototype.getAsyncFuncs=function(){var e=[];return wmjQuery.safeEach(this.args,function(t,n){n&&n.getAsyncFuncs&&e.push.apply(e,n.getAsyncFuncs())}),e},e}();Us.register("ConditionFunctionsHandler").asCtor(tl).asSingleton().dependencies("ScreenSizeConditionFunctions, iOSConditionFunctions, WindowSizeConditionFunctions");var nl={};nl.fixed=function(e){var t=new nl.regular;return t.setValue(e),t},nl.noMemory=function(){function e(e){n=e}var t,n,r,i=this;i.onGotValue=function(e){},i.getValue=function(e){return e?r:r=n()},i.hasValue=function(){return!0},i.onResourceClean=function(e){t=e},i.cleanResources=function(){t&&t()},i.onRefresh=function(){},i.refresh=function(){},e.apply(null,arguments)},nl.regular=function(){function e(){}var t,n,r,i,o=this,a=!1;o.onGotValue=function(e){n=e},o.setValue=function(e){t=e,a=void 0!==e,n&&n(o.getValue())},o.getValue=function(){return t},o.hasValue=function(){return a},o.onResourceClean=function(e){r=e},o.cleanResources=function(){r&&r(),n=void 0},o.onRefresh=function(e){i=e},o.refresh=function(){i&&i()},e.apply(null,arguments)},nl.complex=function(){function e(e,n,a){r=e,i=n,o=a,r.onGotValue(t),i.onGotValue(t)}function t(){var e=s.hasValue()&&n?!0:!1;e&&n(s.getValue())}var n,r,i,o,a,s=this;s.getValue=function(e){return e?a:a=o(r.getValue,i.getValue)},s.onGotValue=function(e){n=e},s.hasValue=function(){return o(r.hasValue,i.hasValue)},s.cleanResources=function(){r.cleanResources(),i.cleanResources(),n=void 0},s.refresh=function(){r.refresh(),i.refresh()},e.apply(null,arguments)},this.ConditionFunctions=function(e,t,n,r,i,o,a,s){function c(e,t){return n.isBigger(e,t)}function d(e,t){return n.isSmaller(e,t)}function f(e,t){return n.isLike(e,t)}function p(e){var t=e.split(":"),n=Number(t[0]),r=Number(t[1]);return 60*n+r}function g(e){var t=new RegExp("[ 	"+String.fromCharCode(160)+"\r\n\f]+","gi");return e=e.replace(t," "),e=wmjQuery.trim(e)}function h(e){Za("jQuery find element for condition",5);var n=t.findElementsByjQueryComplexSelector(e.jQuerySelector);return Za(n,5),0===n.length&&(n=!1),n}function m(e,t,n){var r=function(){return h(e)};return b(t,n,r)}function v(e,t,n,r){var i=function(){return h(e)};return C(e,t,n,r,i)}function y(e){return"boolean"==typeof e?e:1===e?!0:0===e?!1:"string"==typeof e?"true"==e.toLowerCase()||"1"==e?!0:"false"==e.toLowerCase()||"0"==e?!1:void 0:void 0}function w(e){var t=D();return e.IdentifySettings?(t.ElementDescription=l(u(e.IdentifySettings.ElementDescription)),t.IsIgnoreText=void 0===e.IdentifySettings.IgnoreText?y(e.IdentifySettings.IsIgnoreText):parseInt(e.IdentifySettings.IgnoreText),t.StepSensitivity=void 0===e.IdentifySettings.Sensitivity?parseInt(e.IdentifySettings.StepSensitivity):parseInt(e.IdentifySettings.Sensitivity),t.IsIgnoreId=void 0===e.IdentifySettings.IgnoreId?y(e.IdentifySettings.IsIgnoreId):parseInt(e.IdentifySettings.IgnoreId),t.IgnorePosition=y(e.IdentifySettings.IgnorePosition),t.IsIdentifyByText=y(e.IdentifySettings.IsIdentifyByText)):t.ElementDescription=l(u(e.ElementDescription)),t}function b(e,t,n){function r(){Za("Poll Element: start search for element (polling: "+t>"0)",5),o&&o.clear();var s=a?S(a):!1;if(!s){if(a){var u=I(e,oe);a.off(u),Za("Poll Element: Sonar bound element was lost: ",5),Za(a,5)}a=n(),Za("Poll Element: element matched: ",5),Za(a,5),a?i=T(e,i,a,r):t>=0&&i.setValue(!1)}return t>=0&&(o=Ud.libSetTimeout(r,t)),i}var i=new nl.regular;i.onResourceClean(function(){t=-1}),i.onRefresh(function(){r()});var o,a;return r()}function S(e){var t;try{t=e[0].ownerDocument}catch(n){return!1}var r=t.defaultView||t.parentWindow;return r&&r.top==window.top&&e.is(":mt_visible")?!0:!1}function T(e,t,n,r,i){function o(){if(Za("Listening to event on element. (event:'"+e+"', element specified below) ",5),Za(n,5),n){var t=I(e,oe);n.on(t,u)}}function s(){try{if(Za("Stopped listening for event in condition checker result. (event:'"+e+"', element specified below) ",5),Za(n,5),n){var t=I(e,oe);n.off(t,u)}}catch(r){}}var u=function(){Za("An event was fired for condition checker result. (event:'"+e+"', element specified below) ",3),Za(n[0],3),a.wrapSession(function(){t.setValue(!0)})};return o(),t.onResourceClean(s),t.onRefresh(function(){t.setValue(!1),r()}),t}function I(e,t){return e.replace(/ /g,t+" ")+t}function C(e,t,n,r,i){var o,a=function(e){return e?o:o=i()},s=new nl.regular,u=b(t,r,function(){return a(!1)}),l=b(n,r,function(){return a(!0)});return u.onGotValue(function(e){e&&s.setValue(!0)}),l.onGotValue(function(e){e&&s.setValue(!1)}),s.onResourceClean(function(){u.cleanResources(),l.cleanResources()}),s}function E(t){var n=w(t);Za("Find element for condition",5);var r=e.findElement(n,null);return Za(r,5),r}function k(e,t,n){var r=function(){return E(e)};return b(t,n,r)}function _(e,t,n,r){var i=function(){return E(e)};return C(e,t,n,r,i)}function x(e,t){return e/=t,e--,Math.sqrt(1-e*e)}this.LocalSVNRevision="$Rev: 7243 $";var A=this,P={TRUE:0,FALSE:1,CANNOT_ASSERT:2},D=function(){var e={Id:-1,TutorialId:-1,StepText:"",StepTitle:"",ElementDescription:"",StepIndex:-1,ConfigurationId:"1",Configuration:null,StepSensitivity:1,Type:-1,Settings:{},Duration:4,Delay:0};return e};this.getElementTextForEditor=function(e){var t=l(e);return A.getElementText(t)},this.getElementStrength=function(t){var n=l(t),r=w(n),i={score:-1},o=e.findElement(r,null,i);return o?i.score:void 0},this.getElementText=function(t){var r=w(t),i=e.findElement(r,!1);return i===!1?!1:n.checkElementText(wmjQuery(i))};var N=function(e,t,n){return m(e,"hover",n)},L=function(e,t,n){return m(e,"click mouseup mousedown",n)},O=function(e,t,n){return v(e,"mouseenter","mouseleave",n)},M=function(e){return t.findElementsByjQueryComplexSelector(e.jQuerySelector).length>0},R=function(e){return 0==t.findElementsByjQueryComplexSelector(e.jQuerySelector).length},j=function(e){return t.findElementsByjQueryComplexSelector(e.jQuerySelector).length>parseInt(e.jQueryLength)},F=function(e){return t.findElementsByjQueryComplexSelector(e.jQuerySelector).length<parseInt(e.jQueryLength)},B=function(e){return t.findElementsByjQueryComplexSelector(e.jQuerySelector).length==parseInt(e.jQueryLength)},U=function(e){return t.findElementsByjQueryComplexSelector(e.jQuerySelector).length!=parseInt(e.jQueryLength)},G=function(e){for(var t=parseInt(e.StepId),n=0;n<xf.length;n++)if(xf[n]==t)return!0;return!1},V=function(e){return!G(e)},W=function(e){for(var t=parseInt(e.StepId,10),n=0;n<Af.length;n++)if(Af[n]==t)return!0;return!1},Q=function(e){return!W(e)},H=function(e){var t=new Date(Np(e.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),t-n==0},$=function(e){return!H(e)},z=function(e){var t=new Date(Np(e.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),n>=t},Y=function(e){var t=new Date(Np(e.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),t>=n},q=function(e){var t=new Date;return Number(e.DateInput)==t.getDay()},K=function(e){var t=new Date;return Number(e.DateInput)==t.getMonth()},X=function(e){var t=new Date;return Number(e.DateInput)==t.getFullYear()},J=function(e){var t=new Date,n=60*t.getHours()+t.getMinutes();return n>=p(e.TimeInput)},Z=function(e){var t=new Date,n=60*t.getHours()+t.getMinutes();return n<=p(e.TimeInput)},ee=function(e){var t=Np(e.UrlInput,["&"]);return Zf(t.toLowerCase())==Zf(jf().toLowerCase())},te=function(e){return!ee(e)},ne=function(e){var t=Np(e.UrlInput,["&"]);return Zf(jf()).toLowerCase().indexOf(Zf(t).toLowerCase())>=0},re=function(e){return!ne(e)},ie=function(t){var n=w(t);return 0!=e.findElement(n,!1)},oe=".mtCond",ae=function(e,t,n){return k(e,"hover",t)},se=function(e,t,n){return k(e,"click mouseup mousedown",t)},ue=function(e,t,n){return _(e,"mouseenter","mouseleave",t)},le=function(e){return!ie(e)},ce=function(t){var n=w(t);return 0!=e.findElement(n,!0)},de=function(e){return!ce(e)},fe=function(t){var n=w(t),r=e.findElement(n,!1);return wmjQuery(r).is(":checked")},pe=function(e){return!fe(e)},ge=function(e){var t=A.getElementText(e),n=Np(e.ElementText,["&",'"',"'",">","<"]);return t===!1?!1:g(t.toLowerCase())==g(n.toLowerCase())},he=function(e){return!ge(e)},me=function(e){var t=A.getElementText(e);return t===!1?!1:c(t,e.ElementText)},ve=function(e){var t=A.getElementText(e);return t===!1?!1:d(t,e.ElementText)},ye=function(e){var t=A.getElementText(e),n=Np(e.ElementText,["&",'"',"'",">","<"]);return t===!1?!1:f(g(t),g(n))},we=function(e){return!ye(e)},be=function(e){var t=Np(e.UrlInput,["&"]);if(0==t.indexOf("regexp:"))return Xf(t);var n=Zf(jf()),r=Zf(t);return f(n,r)},Se=function(e){return!be(e)},Te=function(e){var n=Np(e.jQueryText,["&",'"',"'"]);return g(t.getjQueryElementText(e.jQuerySelector).toLowerCase())==g(n.toLowerCase())},Ie=function(e){return!Te(e)},Ce=function(e){return c(t.getjQueryElementText(e.jQuerySelector),e.jQueryText)},Ee=function(e){return d(t.getjQueryElementText(e.jQuerySelector),e.jQueryText)},ke=function(e){var n=Np(e.jQueryText,["&",'"',"'"]);return f(g(t.getjQueryElementText(e.jQuerySelector)),g(n))},_e=function(e){return!ke(e)},xe=function(e){var t=Np(e.UrlInput,["&"]);return Zf(t.toLowerCase())==Zf(Ff().toLowerCase())},Ae=function(e){return!xe(e)},Pe=function(e){var t=Np(e.UrlInput,["&"]);return Zf(Ff().toLowerCase()).indexOf(Zf(t.toLowerCase()))>=0},De=function(e){return!Pe(e)},Ne=function(e){var t=Np(e.UrlInput,["&"]),n=Zf(Ff()),r=Zf(t);return f(n,r)},Le=function(e){return!Ne(e)},Oe=function(e){return f(r.browser.string,"*"+e.BrowserName+"*")},Me=function(e){return!Oe(e)},Re=function(e){return window.self!==window.top},je=function(e){return!Re(e)},Fe=4e3,Be=function(e){var t=tc.getData(Sf);if(!t)return!1;var n=((new Date).getTime()-t)/2,r=n>Fe?Fe:x(n,Fe)*Fe;return Wl+r>t},Ue=function(e){return!Be(e)},Ge=function(e){var t=Xc.getCookie(e.CookieName),n=Np(e.CookieInput,["&",'"',"'"]);return t===!1?!1:t.toLowerCase()==n.toLowerCase()},Ve=function(e){return!Ge(e)},We=function(e){var t=Xc.getCookie(e.CookieName);return t===!1?!1:c(t,e.CookieInput)},Qe=function(e){var t=Xc.getCookie(e.CookieName);return t===!1?!1:d(t,e.CookieInput)},He=function(e){var t=Xc.getCookie(e.CookieName),n=Np(e.CookieInput,["&",'"',"'"]);return t===!1?!1:f(t,n)},$e=function(e){return!He(e)},ze=function(e){var t=Xc.getCookie(e.CookieName);return t!==!1},Ye=function(e){return!ze(e)},qe=function(e){var t=Zc.getData(e.DataKey,void 0);if(void 0===t)return!1;null===t&&(t="null");var n=Np(e.DataValue,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()},Ke=function(e){return!qe(e)},Xe=function(e){var t=Zc.getData(e.DataKey,void 0);return void 0===t?!1:c(t,e.DataValue)},Je=function(e){var t=Zc.getData(e.DataKey,void 0);return void 0===t?!1:d(t,e.DataValue)},Ze=function(e){var t=Zc.getData(e.DataKey,void 0);if(void 0===t||null===t)return!1;var n=Np(e.DataValue,["&",'"',"'"]);return f(t,n)},et=function(e){return!Ze(e)},tt=function(e){var t=Zc.getData(e.DataKey,void 0);return void 0!==t},nt=function(e){return!tt(e)},rt=function(e){var t=n.getWindowData(xu.Var,e.WindowVarName),r=Np(e.WindowVarInput,["&",'"',"'"]);return void 0===t||null===t?!1:t.toString().toLowerCase()==r.toLowerCase()},it=function(e){return!rt(e)},ot=function(e){var t=n.getWindowData(xu.Var,e.WindowVarName);return void 0===t?!1:c(t,e.WindowVarInput)},at=function(e){var t=n.getWindowData(xu.Var,e.WindowVarName);return void 0===t?!1:d(t,e.WindowVarInput)},st=function(e){var t=n.getWindowData(xu.Var,e.WindowVarName),r=Np(e.WindowVarInput,["&",'"',"'"]);return void 0===t||null===t?!1:f(t.toString(),r)},ut=function(e){return!st(e)},lt=function(e){var t=n.getWindowData(xu.Var,e.WindowVarName);return void 0===t||null===t?!1:!0},ct=function(e){return!lt(e)},dt=function(e){var t=o.getCurrentLanguage();""===t&&(t="default");var n=Np(e.LanguageName,["&",'"',"'"]);return n.toLowerCase()==t.toLowerCase()},ft=function(e){return!dt(e)},pt=function(e){var t=o.getCurrentLanguage();""===t&&(t="default");var n=Np(e.LanguageName,["&",'"',"'"]);return f(t,n)},gt=function(e){return!pt(e)},ht=function(t){var n=parseInt(t.StepId),r=parseInt(t.TutorialId),i=zf(r),o=Yf(n,r);if(i>-1&&o>-1){var a=Sc[i].Steps[o];return e.findElement(a,!1)!==!1}return!1},mt=function(e){return!ht(e)},vt=function(e){var t=parseInt(e.StepId),n=parseInt(e.TutorialId),r=zf(n),i=Yf(t,n);if(i>-1&&r>-1){var o=Zi(r,i,void 0,void 0,void 0,yu.Sandbox);if(o>=0)return!0}return!1},yt=function(e){return!vt(e)},wt=function(t){var n=parseInt(t.StepId),r=parseInt(t.TutorialId),i=zf(r),o=Yf(n,r);if(i>-1&&o>-1){var a=Sc[i].Steps[o];return e.findElement(a,!0)!==!1}return!1},bt=function(e){return!wt(e)},St=function(e){var t=parseInt(e.GoalId);return Pd&&Pd.isGoalReached(t)},Tt=function(e){return!St(e)},It=function(e){return Et(e)},Ct=function(e){return!Et(e)},Et=function(e){var t=parseInt(e.TaskId),n=parseInt(e.GoalId);return od.isTaskGoalReached(t,n)},kt=function(e){var t=wmjQuery("#tsidLabel"),n=Np(e.SfTabInput.toString(),["&",'"',"'",">","<"]);return 0==t.length?!1:g(t.text().toLowerCase())==g(n.toLowerCase())},_t=function(e){return!kt(e)},xt=function(e){var t=wmjQuery("#tsidLabel"),n=Np(e.SfTabInput,["&",'"',"'",">","<"]);return 0==t.length?!1:g(t.text().toLowerCase()).indexOf(g(n.toLowerCase()))>=0},At=function(e){return!xt(e)},Pt={Accounts:"salesforce.com/001/",Contacts:"salesforce.com/003/",Opportunities:"salesforce.com/006/",Documents:"salesforce.com/015/",Cases:"salesforce.com/500/",Solutions:"salesforce.com/501/",Contracts:"salesforce.com/800/",Reports:"salesforce.com/00O/",Leads:"salesforce.com/00Q/",Dashboards:"salesforce.com/01Z/",CustomTabs1:"salesforce.com/a00/",Products:"salesforce.com/a01/"},Dt={MainPage:"o",New:"e"},Nt=function(e){var t={};return t.UrlInput=""+Pt[e.SfType]+Dt[e.SfModoule],ne(t)},Lt=function(e){return!Nt(e)},Ot=function(e){return e.conditionBlockId>0?dd.activateById(e.conditionBlockId,void 0):!1},Mt=function(e,t){var r=n.getWindowData(xu.Var,e);return void 0===r||null===r?!1:t(r)},Rt="walkMeWorkday.segmentation.flow.forms";this.WORKDAY_FORMS_VAR_NAME=Rt;var jt=function(e){return Mt(Rt,function(t){return t[e.FormInput]})},Ft=function(e){return!jt(e)},Bt=function(e){return Mt(Rt,function(t){var n=Np(e.FormInput,["&",'"',"'"]);for(var r in t)if(r.toLowerCase().indexOf(n.toLowerCase())>=0)return!0;return!1})},Ut=function(e){return!Bt(e)},Gt=function(e){return Mt(Rt,function(t){var n=Np(e.FormInput,["&",'"',"'"]);for(var r in t)if(f(r,n))return!0;return!1})},Vt=function(e){return!Gt(e)},Wt=function(e){return Mt(Rt,function(t){var n=0;for(var r in t)n++;return n.toString()===e.FormInput})},Qt=function(e){return n.getWindowData(xu.Var,Rt)},Ht=function(e){return!Qt(e)},$t="walkMeWorkday.segmentation.flow.page";this.WORKDAY_PAGE_VAR_NAME=$t;var zt=function(e){return Mt($t,function(t){var n=Np(e.PageInput,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()})},Yt=function(e){return!zt(e)},qt=function(e){return Mt($t,function(t){var n=Np(e.PageInput,["&",'"',"'"]);return t.toLowerCase().indexOf(n.toLowerCase())>=0})},Kt=function(e){return!qt(e)},Xt=function(e){return Mt($t,function(t){var n=Np(e.PageInput,["&",'"',"'"]);return f(t,n)})},Jt=function(e){return!Xt(e)},Zt=function(e){return Mt($t,function(e){return""===e?!1:!0})},en=function(e){return!Zt(e)},tn="walkMeWorkday.segmentation.flow.subPage";this.WORKDAY_SUB_PAGE_VAR_NAME=tn;var nn=function(e){return Mt(tn,function(t){var n=Np(e.SubPageInput,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()})},rn=function(e){return!nn(e)},on=function(e){return Mt(tn,function(t){var n=Np(e.SubPageInput,["&",'"',"'"]);return t.toLowerCase().indexOf(n.toLowerCase())>=0})},an=function(e){return!on(e)},sn=function(e){return Mt(tn,function(t){var n=Np(e.SubPageInput,["&",'"',"'"]);return f(t,n)})},un=function(e){return!sn(e)},ln=function(e){return Mt(tn,function(e){return""===e?!1:!0})},cn=function(e){return!ln(e)},dn={jQueryTrue:M,jQueryFalse:R,jQueryLengthBigger:j,jQueryClicked:L,jQueryHovered:N,jQueryHoverSwitch:O,jQueryLengthSmaller:F,jQueryLengthEquals:B,jQueryLengthNotEquals:U,jQueryTextEquals:Te,jQueryTextNotEquals:Ie,jQueryTextBigger:Ce,jQueryTextSmaller:Ee,jQueryTextLike:ke,jQueryTextNotLike:_e,StepPlayed:G,StepNotPlayed:V,StepCanPlay:vt,StepCannotPlay:yt,StepIsVisible:wt,StepIsNotVisible:bt,StepExists:ht,StepNotExists:mt,StepCompleted:W,StepNotCompleted:Q,UrlEquals:ee,UrlNotEquals:te,UrlContains:ne,UrlNotContains:re,UrlLike:be,UrlNotLike:Se,DateEquals:H,DateNotEquals:$,DateFrom:z,DateUntil:Y,DateIsDay:q,DateIsMonth:K,DateIsYear:X,TimeFrom:J,TimeUntil:Z,ReferrerUrlEquals:xe,ReferrerUrlNotEquals:Ae,ReferrerUrlContains:Pe,ReferrerUrlNotContains:De,ReferrerUrlLike:Ne,ReferrerUrlNotLike:Le,ElementExists:ie,ElementNotExist:le,ElementVisible:ce,ElementNotVisible:de,ElementClicked:se,ElementHovered:ae,ElementHoverSwitch:ue,ElementTextEquals:ge,ElementTextNotEquals:he,ElementTextBigger:me,ElementTextSmaller:ve,ElementTextLike:ye,ElementTextNotLike:we,ElementSelected:fe,ElementNotSelected:pe,BrowserEquals:Oe,BrowserNotEquals:Me,ContainerIsIframe:Re,ContainerNotIframe:je,WindowIsNew:Be,WindowIsNotNew:Ue,CookieExists:ze,CookieNotExists:Ye,CookieEquals:Ge,CookieNotEquals:Ve,CookieBigger:We,CookieSmaller:Qe,CookieLike:He,CookieNotLike:$e,WalkMeDataExists:tt,WalkMeDataNotExists:nt,WalkMeDataEquals:qe,WalkMeDataNotEquals:Ke,WalkMeDataBigger:Xe,WalkMeDataSmaller:Je,WalkMeDataLike:Ze,WalkMeDataNotLike:et,LanguageEquals:dt,LanguageNotEquals:ft,LanguageLike:pt,LanguageNotLike:gt,WindowVarEquals:rt,WindowVarNotEquals:it,WindowVarBigger:ot,WindowVarSmaller:at,WindowVarLike:st,WindowVarNotLike:ut,WindowVarExists:lt,WindowVarNotExists:ct,TaskGoalReached:It,TaskGoalNotReached:Ct,ExperimentGoalReached:St,ExperimentGoalNotReached:Tt,SalesforceTabEquals:kt,SalesforceTabNotEquals:_t,SalesforceTabContains:xt,SalesforceTabNotContains:At,SalesforceUrlEquals:Nt,SalesforceUrlNotEquals:Lt,ConditionBlockTrue:Ot,FormEquals:jt,FormNotEquals:Ft,FormContains:Bt,FormNotContains:Ut,FormLike:Gt,FormNotLike:Vt,FormCount:Wt,FormExists:Qt,FormNotExists:Ht,PageEquals:zt,PageNotEquals:Yt,PageContains:qt,PageNotContains:Kt,PageLike:Xt,PageNotLike:Jt,PageExists:Zt,PageNotExists:en,SubPageEquals:nn,SubPageNotEquals:rn,SubPageContains:on,SubPageNotContains:an,SubPageLike:sn,SubPageNotLike:un,SubPageExists:ln,SubPageNotExists:cn};wmjQuery.extend(dn,s.getFuncList());var fn=[];fn.StepPlayed=!1,fn.StepNotPlayed=!1,fn.StepCanPlay=!1,fn.StepCannotPlay=!1,fn.StepCompleted=!1,fn.StepNotCompleted=!1,fn.LanguageEquals=!1,fn.LanguageNotEquals=!1,fn.LanguageLike=!1,fn.LanguageNotLike=!1,fn.TaskGoalReached=!1,fn.TaskGoalNotReached=!1,fn.jQueryClicked=!1,fn.jQueryHovered=!1,fn.ElementClicked=!1,fn.ElementHovered=!1,fn.ExperimentGoalReached=!1,fn.ExperimentGoalNotReached=!1,wmjQuery.extend(fn,s.getFuncAssert());var pn=["ElementClicked","ElementHovered","ElementHoverSwitch","jQueryClicked","jQueryHovered","jQueryHoverSwitch"];pn.push.apply(pn,s.getAsyncFuncs()),this.isFuncAsync=function(e){return mp(e,pn)>=0},this.getFunctionsByLibNameType=function(e){return dn[e]},this.canAssertFunction=function(e){return void 0==fn[e]||0!=fn[e]},this.evaluationPreviewForEditor=function(e){var t=l(e);return A.evaluationPreview(t)},this.evaluationPreview=function(e){var t=this.getFunctionsByLibNameType(e.funcName),n=[];return n.push(e.funcArgs),this.canAssertFunction(e.funcName)?t.apply(this,n)?P.TRUE:P.FALSE:P.CANNOT_ASSERT},this.evaluationTreePreviewForEditor=function(e){var t=l(e);return A.evaluationTreePreview(t)},this.evaluationTreePreview=function(e){function t(e){if("Func"==e.nodeType)return A.evaluationPreview(e);var n=t(e.leftSon),r=t(e.rightSon);return"And"==e.nodeType?n==P.TRUE&&r==P.TRUE?P.TRUE:n==P.CANNOT_ASSERT||r==P.CANNOT_ASSERT?P.CANNOT_ASSERT:P.FALSE:"Or"==e.nodeType?n==P.TRUE||r==P.TRUE?P.TRUE:n==P.CANNOT_ASSERT||r==P.CANNOT_ASSERT?P.CANNOT_ASSERT:P.FALSE:void 0}return null==e?P.TRUE:t(e)}},Us.register("ConditionFunctions").asCtor(this.ConditionFunctions).asSingleton().dependencies("Lib, JQueryElementFinder, CommonUtils, HostData, TimerManager, LanguageManager, ElementFinder, ConditionFunctionsHandler"),Us.register("ConditionEvaluator").asCtor(nt).initialize(!1);var rl=function(){function e(e){var t=new RegExp("^\\[\\d+\\]$","i");if(t.test(e)){var n=parseInt(e.substring(1,e.length-1));return d.functions.length>=n&&void 0!=d.functions[n]?new c(d.functions[n]):(d.errorStack.push("Function id doesn't exist!"),!1)}return d.errorStack.push("function token isn't in the form [funcId]. recieved:"+e),!1}function t(e){return e?new l(e):(d.errorStack.push("Failed to create NOT node."),!1)}function n(e,t,n){if(t&&n){if("OR"==e.toUpperCase())return new u(t,n);if("AND"==e.toUpperCase())return new s(t,n)}return d.errorStack.push("Failed to create "+e.toUpperCase()+" node."),!1}function r(e){for(var t=Array(),n=0;n<e.length;n++)if("("==e.charAt(n))t.push("(");else if(")"==e.charAt(n)){if(0==t.length)return!1;t.pop()}return 0==t.length}function i(e){if(e=mtjQuery.trim(e),e=e.replace("  "," "),e=e.replace("( ","("),e=e.replace(/not\(/gi,"not ("),e=e.replace(/and\(/gi,"and ("),e=e.replace(/or\(/gi,"or ("),"("!=e.charAt(0)||")"!=e.charAt(e.length-1))return e;var t=e.substring(1,e.length-1);return r(t)?t:e}function o(r){var s=i(r),u=s.split(" ");switch(u.length){case 0:d.errorStack.push("Error - a try to build tree with empty expression");break;case 1:return e(u[0]);case 2:return"NOT"==u[0].toUpperCase()?t(o(u[1])):(d.errorStack.push("Ilegal expression"),!1);case 3:return"NOT"==u[0].toUpperCase()?t(o(u[1]+" "+u[2])):n(u[1],o(u[0]),o(u[2]));default:for(var l=Array(),c=0;c<u.length;c++){if(0==c&&u[c].length>=3&&"NOT"==u[c].substr(0,3).toUpperCase())return t(o(u.join(" ").substr(3)));for(var f=!1,p=0;p<u[c].length;p++)"("==u[c].charAt(p)?(f=!0,l.push("(")):")"==u[c].charAt(p)&&(f=!0,l.pop());if(!f&&0==l.length&&a(u[c]))return n(u[c],o(u.splice(0,c).join(" ")),o(u.splice(1,u.length-1).join(" ")))}return d.errorStack.push("Ilegal expression"),!1}}function a(e){return e.match(/not/i)||e.match(/or/i)||e.match(/and/i)?!0:!1}function s(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()&&this.rightSon.evaluate()}}function u(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()||this.rightSon.evaluate()}}function l(e){this.son=e,this.evaluate=function(){return!this.son.evaluate()}}function c(e){this.func=e,this.evaluate=function(){return this.func()}}this.LocalSVNRevision="$Rev$",this.functions=Array(),this.treeNode=null,this.errorStack=Array();var d=this;this.setFunction=function(e,t){if(void 0==e||void 0==t||0>t)throw"Wrong arguments.";return this.functions[t]=e,!0},this.evaluate=function(){if(null!=this.treeNode)return this.treeNode.evaluate();throw"Evaluation tree doesn't exist - No expression was set."},this.setExpression=function(e){if(void 0!=e&&e.length>0&&r(e)){if(this.treeNode=o(e),this.treeNode)return!0;var t=this.errorStack.join("\n");throw this.errorStack=this.errorStack.splice(),t}return this.errorStack.push("Ilegal expression!"),!1}};Us.register("ClientStorageManager").asFunction(function(e){return e.bySettingsFile()}).dependencies("StorageManagerFactory"),Us.register("FramesetsUtils").asCtor(dt).dependencies("Logger, HostData, TimerManager"),Us.register("TriggersManager").asCtor(ft).dependencies("TimerManager, FramesetsUtils, Lib, StepUtils, Logger, FeaturesManager, CommonUtils"),Us.register("SurveyQuestionFactory").asCtor(vt).dependencies("Logger").asSingleton(),Us.register("Survey").asCtor(yt).asProto().dependencies("Lib, SurveyQuestionFactory, DeployableTypes");var bt=new bt;Us.register("PlayManager").asCtor(St).dependencies("PlayManagerParams,TimerManager,FeaturesManager,PageScorer"),Us.register("StepUtils").asCtor(Tt).dependencies("Consts"),Us.register("PassOwnershipManager").asCtor(It).initialize(!1),Us.register("TabbedOwnershipManager").asCtor(Ct).initialize(!1),Us.register("FramedOwnershipManager").asCtor(Et).initialize(!1),Us.register("StickinessManager").asCtor(kt).asSingleton().dependencies("TimerManager"),Us.register("AbPermutationManager").asCtor(Pt).dependencies("ClientStorageManager,EndUsersManager,Lib,AbPermutationManagerServerCaller, AbTestingEventCollectorCaller, AbCurrentPermutationProvider"),Us.register("AbCurrentPermutationProvider").asCtor(Dt),Us.register("AbPermutationManagerServerCaller").asCtor(Nt).dependencies("RecorderServerManager, WmAjax, HostData"),Us.register("AbTestingEventCollectorCaller").asCtor(Lt).dependencies("Consts, EventCollectorEventSender, Logger"),Us.register("HostData").asFunction(Ot).dependencies("win"),Us.register("PopupNotificationsService").asSingleton().asCtor(Rt).dependencies("Lib, TimerManager, HostData, UiUtils, SiteConfigManager, CommonUtils, Consts"),Us.register("ClickAuditEventSender").asCtor(jt).dependencies("Lib,EventSender,Logger");var il=function(){function e(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n;
}var t;!function(e){function t(r,i){i=i||[],r=r||document;for(var o=e.$("iframe,frame",r).toArray(),a=0;a<o.length;a++){var s=n(e.$(o[a]))[0];i.push(s),s&&(i=t(s,i))}return i}function n(t){if(void 0!=t){if(t=t[0],void 0==t)return e.$();var n;try{n=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:[],n=e.$(n)}catch(r){return Me.handleCrossDomainError(r),e.$()}return n}}e.$,e.p,e.setJQuery=function(t){e.$=t,e.p=t},e.Ua=function(e){return e=e.tagName,e.toUpperCase&&(e=e.toUpperCase()),e},e.aa=function(e,t){for(var n=e[0].parentNode,r=t&&t[0]&&t[0].parentNode,i=[];n&&1==n.nodeType&&n!=r;n=n.parentNode)i.push(n);return i},e.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},e.reduce=function(e,t,n){for(var r=0;r<e.length;r++)n=t(n,e[r]);return n},e.Vb=function(e){var t={};e=e.prop("attributes");for(var n=0;n<e.length;n++){var r=e[n];t[r.name]=r.value}return t},e.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},e.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},e.pa=function(t,n,r){t=e.filter(t.split(n),function(t){return e.$.trim(t)}),t=e.map(t,function(e){return e.split(r)}),n={};for(var i=0;i<t.length;i++){var o=t[i],a=e.$.trim(o[0]),s="";o[1]&&(s=e.$.trim(o[1])),n[a]=s}return n};var r=function(){function e(){this.start=this.now()}return e.prototype.now=function(){return(new Date).getTime()},e.prototype.Ib=function(){return this.now()-this.start},e}();e.Pb=r,e.Hb=function(){return new r},e.Wb=function(){for(var e=0;e<arguments.length;e++);for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace(new RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},e.Yb=function(e){return void 0!=e&&0<e.length},e.getAllElements=function(n,r){n=n||document,r=r||"*";var i=t(n,[n]);return e.$(r,i)},e.Xb=t,e.r=n,e.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n;return-1},e.min=function(e,t){var n=null;if(0<e.length)for(var r=t(e[0]),n=e[0],i=1;i<e.length;i++){var o=t(e[i]);r>o&&(r=o,n=e[i])}return n},e.fa=function(){return(new Date).getTime()%1e9}}(t||(t={}));var n,r=function(){function e(e,t){this.vb=t,this.hasData=!1,this.context=e}return e.prototype.get=function(){return this.hasData||(this.data=this.vb.apply(this.context),this.hasData=!0),this.data},e.prototype.clear=function(){this.hasData=!1},e}(),i=function(){function e(){}return e.prototype.u=function(e,t){return g.H(e,t,g.l)},e.prototype.K=function(e){return new a.ScoredElement(e,this.c)},e.prototype.n=function(e){this.c=e},e.prototype.J=function(e,t){return t(e)},e.prototype.Cb=function(e){e.B=this.c&&e&&this.c.ignoreWalkmeElementsSelector===e.ignoreWalkmeElementsSelector?this.c.B:e&&e.ignoreWalkmeElementsSelector?t.getAllElements(document,e.ignoreWalkmeElementsSelector).toArray():[]},e}(),o=function(n){function r(){n.apply(this,arguments),this.O={},this.A=[],this.ca={},this.h={}}return e(r,n),r.prototype.n=function(e){this.Ma(e),n.prototype.n.call(this,e)},r.prototype.ob=function(e,t){return(e&&e[0]||null)===(t&&t[0]||null)},r.prototype.Ma=function(e){if(this.h={},0<this.A.length){var t=!1;this.c&&(t=!this.ob(this.c.m,e.m));for(var n=0;n<this.A.length;n++){var r=this.O[this.A[n]];r.totalScore=0,r.details=[],r.Z=!1,r.n(e,t)}}},r.prototype.t=function(e){return e&&e[0]&&e[0][r.S]||null},r.prototype.w=function(e,t){e&&e[0]&&(e[0][r.S]=t)},r.prototype.v=function(){return++r.N},r.prototype.K=function(e){var t=null,r=this.t(e);return void 0!==r&&(t=this.O[r]),t||(t=n.prototype.K.call(this,e),r=this.v(),this.w(e,r),this.O[r]=t,this.A.push(r)),t},r.prototype.u=function(e,t){var r,i=g.Lb(e);return this.h.hasOwnProperty(i)||(r=n.prototype.u.call(this,e,t),this.h[i]=r),this.h[i]},r.prototype.cb=function(e){var t=this.c.m;if(t&&0<t.length){var n=this.t(t);n||(n=this.v(),this.w(t,n)),n&&(e+="__"+n)}return e},r.prototype.J=function(e,t){var r=this.cb(e),i=this.ca[r]||null;return i||(i=n.prototype.J.call(this,e,t),this.ca[r]=i),i},r.N=t.fa(),r.S="__WM_SUSPECT_KEY__",r}(i);!function(e){function n(){for(var e=0;e<arguments.length;e++);return a.$.apply(a.$,arguments)}function r(e){if(1==e.count())return e;var t=g.L(e,1,i,!0);return-1==t?e:e.slice(t+1)}function i(e){return-1!=t.inArray(e,s)}function o(r,a,s,u,l,c){var d=g.L(r,0,i,!1);if(0>d)return s;var f=r.slice(0,d+1);return r=r.slice(d+1),d=n(e.Kb,l||s),0==d.length?null:(d=1==d.length?d[0]:t.min(d,function(e){return e=g.Ka(n(e),a,n(s),u),g.H(e,f,g.l).o()}),(c||s&&0<s.length&&l&&0<l.length)&&n(d).data("iframe",c||s),o(r,a,n(d),u,t.r(n(d))))}var s=["IFRAME","FRAME"];e.Kb=s.join(":mt_visible,")+":mt_visible",e.ea=s.join(","),e.getXpathUpToIframe=r,e.ub=function(a){var s,u=a.a,l=g.Ia(u.customContext,u.h,u.B),c=g.Eb(u.xpathArrayOriginal,l),d=u.xpathArrayOriginal.slice(c);s=u.h;var f=u.customContext,p=u.B,h=u.ignoreWalkmeElementsSelector;if(1==d.count())s=f;else{var m=g.L(d,1,i,!0);if(-1==m)s=f;else{var v=t.r(f),y=(v=v&&0<v.length?v:null)?f:f?f.data("iframe"):null,m=d.slice(0,m+1);(h=g.ba(m,v||f,y,h))&&h.is(":mt_visible")||(h=null),h||(h=o(d,s,f,p,v,y)),s=h}}p=(f=(s=s||u.customContext)&&s.is(e.ea))?t.r(s):s&&0<s.length?s:void 0,s={context:s,nb:f,contents:p},u.m=s.contents,a.setSearchOptions(-257&a.f),l&&l.count()&&u.m==u.customContext&&(0>=c&&a.setSearchOptions(256|a.f),u.xpathArrayToIframe=g.removeHtmlAndBodyFromXpathArray(r(d)));var w;return s&&(w=s.nb?s.context:n(s.context).data("iframe")),w}}(n||(n={}));var a;!function(e){function a(){}e.$,e.p,e.setJQuery=function(n){e.$=n,e.p=n,t.setJQuery(n),l.setJQuery(n)},e.setLogFunc=function(e){a=e};var p=function(){function e(e,n){var i=this;this.totalScore=0,this.width=new r(this,function(){return i.element.width()}),this.height=new r(this,function(){return i.element.height()}),this.parents=new r(this,function(){return t.aa(i.element,i.c.m)}),this.Fa=new r(this,function(){return t.aa(i.element)}),this.text=new r(this,function(){return f.extractFirstOccuringText(i.element)}),this.C=function(e){return this.D.hasOwnProperty(e)||(this.D[e]=this.element.attr(e)),this.D[e]},this.Q=new r(this,function(){return g.La(i.element,i.parents.get(),i.c.h,i.c.B)}),this.element=e,this.details=[],this.D={},this.n(n)}return e.prototype.n=function(e,t){this.c&&t&&(this.parents.clear(),this.Q.clear()),this.c=e},e}();e.ScoredElement=p;var h=function(){return function(){this.elements=[],this.losers=void 0}}();e.RecognitionResult=h,p=function(){function e(e){this.attributes={},this.complexAttributes={},this.W("style",";",":"),this.W("class"," ",null),e&&(this.h=new g.Ca)}return e.prototype.W=function(e,n,i){var o=this;this.complexAttributes[e]=new r(this,function(){return t.pa(o.attributes[e],n,i)})},e}(),e.ElementDescription=p,function(e){e[e.Efficient=0]="Efficient",e[e.Verbouse=1]="Verbouse",e[e.Fast=2]="Fast"}(e.ra||(e.ra={})),function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low"}(e.AlgorithmSensitivity||(e.AlgorithmSensitivity={})),function(e){e[e.IGNORE_ALL=4294967295]="IGNORE_ALL",e[e.IGNORE_NOTHING=0]="IGNORE_NOTHING",e[e.IGNORE_ID=1]="IGNORE_ID",e[e.IGNORE_POSITION=2]="IGNORE_POSITION",e[e.IGNORE_NAME=4]="IGNORE_NAME",e[e.IGNORE_TEXT=8]="IGNORE_TEXT",e[e.IDENTIFY_TEXT=32]="IDENTIFY_TEXT",e[e.IDENTIFY_ID_AND_NAME=64]="IDENTIFY_ID_AND_NAME",e[e.IDENTIFY_WALKME_ID=128]="IDENTIFY_WALKME_ID",e[e.IGNORE_XPATH=256]="IGNORE_XPATH",e[e.IGNORE_SHAPE_PROPORTION=512]="IGNORE_SHAPE_PROPORTION",e[e.IGNORE_CLASS=1024]="IGNORE_CLASS",e[e.IGNORE_STYLE=2048]="IGNORE_STYLE",e[e.IGNORE_HREF=4096]="IGNORE_HREF",e[e.USE_AUTO_SELECTOR=8192]="USE_AUTO_SELECTOR"}(e.SearchOptions||(e.SearchOptions={}));var m=function(){function e(e){this.list=[],this.f=e}return e.prototype.Ga=function(e){return this.list.push(e),this},e.prototype.i=function(e,t,n){var r=!1;return void 0!==n&&(r=0<(this.f&n)),r||this.list.push(new c.Ba(e,t)),this},e.prototype.eb=function(){return this.list.sort(function(e,t){return t.weight-e.weight}),this.list},e}(),p=function(){function r(e,t){this.f=0,this.X=1,this.mode=e,this.g=t?new o:new i}return r.prototype.Bb=function(e){this.a=e},r.prototype.setSearchOptions=function(e){this.f=e},r.prototype.setAlgorithmSensitivity=function(e){this.X=e},r.prototype.recognize=function(e){this.Bb(e),this.g.Cb(e);var t=n.ub(this);this.g.n(e),e=this.Sa(),e=this.Ab(e),e=this.wb(e);var r=this.Ra(e),i=new h;return i.elements=r,i.losers=this.Qa(i,e),i.context=t,i},r.prototype.Sa=function(){var t,n=this;return t=this.e(8192)&&this.a.autoQuery?this.a.autoQuery:this.a.customSelector||this.a.elementType.replace(":","\\:"),this.a.visibilityFilter&&(t+=this.a.visibilityFilter),this.a.ignoreWalkmeElementsSelector&&(t+=":not("+this.a.ignoreWalkmeElementsSelector+")"),a("Finding suspects using : "+t),this.g.J(t,function(t){return e.$(t,n.a.m)})},r.prototype.Oa=function(t){for(var n=new u(t.length),r=0;r<t.length;r++){var i=e.$(t[r]),i=this.g.K(i);n.push(i)}return n},r.prototype.Ab=function(e){var t=this.Oa(e),n=this.bb(e.length);e=new u(e.length);for(var r=0;r<t.count;r++){var i=t.getItem(r),o=this.zb(i,n),a=1&o;2&o||!a||e.push(i)}return e},r.prototype.fb=function(){var e,t={32:function(){return[new d.T(1,2)]},64:function(){return[new d.q("id",1,0),new d.q("name",1,0)]},128:function(){return[new d.q("data-walkmeid",1,0)]}};for(e in t)if(this.e(e))return t[e]();return null},r.prototype.Xa=function(e){var t=[],n=new d.q("src",1,0);return t.push(n),n=new d.T(1,0),!this.e(8)&&t.push(n),void 0!=this.a.attributes.id&&(n=new d.ua(!this.e(1)&&0<this.a.attributes.id.length,!this.e(161)),t.push(n)),n=new d.q("name",1,0),!this.e(4)&&t.push(n),n=new d.Ea(1,0,this.g),2e3>e&&!this.e(256)&&t.push(n),n=new d.ta(this.a,1,0),e>=2e3&&!this.e(256)&&t.push(n),t},r.prototype.bb=function(e){var t=this.fb();return t||(t=this.Xa(e)),t},r.prototype.zb=function(e,t){for(var n=0,r=0;r<t.length;r++){var i=t[r].screen(e,this.a),n=n|i;if(2==i)break}return n},r.prototype.wb=function(e){var n=this.ab(),r=t.reduce(n,function(e,t){return e+t.weight},0),i=e,o=new u(e.count);e=new u(e.count);for(var a=0,s=this.ga(),l=0;l<n.length&&!(2==this.mode&&1==i.count&&a>s);l++){for(var c=n[l],d=0;d<i.count;d++){var f=i.getItem(d);if(r+f.totalScore<a&&0==this.mode?(f.Z=!0,o.push(f)):e.push(f),!f.Z||0!=this.mode){var p=t.Hb(),g=c.d(f,this.a),p=p.Ib();f.totalScore+=g,f.details.push({scorerName:c.name,scorerWeight:c.weight,relativeScore:g/c.weight,absoluteScore:g,timeTaken:p}),f.totalScore>a&&(a=f.totalScore)}}r-=c.weight,r=Math.max(r,0),c=i,i=e,e=c,e.clear()}return i.Za()},r.prototype.e=function(e){return!!(this.f&e)},r.prototype.ab=function(){var e=new m(this.f);return e.Ga(new s.xa(this.a,this.f)).i(new c.Aa,3,8).i(new l.wa,1,2).i(new c.Da(this.g),1,256).i(new c.za,.7,512).i(new c.R("class"," ",null),.7,1024).i(new c.R("style",";",":"),.5,2048).i(new c.sa("href","#"),3,4096),e.eb()},r.prototype.Ra=function(e){for(var t=0,n=0;n<e.length;n++)var r=e[n].totalScore,t=t>=r?t:r;if(r=[],t>this.ga())for(n=0;n<e.length;n++)e[n].totalScore==t&&r.push(e[n]);return r},r.prototype.Qa=function(e,t){if(1==this.mode){var n=[];if(0<e.elements.length)for(var r=e.elements[0].totalScore,i=0;i<t.length;i++)t[i].totalScore<r&&n.push(t[i]);else n=t;return n}},r.prototype.ga=function(){var e={2:0,1:1.45,0:3},t=e[this.X];return void 0==t&&(t=e[1]),t},r}();e.ElementRecognizerSession=p}(a||(a={}));var s,u=function(){function e(e){this.data=Array(e),this.size=e,this.count=0}return e.prototype.getItem=function(e){if(0>e||e>=this.count)throw"Out of range exception";return this.data[e]},e.prototype.clear=function(){this.count=0},e.prototype.push=function(e){if(this.count==this.size)throw"FastArray exceeded it's limits";this.data[this.count]=e,this.count++},e.prototype.Za=function(){return this.data.splice(0,this.count)},e}();!function(e){var t={value:10,src:3,title:3,colspan:.3,cellpadding:.3,cellspacing:.3,border:.3,dir:.3,width:.3,placeholder:3,"data-walkmeid":1e3,id:10,name:8,alt:1},n={id:1,name:4,title:8},r=function(){function e(e,t){this.P=[],this.name="Multiple attributes",this.options=t,this.description=e,this.weight=this.Ja()}return e.prototype.Ja=function(){var e,t=0;for(e in this.description.attributes)this.description.attributes.hasOwnProperty(e)&&this.Db(e)&&this.M(this.description.attributes[e])&&(t+=this.I(e),this.P.push(e));return t},e.prototype.Db=function(e){var t=0!==this.I(e);return!(n.hasOwnProperty(e)&&n[e]&this.options)&&t},e.prototype.d=function(e,t){for(var n=0,r=0;r<this.P.length;r++){var i=this.P[r],o=t.attributes[i],a=e.C(i);this.M(a)&&this.M(o)&&a==o&&(n+=this.I(i))}return n},e.prototype.M=function(e){return void 0!=e&&null!=e&&""!=e},e.prototype.I=function(e){return t.hasOwnProperty(e)?t[e]:0},e}();e.xa=r}(s||(s={}));var l;!function(e){e.$,e.p,e.setJQuery=function(t){e.$=t,e.p=t};var t=function(){function t(){this.name="PositionScorer"}return t.prototype.d=function(e,t){return this.xb(e,t)},t.prototype.xb=function(e,t){var n=t.centeredElementWidth,r=0;if(n){var r=t.relativeLeft,i=this.$a(e),r=Math.abs(r-i),n=n/5;if(r>(30>n?30:n))return 0;n=1-r/20,r=t.absY,i=e.element.offset().top,r=1-Math.abs(r-i)/20,i=.3,n>.9&&(i=.9),r=n*(1-i)+r*i,r=0>r?0:r}return r},t.prototype.$a=function(e){var t=this.Ta(e),t=t?t.offset().left:0;return e.element.offset().left-t},t.prototype.Ta=function(t){t=t.Fa.get();for(var n=null,r=t.length-1;r>=0;r--)try{if(this.jb(t[r])){var i=e.$(t[r]),o=e.$(window).width(),a=i.width(),s=i.offset().left,u=o-a;if(u>0&&u/2==s){n=i;break}if(0>u&&u==s){n=i;break}if(this.lb(i)){n=e.$(i);break}}}catch(l){}return n},t.prototype.jb=function(t){var n=e.$(t),r=n.data("mt_isElementFixedWidth");return 1==r?!0:0==r?!1:(t=this.ib(t),n.data("mt_isElementFixedWidth",t),t)},t.prototype.lb=function(t){var n=e.$(t),r=n.data("mt_isElementMarginAuto");return 1==r?!0:0==r?!1:(t=this.kb(t),n.data("mt_isElementMarginAuto",t),t)},t.prototype.ia=function(t,n){for(var r=!1,i=0;i<n.length&&(r=n[i],!(r=e.$(t).is(e.$(r))));i++);return r},t.prototype.ib=function(e){return this.ja(e.style)?!0:this.ia(e,this.Wa())},t.prototype.Fb=function(e){return 0==e.indexOf("0")},t.prototype.Pa=function(e){return 4<=e.length&&e.lastIndexOf("auto")+4==e.length},t.prototype.ka=function(t){if(t){var n=e.$.trim(t.margin),r=e.$.trim(t.marginLeft);if(t=e.$.trim(t.marginRight),(n=this.Fb(n)&&this.Pa(n))||"auto"==r&&"auto"==t)return!0}return!1},t.prototype.kb=function(e){return this.ka(e.style)?!0:this.ia(e,this.Ya())},t.prototype.Ya=function(){return void 0==this.F&&(this.F=[],this.da(this.oa)),this.F},t.prototype.oa=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.oa(n.styleSheet):this.ka(n.style)&&this.F.push(n.selectorText)}}catch(r){}},t.prototype.da=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++)e.call(this,t[n])},t.prototype.na=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.na(n.styleSheet):this.ja(n.style)&&this.G.push(n.selectorText)}}catch(r){}},t.prototype.Wa=function(){return void 0==this.G&&(this.G=[],this.da(this.na)),this.G},t.prototype.ja=function(e){if(e=e.width){for(var t="",n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n]);if(t&&700<parseInt(t)&&(-1!=e.indexOf("p")||-1!=e.indexOf("e")||-1!=e.indexOf("m")||-1!=e.indexOf("i")))return!0}},t}();e.wa=t}(l||(l={}));var c;!function(n){var r=function(){function e(e,t){this.yb=e,this.weight=t,this.name=e.name}return e.prototype.d=function(e,t){var n=this.yb.d(e,t);return this.weight*n},e}();n.Ba=r,r=function(){function e(e){this.attributeName=e,this.name="Attribute Scorer : "+e}return e.prototype.d=function(e,t){var n=e.element.attr(this.attributeName),r=t.attributes[this.attributeName];return n&&r&&n.toLowerCase()===r.toLowerCase()?1:0},e}(),n.Mb=r,r=function(t){function n(e,n){t.call(this,e),this.Jb=n}return e(n,t),n.prototype.d=function(e,n){return n.attributes[this.attributeName]==this.Jb?0:t.prototype.d.call(this,e,n)},n}(r),n.sa=r,r=function(){function e(e){this.name="XpathScorer",this.g=e}return e.prototype.d=function(e,t){var n=e.Q.get(),n=this.g.u(n,t.xpathArrayToIframe);return n.b>g.l?0:(n=1-.1*(n.b+n.k/10),0>n?0:n)},e}(),n.Da=r,r=function(){function e(){this.name="ShapeProportionScorer"}return e.prototype.d=function(e,t){if(!this.mb(e.element))return 0;var n=e.width.get(),r=e.height.get();return 0!=n*r?(n=this.ha(n,t.width)/2+this.ha(r,t.height)/2,n>=.6?n:0):0},e.prototype.ha=function(e,t){var n=e/t;return n>1&&(n=1/n),Math.pow(n,4)},e.prototype.mb=function(n){return n=n.prop("tagName"),-1!==t.indexOf(e.Gb,n)},e.Gb="DIV TABLE TR TD TBODY TH".split(" "),e}(),n.za=r,r=function(){function e(e,t,n){this.name="ComplexAttributeScorer",this.name=this.name+" : "+e,this.attributeName=e,this.tb=t,this.gb=n}return e.prototype.d=function(e,n){if(!n.attributes[this.attributeName]||!e.element.attr(this.attributeName))return 0;var r=n.complexAttributes[this.attributeName].get(),i=t.pa(e.element.attr(this.attributeName),this.tb,this.gb);return 1==this.Na(r,i)?1:0},e.prototype.Na=function(e,t){var n,r=0,i=0;for(n in e)e.hasOwnProperty(n)&&(i++,e[n]==t[n]&&r++);return n=0,i>0&&(n=r/i),n},e}(),n.R=r,r=function(){function e(){this.name="TextScorer"}return e.prototype.d=function(e,t){return t.text&&e.text.get()==t.text?1:0},e}(),n.Aa=r}(c||(c={}));var d;!function(t){!function(e){e[e.Indifferent=0]="Indifferent",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"}(t.ya||(t.ya={}));var n=function(){function e(e,t){this.la=e,this.sb=t,this.isEqual=e===t}return e.prototype.j=function(){throw"childScreen must be overriden by subclass"},e.prototype.screen=function(e,t){return this.isEqual?this.la:this.j(e,t)?this.la:this.sb},e}();t.Ob=n;var i=function(){function e(){}return e.prototype.ma=function(){throw"rejectFn must be overriden by subclass"},e.prototype.V=function(){throw"acceptFn must be overriden by subclass"},e.prototype.screen=function(e,t){return this.ma(e,t)?2:this.V(e,t)?1:0},e}();t.Nb=i,i=function(t){function n(e,n){t.call(this),this.hb=e,this.pb=n,this.Y=new o("id",0,0)}return e(n,t),n.prototype.ma=function(e,t){if(this.pb){var n=e.C("id");return!n||30<=n.length?!1:!this.Y.j(e,t)}},n.prototype.V=function(e,t){return this.hb?this.Y.j(e,t):void 0},n}(i),t.ua=i;var o=function(t){function n(e,n,r){t.call(this,n,r),this.attrName=e}return e(n,t),n.prototype.j=function(e,t){var n=e.C(this.attrName),r=t.attributes[this.attrName];return!(!r||!n)&&n===r},n}(n);t.q=o,i=function(t){function n(e,n,r){t.call(this,e,n),this.Ha=r}return e(n,t),n.prototype.j=function(e,t){var n=e.Q.get(),r=g.l;return this.Ha.u(n,t.xpathArrayToIframe).b<=r},n}(n),t.Ea=i,i=function(t){function n(e,n,i){t.call(this,n,i);var o=e.xpathArrayOriginal;this.qb=new r(this,function(){return g.ba(o,void 0,void 0,e.ignoreWalkmeElementsSelector)})}return e(n,t),n.prototype.j=function(e){var t=this.qb.get();return t&&t[0]==e.element[0]},n}(n),t.ta=i,n=function(t){function n(e,n){t.call(this,e,n)}return e(n,t),n.prototype.j=function(e,t){return t.text&&0!==t.text.length?e.text.get()===t.text:!1},n}(n),t.T=n}(d||(d={}));var f,p=function(){function e(){this.buffer=[]}return e.prototype.append=function(e){this.buffer.push(e)},e.prototype.toString=function(){return this.buffer.join("")},e}();!function(e){function n(i){var o="";if(3===i.nodeType||4===i.nodeType){o=i.nodeValue,i=[160,10,13,9];for(var s=new p,u=0;u<o.length;u++)0>t.indexOf(i,o.charCodeAt(u))&&s.append(o.charAt(u).toLowerCase());if(o=s.toString().replace(/ /g,""),o=a.$.trim(o),o=o.substring(0,e.rb),null!=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(o)){for(i=-1,s=o.length,u=new p;++i<s;){var l=o.charAt(i);/[\uD800-\uDBFF]/.test(l)||/[\uDC00-\uDFFF]/.test(l)?u.append(r(l)):u.append(l)}o=u}}else if(1===i.nodeType&&!i.tagName.match(/^(script|style)$/i))for(i=i.childNodes,s=0,u=i.length;u>s&&!(o=n(i[s]));s++);return o}function r(e){e=e.charCodeAt(0).toString(16).toUpperCase();var t=2<e.length;return"\\"+(t?"u":"x")+("0000"+e).slice(t?-4:-2)}e.rb=70;var i;!function(e){e[e.ElementNode=1]="ElementNode",e[e.Text=3]="Text",e[e.CDATASection=4]="CDATASection"}(i||(i={})),e.extractFirstOccuringText=function(e){return n(e[0])},e.Ub=n}(f||(f={}));var g;return function(e){function i(e,t){function n(n){return o(t,n,function(t){return t==e},!1)}for(var r=n(0),i=[];r>=0&&r<t.count()-1;)i.push(t.slice(0,r+1)),r=n(r+1);return i}function o(e,t,n,r){var i=e.count();if(r){for(t=i-1-t;t>=0;t--)if(n(e.get(t).tag))return t}else for(;i-1>=t;t++)if(n(e.get(t).tag))return t;return-1}function s(e,t,n,r){for(var i,o=[],a=0;a<t.length;a++)i=t[a],o.push(c(e,i,n,r)),e=i;return o=o.reverse(),l(o,n)}function u(e,t,n,r){e=e[0],n=n&&n[0];for(var i=[];e&&1==e.nodeType&&e!=n;e=e.parentNode)i.push(c(e,e.parentNode,t,r));return i=i.reverse(),l(i,t)}function l(e,t){return t?new y(e):new v(e)}function c(e,t,n,r){return n?n.Va(e,t,r):f(e,t,r)}function d(e,t,n){return new r(null,function(){return f(e,t,n)})}function f(e,n,r){var i=1;if("HTML"!=t.Ua(e)){n=n.childNodes;for(var o=0;o<n.length&&n[o]!=e;o++){var a=n[o];a.tagName==e.tagName&&0>t.inArray(a,r)&&i++}}return{tag:e.tagName.toUpperCase(),index:i}}function g(e){return!e||0>=e.length?null:1==e.get(0).nodeType?e:(e=e.find(":first"))&&e.length&&1==e.get(0).nodeType?e:null}function h(e,r,i,o){if(o=o||[],r=r||a.$(document),0<r.find(e).length)e.data("iframe",i),o.unshift(r);else{i=o.length,r=r.find(n.ea);for(var s=0;s<r.length;s++){var u=r.eq(s);if(o=h(e,t.r(u),u,o),o.length>i){a.$(o[0]).data("iframe",u),o.unshift(u);break}}}return o}function m(e){for(var n=["HTML","BODY"],r=0;r<e.count()&&-1<t.inArray(e.get(r).tag,n);r++);return e.slice(r)}var v=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e]},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.Qb=v;var y=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e].get()},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.Rb=y,e.l=1,e.va=1;var w=function(){function e(e,t,n){this.k=this.s=this.b=0,this.b=e,this.s=t,this.k=n}return e.prototype.clone=function(){return new e(this.b,this.s,this.k)},e.prototype.o=function(){return this.b+this.s/4+this.k/10},e.max=function(){return new e(1e4,0,0)},e.o=function(e){return e.o()},e}();e.Sb=w,e.H=function(n,r,i){function o(n,r,a,s,u){if(Math.abs(r-s)>i||u.b>i)return w.max();if(0==r||0==s)return u=u.clone(),u.b+=Math.max(r,s,0),u.b>i?w.max():u;var l,c=n.get(r-1),d=a.get(s-1),f=0;if(c.tag!==d.tag)f=e.l,l=w.max();else{if(c.index===d.index)return o(n,r-1,a,s-1,u);f=e.va}var p=u.clone();p.b+=f;var f=o(n,r-1,a,s,p),g=o(n,r,a,s-1,p);return l||(c=Math.abs(c.index-d.index),p=u.clone(),c>0&&(p.s++,p.k+=c),l=o(n,r-1,a,s-1,p)),t.min([f,g,l],w.o)}return o(n,n.count(),r,r.count(),new w(0,0,0))},e.ba=function(e,n,r,i){var o=e.count();if(0>=o)return null;n=a.$(n||document),i=i?":not("+i+")":"";for(var s=0;o>s;s++){var u=e.get(s);if(n=n.children(u.tag+i).eq(u.index-1),-1!=t.inArray(u.tag,["IFRAME","FRAME"])&&o>s+1&&(0<n.length&&(r&&n.data("iframe",r),r=n),n=t.r(n)),!n||0==n.length||!n.get(0)){n=null;break}}return n&&0<n.length&&r&&n.data("iframe",r),n},e.Eb=function(n,r){if(!r||0>=r.count())return 0;for(var o=r.get(r.count()-1).tag,a=i(o,n),o=w.max().o(),s=2*e.l,u=o,l=[],c=0;c<a.length;c++){var d=a[c],f=e.H(d,r,s).o();u>f?(u=f,l=[d]):f==u&&l.push(d)}return a=0,o>u&&(a=t.min(l,function(e){return Math.abs(r.count()-e.count())}).count()),a},e.L=o,e.Tb=s,e.Ka=u;var b=function(){function e(){this.qa={}}return e.prototype.Va=function(e,t,n){var r=null,i=this.t(e);return void 0!==i&&(r=this.qa[i]),r||(r=d(e,t,n),t=this.v(),this.w(e,t),this.qa[t]=r),r},e.prototype.t=function(t){return t&&t[e.U]||void 0},e.prototype.w=function(t,n){t&&(t[e.U]=n)},e.prototype.v=function(){return++e.N},e.N=t.fa(),e.U="__WM_XPATH_ENTRY_KEY__",e}();e.Ca=b,e.La=function(e,t,n,r){return e=s(e[0],t,n,r),e=m(e)},e.Ia=function(e,n,r){var i=g(e);return!i||0>=i.length?new v([]):(i=h(i),i=t.reduce(i,function(e,t){return e.concat(u(t,n,null,r).xpathArray)},[]),l(i.concat(u(e,n,null,r).xpathArray),n))},e.removeHtmlAndBodyFromXpathArray=m,e.Lb=function(e){for(var t=new p,n=0;n<e.count();n++){var r=e.get(n);t.append(r.tag),t.append(r.index)}return t.toString()},e.xpathStringToArray=function(e){var t=[];return a.$.each(e.split("/"),function(e,n){if(0!=e){var r=n.indexOf("[");t[e-1]={tag:n.substring(0,r),index:parseInt(n.substring(r+1,n.length-1))}}}),new v(t)}}(g||(g={})),{GitCommit:"ae935ea",GitTag:"v1.0.1",GitNumber:"90",ElementRecognition:a,TempUtils:t,ContextUtils:n,TextUtils:f,XpathLib:g}}();Us.register("ElementFinder").asCtor(Ft).dependencies("JQueryElementFinder, StepUtils, PositionHelper, DecodeHtmlFunction, FindElementPluginManager,FESessionManager"),Us.register("FindElementPlugins").asFunction(function(){return[]}),Us.register("FindElementPluginManager").asCtor(Bt).dependencies("FindElementPlugins"),Us.register("FESessionManager").asCtor(Ut).dependencies("TimerManager,FeaturesManager"),Us.register("ElementTextExtractor").asCtor(Gt),Us.register("ElementLastKeeper").asCtor(Vt).asSingleton().dependencies("TimerManager"),Us.register("AnalyticsManager").asCtor(Wt).dependencies("ClientStorageManager, GenerateGuidFunc, Logger, WmAjax, EventSender"),Us.register("ClickAuditManager").asCtor(Qt).dependencies("Lib,ServerDataSenderManager,Logger, HostData,GenerateGuidFunc,DeployableTypes,EventSender,WalkMeInfo,ClickAuditEventSender"),Us.register("DebuggerAuditManager").asCtor(Ht).dependencies("Lib,ServerDataSenderManager,HostData,AbCurrentPermutationProvider"),Us.register("JQueryElementFinder").asCtor($t).dependencies("CommonUtils, PositionHelper"),Us.register("AbTasksValidator").asCtor(zt).dependencies("Lib, HostData"),Us.register("ResourceManager").asCtor(Yt).dependencies("Logger, CommonUtils, HostData"),Us.register("IFramesManager").asCtor(qt).asSingleton().dependencies("Logger"),Us.register("UIChangeTracker").asCtor(Kt).injectToReady().dependencies("Lib,SiteConfigManager,HashChangeNotifier,HistoryChangeNotifier,IFrameLoadChangeNotifier,ClickChangeNotifier,AjaxCallsChangeNotifier,UserInputChangeNotifier,ElementsRedrawer,ElementsRedrawerLegacy,Logger,IFramesManager,TimerManager"),Us.register("UICT_DEFAULT_THROTTLE_TIME_WINDOW").asInstance(2e3),Us.register("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW").asInstance(250),Us.register("HashChangeNotifier").asCtor(Xt).injectToReady().dependencies("UIChangeTracker"),Us.register("HistoryChangeNotifier").asCtor(Jt).injectToReady().dependencies("UIChangeTracker"),Us.register("IFrameLoadChangeNotifier").asCtor(Zt).injectToReady().dependencies("UIChangeTracker,IFramesManager"),Us.register("ClickChangeNotifier").asCtor(en).injectToReady().dependencies("UIChangeTracker"),Us.register("UserInputChangeNotifier").asCtor(tn).injectToReady().dependencies("UIChangeTracker,IFramesManager"),Us.register("AjaxCallsChangeNotifier").asCtor(nn).injectToReady().dependencies("UIChangeTracker,IFramesManager"),Us.register("ElementsRedrawer").asCtor(rn).injectToReady().dependencies("Lib,TimerManager,UIChangeTracker, CommonUtils, Logger,IFramesManager"),Us.register("ElementsRedrawerLegacy").asCtor(on).injectToReady().dependencies("Lib,TimerManager,UIChangeTracker"),Us.register("AutoStartHelper").dependencies("DeployableTypes,Logger,CrossDomainManager").asFunction(function(e,t,n){var r=n.enabled()?sn:an;return new r(e,t,n)}),Us.register("AutoStartManager").asCtor(un).dependencies("ServerStorageManager, Logger, AutoStartHelper, DeployablesManagerFactory, DeployableTypes, ClientStorageManager, TimerManager, CommonUtils,ProfilerAPI,ElementFinder, Consts"),Us.register("PermalinkManager").asCtor(ln).dependencies("CrossDomainManager, DeployablesManagerFactory, Lib, DeployableTypes, CommonUtils, Consts");var ol=function(){var e=function(t,n,r,i,o,a,s,u,l){function c(t){z=s,t=t||{},R=t.evaluationPollingIntervalMs||-1,F=t.elementPollingIntervalMs||-1,B=t.jqueryPollingIntervalMs||2e3,a.isFeatureEnabled("stickySonar")||t.stickySonar||(B=-1,F=-1),j=void 0!==t.stopPollingAfterEvaluateTrue?t.stopPollingAfterEvaluateTrue:!0,N=t.featureName,L=t.elementName,O=t.trackEvent,M=t.trackData,d(),Q=t.bypassUIChange,o=o.wrapCustomerLog("ConditionChecker"),e.registerInstance(Y)}function d(){function e(e){t=e.profile("evaluateAsyncProfiled",t),n=e.profile("getValueProfiled",n)}var t=function(e,t,n){w(e)},n=function(e,t,n){return f(e)};u.registerProfilerCallback(e),Y.evaluateAsync=function(e){t(e,O||N,M||L)},Y.getValue=function(e){return n(e,O||N,M||L)}}function f(e){return A.getValue(e)}function p(){A&&A.cleanResources(),D&&D.clear()}function g(){R=-1,j=-1,F=-1,B=-1}function h(e,t){V&&(t=void 0===t?!1:t,o(L+" - ConditionChecker calls onValueChanged",4,N),V(e,t))}function m(e,t){U&&(t=void 0===t?!1:t,o(L+" - ConditionChecker calls onPreEvaluation",5,N),U(e,t))}function v(e,t){G&&(t=void 0===t?!1:t,o(L+" - ConditionChecker calls onEvaluated",5,N),G(e,t))}function y(){W&&(o(L+" - ConditionChecker calls onResourcesClean",4,N),W())}function w(e){H=function(){"ElementsRedrawerLegacy"==i.getElementRedrawerType()?(p(),b(e)):(A.refresh(),I(!0))},"ElementsRedrawerLegacy"!=i.getElementRedrawerType()&&Q||i.bind(H),b(e)}function b(e){S(e),T(e)}function S(e){o(L+" - ConditionChecker evaluates async tree",5,N),m(void 0,!0),A=_(e),A.onGotValue(function(e){m(e,!0),j&&e&&Y.cleanResources(),e!==P&&(h(e,!0),P=e),v(e,!0)}),$=!x(e),h(Y.getValue(),!0),v(Y.getCachedValue(),!0),P=Y.getCachedValue()}function T(){Y.isPollingEvaluation()&&($?D=t.libSetTimeout(function(){I()},R):o(L+" will not be polled, since its' conditions are only asynchrnous ",3,N))}function I(e){var n=C(e),r=E(n);k(n,e),!Y.isPollingEvaluation()||r||e?r&&Y.cleanResources():D=t.libSetTimeout(function(){I()},R)}function C(e){m(void 0,e),o(L+" - ConditionChecker reevaluating tree conditions",5,N);var t=Y.getValue();return t}function E(e){return e&&(o(L+" - ConditionChecker reevaluating tree conditions",5,N),j)?!0:!1}function k(e,t){P!==e&&(h(e,t),P=e),v(e,t)}function _(e){function t(e){function i(){return o.apply(this,a)}if("Func"==e.nodeType){var o=r.getFunctionsByLibNameType(e.funcName),a=[];a.push(e.funcArgs),a.push(F),a.push(B);var s=null;return s=r.isFuncAsync(e.funcName)?i():new nl.noMemory(i),n(s,e),s}if("And"==e.nodeType){var u=t(e.leftSon,F,B),l=t(e.rightSon,F,B),s=new nl.complex(u,l,function(e,t){return e()&&t()});return n(s,e),s}if("Or"==e.nodeType){var u=t(e.leftSon,F,B),l=t(e.rightSon,F,B),s=new nl.complex(u,l,function(e,t){return e()||t()});return n(s,e),s}return!1}function n(e,t){var n=e.hasValue;e.hasValue=function(){return t.result=n(),t.result};var r=e.getValue;e.getValue=function(e){return t.result=r(e),t.result}}var i;return i=null==e?nl.fixed(!0):t(e,F,B)}function x(e){return"Func"==e.nodeType?r.isFuncAsync(e.funcName):"And"==e.nodeType||"Or"==e.nodeType?x(e.leftSon)&&x(e.rightSon):!1}this.LocalSVNRevision="$Rev$";var A,P,D,N,L,O,M,R,j,F,B,U,G,V,W,Q,H,$,z,Y=this;Y.getValue=function(e){return f(e)},Y.getCachedValue=function(){return Y.getValue(!0)},Y.isPollingElement=function(){return F>=0},Y.isPollingJquery=function(){return B>=0},Y.isPollingEvaluation=function(){return R>=0},Y.isPollingEvaluationNeeded=function(){return $},Y.getElementPollingInterval=function(){return F},Y.getJqueryPollingInterval=function(){return B},Y.getEvaluationPollingInterval=function(){return R},Y.getStopPollingAfterEvaluateTrue=function(){return j},Y.cleanResources=function(){o(L+" - ConditionChecker cleans resources",5,N),p(),g(),i.unbind(H),y(),e.unregisterInstance(Y)},Y.onValueChanged=function(e){V=e},Y.onPreEvaluation=function(e){U=e},Y.onEvaluated=function(e){G=e},Y.onResourcesClean=function(e){W=e},Y.evaluateAsync=function(e){w(e)},c.apply(null,[l])};return e.instances={},e.sequence=0,e.registerInstance=function(t){t._id=e.sequence,++e.sequence,e.instances[t._id]=t},e.unregisterInstance=function(t){
delete e.instances[t._id]},e.cleanResources=function(){for(var t in e.instances)e.instances.hasOwnProperty(t)&&e.instances[t].cleanResources();instances={}},e}();Us.register("ConditionChecker").asCtor(ol).asProto().dependencies("TimerManager,DebuggerManager,ConditionFunctions,UIChangeTracker,Logger,FeaturesManager, CommonUtils, ProfilerAPI"),Us.register("SiteConfigManager").asCtor(cn).args([[]]),Us.register("RecorderServerManager").asCtor(cn).args([""]),Us.register("EventServerBaseUrl").asCtor(cn).args([""]),Us.register("AuditSourceManager").asCtor(cn).args(Us.get("Consts").SOURCES.production),Us.register("FeaturesManager").asCtor(dn).dependencies("SiteConfigManager"),Us.register("LanguageManager").asCtor(fn).dependencies("win, Lib, ServerStorageManager"),Us.register("OverlayManager").asCtor(pn).asSingleton().dependencies(),Us.register("ServerStorageAjaxCaller").asCtor(gn).dependencies("Lib, AuditSourceManager, RecorderServerManager, Logger, WmAjax"),Us.register("ServerStorageManager").asCtor(hn).dependencies("Consts, Lib,EndUserStorageDataSender, ClientStorageManager, AuditSourceManager, ServerStorageAjaxCaller, CommonUtils, SettingsFile"),Us.register("EndUserStorageDataSender").asCtor(mn).dependencies("Lib, CommonUtils, AuditSourceManager, ServerDataSenderManager, Logger"),Us.register("SettingsCacheManager").asCtor(vn).asSingleton().dependencies("Lib,SettingsFile,Logger,CommonUtils,WmAjax"),Us.register("EndUserDataConverter").asCtor(yn).dependencies("Lib, ServerStorageManager, DeployablesManagerFactory, CommonUtils, StepUtils"),Us.register("WalkmeConfigManager").asCtor(wn).dependencies("WmAjax, SettingsFile"),Us.register("ShoutOutActionDataProvider").asCtor(bn).dependencies("Consts, DeployablesDataProvider, CommonUtils"),Us.register("LauncherActionDataProvider").asCtor(Sn).dependencies("Consts, DeployablesDataProvider"),Us.register("DeployablesDataProvider").asCtor(Tn).dependencies("Lib"),Us.register("AnalyticsPropertiesManager").asCtor(In).dependencies("SiteConfigManager, ValueProviderFactory"),Us.register("ValueProviderFactory").asCtor(Cn).dependencies("FeaturesManager, Consts, ValueCalculatorFactory"),Us.register("StickyValueProvider").asCtor(En).asProto(),Us.register("PredefinedValueProvider").asCtor(kn).asProto();var al=function(){function e(e){this.PLACE_HOLDER="%@",this.LocalSVNRevision="$Rev: 4206 $",this._win=e,_walkmeInternals.callbacks=_walkmeInternals.callbacks||{},_walkmeInternals.callbacks.log=wmjQuery.proxy(function(e){this._win.webkit?this._win.webkit.messageHandlers[Au.MOBILE_COMMAND_NAME].postMessage({actionId:-1,data:{log:e}}):this._win.NativeBridge&&this._win.NativeBridge.call(Au.MOBILE_COMMAND_NAME,{actionId:-1,data:{log:e}})},this)}return e.prototype.message=function(e,t,n,r,i){this.registerHandler(n,e,t,r,i)},e.prototype.getSdkVersion=function(){return this._win.iOS&&this._win.iOS.SDKVersion},e.prototype.getCallbackWrapper=function(e,t,n,r){return{success:function(r){delete _walkmeInternals.callbacks[t][e+""],n(r)},fail:function(n){delete _walkmeInternals.callbacks[t][e+""],r(n)}}},e.prototype.getParams=function(e,t,n){var r='_walkmeInternals.callbacks["'+e+'"]["'+t+'"].success('+this.PLACE_HOLDER+")",i='_walkmeInternals.callbacks["'+e+'"]["'+t+'"].fail('+this.PLACE_HOLDER+")",o='if (_walkmeInternals.callbacks["'+e+'"] && _walkmeInternals.callbacks["'+e+'"]["'+t+'"]) {'+r+'}else {_walkmeInternals.callbacks.log("callback does not exist in _walkmeInternals.callbacks. cannot perform '+t+" on "+e+'")}',a='if (_walkmeInternals.callbacks["'+e+'"] && _walkmeInternals.callbacks["'+e+'"]["'+t+'"]) {'+i+'}else {_walkmeInternals.callbacks.log("callback does not exist in _walkmeInternals.callbacks. cannot perform '+t+" on "+e+'")}',s={actionId:t,success:o,fail:a};return n&&(s.data=n),s},e.prototype.registerHandler=function(e,t,n,r,i){var o=_walkmeInternals.callbacks[t]=_walkmeInternals.callbacks[t]||{};o[e]=this.getCallbackWrapper(e,t,r,i),this._win.webkit?this._win.webkit.messageHandlers[Au.MOBILE_COMMAND_NAME].postMessage(this.getParams(t,e,n)):this._win.NativeBridge&&this._win.NativeBridge.call(Au.MOBILE_COMMAND_NAME,this.getParams(t,e,n))},e}();Us.register("iOSUtils").asCtor(al).dependencies("win"),Us.register("InputGenerator").asCtor(_n).dependencies("SimulatedCssHoverManager, Logger"),Us.register("SimulatedCssHoverManager").asCtor(xn).dependencies("Logger,CommonUtils,ResourceManager");var sl=function(){function e(){this._overlayManager=Us.get("OverlayManager"),this._uiUtils=Us.get("UiUtils"),this._canDisplayOverlay=this._uiUtils.canDisplayOverlay()}return e.prototype.setUiObject=function(e){this._uiObject=e},e.prototype.setSettings=function(e){this._settings=e},e.prototype.getOverlay=function(){if(this._canDisplayOverlay&&this._settings.overlay){var e=this._settings.overlay.opct,t=this._settings.overlay.color;return this._overlay=this._overlay||this._overlayManager.create(this._uiObject,e,t),this._overlay}},e.prototype.removeOverlay=function(){this._canDisplayOverlay&&this._overlay&&this._overlay.remove()},e}();Us.register("PopupUIUtil").asCtor(sl).asProto();var ul=function(){function e(){this._methods={},this.fadeOutFunc=function(e){var t="";return t+='wmjQuery("body").bind("transitionend webkitTransitionEnd", '+e+'); wmjQuery("body").removeClass("shown");'}}return e.prototype.createEventFunction=function(e){var t="",n=wmjQuery.proxy(function(n,r){var i=this._methods[r.funcName];i=i.slice(0,-2),t+=i;var o=wmjQuery.extend(!0,{},r.data),a=u(o)||"",s="";if(r.data&&r.data.libAction){var l="_walkmeInternals.callbacks['"+e+"']['"+Au.MOBILE_COMMAND_NAME+"']['"+n+"']['"+r.eventName+"']()";o.action=l,delete o.libAction,a=u(o)}var c='{ "actionId": '+r.actionId+(a&&', "data": '+a)+"}";s+=this.createIOSCallString(c),t+=this.fadeOutFunc("function() { "+s+" }")+"};"},this);return wmjQuery.safeEach(this._events,n),t},e.prototype.createIOSCallString=function(e){var t='window.NativeBridge && NativeBridge.call("'+Au.MOBILE_COMMAND_NAME+'", '+e+');window.webkit && webkit.messageHandlers["'+Au.MOBILE_COMMAND_NAME+'"].postMessage('+e+");";return t},e.prototype.bindEventsToUI=function(e){wmjQuery.safeEach(this._events,wmjQuery.proxy(function(t,n){e.find(t).add(e).filter(t).attr("on"+n.eventName,n.funcName+"()")},this))},e.prototype.registerEvent=function(e,t,n,r,i){this._events=this._events||{},this._events[e]={funcName:i,actionId:n,eventName:t,data:r},this._methods[i]=this._methods[i]||"\nvar "+i+"= function(){ };"},e.prototype.registerScripts=function(e){var t=this;wmjQuery.safeEach(this._events,function(n,r){r.data.libAction&&t.createEventInLib(e,n,r.eventName,r.data.libAction)})},e.prototype.createEventInLib=function(e,t,n,r){var i=_walkmeInternals.callbacks[e]=_walkmeInternals.callbacks[e]||{},o=i[Au.MOBILE_COMMAND_NAME]=i[Au.MOBILE_COMMAND_NAME]||{},a=o[t]=o[t]||{};a[n]=r},e}();Us.register("iOSEventsRegistrationsHandler").asCtor(ul).asProto(),Us.register("GuidGenerator").asCtor(An),Us.register("CookieValueCalculator").asCtor(Pn).dependencies("CookiesManager"),Us.register("JQueryValueCalculator").asCtor(Dn).dependencies("JQueryElementFinder"),Us.register("VariableValueCalculator").asCtor(Nn).dependencies("CommonUtils"),Us.register("ValueCalculatorFactory").asCtor(Ln).dependencies("Logger, Consts, CookieValueCalculator, JQueryValueCalculator, VariableValueCalculator"),Us.register("ActionsFactory").asCtor(On).dependencies("Lib, ServerStorageManager,Consts, ClientStorageManager"),Us.register("SalesForceManager").asCtor(Mn).dependencies("SalesForceVarsExtractor,SalesForceSearcher,FeaturesManager"),Us.register("SalesForceConnectionUtils").asCtor(Rn).dependencies("Logger"),Us.register("SalesForceVarsExtractor").asCtor(jn).dependencies("Lib,ClientStorageManager,SiteConfigManager,SalesForceConnectionUtils, CommonEvents"),Us.register("SalesForceSearcher").asCtor(Fn).dependencies("Lib,SiteConfigManager,SalesForceConnectionUtils");var Un=new Un(Rs),Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ll=function(){function e(e){this.logger=null,this.lib=null,this.deployable=null,this.isLoaded=!1,this.properties=[],this.propertyNames=[],this.utils=null,this.children=[],this.lib=e.lib,this.deployable=e.deployable,this.utils=e.utils,this.children=e.children}return e.prototype.prop=function(e){return e.toLowerCase()},e.prototype.getAll=function(){return this.isLoaded||this.load(),this.properties},e.prototype.hasProperty=function(e,t){return(t||!this.isLoaded)&&this.load(),-1!=wmjQuery.inArray(e,this.properties)},e.prototype.load=function(){this.isLoaded=!0},e.prototype.clear=function(){this.properties=[],this.isLoaded=!1},e.prototype.generateSingle=function(e,t){var n=t?[e]:[];this.properties=n},e.prototype.canGenerate=function(e){return-1!=wmjQuery.inArray(e,this.propertyNames)},e}(),cl=function(e){function t(t){e.call(this,t),this.propertyNames=[]}return Gu(t,e),t.prototype.load=function(){var t=this.deployable.Settings;if(this.properties=[],t&&t.DeployableTypes){for(var n=0;n<t.DeployableTypes.length;n++){var r=this.lib.getDeployablesManager(t.DeployableTypes[n]).name();this.properties.push(this.prop("contains-"+r))}e.prototype.load.call(this)}},t}(ll),dl=function(e){function t(t){e.call(this,t),this._featuresManager=Us.get("FeaturesManager"),this._visiblePropertyName=this.prop(ku.Visible),this._invisiblePropertyName=this.prop(ku.Invisible),this.propertyNames=[this._visiblePropertyName,this._invisiblePropertyName],this._tasksManager=this.lib.getDeployablesManager(Fl.Task),this.customerLog=this.lib.Logger.wrapCustomerLog("showWidget")}return Gu(t,e),t.prototype.load=function(){var t=!0;if(this.utils.isGroup(this.deployable)){var n=this.doesSupportSearchProviders(this.deployable),r=this.utils.hasChildren(this.deployable);t=r||n;var i=this._featuresManager.isFeatureEnabled("dontShowTabsWithNoVisibleChildren");i&&(t=t&&this.utils.hasVisibleChildren(this.deployable,this.children)),t||(this.utils.isTasksTab(this.deployable)&&this.customerLog("Show widget - not showing tasks tab because there are no tasks and the tab doesn't support search.",2),this.utils.isHelpTab(this.deployable)&&this.customerLog(Me.formatString("Show widget - not showing tab named {0} because there are no children and the tab doesn't support search.",this.deployable.Name),2))}t=t&&this.checkTasksCondition(this.deployable),t=t&&this.checkDisplayCondition(this.deployable),t?this.generateSingle(this._visiblePropertyName,!0):this.generateSingle(this._invisiblePropertyName,!0),e.prototype.load.call(this)},t.prototype.doesSupportSearchProviders=function(e){var t=!1,n=this.utils.supportsDeployableType(e,Fl.Tutorial);return n&&this.utils.isSearchEnabled()&&(t=!0),t},t.prototype.checkTasksCondition=function(e){var t=!0,n=this.lib.getSiteConfig().TodoListSettings,r=this.utils.supportsDeployableType(e,Fl.Task);if(r&&n){var i=n.hideComplete&&parseInt(n.hideComplete);if(i){var o=this.utils.hasUncompletedChildren(this.children);o||this.customerLog("Show widget - not showing tasks tab because all tasks are completed",2),t=o}if(t){var a=n.activateCondition;a&&(t=this.lib.evaluateConditionTree(a),t||this.customerLog("Show widget - not showing tasks tab because it was segmented out by a condition in todo list settings.",2),Qd("TasksConditionEvaluated",this.lib.getSiteConfig()))}}return t},t.prototype.checkDisplayCondition=function(e){var t=!0;if(e.deployableType==Fl.Task&&(t=this._tasksManager.isTaskDisplayed(e)),e.deployableType==Fl.Tutorial&&(t=this.lib.canShowTutorial(e)),(e.deployableType==Fl.Content||e.deployableType==Fl.Shuttle)&&e.Settings&&e.Settings.DisplayCondition){var n=Us.create("ConditionChecker",{featureName:Vs,elementName:e.Name,trackEvent:Yr(e.deployableType)+" - Segmentation",trackData:Me.getTrackData(e)});n.evaluateAsync(e.Settings.DisplayCondition),t=n.getValue(!0)}return t},t}(ll),fl=function(e){function t(t){e.call(this,t),this.propertyNames=[ku.Completed,ku.StrikedOut,ku.Uncompleted,ku.Active,ku.Inactive,ku.Phantom,ku.ProgressBar],this._tasksManager=this.lib.getDeployablesManager(Fl.Task)}return Gu(t,e),t.prototype.load=function(){var t=[];if(this.deployable.deployableType==Fl.Task){var n=this._tasksManager.isTaskCompleted(this.deployable);this.handleCompletionProperties(t,n),this.handleActiveProperties(t,n),this.handlePhantomTask(t,this.deployable.Settings)}else this.utils.isTasksTab(this.deployable)&&t.push(this.prop(ku.ProgressBar));this.properties=t,e.prototype.load.call(this)},t.prototype.handleCompletionProperties=function(e,t){if(t){e.push(this.prop(ku.Completed));var n=this.lib.getSiteConfig();Number(n.TodoListSettings.strikeOutCompletedTasks)&&e.push(this.prop(ku.StrikedOut))}else e.push(this.prop(ku.Uncompleted))},t.prototype.handleActiveProperties=function(e,t){this.isActive(t)?e.push(this.prop(ku.Active)):e.push(this.prop(ku.Inactive))},t.prototype.isActive=function(e){var t=this._tasksManager.isTaskActive(this.deployable);return e&&!this.shouldPlayAfterCompletion()&&(t=!1),t},t.prototype.shouldPlayAfterCompletion=function(){var e=this.lib.getSiteConfig(!0),t=Number(e.TodoListSettings.allowPlayAfterCompletion);return t},t.prototype.handlePhantomTask=function(e,t){t.Phantom&&e.push(this.prop(ku.Phantom))},t}(ll),pl=function(e){function t(t){e.call(this,t),this.propertyNames=[ku.Search,ku.SearchProviders]}return Gu(t,e),t.prototype.load=function(){var t=[];this.utils.isTab(this.deployable)&&this.utils.supportsDeployableType(this.deployable,Fl.Tutorial)&&(t.push(this.prop(ku.Search)),this.isSearchEnabled()&&t.push(this.prop(ku.SearchProviders))),this.properties=t,e.prototype.load.call(this)},t.prototype.isSearchEnabled=function(){var e=this.lib.getSiteConfig();return e.Settings&&Number(e.Settings.search)},t}(ll),gl=function(e){function t(t){e.call(this,t),this.propertyNames=[ku.Default]}return Gu(t,e),t.prototype.load=function(){var t=Me.isTrue(this.deployable.Settings,ku.Default,!1);t&&this.utils.hasUncompletedChildren(this.children)&&this.generateSingle(ku.Default,!0),e.prototype.load.call(this)},t}(ll),hl=function(e){function t(t){e.call(this,t),this._videoProperty=this.prop(ku.Video),this._articleProperty=this.prop(ku.Article),this.propertyNames=[this._videoProperty,this._articleProperty]}return Gu(t,e),t.prototype.load=function(){if(this.deployable.deployableType==Fl.Content){var t=this.lib.getDeployablesManager(Fl.Content).types(),n=this.deployable.Type;switch(n){case t.Video:this.generateSingle(this._videoProperty,!0);break;case t.Article:this.generateSingle(this._articleProperty,!0)}}e.prototype.load.call(this)},t}(ll),ml=function(e){function t(t){e.call(this,t),this.propertyNames=[ku.Accessible]}return Gu(t,e),t.prototype.load=function(){var t=!this.utils.isTab(this.deployable);this.generateSingle(ku.Accessible,t),e.prototype.load.call(this)},t}(ll);Us.register("UiDataProvider").asCtor(Wn).dependencies("Lib");var Wn;Us.register("ShuttlesManager").asCtor(qn).asProto().dependencies("win, TimerManager, WalkMeGoalsManager, ClickAuditManager, CommonUtils, Lib, Consts"),Us.register("ShoutOutsManager").asCtor(Zn).asProto().dependencies("Lib, UIComponentsFactory, WalkMeGoalsManager, ClickAuditManager, ServerStorageManager, ShoutOutActionDataProvider"),Us.register("BBCodeParser").asCtor(nr).dependencies("CommonUtils,SiteConfigManager,RecorderServerManager"),Us.register("Positions").asInstance({Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}),Us.register("FontsData").asFunction(function(){var e=new rr;return e.concat({"walkme-opensans":{id:"opensans",name:"opensans",url:"/player/resources/fonts/opensans"}}),e}),Us.register("UIVariationsAdapter").asCtor(or).dependencies("ResourceManager"),Us.register("UITemplatesAdapter").asCtor(ar).dependencies("ResourceManager"),Us.register("UITemplates").asCtor(rr).dependencies("UITemplatesAdapter"),Us.register("UIVariations").asCtor(rr).dependencies("UIVariationsAdapter"),Us.register("UIDisplayers").asFunction(function(){var e=new rr;return e.concat({1:"PopupDisplayer",2:"BarDisplayer"}),e}).asSingleton(),Us.register("UIComponents").asFunction(function(){var e=new rr;return e.concat({1:"ShoutOut",2:"ShoutOut"}),e}).asSingleton();var vl=function(){function e(){this.LocalSVNRevision="$Rev$",this.eventBase=wmjQuery({})}return e.prototype.once=function(e,t){this.eventBase.one(e,t)},e.prototype.bind=function(e,t){this.eventBase.bind(e,t)},e.prototype.unbind=function(e,t){this.eventBase.unbind(e,t)},e.prototype.trigger=function(e,t){this.eventBase.trigger(e,t)},e}(),Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},yl=function(e){function t(t){e.call(this),this.LocalSVNRevision="$Rev: 4206 $",this._uiComponent=t,this._settings=t.Settings||{},this._variations=this.createVariations(),this._uiCreator=Us.get("UICreator"),this.createUi()}return Gu(t,e),t.prototype.getComponent=function(){return this._uiComponent},t.prototype.createUi=function(){this._displayer=Us.get("DisplayersFactory").get(this._uiComponent.DisplayerId,[this._uiComponent.Settings]);var e=this._displayer.getContainer(),t=e?e[0].document:document;this._uiCreator.setUI(this._uiComponent,this._variations,this.createConfig(),t),this.registerEvents(),this._displayer.setUiObject(this._uiCreator.getUI())},t.prototype.registerEvents=function(){},t.prototype.createVariations=function(){for(var e=Us.get("UIVariations"),t=[],n=this._uiComponent.UIVariationsIds||[],r=0;r<n.length;r++)t.push(e.get(n[r]));return this._settings.variation&&t.push(this._settings.variation),t},t.prototype.createConfig=function(){return{}},t.prototype.append=function(){var e=this;this.trigger("append-begin"),Us.get("TemplatesFactory").addResources(this._uiComponent.UITemplateId,this._uiComponent.UITemplateVersion,this._variations,wmjQuery.proxy(function(){e._displayer.append(wmjQuery.proxy(function(){return e.trigger("append-end")},e))},this))},t.prototype.destroy=function(){var e=this;this._isDead||(this.trigger("destroy-begin"),this._displayer.remove(wmjQuery.proxy(function(){e._isDead=!0,e.trigger("destroy-end")},this)))},t.prototype.show=function(){this.trigger("show-begin"),this._displayer.show(wmjQuery.proxy(function(){this.trigger("show-end")},this))},t.prototype.hide=function(){this.trigger("hide-begin"),this._displayer.hide(wmjQuery.proxy(function(){this.trigger("hide-end")},this))},t.prototype.toggle=function(){this._displayer.isVisible()?this.hide():this.show()},t}(vl),Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},wl=function(e){function t(t,n,r,i,o,a){this.CLASS_X_BUTTON="walkme-x-button",this.CLASS_ACTION_PREFIX="walkme-action-",this._actionsFactory=t,this._commonUtils=n,this._bbCodeParser=r,this._position=0==a.Settings.position?"top":"bottom",this._actions=this.getActions(a),this._lib=i,this._consts=o,e.call(this,a)}return Gu(t,e),t.prototype.getActions=function(e){var t=[];if(!e.Actions)return t;for(var n=0,r=e.Actions.length;r>n;n++){var i=e.Actions[n];i.IsActive&&(i[i.Type]=!0,i.CssClass=this.generateActionClass(t.length,e.Actions[n]),t.push(e.Actions[n]))}return t},t.prototype.registerEvents=function(){e.prototype.registerEvents.call(this),this.registerXButton(),this.registerActions();var t=wmjQuery.proxy(function(){this.destroy()},this),n={objectId:this._uiComponent.Id,type:Au.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT};this._lib.bindBBCodeEvents(this._uiCreator.ui,t,n)},t.prototype.registerXButton=function(){var e=wmjQuery.proxy(function(){this.trigger("x-clicked"),this.destroy()},this);this._uiCreator.registerEvents("."+this.CLASS_X_BUTTON,"click",Au.MOBILE_COMMANDS.ACTION.libAction,{libAction:e},"Close")},t.prototype.registerActions=function(){for(var e=0,t=this._actions.length;t>e;e++){var n=this._actions[e];n.Args=n.Args||{},n.Args.uiComponent=this;var r,i=this._actionsFactory.get(n.Type,n.Args,Ll.SHOUTOUT,this._uiComponent),o=this.generateActionClass(e,this._actions[e]),a=o.replace(/-/gi,"_"),s=i.args||{};r=i.iOSAction?wmjQuery.proxy(function(e){this.trigger("action-start",e),this.destroy()},this,n.Type):wmjQuery.proxy(function(e,t){this.trigger("action-start",e),t.doAction(),"destroy"!=e&&this.destroy()},this,n.Type,i),s.libAction=r,this._uiCreator.registerEvents("."+o,"click",i.iOSAction||Au.MOBILE_COMMANDS.ACTION.libAction,s,a||"")}},t.prototype.generateActionClass=function(e,t){return this.CLASS_ACTION_PREFIX+t.Type+"-"+e},t.prototype.createConfig=function(){return{Id:this._uiComponent.Id,Name:this._uiComponent.Name,Title:this.handleText(this._uiComponent.Title),Description:this.handleText(this._uiComponent.Description),XButtonClass:this.CLASS_X_BUTTON,Actions:this._actions,Position:this._position}},t.prototype.handleText=function(e){return this._bbCodeParser.parse(this._commonUtils.nl2br(e))},t}(yl);Us.register("ShoutOut").asCtor(wl).asProto().dependencies("ActionsFactory, CommonUtils, BBCodeParser, Lib, Consts");var bl=function(){function e(){this.events={}}return e.prototype.setUI=function(e,t,n,r){this.ui=Us.get("TemplatesFactory").get(e.UITemplateId,e.UITemplateVersion,t,n,r)},e.prototype.registerEvents=function(e,t,n,r,i){this.events[e]={name:t,actionId:n,body:r.libAction}},e.prototype.getUI=function(){return this.bindEvents(),this.ui},e.prototype.bindEvents=function(){},e}(),Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Sl=function(e){function t(){e.apply(this,arguments)}return Gu(t,e),t.prototype.bindEvents=function(){var e=this;wmjQuery.safeEach(this.events,function(t,n){e.ui.find(t).on(n.name,n.body)})},t}(bl);Pu.register(Au.PLATFORM.Web,function(){Us.register("UICreator").asCtor(Sl).asProto()});var Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Tl=function(e){function t(){e.apply(this,arguments),this._lib=Us.get("Lib"),this._eventsRegistrator=Us.get("iOSEventsRegistrationsHandler")}return Gu(t,e),t.prototype.setUI=function(t,n,r,i){var o=t.Actions?t.Actions.filter(function(e){return e.IsActive}).length:0,a="wm-one-button";2==o?a="wm-two-buttons":0==o&&(a="wm-no-buttons"),r.ButtonsClass=a,e.prototype.setUI.call(this,t,n,r,i)},t.prototype.getUI=function(){e.prototype.getUI.call(this),this.buildHTML(),this.setID();var t=wmjQuery("head",this._uiHTML);return this.appendCustomCSS(t),this.appendFadeoutEffect(t),this.appendScriptTag(),this.appendUIObjectToBody(),this.registerScripts(),this._uiHTML},t.prototype.registerEvents=function(e,t,n,r,i){this._eventsRegistrator.registerEvent(e,t,n,r,i)},t.prototype.bindEvents=function(){this._eventsRegistrator.bindEventsToUI(this.ui)},t.prototype.registerScripts=function(){this._eventsRegistrator.registerScripts(this.ui.attr("id"))},t.prototype.buildHTML=function(){this._uiHTML=wmjQuery("<html>"),this._head=wmjQuery("<head>"),this._body=wmjQuery("<body>"),this._body.css("display","none"),this._uiHTML.append(this._head),this._uiHTML.append(this._body)},t.prototype.setID=function(){this._uiHTML.attr("id",this.ui.attr("id"))},t.prototype.appendCustomCSS=function(e){var t=this._lib.getCustomCssProp();this._lib.ResourceManager.injectCss(t,"walkme-custom-css",e)},t.prototype.appendFadeoutEffect=function(e){this._lib.ResourceManager.injectCss("body { opacity: 0; transition: opacity 0.3s linear; } body.shown { opacity: 1; }","walkme-fadeout-effect",e)},t.prototype.appendUIObjectToBody=function(){this.ui.show(),this._body.append(this.ui)},t.prototype.getScriptContent=function(){return this._eventsRegistrator.createEventFunction(this.ui.attr("id"))},t.prototype.appendScriptTag=function(){var e=this.getScriptContent();this.addScriptTagWithContent(e);var t='function fadeIn() {wmjQuery("body").show().addClass("shown");}';this.addScriptTagWithContent(t);var n="(function(){ var jQueryScript = document.createElement('script');jQueryScript.src = '"+Us.get("win").wmSnippet.getSettingsFile().jQueryFile+"';jQueryScript.onload = fadeIn;jQueryScript.async = true;document.getElementsByTagName('head')[0].appendChild(jQueryScript);})();";this.addScriptTagWithContent(n)},t.prototype.addScriptTagWithContent=function(e){var t=document.createElement("script");t.type="text/javascript",t.appendChild(document.createTextNode(e)),this._head[0].appendChild(t)},t}(bl);Pu.register(Au.PLATFORM.iOS,function(){Us.register("UICreator").asCtor(Tl).asProto()});var Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Il=function(e){function t(t){e.call(this),this._isVisible=!1;var n=Us.get("Lib"),r=n.shouldHandlePageAsFramesets()?n.getBiggestFrame().contentWindow:window;this._lib=n,this._topWindow=wmjQuery(r),this._topContainer=wmjQuery(n.getCommonUtils().getBody(r.document)),this._settings=t}return Gu(t,e),t.prototype.setUiObject=function(e){this._uiObject=e},t.prototype.getContainer=function(){return this._topWindow},t.prototype.append=function(e){this._topContainer.append(this._uiObject),e&&e()},t.prototype.remove=function(e){this._uiObject.remove(),this._isVisible=!1,e&&e()},t.prototype.show=function(e){this._uiObject.show(),this._isVisible=!0,e&&e()},t.prototype.hide=function(e){this._uiObject.hide(),this._isVisible=!1,e&&e()},t.prototype.isVisible=function(){return this._isVisible},t}(vl),Gu=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Cl=function(e){function t(t){e.call(this,t),this.DEFAULT_Z_INDEX=2147483631,this._positions=Us.get("Positions"),this._popupUtil=Us.get("PopupUIUtil"),this._popupUtil.setSettings(t)}return Gu(t,e),t.prototype.setUiObject=function(t){e.prototype.setUiObject.call(this,t),this._popupUtil.setUiObject(this._uiObject)},t.prototype.show=function(e){if(this._isVisible)return void(e&&e());this.unbindEvents();var t,n=parseInt(this._settings.position,10),r=n==this._positions.Center;t=this._settings["z-index"]?this._settings["z-index"]:this.DEFAULT_Z_INDEX,this._uiObject.css("z-index",t);var i=wmjQuery.proxy(function(){this._isVisible=!0,e&&e()},this);r?this.popCenter(i):this.popCorner(n,i)},t.prototype.handleOverlay=function(){var e=Number(this._uiObject[0].style.zIndex),t=this._popupUtil.getOverlay();t&&(e==this.DEFAULT_Z_INDEX&&this._uiObject.css("z-index",e+1),t.show())},t.prototype.popCorner=function(e,n){this._uiObject.css({position:"fixed"}),this.handleOverlay();var r=(this._settings.marginV||0)+"px",i=(this._settings.marginH||0)+"px";switch(e){case this._positions.Top:this._uiObject.addClass(t.POSITION_PREFIX+"top"),this._uiObject.css({top:0,left:"50%",marginLeft:-(this._uiObject.outerWidth()/2),marginTop:r});break;case this._positions.Right:this._uiObject.addClass(t.POSITION_PREFIX+"right"),this._uiObject.css({right:0,top:"50%",marginTop:-(this._uiObject.outerHeight()/2),marginRight:i});break;case this._positions.Bottom:this._uiObject.addClass(t.POSITION_PREFIX+"bottom"),this._uiObject.css({bottom:0,left:"50%",marginLeft:-(this._uiObject.outerWidth()/2),marginBottom:r});break;case this._positions.Left:this._uiObject.addClass(t.POSITION_PREFIX+"left"),this._uiObject.css({left:0,top:"50%",marginTop:-(this._uiObject.outerHeight()/2),marginLeft:i});break;case this._positions.TopLeft:this._uiObject.addClass(t.POSITION_PREFIX+"top-left"),this._uiObject.css({left:0,top:0,marginTop:r,marginLeft:i});break;case this._positions.TopRight:this._uiObject.addClass(t.POSITION_PREFIX+"top-right"),this._uiObject.css({right:0,top:0,marginTop:r,marginRight:i});break;case this._positions.BottomRight:this._uiObject.addClass(t.POSITION_PREFIX+"bottom-right"),this._uiObject.css({right:0,bottom:0,marginBottom:r,marginRight:i});break;case this._positions.BottomLeft:this._uiObject.addClass(t.POSITION_PREFIX+"bottom-left"),this._uiObject.css({left:0,bottom:0,marginBottom:r,marginLeft:i})}this._uiObject.stop(!0,!1).css("opacity",1).hide().fadeIn(400,n)},t.prototype.popCenter=function(e){this._uiObject.addClass("wm-position-center"),this._lib.centerElementInPage(this._uiObject,!1),this.handleOverlay(),this._uiObject.stop(!0,!1).css("opacity",1).hide().fadeIn(400,e),this._resizeHandler=wmjQuery.proxy(function(){this._uiObject.stop(!1,!0),this._lib.centerElementInPage(this._uiObject,!0)},this),this._topWindow.bind(t.MOVEMENT_EVENTS,this._resizeHandler)},t.prototype.hide=function(e){return this._isVisible?(this.unbindEvents(),this._popupUtil.removeOverlay(),void this._uiObject.stop(!0,!1).css("opacity",1).show().fadeOut(200,wmjQuery.proxy(function(){this._isVisible=!1,e&&e()},this))):void(e&&e())},t.prototype.remove=function(e){this.hide(wmjQuery.proxy(function(){this._uiObject.remove(),e&&e()},this))},t.prototype.unbindEvents=function(){this._resizeHandler&&this._topWindow.unbind(t.MOVEMENT_EVENTS,this._resizeHandler),this._resizeHandler=null},t.EVENT_SUFFIX="walkmeDisplayer",t.MOVEMENT_EVENTS="scroll."+t.EVENT_SUFFIX+", resize."+t.EVENT_SUFFIX,t.POSITION_PREFIX="wm-position-",t}(Il);Pu.register(Au.PLATFORM.Web,function(){Us.register("PopupDisplayer").asCtor(Cl).asProto()});var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},El=function(e){function t(t){e.call(this),this._isVisible=!1,this._popupUtil=Us.get("PopupUIUtil"),this._mobileUtils=Us.get("iOSUtils"),this._popupUtil.setSettings(t)}return Gu(t,e),t.prototype.setUiObject=function(e){this._uiObject=e,this._popupUtil.setUiObject(this._uiObject),this._body=wmjQuery("body",this._uiObject)},t.prototype.getContainer=function(){return void 0},t.prototype.append=function(e){this.setOverlayInHtml(),this._mobileUtils.message(this._uiObject[0].id,{id:this._uiObject[0].id,html:this._uiObject.html()},Au.MOBILE_COMMANDS.VIEW.append,e)},t.prototype.remove=function(e){this.hide(wmjQuery.proxy(function(){this._mobileUtils.message(this._uiObject[0].id,{id:this._uiObject[0].id},Au.MOBILE_COMMANDS.VIEW.remove,e),this._popupUtil.removeOverlay()},this))},t.prototype.setOverlayInHtml=function(){if(this._overlay=this._popupUtil.getOverlay(),this._overlay){var e=this._overlay.getOverlayElement();e.css("position","absolute"),e.css("-webkit-tap-highlight-color","rgba(0,0,0,0)");var t=Us.get("iOSEventsRegistrationsHandler"),n="Close",r="#"+e.attr("id");t.registerEvent(r,"click",Au.MOBILE_COMMANDS.ACTION.libAction,null,n),t.bindEventsToUI(e),this._body.prepend(e)}},t.prototype.show=function(e){if(this._isVisible)return void(e&&e());var t=wmjQuery.proxy(function(){e&&e(),this._isVisible=!0},this);this._mobileUtils.message(this._uiObject[0].id,{id:this._uiObject[0].id},Au.MOBILE_COMMANDS.VIEW.show,t)},t.prototype.hide=function(e){if(!this._isVisible)return void(e&&e());var t=wmjQuery.proxy(function(){e&&e(),this._isVisible=!1},this);this._mobileUtils.message(this._uiObject[0].id,{id:this._uiObject[0].id},Au.MOBILE_COMMANDS.VIEW.hide,t)},t.prototype.isVisible=function(){return this._isVisible},t}(vl);Pu.register(Au.PLATFORM.iOS,function(){Us.register("PopupDisplayer").asCtor(El).asProto()});var Gu=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},kl=function(e){function t(t){e.call(this,t),this._positions=Us.get("Positions"),this._settings.IdentifySettings?this._element=this._lib.findElement(this._settings.IdentifySettings,null,null,"ShoutOut Bar - Find Element"):this._element=this._topContainer}return Gu(t,e),t.prototype.show=function(t){this._contentPusher&&this._contentPusher.show(),e.prototype.show.call(this,t);
},t.prototype.hide=function(t){this._contentPusher&&this._contentPusher.hide(),e.prototype.hide.call(this,t)},t.prototype.append=function(e){if(this._element){var n=parseInt(this._settings.position),r=parseInt(this._settings.cssPosition),i=parseInt(this._settings.pushSiteDown);switch(n){case this._positions.Top:this._element.prepend(this._uiObject),i&&(this.createContentPusher(this._uiObject.outerHeight()+parseInt(this._uiObject.css("margin-bottom"))+parseInt(this._uiObject.css("padding-bottom"))),this._element.prepend(this._contentPusher),this._uiObject.addClass(t.POSITION_PREFIX+"top")),this._uiObject.css({top:0,left:0,width:"100%"}),r==t.CSS_POSITION.Fixed?this._uiObject.css({position:"fixed"}):r==t.CSS_POSITION.Relative&&this._uiObject.css({position:"absolute"});break;case this._positions.Bottom:this._element.append(this._uiObject),i?r==t.CSS_POSITION.Fixed&&(this.createContentPusher(this._uiObject.outerHeight()),this._element.append(this._contentPusher),this._uiObject.addClass(t.POSITION_PREFIX+"bottom")):r==t.CSS_POSITION.Relative&&this._uiObject.css({"margin-top":-1*this._uiObject.outerHeight()}),this._uiObject.css({bottom:0,left:0,width:"100%"}),r==t.CSS_POSITION.Fixed?this._uiObject.css({position:"fixed"}):r==t.CSS_POSITION.Relative&&this._uiObject.css({position:"relative"})}e&&e()}},t.prototype.remove=function(t){this._contentPusher&&this.removeContentPusher(),e.prototype.remove.call(this,t)},t.prototype.createContentPusher=function(e){this._contentPusher=wmjQuery('<div style="position: relative;" />'),this._contentPusher.css(Tu),this._contentPusher.css({height:e,display:"none"})},t.prototype.removeContentPusher=function(){this._contentPusher.remove(),this._contentPusher=null},t.POSITION_PREFIX="wm-position-",t.CSS_POSITION={Fixed:0,Relative:1},t}(Il);Us.register("BarDisplayer").asCtor(kl).asProto(),Us.register("TemplatesFactory").asCtor(sr).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils"),Us.register("UIComponentsFactory").asCtor(ur).asSingleton().dependencies("Logger, UIComponents"),Us.register("DisplayersFactory").asCtor(ur).asSingleton().dependencies("Logger, UIDisplayers"),Us.register("DebuggerManager").asCtor(lr).dependencies("Lib,WmInternals,DebuggerAuditManager"),Us.register("LoggerManager").asCtor(cr).asSingleton(),Us.register("Profiler").asCtor(Tr).asProto().dependencies("TimerManager"),Us.register("ProfilerAPI").asCtor(Cr),Us.register("ProfilerManager").dependencies("ClientStorageManager, EndUsersManager, HostData, TimerManager, CommonUtils, Profiler, ServerDataSenderManager, Logger").asCtor(Er).initialize(!1),Us.register("TrackFinder").asCtor(xr).dependencies("ClientStorageManager,ProfilerAPI,CommonUtils"),Us.register("UIVisibilityManager").asCtor(Ar).asProto().dependencies("Logger, Consts"),Us.register("ElementVisibilityEvaluator").asCtor(Pr).asProto().dependencies("Logger, Consts, ElementFinder, PositionHelper"),Us.register("UIElementFactory").asCtor(Dr).dependencies("Consts"),Us.register("UIPopUpBalloon").asCtor(Nr).asProto().dependencies("Logger, PositionHelper, Lib, UiUtils, Consts"),Us.register("UIElementBalloon").asCtor(Lr).asProto().dependencies("Logger, Lib, Consts, PositionHelper"),Us.register("UITriggersManager").asCtor(Or).asProto().dependencies("Logger, UITriggersFactory"),Us.register("UITriggersFactory").asCtor(Mr).dependencies("Consts"),Us.register("ClickUITrigger").asCtor(Rr).asProto().dependencies("Consts"),Us.register("StateMachine").asCtor(jr).asProto().dependencies("Logger, ClientStorageManager"),Us.register("StagesFactory").asCtor(Fr).dependencies("Logger, Consts, ActionStagesFactory"),Us.register("UIFlowStage").asCtor(Br).asProto().dependencies("UIElementFactory"),Us.register("ActionStagesFactory").asCtor(Ur).dependencies("Consts"),Us.register("BranchActionStage").asCtor(Gr).asProto(),Us.register("SplitActionStage").asCtor(Vr).asProto(),Us.register("FlowsManager").asCtor(Wr).asProto(),Us.register("FlowsPlayer").asCtor(Qr).dependencies("Logger, ClientStorageManager, StagesFactory"),Us.register("PageScorer").asCtor(Hr),Us.register("CustomVariableAuditor").asCtor($r).dependencies("SiteConfigManager,CommonUtils"),Us.register("BalloonEmbedder").asCtor(zr).dependencies("getTopContainer"),Us.register("Lib").asInstance(Rs);var _=Us.get("PositionHelper"),_l="wm-dmn",xl="displayWidgetCondition",Al=!1;window.walkme_lib_in_dev&&(Al=!0);var Pl=70,Dl={NOT_RUNNING:0,RUNNING:1,WAITING_FOR_ELEMENT:2,WAITING_FOR_ELEMENT_EVENT:3,PAUSED:4,WAITING_FOR_SPLIT:5,WAITING_FOR_NEXT_BUTTON_CLICK:6,WAITING_FOR_PAGE_CHANGE:7,WAITING_FOR_STICKY_ELEMENT:8,WAITING_FOR_CONDITION:9,PASSING_OWNERSHIP:10,WAITING_FOR_REDIRECT:11,WAITING_FOR_OWNERSHIP:12},Nl=Au.SAFESTART_ACTION,Ll=Au.STEP_PLAY_INITIATOR_ENUM,Ol={Show:1,Action:2},Ml={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},Rl="PSCTMode",jl={PLAY_CONDITION:0,STICKY_CONDITION:1,BOTH:2},Fl=Au.DEPLOYABLE_TYPE;Us.register("DeployableTypes").asInstance(Fl),Us.register("LibStates").asInstance(Dl);var Bl,Ul,Gl,Vl,Wl,Ql,Hl,$l,zl,Yl,ql,Kl,Xl,Jl,Zl,ec,tc,nc="display: block; padding: 0; margin: 0;	vertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;",rc={Top:0,Right:1,Bottom:2,Left:3},ic=["top","right","bottom","left"],oc={Center:0,Start:1,End:2},ac=["center","start","end"],sc=2147483631,uc={soft:0,strong:1},lc="isSticky",cc="stickinessType",dc=rc.Bottom,fc=60,pc=2e3,gc="##START_OF_CURRENT##",hc="##END_OF_CURRENT##",mc="##START_OF_TOTAL##",vc="##END_OF_TOTAL##",yc=6e3,wc={top:0,left:0,bottom:0,right:0},bc=5e3,Sc=[],Tc=[],Ic=[],Cc=[],Ec=[],kc=[],_c=[],xc=[],Ac=[],Pc=null,Dc=[],Nc=[],Lc=[],Oc=[],Mc=[],Rc=[],jc=[],Fc={},Bc={},Uc=null,Gc=null,Vc="",Wc="",Qc={},Hc=null,$c=null,zc=null,Yc=null,qc=null,Kc=null,Xc=null,Jc=null,Zc=null,ed=null,td=null,nd=null,rd=null,id=null,od=null,ad=null,sd=null,ud=null,ld=null,cd=null,dd=null,fd=null,pd=null,gd=null,hd=null,md=null,vd=null,yd=null,wd={},bd=null,Sd={},Td=[],Id=null,Cd=null,Ed=null,kd=null,_d=null,xd=null,Ad=null,Pd=null,Dd=null,Nd=null,Ld=null,Od=null,Md=null;Rs.ConditionFunctionsObj=null;var Rd,jd,Fd,Bd,Ud,Gd,Vd,Wd,Qd,Hd,$d,zd=-1,Yd=-1,qd=Dl.NOT_RUNNING,Kd=[],Xd=[],Jd=[],Zd=null,ef=!1,tf=!1,nf=!1,rf="wm-wfow",of="wm-prsst",af="wm-ftr",sf="wm-lg-act",uf="sti",lf="tId",cf="stt",df="step",ff="spn",pf="plgd",gf="pint",hf="splt",mf="fnsh",vf="sph",yf="sch",wf="ssi",bf="igd",Sf="wm-cond-win",Tf=1e3,If=60*Tf,Cf=900,Ef=!1,kf=(Array(),!1),_f=Array(),xf=[],Af=[],Pf=[],Df=-1,Nf=!1,Lf=[];Rs.releaseLibTimeouts;var Of;Us.register("win").asInstance(window),Us.register("screen").asInstance(screen);var Mf;Rs.setCookiesManager=function(e){Xc=e},Rs.setLogger=function(e){Rs.Logger=e},Rs.setFramesetsUtils=function(e){ed=e},Rs.setTriggersManager=function(e){td=e},Rs.setSettingsFile=function(e){Vl=e},Rs.setAutoStartHelper=function(e){Yl=e},Rs.setJQueryElementFinder=function(e){_d=e},Rs.setElementFinder=function(e){Ld=e},Rs.setConditionFunctions=function(e){Rs.ConditionFunctionsObj=e},Rs.setConditionTreeEvaluator=function(e){qc=e},Rs.setBBCodeParser=function(e){$l=e},Rs.setResourceManager=function(e){Rs.ResourceManager=e},Rs.setStorageManagerFactory=function(e){Gl=e},Rs.setStorageManager=function(e){Jc=e},Rs.setServerStorageManager=function(e){Zc=e},Rs.setEndUsersManager=function(e){zc=e},Rs.setAbPermutationManager=function(e){xd=e},Rs.setLibInitializer=function(e){Gs=e},Rs.setWmAjax=function(e){Od=e},Rs.setSiteConfigManager=function(e){Pc=e},Rs.setEndUserLoggerManager=function(e){Yc=e},Rs.setUiDataProvider=function(e){Wn=e},Rs.setAnalyticsManager=function(e){Cd=e},Rs.setRecorderServerManager=function(e){Uc=e},Rs.setPermalinkManager=function(e){Gc=e},Rs.setServerDataSenderManager=function(e){Md=e},Rs.setClickAuditManager=function(e){Ed=e},Rs.setAuditStepsManager=function(e){Hc=e},Rs.setAuditWtsManager=function(e){$c=e},Rs.setDebuggerAuditManager=function(e){kd=e},Rs.setPopupNotificationsService=function(e){Ad=e},Rs.setGoalsManager=function(e){Ul=e},Rs.setWalkMeGoalsManager=function(e){Kc=e},Rs.setDebuggerManager=function(e){nd=e},Rs.setLoggerManager=function(e){rd=e},Rs.setPlayManager=function(e){Nd=e},Rs.setCrossDomainManager=function(e){Rs.crossDomainManager=e,Dd||(Dd=e)},Rs.setFeaturesManager=function(e){Mf=e.isFeatureEnabled},Rs.setHostData=function(e){ql=e},Rs.setSalesForceManager=function(e){Kl=e},Rs.setCommonEvents=function(e){Bd=e,Vd=Bd.sendEditorEvent,Wd=Bd.sendApiEvent,Qd=Bd.sendInternalEvent,Hd=Bd.oldSendApiEvent,$d=Bd.sendAutomationEvent},Rs.setTimerManager=function(e){Ud=e,Rs.releaseLibTimeouts=function(){Ud.releaseTimeoutsArray("libTimeouts")},Of=Ud.libSetTimeout},Rs.setStickinessManager=function(e){Gd=e},Rs.getHostData=function(){return ql},Rs.setLanguageManager=function(e){Zl=e},Rs.setClientStorageManager=function(e){tc=e},Rs.getAttentionGrabberManager=function(){return ec=Us.get("AttentionGrabberManager")},Rs.getStorageType=function(){return Zc.getStorageType()},Rs.getDebuggerAuditManager=function(){return kd},Rs.getClientStorageManager=function(){return tc},Rs.startNewInteraction=function(){Us.get("InteractionManager").beginNewInteraction()},Us.register("StorageManagerFactoryParams").asInstance({getAllUserGuids:Xr,setAuditStepCookieSeconds:Kr}),Rs.widgetApi=Us.get("WidgetApi"),Rs.getMustache=function(){return Lu},Rs.elkState=function(e){Me.elementLastKeeper.setState(e)},this.getStorageManagerInstance=function(e){return e?Gl.byType(e):tc},this.getServerStorageManager=function(){return Zc},this.getAnimator=function(){return Pe},Rs.getABPermutationId=function(){return xd.getPermutation()},Rs.getAllPermutations=function(){return xd.getPermutations()},Rs.getEndUserGuid=function(){return zc.getEndUserGuid()},Rs.registerFindElementPlugin=function(e){Rs.getFindElementPluginManager().registerPlugin(e)},Rs.overrideBalloonEmbedder=function(e){Us.register("BalloonEmbedder").asCtor(e).dependencies("getTopContainer")},Rs.getDataFileExtraData=function(){return Sd},Rs.setCustomCssProp=function(e){Hl=e,Qd("NewCustomCss",Hl)},Rs.getCustomCssProp=function(){return Hl},Rs.getUiTracker=function(){return Us.get("UIChangeTracker")},Rs.getSalesForceManager=function(){return Kl},this.getTodoListManager=function(){return od},this.setPlayInitiator=function(e){},this.getPlayInitiatorEnum=function(){return Ll},this.UiProperties=function(){return ku},Rs.getUiUtils=function(){return je},Rs.getCommonUtils=function(){return Me},Rs.getCommonEvents=function(){return Bd},Rs.getConsts=function(){return Au},Rs.getFramesetsUtils=function(){return ed},Rs.getPositionHelper=function(){return _},this.removeAllStepAuditsLogs=function(){Hc&&Hc.removeAllStepAuditsLogs()},this.releaseAllElements=function(e){oi({functionsToExecute:[Rs.releaseBalloons,Rs.releaseLaunchers,Rs.releaseShoutOuts,Rs.releaseShoutOutBars,Rs.releaseAGs],successCallback:e})},Rs.releaseShoutOuts=function(e){md?md.releaseAll(e):e&&e()},Rs.releaseShoutOutBars=function(e){vd?vd.releaseAll(e):e&&e()},Rs.releaseAGs=function(e){ec?ec.remove(e):e&&e()},this.releaseBalloons=function(e){Za("Releasing balloons",5,zs),td&&td.releaseAllEventBindings(),ho(),oi({functionsToExecute:[ii,ms,function(e){je.removeOverlay(),e&&e()}],successCallback:e})},this.releaseLaunchers=function(e,t,n){var r=function(e,t){e.drawable?e.drawable.destroy(t):t&&t()};oi({objectsArray:Rs.getLaunchers(),functionsToExecute:[r],successCallback:function(){n||Rs.setLaunchers([]),e&&e()}})},Rs.getExecuteParallel=function(){return oi},Rs.getUserGuid=function(){return bd},Rs.getAnalyticsCustomFields=function(){return _f},Us.register("GetAuditSource").asInstance(os),Us.register("GetAnalyticsCustomFields").asInstance(Rs.getAnalyticsCustomFields),Us.register("GetUserGuid").asInstance(Rs.getUserGuid),Rs.setUserGuid=function(e){e=Hi(e,"No-User-Guid"),-1==mp(e,Td)&&Td.push(e),bd=e},this.setUserGuidForEditor=function(e){Td=[e],bd=e},this.setTutorialsForEditor=function(e,t){try{for(var n=l(e),r=0;r<n.length;r++)n[r].userGuid=t;Rs.setTutorials(n)}catch(i){Rs.Logger.error(i)}},this.setSurveysForRecorder=function(e){var t=l(e);_c=t},this.getLaunchers=function(){return Ic},this.setLaunchers=function(e){Fc={},Ic=e},this.setTutorials=function(e){Sc=e,Bc={};for(var t=0;t<Sc.length;t++)_i(Sc[t],Pc.get())},this.getTutorials=function(){return Sc},this.getSiteConfig=function(e){return e&&Bl?Bl:Pc.get()},this.getWalkthrusLabels=function(){var e=Ss(Pc.get().Settings,"labels",null);return e&&1==e.useLabels?Nc:null},this.getSurveys=function(){return _c},this.setSiteConfig=function(e){return Pc.set(e),Rs.setCustomCssProp(Pc.get().CustomCss),fs(null)!==!1||Mf("loadNoStyle")?void si():void _makeTutorial.removeWalkMe("set custom css failed")},Rs.setSiteConfigForEditor=function(e){var t=l(e);Rs.setSiteConfig(t)},Rs.setAllLauncherCustomImagesForEditor=function(e){var t=l(e);t&&t.length&&(Cc=t)},Rs.getBalloonDrawer=function(e){var t,n=ui(e),r={lib:Rs,resourceManager:Rs.ResourceManager,logger:Rs.Logger,balloonSettings:n};return t="v3"==n.BalloonVersion?new Qe(r):new We(r)},this.resetBalloonDrawer=function(){Ql=null},this.appendWalkMeConfigData=function(e){Dc=Dc.concat(e.Experiments)},this.appendDataPackage=function(e,t){var n=e;void 0===e.Tutorials&&(n={Tutorials:e,SiteConfig:t});var r=n.Tutorials,i=n.SiteConfig,o=Hi(n.Tasks,[]),a=Hi(n.Labels,[]),s=Hi(n.Surveys,[]),u=Hi(n.Launchers,[]),l=(Hi(n.Tooltips,[]),Hi(n.LauncherCustomImages,[])),c=Hi(n.Shuttles,[]),d=Hi(n.Contents,[]),f=Hi(n.Categories,[]),p=Hi(n.Collections,[]),g=Hi(n.ShoutOuts,[]),h=Hi(n.Bars,[]),m=Hi(n.ConditionBlocks,[]),v=Hi(n.Tags,[]),y=Hi(n.BusinessSolutions,[]);Sd=Hi(n.ExtraData,{isOldDataFile:!0}),Rs.setUserGuid(n.UserGuid),Gs.isNewLanguage()&&(Sc=[],Pc.set([]),Nc=[],Tc=[],Ic=[],Cc=[],_tooltips=[],kc=[],Ec=[],_c=[],Lc=[],jc=[],xc=[],Ac=[],Oc=[],Mc=[]),ni(i,r),Cc=Cc.concat(l),i&&0==Pc.get().length&&(Bl=i,Rs.setSiteConfig(i));for(var w=0;w<r.length;w++)_i(r[w],i),Qc[r[w].TutorialId]={siteConfig:i,isPackageHidden:Gs.isNextDataPackageIsHidden()},r[w].userGuid=bd;for(var w=0;w<o.length;w++)Ai(o[w]);li(u,bd),li(d,bd),li(s,bd),li(c,bd),li(g,bd),li(h,bd),Sc=Sc.concat(r),Nc=Nc.concat(a),Tc=Tc.concat(o),Ic=Ic.concat(u),kc=kc.concat(c),Ec=Ec.concat(d),_c=_c.concat(s),Lc=Lc.concat(f),jc=jc.concat(p),xc=xc.concat(g),Ac=Ac.concat(h),Oc=Oc.concat(m),Mc=Mc.concat(v),Rc=Rc.concat(y),Us.get("UITemplates").concat(n.UITemplates),Us.get("UIVariations").concat(n.UIVariations)},Rs.appendTemplates=function(e){Us.get("UITemplates").concat(e)},Rs.appendVariations=function(e){Us.get("UIVariations").concat(e)},Rs.createUiComponent=function(e,t){return Us.get("UIComponentsFactory").get(e,t)},this.generateVariation=function(e){return Us.get("UIVariations").get(e)},this.generateTemplate=function(e,t,n,r,i,o){var a=Us.get("TemplatesFactory");a.addResources(e,t,n,function(){var o=a.get(e,t,n,r);i&&i(o)},o)},this.getBaseVariation=function(e,t){return Us.get("UITemplates").get(e,t).Css},this.isTutorialPackageHidden=function(e){var t=Qc[e.TutorialId];return t?t.isPackageHidden:!1},this.setRecorderServer=function(e){Uc.set(e);var t=Gs.getPlayerServer();null!==t&&void 0!==t&&Uc.set(t)},this.setPetaServerName=function(e){void 0!=e&&(Vc=e)},this.getPlayerServer=function(){return Uc.get()},this.setCdnServer=function(e){Wc=e},this.setIsInEditor=function(e){Ef=e},this.getIsInEditor=function(e){return Ef},this.setAnalyticsCustomFields=function(e,t){return _f[e]=t,!0},this.setAnalyticsProperties=function(e,t){Us.get("AnalyticsPropertiesManager").setPredefinedPropertyValue(e,t)},this.getSupportedLanguages=function(){return Zl.getMenuLanguages()},this.getCurrentLanguage=function(){return Zl.getCurrentLanguage()},this.changeLanguage=function(e,t){Gs.changeLanguage(e,function(n){n&&Qd("languageChanged",{language:e}),t&&t(n)})},this.tempClearUserCompletedTasks=function(e,t){od.tempClearUserCompletedTasks(e,t)},this.loadTasks=function(e,t){od.loadTasks(e,t)},this.getApiTasks=function(e){return od.getApiTasks(e)},this.getWalkmeOOP=function(){return o},Rs.launchDebuggerForEditor=function(e,t){var n=l(e);nd.launchDebugger(n,t)},Rs.loadDebuggerForEditor=function(){nd.loadDebuggerForEditor()},Rs.launchDebugger=function(e,t){nd.isDebuggerEnalbled()&&nd.launchDebugger(e,t)},Rs.launchLogger=function(){rd.isLoggerActivated()||rd.launchLogger()},Rs.closeDebugger=function(){nd&&nd.closeDebugger()},Rs.clearDebuggerState=function(){nd&&nd.clearDebuggerState()},Rs.addTimeStamp=fi,Rs.loadTestMe=function(e){var t,n;t||(t=di()+"testme/"),n||(n="walkme_testme_"+ci()+".js"),Me.addScript(t+n,e)},Rs.searchTermChangedOnWidget=function(e){"walkmetracker"!=e||Fo()?"walkmelogger"!=e||Bo()||Rs.launchLogger():Rs.launchDebugger()},this.widgetLoaded=function(e){fi("widgetEndLoad"),e&&e.bind("on-activate",function(){Rs.getUiUtils().fixFlash()})},this.triangleLoaded=function(e){this.dataFinishedLoading(e)};var Rf;this.dataFinishedLoading=function(e,t){var n=Rs.Logger.timer("lib init");if(Kl.removeIFrameByFeature(),!pi()){if(Mf("tagBody")&&Rs.getCommonUtils().setBodyUtils(Us.get("TagBodyUtils")),window.walkme_data_finished_loading_callback&&walkme_data_finished_loading_callback(),void 0===Rf&&(Rf=window.onbeforeunload,window.onbeforeunload=function(e){return Bi(e),Rf?Rf(e):void 0}),!Li())return Rs.removeWalkMe("initWalkMeClassesFailed"),Rs.initFailed=!0,!1;var r=Us.get("EndUserDataConverter");r.convertData();var i=wi(e,t);return n.stop(),Zc.init(i)===!1?(Rs.removeWalkMe("storageManagerInitFailed"),!1):!0}},Rs.rememberTestMeIsOn=function(){tc.saveData(su,1,uu)},this.initWalkmeClassesForCustomizePlayer=function(){Jc=Gl.byType(Au.STORAGE_TYPE.Cookie),Zc=Jc},Us.register("ServerDataSenderManagerParams").asInstance({defaultDataStorageLifeSeconds:Cf,dateSenderLogFeature:"serverDataSender"}),Us.register("GoalsManagerParams").asInstance({checkInterval:pc}),Us.register("PlayManagerParams").asInstance({checkIfExists:Zi,getTutorialByIndex:wo,isStepPlayable:function(e,t){var n=Zi(e,t,void 0,void 0,void 0,yu.Normal);return n==t}}),Us.register("CrossDomainManager").dependencies("FeaturesManager,ClientStorageManager").initialize(!1).asFunction(function(e,t){var n;return n=e.isFeatureEnabled("po_frames")||e.isFeatureEnabled("passOwnership")?"FramedOwnershipManager":e.isFeatureEnabled("po_tabs")?"TabbedOwnershipManager":"PassOwnershipManager",Us.entry(n).args({storageManager:t,errorHandler:Rs.Logger.error,userGuid:bd,owner:window,terminateTutorialFunction:function(){Pf=[],Rs.releaseBalloons(),Ja(),Wd("WalkthruAborted")},restoreStateFunc:ha,isFeatureEnabled:Mf,allUserGuids:Xr(),topWindow:top,isPlayMode:ei(),resumeAfterUnloadFunc:Ui,getStepFunc:Uo,peekNextCookieStepFunc:Vi}),Us.get(n)}),Us.register("DeployablesManagerFactory").asCtor(Ri),Rs.startContentById=function(e,t,n){if(!ud)return!1;var r={type:void 0==t?this.getPlayInitiatorEnum().NONE:t};return n&&(r.objectId=n),ud.activateById(e,r),!0},Rs.startSurveyById=function(e,t){return hd?(t=t||{type:Au.STEP_PLAY_INITIATOR_ENUM.NONE},hd.activateById(e,t)):!1},Rs.getDeployablesManager=function(e){return wd[e]},Rs.getUiDataProvider=function(){return Wn},Rs.auditClick=function(e,t,n){t=lp(t)?t:-1;var r,i;n?(r=n.type,i=n.hasOwnProperty("objectId")?n.objectId:n.id):r=this.getPlayInitiatorEnum().NONE,Ed&&e&&Ed.SendClickAudit(e,t,r,i)},Rs.isFeatureActive=function(e){return Mf(e)},Rs.getWmAjax=function(){return Od},Rs.getClickAuditManager=function(){return Ed},Rs.userSawWalkMe=function(){if(!Zr()&&!ei()&&!Ef){Yc.reportEndUser(void 0,!0);try{Us.get("WalkmeVisibleReporter").report({isPreviewMode:Zr(),isPlayMode:ei(),isInEditor:Ef})}catch(e){Rs.Logger.error(e,"Failed while reporting walkme visible")}}},Rs.getServerDataSenderManager=function(){return Md},Rs.getEnvId=os,this.getEndUserId=function(){var e=!Id.isAbTestingEnabled();return zc.getEndUserGuid(e)},this.playerCreationComplete=function(e){if(!e){var t=mtjQuery("#mt-menu-closed, #walkme-menu-closed"),n={config:Pc.get(),player:t},r=Rs.getCommonUtils().attentionGrabberClass(n);r.setupAttenGrab()}},this.destroyAll=function(e){Za("destroyAll - begin",1),Qc={},Ud.releaseAllTimeouts(),kf=!1,ol.cleanResources(),Wi(),Ul&&Ul.cleanResources(),Rs.releaseAllElements(function(){Za("destroyAll - releaseAllElements finished",1);var t=Wc.replace("http://","").replace("https://","");mtjQuery("script[src*='"+t+"']").not("script[src*='maketutorial_lib']").not("[src*='jquery']").not("[src*='wmjQuery']").remove(),mtjQuery(".mt-to-destroy, .walkme-to-destroy").remove(),Qi(".mt-to-destroy, .walkme-to-destroy"),window._walkmePlayer&&window._walkmePlayer.destroyWalkMePlayer&&window._walkmePlayer.destroyWalkMePlayer(),window.walkmeWidget&&window.walkmeWidget.destroyWalkMePlayer&&window.walkmeWidget.destroyWalkMePlayer(),e&&(Za("destroyAll - calling user callback",1),e())})},this.removeWalkMe=function(e){Za(p("removeWalkMe called with reason {0}",e)),window._walkmeInternals&&(window._walkmeInternals.removeWalkMeReason=e);try{Us.get("EventSenderDisabler").disable()}catch(t){}try{window.walkme_remove_walkme_callback&&walkme_remove_walkme_callback(e)}catch(t){}Rs.destroyAll(function(){Ud.clearGlobalTimeouts(),Dd&&Dd.stop(),Us.get("ResourceManager").emptyStyleSheets(),Us.get("IFramesManager").releaseEvents(),window._walkMe=window._makeTutorial=window.MakeTutorialAPI=window.WalkMeAPI=window.WalkMeDataClass=window.WalkmeWidget=window.WalkmeSnippet=void 0,window.wmPreviewSnippet=void 0,window.wmSnippet=void 0,window.walkme_lib_in_dev=void 0,window.walkme_lib_notify_ServerName=void 0,window.walkme_lib_upload_date=void 0,window.walkme_lib_uploader=void 0,window.walkme_lib_version=void 0;var e=Wc.replace("http://","").replace("https://","");wmjQuery("script[src*='"+e+"']").remove(),wmjQuery("script[src*='maketutorial']").remove(),wmjQuery("script[src*='wmjQuery']").remove(),wmjQuery("link[id^='mt-css']").remove(),mt_cdn_server_name=void 0,mt_get_user_settings_url=void 0;Is();wmjQuery(".walkme-to-remove").remove(),Qi(".walkme-to-remove "),_.removeScrollAndResizeEvents();var t=Us.get("UIChangeTracker");t&&(t.stop(),t=null),wmjQuery=mtjQuery=void 0})};var jf=function(){return window.location.href},Ff=function(){return document.referrer};this.startNewTutorial=function(e,t,n,r){try{Za("startNewTutorial : Index = "+e+". From Step = "+t+" testMode: "+n),Rs.getUiUtils().fixFlash(),Yi(e);var i=!1;if(Hc._currentPlayInitiator=r,t=Hi(t,0),n=Hi(n,!1),!n){if(!Dd.walkthruStarted(e,t))return!0;$i(!0,!0),Dd.enabled()||ca(),ms()}Qd("StartNewWt",Sc[e]);var o=[],a=t;t=Nd.findFirstStep(e,t,o);var s=0==t;if(t>0&&!n){var u=os();u==Au.SOURCES.play||u==Au.SOURCES.preview?Ki(e,a,t,Au.STEP_STATUS.SkippedStartedFromBiggerStep):(i=!0,zi(e,0,t,Au.STEP_STATUS.SkippedStartedFromBiggerStep))}else 0==t&&(t=wa(e),t>0&&!n&&(i=!0,zi(e,0,t,Au.STEP_STATUS.SkippedByTutorialCondition)));if(!ba(e,!1)&&0>t){if(n)return!1;var l=qi(e),c=Us.get("AuditSafeStartManager"),d=Sc[e];if(Hc.createPlayGuidIfNeeded(d.TutorialId),null!=l&&1==l.enabled){var f,p=!1,g=l.url;1==l.autoRedirect?(f=Nl.AutoRedirect,p=!0):Ta(g,!1)?(f=Nl.PopupShown,oo(g,e)):(f=Nl.FailOnUrl,ao()),lo(f,Sc[e]);for(var h=0;h<o.length;h++)Hc.auditStep(Sc[e],Sc[e].Steps[o[h].stepIndex],o[h].stepStatus,!1);p&&co(g,Nl.AutoRedirect,e)}else{for(var h=0;h<o.length;h++){var m=o[h].stepStatus==Au.STEP_STATUS.SupposedToShow;Hc.auditStep(Sc[e],Sc[e].Steps[o[h].stepIndex],o[h].stepStatus,m),Ki(e,o[h].stepIndex,o[h].stepIndex+1,o[h].stepStatus)}var v={tutorialId:d.TutorialId,tutorialName:d.Name,playGuid:Hc._currentPlayGUID,playInitiator:Hc._currentPlayInitiator,status:Nl.ErrorShown};c.send(v),Rs.showFirstStepNotAvailablePopup(Sc[e]),$i()}}else{if(n)return!0;Ji(e,t,s,i?Hc._currentPlayGUID:void 0,r,a)}}catch(y){return Rs.Logger.error(y),!1}return Qd("WtHasGuid",Sc[e],{playGuid:Hc._currentPlayGUID}),Qd("WalkthruGuid",{playGuid:Hc._currentPlayGUID}),!0},this.stopTutorial=function(e,t){Qd("TutorialStopped",Gf(Yd)),Ja(),Rs.releaseBalloons(),qd=Dl.NOT_RUNNING;var n=Yd;if(Yd=-1,e||ua(),Dd&&Dd.enabled()&&Dd.reset(),!t){var r=sa();r&&hd.handleSurveyPlayThroughWalkthru(r,_u.WalkThruExited,n)}},this.postWelcomeStep=function(e){-1==Yd&&ba(e,!0)||Rs.executeTutorialNextStep()};var Bf=[];Rs.showCantPlayBalloon=function(e,t,n){Ad.showCantPlayBalloon(e,t,n)},Rs.showFirstStepNotAvailablePopup=function(e){Ad.showFirstStepNotAvailablePopup(e)};var Uf=function(e,t,n,r,i,o,a){Ja(),Rs.releaseBalloons(),qd=Dl.RUNNING,zd=e,Yd=t-1,Hc._currentPlayGUID=n,Hc._currentPlayInitiator=r,xf=i,Af=a,Pf=o,ua()};this.lib_error=function(e,t){Rs.Logger.error(e,t)},this.executeTutorialNextStep=function(){if(ed.isLoadingFrames())return void Ud.playSetTimeout(Rs.executeTutorialNextStep,200);if(kf)return void Za("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);if(nf)return nf=!1,Za("executeTutorialNextStep: waiting for other window",5),Za("Waiting for other window..."),void mo();if(ef)return void Za("executeTutorialNextStep: not executing, dontContinueTutorial=true",5);if(sa().Steps.length-1==Yd)return void Rs.tutorialFinished();kf=!0;var e=Co();Za(p("Next step including split is: {0} seconds",e),5,zs),Ud.playSetTimeout(function(){function e(){kf=!1,Rs.executeCurrentStep()}Yd++,Yd>0&&!vo(Gf(Yd-1).End,hu.NOTHING)?Rs.releaseBalloons(e):e()},1e3*e)},this.executeCurrentStep=function(){var e=Gf(Yd);Ld.wrapSession(function(){$f(e)})};var Gf=function(e){return sa()&&sa().Steps[e]},Vf=function(){return sa().Steps.length<=Yd+1},Wf=function(e){var t=zf(e);return Sc[t]},Qf=function(e){var t=Ru(e,function(e){return Wf(e).Steps[0]});return t},Hf=function(){return Kd&&Kd.length>0?Kd.pop():null};this.tutorialFinished=function(){Rs.releaseBalloons(),qd=Dl.NOT_RUNNING,ua();var e=Hf(),t={hadSplit:!!e};Wd("WalkthruCompleted",t),Hd("TutorialCompleted",t);var n=sa();Qd("WalkthruCompleted",n,t),od.updateDeployableCompleted(n.TutorialId,Fl.Tutorial),hd.handleSurveyPlayThroughWalkthru(n,_u.WalkThruCompleted,Yd),e?(Qd("switchToWalkthru",Sc[e.tutorialIndex].Id),Qd("BackFromBranch",Sc[e.tutorialIndex]),Uf(e.tutorialIndex,e.stepIndex,e.playGuid,e.playInitiator,e.stepPlayHistory,e.stepPlayStack,e.stepCompletedHistory),Rs.executeTutorialNextStep()):(Pf=[],Dd.loseOwnership())},this.checkRepeatCookie=function(e,t,n){return Us.get("AutoStartManager").checkRepeatCookie(e,t,n)},this.getLauncherAction=function(e){if(void 0!=Fc[e])return Fc[e];var t=_o(e),n=Ss(t.Settings,"action",null);return n?(Fc[e]=Us.get("ActionsFactory").get(n.actionType,n.arguments,Ll.LAUNCHER,t),Fc[e]):(Za("No action core. aborting..."),null)};var $f=function(e){function t(e){Za(e,5,zs)}var n=Me.getTimer(t),r={};Fs!=e.Id&&js++,e.playNumber=js,Fs=e.Id,Qd("StepPlayNum",{playNum:js});var i=p("Processing step # {0} . Step title: {1}. Walkthru: {2}",e.StepIndex+1,e.StepTitle,Sc[zd].Name);if(Za(i),Qd("NewStepStarted",e),Mf("highPerf")||ki(),qd!=Dl.WAITING_FOR_STICKY_ELEMENT&&qd!=Dl.WAITING_FOR_ELEMENT&&qd!=Dl.WAITING_FOR_CONDITION){var o=Xl.isActionStep(e)?Au.STEP_STATUS.Shown:Au.STEP_STATUS.SupposedToShow;Hc.auditStep(sa(),e,o)}var a=Ro(e),s=jo(e);if(!s&&(a==jl.PLAY_CONDITION||a==jl.BOTH&&qd!=Dl.WAITING_FOR_STICKY_ELEMENT))return Za("Play step condition is false. Skipping step."),Hc.auditStep(sa(),e,Au.STEP_STATUS.SkippedByCondition),Qd("StepWasSkipped",e),void Rs.executeTutorialNextStep();if(ko(e)){var u=Zi(zd,e.StepIndex,0,1,void 0,yu.Normal);if(-1==u)return Za("Keep looking for element after popup."),Qd("LookingForElement",e,{playGUID:Hc._currentPlayGUID}),qd=Dl.WAITING_FOR_ELEMENT,Ud.playSetTimeout(function(){_makeTutorial.executeCurrentStep()},500),void ua();if(-2==u||-5==u){var l="Play condition isn't met, skipping the popup.";return-5==u&&(l="Loop detecetd"),Za(l),Hc.auditStep(sa(),e,Au.STEP_STATUS.SkippedNotFound),Qd("StepWasSkipped",e),void Rs.executeTutorialNextStep()}}var c=void 0;if(s||qd!=Dl.WAITING_FOR_STICKY_ELEMENT){var d={},f=Me.getTimer(t);c=Rs.findElement(e,null,d,"Step - Play Condition",Me.getStepTrackData(e,Sc[zd])),r.FETime=f("Done looking for sticky step named "+(e.StepTitle||e.StepText)+" with id "+Fs),e.Score=d.score}else Za("Sticky PlayCondition isn't met."),c=!1;if(c){if(c&&c!==!0){Za("Element found:"),Za(c);var g,h=Do(e,c);h&&(c=h.elements,g=h.parentElement)}Qd("ElementFound",e),Wd("BeforeNewStepShown"),Hd("BeforeNewStepShown");var m=Pf[Pf.length-1]?qf(Pf[Pf.length-1]).StepIndex:null;if(ji(e.Id),Ss(e.Settings,"fake",!1))return Za("This is a fake step. Continue to next step."),ua(),Hc.auditStep(sa(),e,Au.STEP_STATUS.FakeFound),Qd("StepIsFaked",e),void Rs.executeTutorialNextStep();if(qd=Dl.RUNNING,Xl.isActionStep(e))return void Ud.playSetTimeout(function(){xo(e).doAction(),Qd("StepPerforming",e)},100);var v=td.handle(c,e,Yd,zd,m),y=v.executeNextStep,w=v.clearElementEventsFuncs,b=v.buttons;Ss(e.Settings,"waitOtherWindow",!1)&&(nf=!0),r.logicTime=n("Finished pre-balloon logic");var S=e.StepTitle,T=e.StepText,I=new Fe({element:c,parentElement:g,forceEmbedBalloonInIframe:!1,positionHelper:_,dontShowIoBalloon:!Mf("multSpot")&&Ao(e),isFirstStep:No(),stepSettings:e.Settings,text:{title:S,content:T,subText:Lo()},end:e.End,position:e.Position,buttons:{next:b.nextButton,done:b.doneButton,back:b.backButtonStepIndex>=0},data:{stepId:e.Id,tutorialId:e.TutorialId,type:e.Type},configuration:e.Configuration,logger:Rs.Logger,drawer:Rs.getBalloonDrawer(e.Configuration),siteConfig:Rs.getSiteConfig()});if(I.onDestroy(function(){Qo(c,elementEvents)}),I.setReleaseEvents(w),Jd.push(I),ua(),Hc.auditStep(sa(),e,Au.STEP_STATUS.Shown),Mf("jawsAccessibility")){var C=S||T;S&&T&&(C+=". "+T),C&&c.attr("alt",C)}I.Show(!0,function(t,n){wmjQuery.extend(!0,r,t),Hc.auditBalloonDrawToPeta(e,Au.STEP_STATUS.Shown,r);var i={Element:c,Balloon:n};Qd("NewStepShown",e,i),Qd("StepPerforming",e,i),Wd("NewStepShown",i),Hd("NewStepShown",i),I.SetTimeoutOn(),y&&(Ca(),Rs.executeTutorialNextStep())}),Ss(e.Settings,"isSelfExecuting",!1)&&Po(e,c)}else Za("Element not found."),Qd("ElementNotFound",e,{playGUID:Hc._currentPlayGUID}),qd==Dl.WAITING_FOR_STICKY_ELEMENT?(Za("Step was sticky. Keep looking for the element."),Qd("StickyStepWaiting",e),qd=Dl.WAITING_FOR_STICKY_ELEMENT,Ud.playSetTimeout(function(){_makeTutorial.executeCurrentStep()},500),ua()):e.IsSkippable||Ss(e.Settings,"skipNotExists",!1)?(Xl.isActionStep(e)?(Za("Action step isn't valid. Skipping to next step."),Hc.auditStep(sa(),e,Au.STEP_STATUS.NonValidActionStep)):(Za("Skippable step. Skip to next step."),Hc.auditStep(sa(),e,Au.STEP_STATUS.SkippedNotFound)),Qd("StepWasSkipped",e),Rs.executeTutorialNextStep()):(Za("Keep looking for the element."),Qd("LookingForElement",e,{playGUID:Hc._currentPlayGUID}),qd=Dl.WAITING_FOR_ELEMENT,Ud.playSetTimeout(function(){_makeTutorial.executeCurrentStep()},500),ua())};_walkmeInternals.bind=function(e,t){wmjQuery(_walkmeInternals).bind(e,t)},_walkmeInternals.unbind=function(e,t){wmjQuery(_walkmeInternals).unbind(e,t)};var zf=function(e){for(var t=-1,n=0;n<Sc.length;n++)if(Sc[n].TutorialId==e){t=n;break}return t},Yf=function(e,t){var n=Uo(e,t);return n?n.StepIndex:-1},qf=function(e,t){if(t)return Vo(e,t);for(var n=0;n<Sc.length;n++){var r=Vo(e,Sc[n]);if(r)return r}return null};this.resumeSplit=function(e){Ld.wrapSession(function(){try{var t=1e3;e=e||t;var n,r,i=0;if(1==Xd.length){if(r=Xd[0],void 0!=Rd){var o=Yf(Rd,r);-1!=o&&(i=o),Za(p("Resuming split, walkthru id: {0}, step index: {1}",r,i))}}else r=So(Xd);r?(Qd("switchToWalkthru",r),n=zf(r),Ud.playSetTimeout(function(){var e={type:Ll.BRANCHING,objectId:Gf(Yd).Id};Ji(n,i,!1,void 0,e)},e),ua()):(Za("Try again in "+t+"ms."),Ud.playSetTimeout(function(){_makeTutorial.resumeSplit()},t))}catch(a){Rs.Logger.error(a)}})},Rs.forceSplit=Wo,this.showCapturedLauncher=function(e,t,n){var r=mtjQuery("<div class='mock-element'>").css({position:"absolute",top:t.top+"px",left:t.left+"px",width:t.width+"px",
height:t.height+"px"}).appendTo("body");Ic.push(e);var i=new $e({element:r,settings:e.Settings,html:e.html,lib:Rs,position:e.Position,launcherId:e.Id,launcherName:e.Name,isCapturingMode:!0,positionHelper:_,cdnServer:window.wmScreenshotCdnServer||Wc,clickAuditManager:Ed});e.drawable=i,i.show(function(){if(n){var e="walkme-launcher-id-"+i.getId(),t=wmjQuery("."+e);n(t)}})},this.showCapturedBalloon=function(e,t,n){e.Settings.scroll=1,xi(e,0,Pc.get());var r=mtjQuery("<div class='mock-element'>").css({position:"absolute",top:t.top+"px",left:t.left+"px",width:t.width+"px",height:t.height+"px"}).appendTo("body"),i=new Fe({element:r,parentElement:null,forceEmbedBalloonInIframe:!1,positionHelper:_,stepSettings:e.Settings,text:{title:e.StepTitle,content:e.StepText,subText:""},position:e.Position,data:{stepId:e.Id,type:e.Type},configuration:e.Configuration,logger:Rs.Logger,drawer:Rs.getBalloonDrawer(e.Configuration),isViewStep:!0,siteConfig:Rs.getSiteConfig()});return Jd.push(i),i.Show(!0,function(){n&&n(i.getBalloonDiv())}),i},this.showStepForRecorder=function(e,t){var n=l(e);xi(n,0,Pc.get());var r=Rs.findElement(n,null,null,'Show Step for Editor "'+(n.StepTitle||n.StepText)+'"');if(Za("element:",5),Za(r,5),!r)return!1;var i,o=Do(n,r);o&&(r=o.elements,i=o.parentElement);var a=new Fe({element:r,parentElement:i,forceEmbedBalloonInIframe:t,positionHelper:_,stepSettings:n.Settings,text:{title:n.StepTitle,content:n.StepText,subText:""},position:n.Position,data:{stepId:n.Id,type:n.Type},configuration:n.Configuration,logger:Rs.Logger,drawer:Rs.getBalloonDrawer(n.Configuration),isViewStep:!0,siteConfig:Rs.getSiteConfig()});return Jd.push(a),a.Show(!0,function(){a.SetTimeoutOn()}),a},this.elementExistsForRecorder=function(e){try{var t=l(e),n=Rs.findElement(t);if(n)return!0}catch(r){Rs.Logger.error(r)}return!1},this.showAllLaunchers=function(){Rs.isWalkMeVisible()&&Ld.wrapSession(function(){function e(){try{n()}catch(e){}}function t(n,o){i++,i>=r&&(e(),Ho(!1,t))}try{if(ed.isLoadingFrames())return void Ud.libSetTimeout(Rs.showAllLaunchers,200);var n,r=0,i=0;try{window._walkmeInternals&&(n=Rs.profilerAPI.startProfile("showAllLaunchers"),n&&Ho(!0,t))}catch(o){Ho(!1,t)}for(var a=0;a<Ic.length;a++){var s=Ic[a],u=Ko(s);u&&r++,Za(p("willDrawLauncher={0} for launcher with id {1}",u,s.Id),1,Ks),$o(s,u)}n&&0==r&&(e(),Ho(!1,t))}catch(l){Rs.Logger.error(l)}})},Rs.showLauncherForSticky=function(e){return e.actionInProgress=!0,e.element=null,ta(e)},this.updateLauncherOffset=function(e,t){if(Ic&&1==Ic.length){var n=Ic[0];n.drawable.updateOffset(e,t)}},this.viewLauncherForRecorder=function(e,t,n){try{var r=l(e);Ic.push(r);var i=Rs.findElement(r.IdentifySettings);if(!i)return void n();fs(i);var o=new $e({element:i,settings:r.Settings,lib:Rs,position:r.Position,launcherId:r.Id,launcherName:r.Name,isCapturingMode:!1,positionHelper:_,cdnServer:Wc,clickAuditManager:Ed});r.drawable=o,r.drawable.evaluator=r.evaluator;var a=function(){o.show(function(e){o.setTimeoutOn(),n&&n(!1,e)})};t?aa(r,a):a()}catch(s){Rs.Logger.error(s)}},this.showCapturedLauncherForEditor=function(e){try{var t=l(e);Ic.push(t);var n={score:-1},r=Rs.findElement(t.IdentifySettings,null,n);if(!r)return!1;var i=new $e({element:r,settings:t.Settings,html:t.html,lib:Rs,position:t.Position,launcherId:t.Id,launcherName:t.Name,isCapturingMode:!0,positionHelper:_,cdnServer:Wc,clickAuditManager:Ed,useDefaultHighlightSettings:!0});t.drawable=i,i.show(function(e){if(!Mf("dontStopButtonPropagation")){var t=wmjQuery(".walkme-capture-launcher-walkmeBottomPanel");t.on("mousedown mouseup click",function(e){e.stopImmediatePropagation()})}var i=e[0].ownerDocument;(i.CaptureLauncherHandler||window.top.document.CaptureLauncherHandler).postShowLauncher(r,i,n.score)})}catch(o){Rs.Logger.error(o)}},this.showCaptureBallonForEditor=function(e,t,n,r){function i(e){return null==l.getElementById("maketutorial_stepTitle")?void e():void setTimeout(function(){i(e)},20)}xi(e,0,Pc.get());var o={score:-1},a=Rs.findElement(e,null,o);if(!a)return!1;var s,u=Do(e,a);u&&(a=u.elements,s=u.parentElement);var l=Is(null,!0)[0].ownerDocument,c=wmjQuery.extend(e.Configuration,{BalloonBorderWidth:1,ShadowType:0,BalloonVersion:"v3"}),d=new Fe({element:a,parentElement:s,forceEmbedBalloonInIframe:!1,positionHelper:_,fixedSize:{width:t,height:n},innerHtml:e.innerHtml,outterHtml:e.outterHtml,stepSettings:e.Settings,position:e.Position,data:{stepId:e.Id},configuration:e.Configuration,isCaptureBalloon:!0,logger:Rs.Logger,drawer:Rs.getBalloonDrawer(c),siteConfig:Rs.getSiteConfig()});return Jd.push(d),i(function(){d.Show(!0,function(){if(!Mf("dontStopButtonPropagation")){var e=d.getBalloonDiv();e.on("mousedown mouseup click",function(e){e.stopImmediatePropagation()})}l.CaptureBalloonHandler.postBallonShow(a,l,o.score,r)})}),!0},this.getCurrentTutorial=sa,Rs.getState=function(){return qd},this.canShowTutorialForEditor=function(e){var t=l(e);return Rs.canShowTutorial(t)},this.canShowTutorial=function(e){if(0==e.IsVisible)return!1;for(var t=va(e,Ml.URL),n=!1,r=0;r<t.length;r++)if(Kf(e,t[r])){n=!0;break}if(t.length>0&&!n)return!1;var i=Ss(e.Settings,"DOCTEnabled",0);if(1==i){var o=Ss(e.Settings,"DOCT","");if(""!=o)try{var a=Us.create("ConditionChecker",{featureName:"Walk-Thru Segmenation",elementName:e.Name,trackEvent:"Tutorial - Can Show Tutorial - Segmentation",trackData:Me.getTrackData(e)});a.evaluateAsync(o);var s=a.getValue(!0);if(Qd("WtConditionEvaluated",e),!s)return Qd("CannotShowWt",e),!1}catch(u){}}if(ya(e)){if(0==e.Steps.length)return!1;var l=e.Steps[0];return Rs.findElement(l,null,null,'First Step Condition for "'+(l.StepTitle||l.StepText)+', Walk-Thru "'+e.Name+'"')}return Qd("CanShowWt",e),!0},this.evaluateCondition=function(e){var t=new nt;return e=e.replace(/&quot;/gi,'"'),e=e.replace(/&apos;/gi,"'"),e=e.replace(/&#39;/gi,"'"),e=e.replace(/&amp;/gi,"&"),t.setExpression(e),t.evaluate()},this.evaluateConditionTree=function(e){var t=qc.evaluate(e);return t};var Kf=function(e,t){switch(t.Type){case Ml.URL:return Xf(t.Content)?!0:!1;default:Rs.Logger.error(new Error("Invalid condition type: "+t.Type))}};this.runTutorialsActionConditions=function(){};var Xf=function(e){var t,n,r="regexp:";if(ls(e,r)){e=e.substr(r.length),n=jf();try{t=n.match(e)}catch(i){return!1}}else{e=e.replace(new RegExp("[*]","g"),".*"),e=e.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),n=Zf(jf()),e=Zf(e),n=n.toLowerCase(),e=e.toLowerCase();try{t=n.match(e)}catch(i){return!1}}return null==t?!1:t[0]==n},Jf=function(e){return 0==e.length?e:"/"==e.charAt(0)?window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+e:e},Zf=function(e){return e=e.replace("http://",""),e=e.replace("https://",""),e=e.replace("www.",""),"/"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e};this.checkShowOnlyInUrl=function(){var e=!0,t=Pc.get(),n=Ss(t.Settings,xl,null);return n?(e=Rs.evaluateConditionTree(n),Qd("WidgetConditionEvaluated",Pc.get())):null!=t.ShowInUrl&&0!=t.ShowInUrl.length&&(e=Xf(t.ShowInUrl)),e},this.FixConfiguration=function(e){return e.BalloonColor2=lp(e.BalloonColor2)?e.BalloonColor2:e.Color,e.ButtonBgColor2=lp(e.ButtonBgColor2)?e.ButtonBgColor2:e.ButtonBgColor,e.BalloonBorderWidth=lp(e.BalloonBorderWidth)?parseInt(e.BalloonBorderWidth):1,e.BalloonButtonRadius=lp(e.BalloonButtonRadius)?parseInt(e.BalloonButtonRadius):15,e.ButtonShadowWidth=lp(e.ButtonShadowWidth)?parseInt(e.ButtonShadowWidth):0,e.BalloonRadius=lp(e.BalloonRadius)?parseInt(e.BalloonRadius):15,e.FooterTextColor=lp(e.FooterTextColor)?e.FooterTextColor:e.HeaderColor,e},Rs.bindBBCodeEvents=function(e,t,n){mtjQuery(".walkme-action-start-wt",e).each(function(e){mtjQuery(this).click(function(e){var r=parseInt(mtjQuery(this).attr("data-walkthru-id"));Qd("switchToWalkthru",r),WalkMeAPI.startWalkthruById({id:r,fromStep:0,playInitiator:Aa(n)}),t&&t()})})};var ep=function(e,t,n){try{var r=Me.getBody(t),i=t.documentElement,o=r.scrollTop||i.scrollTop,a=r.scrollLeft||i.scrollLeft,s=Ua(r,n);return o-=s.top,a-=s.left,{top:Math.round(o),left:Math.round(a)}}catch(u){Rs.Logger.error(u)}};this.getBodyInheritedMargin=function(){return _.getBodyInheritedMargin()};var tp=function(e){var t=Me.getBody(e),n=t.scrollTop?t.scrollTop:e.documentElement.scrollTop,r=t.scrollLeft?t.scrollLeft:e.documentElement.scrollLeft;return{Top:n,Left:r}};this.decideWhereToPopForCaptureBalloon=function(e,t,n,r,i,o){if(o){var a=Do(o,e);a&&(e=a.elements)}var s=wmjQuery(Pc.get().BalloonSettings,{BalloonVersion:i});return Rs.getBalloonDrawer(s).decideWhereToPopForCaptureBalloon(e,t,n,r)};var np=function(e){var t=document;try{if(e.data("iframe")){t=e.data("iframe")[0];var n=t.contentWindow?t.contentWindow.document:null;t=t.contentDocument||n}}catch(r){}return t},rp=function(e,t){e.css("position","absolute"),e.css("z-index",t),e.addClass("SkipThisFixedPosition")},ip=function(e,t){e.css("background-color","red"),rp(e,t),e.css("display","inline")},op=function(e,t,n,r,i,o,a,s){return a>=n&&e>=i&&r>=s&&o>=t},ap=function Lp(e,t){var n=e.data("iframe");return t||(t=[]),n&&(t.push(n),Lp(n,t)),t},sp=function(e){var t;t=e.data("iframe")?mtjQuery(e.data("iframe")):mtjQuery(window);var n=np(e);return t.left=function(){return tp(n).Left},t.top=function(){return tp(n).Top},t};this.mt_log=function(e){Za(e,5)};var m=function(e){return"boolean"==typeof e?!1:!isNaN(e-0)},up=function(){var e=Us.get("GuidGenerator");return e.generateGuid()};Us.register("GenerateGuidFunc").asInstance(up),Us.register("GetAuditSourceFunc").asInstance(os),this.setAuditSource=function(e){var t=Au.SOURCES[e],n=void 0!=t?t:parseInt(e);Jl.set(n)},this.generateNewPlayGuid=function(e){var t=up();return t=(new Date).getTime()+"-"+e+"-"+t},this.generateNewGuid=function(e){return up()},this.sendWidgetOpenLogToServer=function(){return rs()?!0:void Ed.SendWidgetOpen({})},this.sendSearchResultClickedToServer=function(e,t,n,r,i,o){if(!Mf("noAudit")){var a=Rs.getPlayerServer(),s=Od.execute({url:a+"/Search/SearchResultClicked",dataType:"jsonp",data:{userGuid:e,searchGuid:t,resultSearchProvider:n,selectedItem:r,permutationId:Rs.getABPermutationId(),endUserGuid:Rs.getEndUserGuid(),source:os()}});s.success(i),s.error(o)}},this.getSearchResultsFromServer=function(e,t,n,r,i){var o=Rs.getPlayerServer(),a=Od.execute({url:o+"/Search/Search",data:{userGuid:e,query:t,permutationId:Rs.getABPermutationId(),endUserGuid:Rs.getEndUserGuid(),source:os(),saveSearch:!i},timeout:yc});return a.success(n),a.error(r),a},this.saveSearchToServer=function(e,t,n,r){if(!Mf("noAudit")){var i=Rs.getPlayerServer(),o=Od.execute({url:i+"/Search/SaveSearch",dataType:"jsonp",data:{userGuid:e,query:t,permutationId:Rs.getABPermutationId(),endUserGuid:Rs.getEndUserGuid(),source:os()},timeout:yc});o.success(n),o.error(r)}},this.sendResultClickedBeforeSearchToServer=function(e,t,n,r,i){var o=Rs.getPlayerServer(),a=Od.execute({url:o+"/Search/ResultClickedBeforeSearch",dataType:"jsonp",data:{userGuid:t,searchQuery:e,selectedItem:n,permutationId:Rs.getABPermutationId(),endUserGuid:Rs.getEndUserGuid(),source:os()}});a.success(r),a.error(i)},Rs.getBrowser=function(){return ql.browser.string},Rs.isQuirksMode=function(e){return ql.isQuirksMode(e)};this.getElementStrength=function(e){var t={score:-1},n=l(e);xi(n,0,{BalloonSettings:{}});var r=Rs.findElement(n,null,t);return r?t.score:null},this.findElement=function(e,t,n,r,i){try{var o=Ld.findElement(e,t,n);return o}catch(a){Rs.Logger.error(a)}};var lp=function(e){return null!=e&&void 0!=e},cp=new ds;cp.NumNodeRemove=1e4;var dp=function(e,t,n){var r=t;return gp(e,function(e){r=n(r,e)}),r},fp=function(e,t){return null!=pp(e,t)},pp=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},gp=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},hp=function(e,t){for(var n=new Array,r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},mp=function(e,t,n){var r;if(t)for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n;return-1};Us.register("inArrayFunc").asInstance(mp);var vp=function(e){Rs.redirectPopupOK(e)};this.redirectPopupOK=function(e){ua(),Ud.libSetTimeout(function(){window.location=e},200),ms()},this.redirectPopupCancel=function(){ms()};var yp=void 0,wp=void 0;this.getMarginAutoStyles=function(){return void 0==yp&&(yp=[],gp(document.styleSheets,Ip)),yp};var bp=function(){return void 0==wp&&(wp=[],gp(document.styleSheets,Sp)),wp},Sp=function Op(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?Op(r.styleSheet):Tp(r.style)&&wp.push(r.selectorText)}}catch(i){}},Tp=function(e){var t=e.width;if(t){for(var n="",r=0;r<t.length;r++)isNaN(t[r])||(n+=t[r]);if(n&&parseInt(n)>700&&(-1!=t.indexOf("p")||-1!=t.indexOf("e")||-1!=t.indexOf("m")||-1!=t.indexOf("i")))return!0}return!1},Ip=function Mp(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?Mp(r.styleSheet):Cp(r.style)&&yp.push(r.selectorText)}}catch(i){}},Cp=function(e){if(e){var t=mtjQuery.trim(e.margin),n=mtjQuery.trim(e.marginLeft),r=mtjQuery.trim(e.marginRight),i=ls(t,"0")&&us(t,"auto"),o="auto"==n&&"auto"==r;if(i||o)return!0}return!1},Ep=function(e){var t=mtjQuery(e),n=t.data("mt_isElementFixedWidth");if(1==n)return!0;if(0==n)return!1;var r=xp(e);return t.data("mt_isElementFixedWidth",r),r},kp=function(e){var t=mtjQuery(e),n=t.data("mt_isElementMarginAuto");if(1==n)return!0;if(0==n)return!1;var r=Ap(e);return t.data("mt_isElementMarginAuto",r),r},_p=function(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r];if(n=mtjQuery(e).is(mtjQuery(i)))return n}return n},xp=function(e){if(Tp(e.style))return!0;var t=_p(e,bp());return t},Ap=function(e){if(Cp(e.style))return!0;var t=_p(e,Rs.getMarginAutoStyles());return t};this.getCenteredElement=function(e){for(var t=mtjQuery(e).parents(),n=null,r=t.length-1;r>=0;r--)try{var i=Ep(t[r]);if(i){var o=mtjQuery(t[r]),a=mtjQuery(window).width(),s=o.width(),u=o.offset().left,l=a-s;if(l>0&&l/2==u){n=o;break}if(0>l&&l==u){n=o;break}if(kp(o)){n=mtjQuery(o);break}}}catch(c){Za("error-----------------------------------",5),Rs.Logger.error(c)}return n},Rs.injectCustomCSS=function(e,t){fs(e,t)};var Pp;ys.prototype.Generate=function(e){var t=mtjQuery(e.createElement("div"));return t.css("display","block"),t.css("width","0"),t.css("height","0"),t.css("border",this.width+"px solid transparent"),t.css("border-"+ic[this.point_direction]+"-color",this.color),t.css("line-height","0"),t.css("border-"+ic[(this.point_direction+2)%4],"0px"),3==this.point_direction||1==this.point_direction?t.css("border-style","outset solid solid solid"):t.css("border-style","solid outset solid solid"),t},this.parseBBCode=function(e){return $l.parse(e)},this.shouldHandlePageAsFramesets=function(){return!Nf&&ed.isFramesetsPage()},this.isFramesetsPage=function(){return Rs.shouldHandlePageAsFramesets()},Us.register("getTopContainer").asInstance(Is);var Dp=null;this.getBiggestFrame=function(){var e=!1;try{e=!Dp||!ed.isFrameActive(Dp)||mtjQuery("frameset",Dp.contentWindow.document).length>0}catch(t){e=!0}var n=Dp;return e&&(n=ed.findBiggestFrame(),Mf("noBiggestFrameCache")||(Dp=n)),n},this.centerElementInPage=function(e,t,n,r){var i=window;if(Rs.shouldHandlePageAsFramesets()&&(i=Rs.getBiggestFrame().contentWindow),_s())return As(e,t);var o={top:0,left:0};n&&(o.top+=n.top,o.left+=n.left);var a=Ua(e.parent()[0],i);return o.top-=a.top,o.left-=a.left,xs(e,t,mtjQuery(i).scrollLeft(),mtjQuery(i).scrollTop(),mtjQuery(i).width(),mtjQuery(i).height(),o,r)};var Np=function(e,t){for(var n,r={"&amp;":"&","&apos;":"'","&#39;":"'","&quot;":'"',"&lt;":"<","&gt;":">"},i=[],o=0,a=0,s=0;o<e.length;){if(n=!1,"&"==e.charAt(o)){var u=e.substring(o,o+6).toLowerCase(),l=r[u];s=l?6:s;var c=e.substring(o,o+5).toLowerCase(),d=r[c];s=d?5:s;var f=e.substring(o,o+4).toLowerCase(),p=r[f];s=p?4:s;var g=p||d||l,h=-1!=mp(g,t);if(g&&h){var m=e.substring(a,o);i.push(m),i.push(g),o+=s,a=o,n=!0}}n||o++}var v=e.substring(a,o);i.push(v);var y=i.join("");return y};Us.register("DecodeHtmlFunction").asInstance(Np),Us.register("ConditionTreeEvaluator").asCtor(Ds).dependencies("ConditionFunctions"),Us.register("AbTestingManager").asCtor(Ls).dependencies("ClientStorageManager,SiteConfigManager,Lib,Logger,RecorderServerManager"),this.shouldShowWidgetAccordingToAbTesting=function(){return Rs.isWalkMeVisible()},this.isWalkMeVisible=function(){return 0!==Pc.get().ShowWalkMe&&(!Id||Id.shouldShowWidget())},this.completeGoalById=function(e){return Ul.completeGoalById(e)},this.clearTaskGoalsCompletion=function(e){for(var t=e.length-1;t>=0;t--)Os(e[t])},this.getCompletedGoals=function(e,t){return Kc.getCompletedGoals(e,t)},this.setDeployablesJson=function(e,t){try{var n=l(t);wmjQuery.each(n,function(e,t){t.userGuid=bd}),Rs.getDeployablesManager(e).setDeployables(n)}catch(r){Rs.Logger.error(r)}},Rs.getAbtestingGoalsManager=function(){return Pd},Rs.getElementTextArray=function(e){return Us.get("ElementTextExtractor").getElementTextArray(e)},Rs.getFindElementPluginManager=function(){return Us.get("FindElementPluginManager")},Rs.extractPageInfo=function(e){return Us.get("PageScorer").extractPageInfo(e)},Rs.getLayoutMapping=function(){return Us.get("IFramesManager").getMapping()},Rs.wrapFESession=function(e,t){return Ld.wrapSession(e,t)},Rs.callPageScorer=function(e,t,n){return u(Us.get("PageScorer")[e](t,n))},Rs.setPageIdentifierVerbosity=function(e){Mf("pageIdentifier")&&Us.get("PageScorer").verbose(e)},Rs.getEventsTrigger=function(){return Us.get("EventsTrigger")},qr.apply(null,arguments)}function ClassWalkMeAPI(){function e(e,t){for(var r=[],i=0;i<e.length;i++)for(var o=e[i].LinkedTutorials,a=0;a<o.length;a++)r.push(o[a]);for(var s=[],i=0;i<t.length;i++)n(t[i].Id,r)||s.push(t[i]);return s}function t(e,t,r){for(var i=[],o=0;o<e.length;o++)if(n(e[o].Id,t)){var a=mtjQuery.extend(!0,{},e[o]);a.labelId=r,i.push(a)}return i}function n(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function r(e){for(var t=_walkMe.getTutorials(),n=0;n<t.length;n++)if(t[n].TutorialId==e)return n;return-1}function i(e){var t=_walkMe.getConsts();_walkMe.getCommonEvents().sendInternalEvent(t.EVENTS.ApiWasCalled,{initiator:e})}this.LocalSVNRevision="$Rev$";var o=this,a=5,s=100,u=_walkMe.getPlayInitiatorEnum(),l=_walkMe.Logger.wrapCustomerLog("walkmeAPI");this.getPlayInitiatorEnum=function(){return u},this.getWalkthrus=function(e){try{for(var t=_walkMe.getTutorials(),n=new Array,r=0;r<t.length;r++){var i=t[r].CustomField1;i&&(i=i.replace(/&quot;/gi,'"'),i=i.replace(/&apos;/gi,"'"),i=i.replace(/&#39;/gi,"'"),i=i.replace(/&amp;/gi,"&"));var o={Index:r,Name:t[r].Name,Id:t[r].TutorialId,Visible:t[r].IsVisible,CustomField1:i,Description:t[r].Description,Keywords:t[r].Keywords};e&&(o.ConditionsPassed=_walkMe.canShowTutorial(t[r]),o.isPackageHidden=_walkMe.isTutorialPackageHidden(t[r]),void 0==t[r].Keywords?o.Keywords=[]:o.Keywords=t[r].Keywords),n.push(o)}return n}catch(a){l("walkMeAPI - error running getWalkthrus.",3)}},this.getWalkthrusLabels=function(n){try{var r=_walkMe.getWalkthrusLabels();if(null==r)return null;for(var i=this.getWalkthrus(n),o=e(r,i),a=_walkMe.getSiteConfig(),s=[],u=0;u<r.length;u++){var c={Name:r[u].Name,Id:r[u].Id,Walkthrus:t(i,r[u].LinkedTutorials,r[u].Id)};s.push(c)}return{unlabeledWalkthrus:o,labels:s,unlabeledFirst:a.Settings.labels&&1==a.Settings.labels.unlabeldOnTop}}catch(d){l("walkMeAPI - error running getWalkthrusLabels.",3)}},this.startContentById=function(e,t,n){try{if(0>e)return!1;t=void 0!==t?t:u.API;var r={type:t};return i(r),_walkMe.startContentById(e,t,n)}catch(o){l("walkMeAPI - error running startContentById.",3)}},this.startSurveyById=function(e,t){try{return 0>e?!1:(t=t||{type:u.API},i(t),_walkMe.startSurveyById(e,t))}catch(n){l("walkMeAPI - error running startSurveyById.",3)}},this.startWalkthruById=function(e,t){try{"object"!=typeof e&&(e={id:e,fromStep:t});var n=e.id,i=e.fromStep,a=e.playInitiator;if(0>n||"number"!=typeof n)return!1;var s=r(n);return 0>s?!1:(a||(a={type:u.API}),o.startWalkthruByIndex({index:s,fromStep:i,playInitiator:a}))}catch(c){l("walkMeAPI - error running startWalkthruById.",3)}},this.startWalkthruByIndex=function(e,t){try{if(!_walkMe.isWalkMeVisible())return!1;"object"!=typeof e&&(e={index:e,fromStep:t});var n=e.index,r=e.fromStep,o=e.playInitiator;return 0>n||"number"!=typeof n?!1:(o||(o={type:u.API}),i(o),_walkMe.startNewTutorial(n,r,!1,o))}catch(a){l("walkMeAPI - error running startWalkthruByIndex.",3)}},this.canStartWalkthru=function(e,t){try{if(!_walkMe.isWalkMeVisible())return!1;if(0>e||"number"!=typeof e)return!1;var n=r(e);return 0>n?!1:_walkMe.startNewTutorial(n,t,!0)}catch(i){l("walkMeAPI - error running canStartWalkthru.",3)}},this.setWalkthruVisibility=function(e,t){try{var n=_walkMe.getTutorials(),i=r(e);return 0>i?!1:(n[i].IsVisible=t,!0)}catch(o){l("walkMeAPI - error running setWalkthruVisibility.",3)}},this.stopWalkthru=function(){try{_walkMe.stopTutorial()}catch(e){l("walkMeAPI - error running stopWalkthru.",3)}},this.setAnalyticsCustomField=function(e,t){try{return e>a||1>e||t.length>s?!1:_walkMe.setAnalyticsCustomFields(e-1,t)}catch(n){l("walkMeAPI - error running setAnalyticsCustomField.",3)}},this.setAnalyticsProperty=function(e,t){try{_walkMe.setAnalyticsProperties(e,t)}catch(n){l("walkMeAPI - error running setAnalyticsProperty.",3)}},this.enableLogs=function(e){try{return void 0==e&&(e=!0),this.log.enable(e)}catch(t){l("walkMeAPI - error running enableLogs.",3)}},this.loadTasks=function(e,t){try{return _walkMe.loadTasks(e,t)}catch(n){l("walkMeAPI - error running loadTasks.",3)}},this.getTasks=function(e){try{return _walkMe.getApiTasks(e)}catch(t){l("walkMeAPI - error running getTasks.",3)}},this.getWidgetMode=function(){return"Walkthrus"},this.setWidgetMode=function(e){return"Deprecated"},this.getWidgetInitialState=function(){return"Closed"},this.changeLanguage=function(e,t){try{return _walkMe.changeLanguage(e,t)}catch(n){}},this.getSupportedLanguages=function(){try{return _walkMe.getSupportedLanguages()}catch(e){l("walkMeAPI - error running getSupportedLanguages.",3)}},this.getCurrentLanguage=function(){try{return _walkMe.getCurrentLanguage()}catch(e){l("walkMeAPI - error running getCurrentLanguage.",3)}},this.getTree=function(){try{return _walkMe.getUiDataProvider().uiObjectsTree()}catch(e){l("walkMeAPI - error running getTree.",3)}},this.triggerUIChange=function(){try{return _walkMe.getUiTracker().triggerUIChange()}catch(e){l("walkMeAPI - error running triggerUIChange.",3)}},this.launchTracker=function(e,t){try{return _walkMe.launchDebugger(e,t)}catch(n){l("walkMeAPI - error running launchTracker.",3)}},this.startTestMe=function(e){try{_walkMe.rememberTestMeIsOn(),window.walkMeTestMeClearStorage=!0,window.walkmeTestMeFilter=e,window._testMe?(_testMe.exit(),_testMe.start()):_walkMe.loadTestMe()}catch(t){l("walkMeAPI - error running startTestMe.",3)}},o.log=_walkMe.Logger.getAPI()}var wmjQuery=mtjQuery;if(mtjQuery)mtjQuery.expr&&mtjQuery.expr.filters&&(mtjQuery.expr.filters.mt_hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!mtjQuery.support.reliableHiddenOffsets&&"none"===(e.style.display||mtjQuery.css(e,"display"))||"hidden"===mtjQuery.css(e,"visibility")},mtjQuery.expr.filters.mt_visible=function(e){return!mtjQuery.expr.filters.mt_hidden(e)}),mtjQuery.trim=function(e){var t=/^\s+/,n=/\s+$/;return null==e?"":e.toString().replace(t,"").replace(n,"")};else try{console.log("mtjQuery undefined")}catch(e){}!function(e){function t(e){if(window._walkmeInternals=window._walkmeInternals||{},window._walkmeInternals.jQueryCompatability=window._walkmeInternals.jQueryCompatability||{},e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return void(_walkmeInternals.jQueryCompatability.wmIECorsSupport=!1);var t=/^(https?:)?\/\//i,n=/^get|post$/i,r=new RegExp("^(//|"+location.protocol+")","i");_walkmeInternals.jQueryCompatability.wmIECorsSupport=!0,e.ajaxTransport("* text html xml json",function(i,o,a){if(i.crossDomain&&i.async&&n.test(i.type)&&t.test(i.url)&&r.test(i.url)){var s=null;return{send:function(t,n){var r="",a=(o.dataType||"").toLowerCase();s=new XDomainRequest,/^\d+$/.test(o.timeout)&&(s.timeout=o.timeout),s.ontimeout=function(){n(500,"timeout")},s.onload=function(){var t="Content-Length: "+s.responseText.length+"\r\nContent-Type: "+s.contentType,r={code:200,message:"success"},i={text:s.responseText};try{if("html"===a||/text\/html/i.test(s.contentType))i.html=s.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(s.contentType))try{i.json=e.parseJSON(s.responseText)}catch(o){r.code=500,r.message="parseerror"}else if("xml"===a||"text"!==a&&/\/xml/i.test(s.contentType)){var u=new ActiveXObject("Microsoft.XMLDOM");u.async=!1;try{u.loadXML(s.responseText)}catch(o){u=void 0}if(!u||!u.documentElement||u.getElementsByTagName("parsererror").length)throw r.code=500,r.message="parseerror","Invalid XML: "+s.responseText;i.xml=u}}catch(l){throw l}finally{n(r.code,r.message,i,t)}},s.onprogress=function(){},s.onerror=function(){n(500,"error",{text:s.responseText})},o.data&&(r="string"===e.type(o.data)?o.data:e.param(o.data)),s.open(i.type,i.url),s.send(r)},abort:function(){s&&s.abort()}}}})}function n(e){return e.replace(/^-+$/g,"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}e.extend({safeEach:function(t,n){return e.each(t,function(e,r){t.hasOwnProperty(e)&&n(e,r)})}}),e.fn.safeEach=function(t){return e.safeEach(this,t)},e.fn.important=function(t,n){var r=this;return"object"==typeof t?(e.safeEach(t,function(e,t){r.important(e,t)}),r):r.safeEach(function(r,i){e(i).css(t,"").attr("style",function(e,r){var i=new RegExp("(^|;)\\s*"+t+"\\s*:[^;]*(;|$)","gi");return(r||"").replace(i,"$1").replace(/;$/gi,"")+";"+(void 0!=n?t+": "+n+" !important;":"")})})},e.fn.cssReset=function(t,r){if(t){var i=this;if("object"==typeof t)return e.safeEach(t,function(e,t){i.cssReset(e,t)}),i;var o;return"string"==typeof r&&(o=r.indexOf("!important")>-1,r=e.trim(r.replace("!important",""))),i.safeEach(function(i,a){a.style[t]||a.style[n(t)]||(o?e(a).important(t,r):e(a).css(t,r))})}},e.fn.exist=function(){return!!this.length},e.fn.or=function(t,n){return this.length?this:e(t,n)},e.fn.allCss=function(){if(1==this.length){var t={},n=this.attr("style");if(!n)return t;for(var r=n.split(";"),i=r.length-1;i>=0;i--){var o=r[i].split(":"),a=e.trim(o[0]);a&&(t[a]=e.trim(o[1]))}return t}},e.extend(e.expr[":"],{textEquals:function(t,n,r){return e(t).text()==r[3]}}),t(e)}(wmjQuery),function(e){"use strict";function t(t,n){e.extend(this,n),this.$select=t,e.extend(this,this.markup(t)),this.bindEvents()}function n(r){return"string"!=typeof r&&(r=e.extend({},n.options,r)),this.filter("select").each(function(){var n=e(this),i=n.data(r.baseName);"string"==typeof r?i[r].apply(n,[].slice.call(arguments,1)):i||n.data(r.baseName,new t(n,r))}),this}t.prototype={getValue:function(e){return"function"==typeof this[e]?this[e]():this[e]},onFocusBlur:function(e){this.$el.toggleClass(this.generateClassName("focus",!0),e&&("focus"===e.type||"focusin"===e.type)||this.$select.is(":focus"))},updateTitle:function(){var e=this.$select.find(":selected"),t=this.formatter(e.text(),this.$select.val(),e,this.$select);this.allowHtmlInTitle?this.$title.html(t):this.$title.text(t)},bindEvents:function(){this.$el.on("focusin."+this.baseName+" focusout."+this.baseName,e.proxy(this.onFocusBlur,this)),this.onFocusBlur(),this.$select.on("change."+this.baseName,e.proxy(this.updateTitle,this)),this.$select.on("keyup."+this.baseName,e.proxy(this.updateTitle,this)),this.updateTitle()},destroy:function(){this.$el.off("."+this.baseName),this.$select.off("."+this.baseName),this.$select.removeClass(this.generateClassName("select")).insertBefore(this.$el),this.$el.remove()}},n.klass=t,n.formatter=function(e,t,n,r){return e},n.markup=function(t){var n=t.addClass(this.generateClassName("select")).wrap('<span class="'+this.generateClassName()+'"/>').parent();return e('<span class="'+this.generateClassName("arrow")+'"/>').prependTo(n),{$el:n,$title:e('<span class="'+this.generateClassName("title")+'"/>').prependTo(n)}},n.generateClassName=function(e,t){return this.getValue("baseName")+(e?"-"+e:"")},n.options={baseName:"brute-select",generateClassName:n.generateClassName,markup:n.markup,formatter:n.formatter,allowHtmlInTitle:!1},e.fn.bruteSelect=n}(mtjQuery),function(e){e.fn.fixedPosition=function(e){}}(mtjQuery),function(e){e.extend({highlight:function(t,n,r,i){if(3===t.nodeType){var o=t.data.match(n);if(o){var a=document.createElement(r||"span");a.className=i||"walkme-highlight";var s=t.splitText(o.index);s.splitText(o[0].length);var u=s.cloneNode(!0);return a.appendChild(u),s.parentNode.replaceChild(a,s),1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&(t.tagName!==r.toUpperCase()||t.className!==i))for(var l=0;l<t.childNodes.length;l++)l+=e.highlight(t.childNodes[l],n,r,i);return 0}}),e.fn.unhighlight=function(t){var n={className:"walkme-highlight",element:"span"};return e.extend(n,t),this.find(n.element+"."+n.className).each(function(){var t=this.parentNode;t&&(t.replaceChild(this.firstChild,this),e(t).text(e(t).text()))}).end()},e.fn.highlight=function(t,n){var r={className:"walkme-highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(e.extend(r,n),t.constructor===String&&(t=[t]),t=e.grep(t,function(e,t){return""!=e}),t=e.map(t,function(e,t){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}),0==t.length)return this;var i=r.caseSensitive?"":"i",o="("+t.join("|")+")";r.wordsOnly&&(o="\\b"+o+"\\b");var a=new RegExp(o,i);return this.each(function(){e.highlight(this,a,r.element,r.className)})}}(mtjQuery),function(e,t,n){e.fn.jScrollPane=function(r){function i(r,i){function o(t){var i,u,c,f,p,g,v=!1,y=!1;if(V=t,W===n)p=r.scrollTop(),g=r.scrollLeft(),r.important({overflow:"hidden",padding:0}),Q=r.innerWidth()+be,H=r.innerHeight(),r.width(Q),W=e('<div class="walkme-jspPane" />').css("padding",we).append(r.children()),$=e('<div class="walkme-jspContainer" />').css({width:Q+"px",height:H+"px"}).append(W).appendTo(r),a(r);else{if(r.css("width",""),v=V.stickToBottom&&A(),y=V.stickToRight&&P(),f=r.innerWidth()+be!=Q||r.outerHeight()!=H,f&&(Q=r.innerWidth()+be,H=r.innerHeight(),$.css({width:Q+"px",height:H+"px"})),!f&&Se==z&&W.outerHeight()==Y)return void r.width(Q);Se=z,W.css("width",""),r.width(Q),$.find(">.walkme-jspVerticalBar,>.walkme-jspHorizontalBar").remove().end()}W.css("overflow","auto"),z=t.contentWidth?t.contentWidth:W[0].scrollWidth,Y=W[0].scrollHeight,W.css("overflow",""),q=Q>z?1:z/Q,K=H>Y?1:Y/H,X=K>1||V.alwaysScrollVertical,J=q>1||V.alwaysScrollHorizontal,J||X?(r.addClass("walkme-jspScrollable"),i=V.maintainPosition&&(te||ie),i&&(u=_(),c=x()),s(),l(),d(),i&&(E(y?z-Q:u,!1),C(v?Y-H:c,!1)),O(),D(),U(),V.enableKeyboardNavigation&&R(),V.clickOnTrack&&h(),F(),V.hijackInternalLinks&&B()):(r.removeClass("walkme-jspScrollable"),W.css({top:0,left:0,right:0,width:$.width()-be}),N(),M(),j(),m()),V.autoReinitialise&&!ye?ye=setInterval(function(){o(V)},V.autoReinitialiseDelay):!V.autoReinitialise&&ye&&clearInterval(ye),p&&r.scrollTop(0)&&C(p,!1),g&&r.scrollLeft(0)&&E(g,!1),r.trigger("walkme-jsp-initialised",[J||X])}function a(t){var n=e(t).find('div[class*="walkme-jsp"]').add(t);n.each(function(t,n){var r="class",i=e(n),o=i.attr(r);i.attr(r,"").attr(r,o)})}function s(){X&&($.append(e('<div class="walkme-jspVerticalBar" />').append(e('<div class="walkme-jspCap walkme-jspCapTop" />'),e('<div class="walkme-jspTrack" />').append(e('<div class="walkme-jspDrag" />').append(e('<div class="walkme-jspDragTop" />'),e('<div class="walkme-jspDragBottom" />'))),e('<div class="walkme-jspCap walkme-jspCapBottom" />'))),a($),oe=$.find(">.walkme-jspVerticalBar"),ae=oe.find(">.walkme-jspTrack"),Z=ae.find(">.walkme-jspDrag"),V.showArrows&&(ce=e('<a class="walkme-jspArrow walkme-jspArrowUp" />').bind("mousedown.walkme-jsp",p(0,-1)).bind("click.walkme-jsp",L),de=e('<a class="walkme-jspArrow walkme-jspArrowDown" />').bind("mousedown.walkme-jsp",p(0,1)).bind("click.walkme-jsp",L),
V.arrowScrollOnHover&&(ce.bind("mouseover.walkme-jsp",p(0,-1,ce)),de.bind("mouseover.walkme-jsp",p(0,1,de))),f(ae,V.verticalArrowPositions,ce,de)),ue=H,$.find(">.walkme-jspVerticalBar>.walkme-jspCap:visible,>.walkme-jspVerticalBar>.walkme-jspArrow").each(function(){ue-=e(this).outerHeight()}),Z.hover(function(){Z.addClass("walkme-jspHover")},function(){Z.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(t){e(V.containerDoc).find("html").bind("dragstart.walkme-jsp selectstart.walkme-jsp",L),Z.addClass("walkme-jspActive");var n=t.pageY-Z.position().top;return e(V.containerDoc).find("html").bind("mousemove.walkme-jsp",function(e){y(e.pageY-n,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",v),!1}),u())}function u(){ae.height(ue+"px"),te=0,se=V.verticalGutter+ae.outerWidth(),W.width(Q-se-be);try{0===oe.position().left&&W.css("margin-left",se+"px")}catch(e){}}function l(){J&&($.append(e('<div class="walkme-jspHorizontalBar" />').append(e('<div class="walkme-jspCap walkme-jspCapLeft" />'),e('<div class="walkme-jspTrack" />').append(e('<div class="walkme-jspDrag" />').append(e('<div class="walkme-jspDragLeft" />'),e('<div class="walkme-jspDragRight" />'))),e('<div class="walkme-jspCap walkme-jspCapRight" />'))),a($),fe=$.find(">.walkme-jspHorizontalBar"),pe=fe.find(">.walkme-jspTrack"),ne=pe.find(">.walkme-jspDrag"),V.showArrows&&(me=e('<a class="walkme-jspArrow walkme-jspArrowLeft" />').bind("mousedown.walkme-jsp",p(-1,0)).bind("click.walkme-jsp",L),ve=e('<a class="walkme-jspArrow walkme-jspArrowRight" />').bind("mousedown.walkme-jsp",p(1,0)).bind("click.walkme-jsp",L),V.arrowScrollOnHover&&(me.bind("mouseover.walkme-jsp",p(-1,0,me)),ve.bind("mouseover.walkme-jsp",p(1,0,ve))),f(pe,V.horizontalArrowPositions,me,ve)),ne.hover(function(){ne.addClass("walkme-jspHover")},function(){ne.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(t){e(V.containerDoc).find("html").bind("dragstart.walkme-jsp selectstart.walkme-jsp",L),ne.addClass("walkme-jspActive");var n=t.pageX-ne.position().left;return e(V.containerDoc).find("html").bind("mousemove.walkme-jsp",function(e){b(e.pageX-n,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",v),!1}),ge=$.innerWidth(),c())}function c(){$.find(">.walkme-jspHorizontalBar>.walkme-jspCap:visible,>.walkme-jspHorizontalBar>.walkme-jspArrow").each(function(){ge-=e(this).outerWidth()}),pe.width(ge+"px"),ie=0}function d(){if(J&&X){var t=pe.outerHeight(),n=ae.outerWidth();ue-=t,e(fe).find(">.walkme-jspCap:visible,>.walkme-jspArrow").each(function(){ge+=e(this).outerWidth()}),ge-=n,H-=n,Q-=t,pe.parent().append(e('<div class="walkme-jspCorner" />').css("width",t+"px")),a(pe.parent()),u(),c()}J&&W.width($.outerWidth()-be+"px"),Y=W.outerHeight(),K=H>Y?1:Y/H,J&&(he=Math.ceil(1/q*ge),he>V.horizontalDragMaxWidth?he=V.horizontalDragMaxWidth:he<V.horizontalDragMinWidth&&(he=V.horizontalDragMinWidth),ne.width(he+"px"),re=ge-he,S(ie)),X&&(le=Math.ceil(1/K*ue),le>V.verticalDragMaxHeight?le=V.verticalDragMaxHeight:le<V.verticalDragMinHeight&&(le=V.verticalDragMinHeight),Z.height(le+"px"),ee=ue-le+V.dragMaxYOffset,w(te))}function f(e,t,n,r){var i,o="before",a="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==o?a=t:t==a&&(o=t,i=n,n=r,r=i),e[o](n)[a](r)}function p(e,t,n){return function(){return g(e,t,this,n),this.blur(),!1}}function g(t,n,r,i){r=e(r).addClass("walkme-jspActive");var o,a,s=!0,u=function(){0!==t&&Te.scrollByX(t*V.arrowButtonSpeed),0!==n&&Te.scrollByY(n*V.arrowButtonSpeed),a=setTimeout(u,s?V.initialDelay:V.arrowRepeatFreq),s=!1};u(),o=i?"mouseout.walkme-jsp":"mouseup.walkme-jsp",i=i||e(V.containerDoc).find("html"),i.bind(o,function(){r.removeClass("walkme-jspActive"),a&&clearTimeout(a),a=null,i.unbind(o)})}function h(){m(),X&&ae.bind("mousedown.walkme-jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),o=i.offset(),a=t.pageY-o.top-te,s=!0,u=function(){var e=i.offset(),n=t.pageY-e.top-le/2,o=H*V.scrollPagePercent,c=ee*o/(Y-H);if(0>a)te-c>n?Te.scrollByY(-o):y(n);else{if(!(a>0))return void l();n>te+c?Te.scrollByY(o):y(n)}r=setTimeout(u,s?V.initialDelay:V.trackClickRepeatFreq),s=!1},l=function(){r&&clearTimeout(r),r=null,e(V.containerDoc).unbind("mouseup.walkme-jsp",l)};return u(),e(V.containerDoc).bind("mouseup.walkme-jsp",l),!1}}),J&&pe.bind("mousedown.walkme-jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),o=i.offset(),a=t.pageX-o.left-ie,s=!0,u=function(){var e=i.offset(),n=t.pageX-e.left-he/2,o=Q*V.scrollPagePercent,c=re*o/(z-Q);if(0>a)ie-c>n?Te.scrollByX(-o):b(n);else{if(!(a>0))return void l();n>ie+c?Te.scrollByX(o):b(n)}r=setTimeout(u,s?V.initialDelay:V.trackClickRepeatFreq),s=!1},l=function(){r&&clearTimeout(r),r=null,e(V.containerDoc).unbind("mouseup.walkme-jsp",l)};return u(),e(V.containerDoc).bind("mouseup.walkme-jsp",l),!1}})}function m(){pe&&pe.unbind("mousedown.walkme-jsp"),ae&&ae.unbind("mousedown.walkme-jsp")}function v(){e(V.containerDoc).find("html").unbind("dragstart.walkme-jsp selectstart.walkme-jsp mousemove.walkme-jsp mouseup.walkme-jsp mouseleave.walkme-jsp"),Z&&Z.removeClass("walkme-jspActive"),ne&&ne.removeClass("walkme-jspActive")}function y(e,t){X&&(0>e?e=0:e>ee&&(e=ee),t===n&&(t=V.animateScroll),t?Te.animate(Z,"top",e,w):(Z.css("top",e),w(e)))}function w(e){e===n&&(e=Z.position().top),$.scrollTop(0),te=e;var t=0===te,i=te==ee,o=e/ee,a=-o*(Y-H);(Ie!=t||Ee!=i)&&(Ie=t,Ee=i,r.trigger("walkme-jsp-arrow-change",[Ie,Ee,Ce,ke])),T(t,i),W.css("top",a);try{r.trigger("walkme-jsp-scroll-y",[-a,t,i]).trigger("scroll")}catch(s){}}function b(e,t){J&&(0>e?e=0:e>re&&(e=re),t===n&&(t=V.animateScroll),t?Te.animate(ne,"left",e,S):(ne.css("left",e),S(e)))}function S(e){e===n&&(e=ne.position().left),$.scrollTop(0),ie=e;var t=0===ie,i=ie==re,o=e/re,a=-o*(z-Q);(Ce!=t||ke!=i)&&(Ce=t,ke=i,r.trigger("walkme-jsp-arrow-change",[Ie,Ee,Ce,ke])),I(t,i),W.css("left",a);try{r.trigger("walkme-jsp-scroll-x",[-a,t,i]).trigger("scroll")}catch(s){}}function T(e,t){V.showArrows&&(ce[e?"addClass":"removeClass"]("walkme-jspDisabled"),de[t?"addClass":"removeClass"]("walkme-jspDisabled"))}function I(e,t){V.showArrows&&(me[e?"addClass":"removeClass"]("walkme-jspDisabled"),ve[t?"addClass":"removeClass"]("walkme-jspDisabled"))}function C(e,t){var n=e/(Y-H);y(n*ee,t)}function E(e,t){var n=e/(z-Q);b(n*re,t)}function k(t,n,r){var i,o,a,s,u,l,c,d,f,p=0,g=0;try{i=e(t)}catch(h){return}for(o=i.outerHeight(),a=i.outerWidth(),$.scrollTop(0),$.scrollLeft(0);!i.is(".walkme-jspPane");)if(p+=i.position().top,g+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;s=x(),l=s+H,s>p||n?d=p-V.verticalGutter:p+o>l&&(d=p-H+o+V.verticalGutter),isNaN(d)||C(d,r),u=_(),c=u+Q,u>g||n?f=g-V.horizontalGutter:g+a>c&&(f=g-Q+a+V.horizontalGutter),isNaN(f)||E(f,r)}function _(){return-W.position().left}function x(){return-W.position().top}function A(){var e=Y-H;return e>20&&e-x()<10}function P(){var e=z-Q;return e>20&&e-_()<10}function D(){$.unbind(Ae).bind(Ae,function(e,t,n,r){var i=ie,o=te;return Te.scrollBy(n*V.mouseWheelSpeed,-r*V.mouseWheelSpeed,!1),i==ie&&o==te})}function N(){$.unbind(Ae)}function L(){return!1}function O(){W.find(":input,a").unbind("focus.walkme-jsp").bind("focus.walkme-jsp",function(e){k(e.target,!1)})}function M(){W.find(":input,a").unbind("focus.walkme-jsp")}function R(){function t(){var e=ie,t=te;switch(n){case 40:Te.scrollByY(V.keyboardSpeed,!1);break;case 38:Te.scrollByY(-V.keyboardSpeed,!1);break;case 34:case 32:Te.scrollByY(H*V.scrollPagePercent,!1);break;case 33:Te.scrollByY(-H*V.scrollPagePercent,!1);break;case 39:Te.scrollByX(V.keyboardSpeed,!1);break;case 37:Te.scrollByX(-V.keyboardSpeed,!1)}return i=e!=ie||t!=te}var n,i,o=[];J&&o.push(fe[0]),X&&o.push(oe[0]),W.focus(function(){r.focus()}),V.setTabIndex&&r.attr("tabindex",0),r.unbind("keydown.walkme-jsp keypress.walkme-jsp").bind("keydown.walkme-jsp",function(r){if(r.target===this||o.length&&e(r.target).closest(o).length){var a=ie,s=te;switch(r.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=r.keyCode,t();break;case 35:C(Y-H),n=null;break;case 36:C(0),n=null}return i=r.keyCode==n&&a!=ie||s!=te,!i}}).bind("keypress.walkme-jsp",function(e){return e.keyCode==n&&t(),!i}),V.hideFocus?(r.css("outline","none"),"hideFocus"in $[0]&&r.attr("hideFocus",!0)):(r.css("outline",""),"hideFocus"in $[0]&&r.attr("hideFocus",!1))}function j(){V.setTabIndex&&r.attr("tabindex","-1").removeAttr("tabindex"),r.unbind("keydown.walkme-jsp keypress.walkme-jsp")}function F(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash.substr(1));try{t=e("#"+r+', a[name="'+r+'"]')}catch(i){return}t.length&&W.find(r)&&(0===$.scrollTop()?n=setInterval(function(){$.scrollTop()>0&&(k(t,!0),e(V.containerDoc).scrollTop($.position().top),clearInterval(n))},50):(k(t,!0),e(V.containerDoc).scrollTop($.position().top)))}}function B(){e(xe(V.containerDoc)).data("walkme-jspHijack")||(e(xe(V.containerDoc)).data("walkme-jspHijack",!0),e(xe(V.containerDoc)).delegate("a[href*=#]","click",function(n){var r,i,o,a,s,u,l=this.href.substr(0,this.href.indexOf("#")),c=location.href;if(-1!==location.href.indexOf("#")&&(c=location.href.substr(0,location.href.indexOf("#"))),l===c){r=escape(this.href.substr(this.href.indexOf("#")+1));try{i=e("#"+r+', a[name="'+r+'"]')}catch(d){return}i.length&&(o=i.closest(".walkme-jspScrollable"),a=o.data("walkme-jsp"),a.scrollToElement(i,!0),o[0].scrollIntoView&&(s=e(t).scrollTop(),u=i.offset().top,(s>u||u>s+e(t).height())&&o[0].scrollIntoView()),n.preventDefault())}}))}function U(){var e,t,n,r,i,o=!1;$.unbind("touchstart.walkme-jsp touchmove.walkme-jsp touchend.walkme-jsp click.walkme-jsp-touchclick").bind("touchstart.walkme-jsp",function(a){var s=a.originalEvent.touches[0];e=_(),t=x(),n=s.pageX,r=s.pageY,i=!1,o=!0}).bind("touchmove.walkme-jsp",function(a){if(o){var s=a.originalEvent.touches[0],u=ie,l=te;return Te.scrollTo(e+n-s.pageX,t+r-s.pageY),i=i||Math.abs(n-s.pageX)>5||Math.abs(r-s.pageY)>5,u==ie&&l==te}}).bind("touchend.walkme-jsp",function(e){o=!1}).bind("click.walkme-jsp-touchclick",function(e){return i?(i=!1,!1):void 0})}function G(){var e=x(),t=_();r.removeClass("walkme-jspScrollable").unbind(".walkme-jsp"),r.replaceWith(_e.append(W.children())),_e.scrollTop(e),_e.scrollLeft(t),ye&&clearInterval(ye)}var V,W,Q,H,$,z,Y,q,K,X,J,Z,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,de,fe,pe,ge,he,me,ve,ye,we,be,Se,Te=this,Ie=!0,Ce=!0,Ee=!1,ke=!1,_e=r.clone(!1,!1).empty(),xe=xe,Ae=e.fn.mwheelIntent?"mwheelIntent.walkme-jsp":"mousewheel.walkme-jsp";"border-box"===r.css("box-sizing")?(we=0,be=0):(we=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft"),be=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0)),e.extend(Te,{reinitialise:function(t){t=e.extend({},V,t),o(t)},scrollToElement:function(e,t,n){k(e,t,n)},scrollTo:function(e,t,n){E(e,n),C(t,n)},scrollToX:function(e,t){E(e,t)},scrollToY:function(e,t){C(e,t)},scrollToPercentX:function(e,t){E(e*(z-Q),t)},scrollToPercentY:function(e,t){C(e*(Y-H),t)},scrollBy:function(e,t,n){Te.scrollByX(e,n),Te.scrollByY(t,n)},scrollByX:function(e,t){var n=_()+Math[0>e?"floor":"ceil"](e),r=n/(z-Q);b(r*re,t)},scrollByY:function(e,t){var n=x()+Math[0>e?"floor":"ceil"](e),r=n/(Y-H);y(r*ee,t)},positionDragX:function(e,t){b(e,t)},positionDragY:function(e,t){y(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:V.animateDuration,easing:V.animateEase,queue:!1,step:r})},getContentPositionX:function(){return _()},getContentPositionY:function(){return x()},getContentWidth:function(){return z},getContentHeight:function(){return Y},getPercentScrolledX:function(){return _()/(z-Q)},getPercentScrolledY:function(){return x()/(Y-H)},getIsScrollableH:function(){return J},getIsScrollableV:function(){return X},getContentPane:function(){return W},scrollToBottom:function(e){y(ee,e)},hijackInternalLinks:e.noop,destroy:function(){G()}}),o(i)}return r=e.extend({},e.fn.jScrollPane.defaults,r),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){r[this]=r[this]||r.speed}),this.each(function(){var t=e(this),n=t.data("walkme-jsp");n?n.reinitialise(r):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),n=new i(t,r),t.data("walkme-jsp",n))})},e.fn.jScrollPane.defaults={containerDoc:document,setTabIndex:!0,alwaysScrollVertical:!1,alwaysScrollHorizontal:!1,dragMaxYOffset:0,showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(wmjQuery,this),function(e){function t(t){var i,o=t||window.event,a=[].slice.call(arguments,1),s=0,u=0,l=0,c=0,d=0;return t=e.event.fix(o),t.type="mousewheel",o.wheelDelta&&(s=o.wheelDelta),o.detail&&(s=-1*o.detail),o.deltaY&&(l=-1*o.deltaY,s=l),o.deltaX&&(u=o.deltaX,s=-1*u),void 0!==o.wheelDeltaY&&(l=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(u=-1*o.wheelDeltaX),c=Math.abs(s),(!n||n>c)&&(n=c),d=Math.max(Math.abs(l),Math.abs(u)),(!r||r>d)&&(r=d),i=s>0?"floor":"ceil",s=Math[i](s/n),u=Math[i](u/r),l=Math[i](l/r),a.unshift(t,s,u,l),(e.event.dispatch||e.event.handle).apply(this,a)}var n,r,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var a=i.length;a;)e.event.fixHooks[i[--a]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(wmjQuery),function(e){var t,n={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},r={duration:"fast",direction:"both"},i=function(t,n){n=n||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle);var r=document.defaultView&&document.defaultView.getComputedStyle?!0:!1,i={top:parseFloat(r?n.borderTopWidth:e.css(t,"borderTopWidth"))||0,left:parseFloat(r?n.borderLeftWidth:e.css(t,"borderLeftWidth"))||0,bottom:parseFloat(r?n.borderBottomWidth:e.css(t,"borderBottomWidth"))||0,right:parseFloat(r?n.borderRightWidth:e.css(t,"borderRightWidth"))||0};return{top:i.top,left:i.left,bottom:i.bottom,right:i.right,vertical:i.top+i.bottom,horizontal:i.left+i.right}},o=function(n){var r=e(window),o=t.test(n[0].nodeName);return{border:o?{top:0,left:0,bottom:0,right:0}:i(n[0]),scroll:{top:(o?r:n).scrollTop(),left:(o?r:n).scrollLeft()},scrollbar:{right:o?0:n.innerWidth()-n[0].clientWidth,bottom:o?0:n.innerHeight()-n[0].clientHeight},rect:function(){var e=n[0].getBoundingClientRect();return{top:o?0:e.top,left:o?0:e.left,bottom:o?n[0].clientHeight:e.bottom,right:o?n[0].clientWidth:e.right}}()}};e.fn.extend({scrollintoview:function(i){i=e.extend({},r,i),i.direction=n["string"==typeof i.direction&&i.direction.toLowerCase()]||n.both;var a="";i.direction.x===!0&&(a="horizontal"),i.direction.y===!0&&(a=a?"both":"vertical"),t="html"==i.rootElement?/^(?:html)$/i:/^(?:body)$/i;var s=this.eq(0),u=i.elementToFindScrollableFor.parent().closest(":scrollable("+a+")");if(!(u.length>0))return!1;"html"==i.rootElement&&u[0].tagName&&u[0].tagName.toUpperCase&&"BODY"==u[0].tagName.toUpperCase()&&(u=u.parent()),u=u.eq(0);var l={e:o(s),s:o(u)};if(i.heightLimit&&u.height()<200)return!1;var c={top:l.e.rect.top-(l.s.rect.top+l.s.border.top),bottom:l.s.rect.bottom-l.s.border.bottom-l.s.scrollbar.bottom-l.e.rect.bottom,left:l.e.rect.left-(l.s.rect.left+l.s.border.left),right:l.s.rect.right-l.s.border.right-l.s.scrollbar.right-l.e.rect.right},d=0,f={top:c.top,bottom:c.bottom};if(i.endScroll){var p=i.endScroll.scrollOptions;d="px"==p.unit?p.distance:(l.s.rect.bottom-i.endScroll.balloonHeight)*parseFloat(p.distance)/100,c.top>0&&c.bottom<0&&(d+=i.endScroll.totalDrawnHeight-l.s.rect.bottom),p.force&&(f.top-=d)}else c.top-=50,c.bottom-=50;var g={};return i.direction.y===!0&&(f.top<0?g.scrollTop=l.s.scroll.top+c.top-d:f.top>0&&f.bottom<0&&(g.scrollTop=l.s.scroll.top+Math.min(c.top,-c.bottom)-d)),i.direction.x===!0&&(c.left<0?g.scrollLeft=l.s.scroll.left+c.left:c.left>0&&c.right<0&&(g.scrollLeft=l.s.scroll.left+Math.min(c.left,-c.right))),g.scrollTop||g.scrollLeft?(t.test(u[0].nodeName)&&(u=e("html,body")),u.animate(g,i.duration).eq(0).queue(function(t){e.isFunction(i.complete)&&i.complete.call(u[0]),t()}),!0):!1}});var a={auto:!0,scroll:!0,visible:!1,hidden:!1};e.extend(e.expr[":"],{scrollable:function(e,r,i,o){var s=n["string"==typeof i[3]&&i[3].toLowerCase()]||n.both,u=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,l={x:a[u.overflowX.toLowerCase()]||!1,y:a[u.overflowY.toLowerCase()]||!1,isRoot:t.test(e.nodeName)};if(!l.x&&!l.y&&!l.isRoot||"hidden"==u.overflowY.toLowerCase())return!1;var c={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(l.x||l.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(l.y||l.isRoot)&&this.height.scroll>this.height.client}};return s.y&&c.scrollableY()||s.x&&c.scrollableX()}})}(mtjQuery);var _makeTutorialEv={Ev:function(src){return eval(src)}};if(void 0==window._makeTutorial&&(_walkMe=_makeTutorial=new ClassMakeTutorial,_makeTutorial.initFailed&&(_walkMe=_makeTutorial=void 0)),window._makeTutorial&&void 0==window.WalkMeAPI)var WalkMeAPI=new ClassWalkMeAPI;